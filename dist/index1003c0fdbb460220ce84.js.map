{"version":3,"file":"index1003c0fdbb460220ce84.js","mappings":"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GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,IAAI,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,EAAE,IAAI,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,IAAI,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,IAAI,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,EAAE,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI,GAAG,IAAI,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,KAAK,EAAE,IAAI,KAAK,IAAI,GAAG,EAAE,GAAG,EAAE,EAAE,IAAI,KAAK,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,KAAK,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,KAAK,GAAG,GAAG,EAAE,GAAG,EAAE,IAAI,GAAG,KAAK,IAAI,GAAG,GAAG,EAAE,EAAE,KAAK,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,KAAK,MAAM,GAAG,KAAK,GAAG,IAAI,EAAE,KAAK,GAAG,KAAK,KAAK,KAEpuCC,EAAwB,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,GAAG,IAAI,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,I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","sources":["webpack://brain-js-d3-visualization/./node_modules/brain.js/dist/browser.js","webpack://brain-js-d3-visualization/./src/style.css","webpack://brain-js-d3-visualization/./node_modules/css-loader/dist/runtime/api.js","webpack://brain-js-d3-visualization/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://brain-js-d3-visualization/./node_modules/gpu.js/dist/gpu-browser.js","webpack://brain-js-d3-visualization/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://brain-js-d3-visualization/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://brain-js-d3-visualization/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://brain-js-d3-visualization/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://brain-js-d3-visualization/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://brain-js-d3-visualization/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://brain-js-d3-visualization/webpack/bootstrap","webpack://brain-js-d3-visualization/webpack/runtime/compat get default export","webpack://brain-js-d3-visualization/webpack/runtime/define property getters","webpack://brain-js-d3-visualization/webpack/runtime/global","webpack://brain-js-d3-visualization/webpack/runtime/hasOwnProperty shorthand","webpack://brain-js-d3-visualization/webpack/runtime/nonce","webpack://brain-js-d3-visualization/./node_modules/d3-array/src/range.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selector.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/array.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selectorAll.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/matcher.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/selectChild.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/selectChildren.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/sparse.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/enter.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/constant.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/data.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/sort.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/namespaces.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/namespace.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/attr.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/window.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/style.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/property.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/classed.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/text.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/html.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/raise.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/lower.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/creator.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/insert.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/remove.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/clone.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/on.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/dispatch.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/index.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/select.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/selectAll.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/filter.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/exit.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/join.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/merge.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/order.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/call.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/nodes.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/node.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/size.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/empty.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/each.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/append.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/datum.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/selection/iterator.js","webpack://brain-js-d3-visualization/./node_modules/d3-dispatch/src/dispatch.js","webpack://brain-js-d3-visualization/./node_modules/d3-timer/src/timer.js","webpack://brain-js-d3-visualization/./node_modules/d3-timer/src/timeout.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/schedule.js","webpack://brain-js-d3-visualization/./node_modules/d3-interpolate/src/number.js","webpack://brain-js-d3-visualization/./node_modules/d3-interpolate/src/transform/decompose.js","webpack://brain-js-d3-visualization/./node_modules/d3-interpolate/src/transform/parse.js","webpack://brain-js-d3-visualization/./node_modules/d3-interpolate/src/transform/index.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/tween.js","webpack://brain-js-d3-visualization/./node_modules/d3-color/src/define.js","webpack://brain-js-d3-visualization/./node_modules/d3-color/src/color.js","webpack://brain-js-d3-visualization/./node_modules/d3-interpolate/src/basis.js","webpack://brain-js-d3-visualization/./node_modules/d3-interpolate/src/constant.js","webpack://brain-js-d3-visualization/./node_modules/d3-interpolate/src/color.js","webpack://brain-js-d3-visualization/./node_modules/d3-interpolate/src/rgb.js","webpack://brain-js-d3-visualization/./node_modules/d3-interpolate/src/basisClosed.js","webpack://brain-js-d3-visualization/./node_modules/d3-interpolate/src/string.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/interpolate.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/attr.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/attrTween.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/delay.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/duration.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/ease.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/on.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/selection.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/style.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/styleTween.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/textTween.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/index.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/select.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/selectAll.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/filter.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/merge.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/transition.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/text.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/remove.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/easeVarying.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/transition/end.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/selection/transition.js","webpack://brain-js-d3-visualization/./node_modules/d3-ease/src/cubic.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/selection/index.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/selection/interrupt.js","webpack://brain-js-d3-visualization/./node_modules/d3-transition/src/interrupt.js","webpack://brain-js-d3-visualization/./node_modules/d3-brush/src/brush.js","webpack://brain-js-d3-visualization/./node_modules/d3-array/src/ticks.js","webpack://brain-js-d3-visualization/./node_modules/d3-array/src/ascending.js","webpack://brain-js-d3-visualization/./node_modules/d3-array/src/descending.js","webpack://brain-js-d3-visualization/./node_modules/d3-array/src/bisector.js","webpack://brain-js-d3-visualization/./node_modules/d3-array/src/bisect.js","webpack://brain-js-d3-visualization/./node_modules/d3-array/src/number.js","webpack://brain-js-d3-visualization/./node_modules/d3-interpolate/src/array.js","webpack://brain-js-d3-visualization/./node_modules/d3-interpolate/src/date.js","webpack://brain-js-d3-visualization/./node_modules/d3-interpolate/src/object.js","webpack://brain-js-d3-visualization/./node_modules/d3-interpolate/src/numberArray.js","webpack://brain-js-d3-visualization/./node_modules/d3-interpolate/src/value.js","webpack://brain-js-d3-visualization/./node_modules/d3-interpolate/src/round.js","webpack://brain-js-d3-visualization/./node_modules/d3-scale/src/number.js","webpack://brain-js-d3-visualization/./node_modules/d3-scale/src/continuous.js","webpack://brain-js-d3-visualization/./node_modules/d3-scale/src/constant.js","webpack://brain-js-d3-visualization/./node_modules/d3-scale/src/init.js","webpack://brain-js-d3-visualization/./node_modules/d3-format/src/formatSpecifier.js","webpack://brain-js-d3-visualization/./node_modules/d3-format/src/formatPrefixAuto.js","webpack://brain-js-d3-visualization/./node_modules/d3-format/src/formatDecimal.js","webpack://brain-js-d3-visualization/./node_modules/d3-format/src/exponent.js","webpack://brain-js-d3-visualization/./node_modules/d3-format/src/formatRounded.js","webpack://brain-js-d3-visualization/./node_modules/d3-format/src/formatTypes.js","webpack://brain-js-d3-visualization/./node_modules/d3-format/src/identity.js","webpack://brain-js-d3-visualization/./node_modules/d3-format/src/locale.js","webpack://brain-js-d3-visualization/./node_modules/d3-format/src/defaultLocale.js","webpack://brain-js-d3-visualization/./node_modules/d3-scale/src/linear.js","webpack://brain-js-d3-visualization/./node_modules/d3-scale/src/tickFormat.js","webpack://brain-js-d3-visualization/./node_modules/d3-format/src/precisionPrefix.js","webpack://brain-js-d3-visualization/./node_modules/d3-format/src/precisionRound.js","webpack://brain-js-d3-visualization/./node_modules/d3-format/src/precisionFixed.js","webpack://brain-js-d3-visualization/./node_modules/d3-scale/src/quantize.js","webpack://brain-js-d3-visualization/./node_modules/d3-selection/src/select.js","webpack://brain-js-d3-visualization/./node_modules/d3-format/src/formatGroup.js","webpack://brain-js-d3-visualization/./node_modules/d3-format/src/formatNumerals.js","webpack://brain-js-d3-visualization/./node_modules/d3-format/src/formatTrim.js","webpack://brain-js-d3-visualization/./node_modules/d3-path/src/path.js","webpack://brain-js-d3-visualization/./node_modules/d3-shape/src/array.js","webpack://brain-js-d3-visualization/./node_modules/d3-shape/src/constant.js","webpack://brain-js-d3-visualization/./node_modules/d3-shape/src/curve/bump.js","webpack://brain-js-d3-visualization/./node_modules/d3-shape/src/point.js","webpack://brain-js-d3-visualization/./node_modules/d3-shape/src/link.js","webpack://brain-js-d3-visualization/./node_modules/d3-zoom/src/transform.js","webpack://brain-js-d3-visualization/./src/neurons.js","webpack://brain-js-d3-visualization/./src/ui.js","webpack://brain-js-d3-visualization/./src/dataset.js","webpack://brain-js-d3-visualization/./src/style.css?7163","webpack://brain-js-d3-visualization/./src/index.js"],"sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('gpu.js')) :\n    typeof define === 'function' && define.amd ? define(['exports', 'gpu.js'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.brain = {}, global.GPU));\n}(this, (function (exports, gpu_js) { 'use strict';\n\n    /**\n     * Relu Activation, aka Rectified Linear Unit Activation\n     * @description https://en.wikipedia.org/wiki/Rectifier_(neural_networks)\n     */\n    function activate$3(weight) {\n        return Math.max(0, weight);\n    }\n    /**\n     * Relu derivative\n     */\n    function measure$3(weight, delta) {\n        if (weight <= 0) {\n            return 0;\n        }\n        return delta;\n    }\n\n    var relu$2 = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        activate: activate$3,\n        measure: measure$3\n    });\n\n    /**\n     * sigmoid activation\n     */\n    function activate$2(value) {\n        return 1 / (1 + Math.exp(-value));\n    }\n    /**\n     * sigmoid derivative\n     */\n    function measure$2(weight, error) {\n        return weight * (1 - weight) * error;\n    }\n\n    var sigmoid$2 = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        activate: activate$2,\n        measure: measure$2\n    });\n\n    /**\n     * Hyperbolic tan\n     */\n    function activate$1(weight) {\n        return Math.tanh(weight);\n    }\n    /**\n     * @description grad for z = tanh(x) is (1 - z^2)\n     */\n    function measure$1(weight, error) {\n        return (1 - weight * weight) * error;\n    }\n\n    var tanh$2 = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        activate: activate$1,\n        measure: measure$1\n    });\n\n    /**\n     * Leaky Relu Activation, aka Leaky Rectified Linear Unit Activation\n     * @description https://en.wikipedia.org/wiki/Rectifier_(neural_networks)\n     */\n    function activate(weight) {\n        return weight > 0 ? weight : 0.01 * weight;\n    }\n    /**\n     * Leaky Relu derivative\n     */\n    function measure(weight, error) {\n        return weight > 0 ? error : 0.01 * error;\n    }\n\n    var leakyRelu$1 = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        activate: activate,\n        measure: measure\n    });\n\n    var index$1 = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        relu: relu$2,\n        sigmoid: sigmoid$2,\n        tanh: tanh$2,\n        leakyRelu: leakyRelu$1\n    });\n\n    class CrossValidate {\n        constructor(initClassifier) {\n            this.json = {\n                avgs: {\n                    error: 0,\n                    iterations: 0,\n                    testTime: 0,\n                    trainTime: 0,\n                },\n                stats: {\n                    total: 0,\n                    testSize: 0,\n                    trainSize: 0,\n                },\n                sets: [],\n            };\n            this.initClassifier = initClassifier;\n        }\n        testPartition(trainOpts, trainSet, testSet) {\n            const classifier = this.initClassifier();\n            const beginTrain = Date.now();\n            const trainingStats = classifier.train(trainSet, trainOpts);\n            const beginTest = Date.now();\n            const testStats = classifier.test(testSet);\n            const endTest = Date.now();\n            return {\n                ...testStats,\n                trainTime: beginTest - beginTrain,\n                testTime: endTest - beginTest,\n                iterations: trainingStats.iterations,\n                error: trainingStats.error,\n                total: testStats.total,\n                network: classifier.toJSON(),\n            };\n        }\n        /**\n         * Randomize array element order in-place.\n         * Using Durstenfeld shuffle algorithm.\n         * source: http://stackoverflow.com/a/12646864/1324039\n         */\n        shuffleArray(array) {\n            for (let i = array.length - 1; i > 0; i--) {\n                const j = Math.floor(Math.random() * (i + 1));\n                const temp = array[i];\n                array[i] = array[j];\n                array[j] = temp;\n            }\n            return array;\n        }\n        train(data, trainOpts = {}, k = 4) {\n            if (data.length < k) {\n                throw new Error(`Training set size is too small for ${data.length} k folds of ${k}`);\n            }\n            this.shuffleArray(data);\n            const size = data.length / k;\n            const avgs = {\n                trainTime: 0,\n                testTime: 0,\n                iterations: 0,\n                error: 0,\n            };\n            const stats = {\n                total: 0,\n                testSize: 0,\n                trainSize: 0,\n            };\n            const binaryStats = {\n                total: 0,\n                testSize: 0,\n                trainSize: 0,\n                truePos: 0,\n                trueNeg: 0,\n                falsePos: 0,\n                falseNeg: 0,\n                precision: 0,\n                recall: 0,\n                accuracy: 0,\n            };\n            const results = [];\n            let isBinary = null;\n            for (let i = 0; i < k; i++) {\n                const dclone = data.slice(0);\n                const testSet = dclone.splice(i * size, size);\n                const trainSet = dclone;\n                const result = this.testPartition(trainOpts, trainSet, testSet);\n                if (isBinary === null) {\n                    isBinary =\n                        result.hasOwnProperty('falseNeg') &&\n                            result.hasOwnProperty('falsePos') &&\n                            result.hasOwnProperty('trueNeg') &&\n                            result.hasOwnProperty('truePos');\n                    if (isBinary) {\n                        Object.assign(stats, binaryStats);\n                    }\n                }\n                avgs.iterations += result.iterations;\n                avgs.testTime += result.testTime;\n                avgs.trainTime += result.trainTime;\n                avgs.error += result.error;\n                stats.total += result.total;\n                if (CrossValidate.isBinaryStats(stats) &&\n                    CrossValidate.isBinaryPartitionResults(result)) {\n                    stats.accuracy += result.accuracy;\n                    stats.falseNeg += result.falseNeg;\n                    stats.falsePos += result.falsePos;\n                    stats.precision += result.precision;\n                    stats.recall += result.recall;\n                    stats.trueNeg += result.trueNeg;\n                    stats.truePos += result.truePos;\n                }\n                results.push(result);\n            }\n            avgs.error /= k;\n            avgs.iterations /= k;\n            avgs.testTime /= k;\n            avgs.trainTime /= k;\n            if (CrossValidate.isBinaryStats(stats)) {\n                stats.precision = stats.truePos / (stats.truePos + stats.falsePos);\n                stats.recall = stats.truePos / (stats.truePos + stats.falseNeg);\n                stats.accuracy = (stats.trueNeg + stats.truePos) / stats.total;\n            }\n            stats.testSize = size;\n            stats.trainSize = data.length - size;\n            this.json = {\n                avgs: avgs,\n                stats: stats,\n                sets: results,\n            };\n            return this.json;\n        }\n        toNeuralNetwork() {\n            return this.fromJSON(this.json);\n        }\n        toJSON() {\n            return this.json;\n        }\n        fromJSON(crossValidateJson) {\n            const winningJSON = crossValidateJson.sets.reduce((prev, cur) => (prev.error < cur.error ? prev : cur));\n            return this.initClassifier().fromJSON(winningJSON.network);\n        }\n    }\n    CrossValidate.isBinaryStats = (stats) => {\n        return (stats.accuracy !== undefined);\n    };\n    CrossValidate.isBinaryResults = (stats) => stats.stats.accuracy !== undefined;\n    CrossValidate.isBinaryPartitionResults = (stats) => stats.accuracy !==\n        undefined;\n\n    let gpuInstance = null;\n    /**\n     * Sets up the gpu.js instance\n     */\n    function setup(value) {\n        gpuInstance = value;\n    }\n    function makeKernel(fn, settings) {\n        let _gpuInstance = gpuInstance;\n        if (_gpuInstance === null) {\n            _gpuInstance = new gpu_js.GPU({ mode: 'gpu' });\n            setup(_gpuInstance);\n        }\n        return _gpuInstance\n            .createKernel(fn, settings)\n            .setPipeline(true);\n    }\n    function makeKernelMap(map, fn, settings) {\n        let _gpuInstance = gpuInstance;\n        if (_gpuInstance === null) {\n            _gpuInstance = new gpu_js.GPU({ mode: 'gpu' });\n            setup(_gpuInstance);\n        }\n        return _gpuInstance\n            .createKernelMap(map, fn, settings)\n            .setPipeline(true);\n    }\n    /**\n     * Compiles a function into a gpu.js dev mode kernel\n     */\n    // export function makeDevKernel(\n    //   fn: ThreadFunction,\n    //   settings: makeKernelSettings\n    // ): IKernelRunShortcut {\n    //   if ('map' in settings) {\n    //     throw new Error('map kernels are not supported by dev kernels');\n    //   }\n    //   const gpu = new GPU({ mode: 'dev' });\n    //   return gpu.createKernel(fn, settings);\n    // }\n    function kernelInput(value, size) {\n        return new gpu_js.Input(value, size);\n    }\n    /**\n     * Deletes a gpu.js texture and frees VRAM\n     */\n    function release(possibleTexture) {\n        if (possibleTexture instanceof gpu_js.Texture) {\n            possibleTexture.delete();\n        }\n    }\n    /**\n     * Cleans ie sets all elements to 0 of a Texture or a js array\n     */\n    function clear(value) {\n        if (value instanceof gpu_js.Texture) {\n            value.clear();\n            return;\n        }\n        // array\n        if (Array.isArray(value)) {\n            if (typeof value[0] === 'number') {\n                value.fill(0);\n            }\n            else if (typeof value[0][0] === 'number') {\n                for (let x = 0; x < value.length; x++) {\n                    value[x].fill(0);\n                }\n                return;\n            }\n            else if (typeof value[0][0][0] === 'number') {\n                // cube\n                for (let y = 0; y < value.length; y++) {\n                    const row = value[y];\n                    for (let x = 0; x < row.length; x++) {\n                        row[x].fill(0);\n                    }\n                }\n                return;\n            }\n        }\n        if (value instanceof Float32Array) {\n            value.fill(0);\n            return;\n        }\n        throw new Error('unhandled value');\n    }\n    /**\n     * Clones a value\n     */\n    function clone(value) {\n        if (value instanceof gpu_js.Texture) {\n            return value.clone();\n        }\n        if (value instanceof Float32Array) {\n            return value.slice(0);\n        }\n        if (Array.isArray(value)) {\n            if (typeof value[0] === 'number') {\n                return value.slice(0);\n            }\n            else if (typeof value[0][0] === 'number') {\n                const matrix = new Array(value.length);\n                for (let x = 0; x < value.length; x++) {\n                    matrix[x] = value[x].slice(0);\n                }\n                return matrix;\n            }\n            else if (typeof value[0][0][0] === 'number') {\n                const cube = new Array(value.length);\n                for (let y = 0; y < value.length; y++) {\n                    const row = value[y];\n                    const matrix = new Array(row.length);\n                    for (let x = 0; x < row.length; x++) {\n                        matrix[x] = row[x].slice(0);\n                    }\n                }\n                return cube;\n            }\n        }\n        throw new Error('unhandled value');\n    }\n\n    /**\n     * 2D Mean Squared Error\n     */\n    function mse2d(errors) {\n        let sum = 0;\n        for (let y = 0; y < this.constants.height; y++) {\n            for (let x = 0; x < this.constants.width; x++) {\n                sum += errors[y][x] ** 2;\n            }\n        }\n        return sum / this.constants.length;\n    }\n    class MeanSquaredError {\n        constructor({ width, height }) {\n            this.calculate = makeKernel(mse2d, {\n                output: [1],\n                constants: {\n                    width,\n                    height,\n                    length: width * height,\n                },\n                immutable: true,\n            });\n            this.addAbsolute = makeKernel(function (prevError, prevLayerErrors) {\n                return prevError[0] + Math.abs(prevLayerErrors[0][0]);\n            }, {\n                output: [1],\n                immutable: true,\n            });\n            this.add = makeKernel(function (value1, value2) {\n                return value1[0] + value2[0];\n            }, {\n                output: [1],\n                immutable: true,\n            });\n            this.divide = makeKernel(function (length, mseSum) {\n                const value = mseSum[0];\n                if (value > 0) {\n                    return value / length;\n                }\n                return 0;\n            }, {\n                output: [1],\n                immutable: true,\n            });\n        }\n    }\n\n    const baseLayerDefaultSettings = {\n        width: 1,\n        height: 1,\n        depth: null,\n        weights: null,\n        deltas: null,\n        praxis: null,\n        praxisOpts: null,\n        cleanupDeltas: true,\n    };\n    class BaseLayer {\n        constructor(settings) {\n            this.praxis = null;\n            this.predictKernel = null;\n            this.compareKernel = null;\n            if (settings) {\n                this.settings = { ...baseLayerDefaultSettings, ...settings };\n            }\n            else {\n                this.settings = { ...baseLayerDefaultSettings };\n            }\n            this.setupPraxis();\n        }\n        get width() {\n            var _a;\n            return (_a = this.settings.width) !== null && _a !== void 0 ? _a : 0;\n        }\n        get height() {\n            var _a;\n            return (_a = this.settings.height) !== null && _a !== void 0 ? _a : 0;\n        }\n        get depth() {\n            var _a;\n            return (_a = this.settings.depth) !== null && _a !== void 0 ? _a : 0;\n        }\n        get weights() {\n            return this.settings.weights;\n        }\n        set weights(weights) {\n            this.settings.weights = weights;\n            if (this.settings.cleanupDeltas && this.deltas) {\n                clear(this.deltas);\n            }\n        }\n        get deltas() {\n            return this.settings.deltas;\n        }\n        set deltas(deltas) {\n            this.settings.deltas = deltas;\n        }\n        get id() {\n            var _a;\n            return (_a = this.settings.id) !== null && _a !== void 0 ? _a : '';\n        }\n        set id(title) {\n            this.settings.id = title;\n        }\n        setupPraxis() {\n            const { initPraxis, praxis, praxisOpts } = this.settings;\n            if (!this.praxis) {\n                if (initPraxis) {\n                    if (praxisOpts) {\n                        this.praxis = initPraxis(this, praxisOpts);\n                    }\n                    else {\n                        this.praxis = initPraxis(this);\n                    }\n                }\n                else if (praxis) {\n                    this.praxis = praxis;\n                }\n            }\n        }\n        /*\n        get weights() {\n          return this._weights;\n        }\n      \n        set weights(value) {\n          if (value) {\n            if (value.dimensions) {\n              if (value.dimensions[0] !== this.width) {\n                throw new Error(`${this.constructor.name}.weights being set with improper value width`);\n              }\n              if (value.dimensions[1] !== this.height) {\n                throw new Error(`${this.constructor.name}.weights being set with improper value height`);\n              }\n            } else {\n              if (value[0].length !== this.width) {\n                throw new Error(`${this.constructor.name}.weights being set with improper value width`);\n              }\n              if (value.length !== this.height) {\n                throw new Error(`${this.constructor.name}.weights being set with improper value height`);\n              }\n            }\n          }\n          this._weights = value;\n        }\n      \n        get deltas() {\n          return this._deltas;\n        }\n      \n        set deltas(value) {\n          if (value) {\n            if (value.dimensions) {\n              if (value.dimensions[0] !== this.width) {\n                throw new Error(`${this.constructor.name}.deltas being set with improper value width`);\n              }\n              if (value.dimensions[1] !== this.height) {\n                throw new Error(`${this.constructor.name}.deltas being set with improper value height`);\n              }\n            } else {\n              if (value[0].length !== this.width) {\n                throw new Error(`${this.constructor.name}.deltas being set with improper value width`);\n              }\n              if (value.length !== this.height) {\n                throw new Error(`${this.constructor.name}.deltas being set with improper value height`);\n              }\n            }\n          }\n          this._deltas = value;\n        } */\n        validate() {\n            if (Number.isNaN(this.height)) {\n                throw new Error(`${this.constructor.name} layer height is not a number`);\n            }\n            if (Number.isNaN(this.width)) {\n                throw new Error(`${this.constructor.name} layer width is not a number`);\n            }\n            if (this.height < 1) {\n                throw new Error(`${this.constructor.name} layer height is less than 1`);\n            }\n            if (this.width < 1) {\n                throw new Error(`${this.constructor.name} layer width is less than 1`);\n            }\n        }\n        setupKernels(isTraining) { }\n        reuseKernels(layer) {\n            if (layer.width !== this.width) {\n                throw new Error(`${this.constructor.name} kernel width mismatch ${layer.width} is not ${this.width}`);\n            }\n            if (layer.height !== this.height) {\n                throw new Error(`${this.constructor.name} kernel width mismatch ${layer.height} is not ${this.height}`);\n            }\n            if (layer.hasOwnProperty('predictKernel') && layer.predictKernel !== null) {\n                if (!layer.predictKernel.immutable) {\n                    throw new Error(`${layer.constructor.name}.predictKernel is not reusable, set kernel.immutable = true`);\n                }\n                this.predictKernel = layer.predictKernel;\n            }\n            if (layer.hasOwnProperty('compareKernel') && layer.compareKernel !== null) {\n                if (!layer.compareKernel.immutable) {\n                    throw new Error(`${layer.constructor.name}.compareKernel is not reusable, set kernel.immutable = true`);\n                }\n                this.compareKernel = layer.compareKernel;\n            }\n            this.praxis = layer.praxis;\n        }\n        predict(inputs) { }\n        compare(targetValues) { }\n        learn(learningRate) { }\n        toArray() {\n            return Array.isArray(this.weights)\n                ? this.weights\n                : this.weights.toArray();\n        }\n        toJSON() {\n            return BaseLayer.toJSON(this);\n        }\n        static toJSON(layer) {\n            const { weights } = layer;\n            return {\n                width: layer.width,\n                height: layer.height,\n                depth: layer.depth,\n                weights: toUntypedArray((weights && weights instanceof gpu_js.Texture\n                    ? weights.toArray()\n                    : weights)),\n                type: layer.constructor.name,\n                praxisOpts: layer.praxis ? layer.praxis.toJSON() : null,\n            };\n        }\n    }\n    function toUntypedArray(weights) {\n        if (weights === null)\n            return null;\n        if (Array.isArray(weights)) {\n            if (typeof weights[0] === 'number') {\n                return weights;\n            }\n            else if (Array.isArray(weights[0]) && typeof weights[0][0] === 'number') {\n                return weights;\n            }\n            else if (Array.isArray(weights[0][0]) &&\n                typeof weights[0][0][0] === 'number') {\n                return weights;\n            }\n            else if (weights[0] instanceof Float32Array) {\n                const matrix = weights;\n                return matrix.map((row) => {\n                    return Array.from(row);\n                });\n            }\n            else if (weights[0][0] instanceof Float32Array) {\n                const cube = weights;\n                return cube.map((matrix) => {\n                    return matrix.map((row) => {\n                        return Array.from(row);\n                    });\n                });\n            }\n        }\n        else if (weights) {\n            return Array.from(weights);\n        }\n        throw new Error('unexpected value');\n    }\n\n    /**\n     * Returns an array of zeros\n     */\n    function zeros$1(size) {\n        return new Float32Array(size);\n    }\n\n    /**\n     * Returns a 2D tensor(matrix) of zeros\n     */\n    function zeros2D(width, height) {\n        const result = new Array(height);\n        for (let y = 0; y < height; y++) {\n            result[y] = zeros$1(width);\n        }\n        return result;\n    }\n\n    /**\n     * Returns a 3D tensor of arrays\n     */\n    function zeros3D(width, height, depth) {\n        const result = new Array(depth);\n        for (let z = 0; z < depth; z++) {\n            result[z] = zeros2D(width, height);\n        }\n        return result;\n    }\n\n    class Activation extends BaseLayer {\n        constructor(inputLayer, settings) {\n            super(settings);\n            this.inputLayer = inputLayer;\n            const { width, height, depth } = this;\n            this.predictKernel = null;\n            this.compareKernel = null;\n            this.validate();\n            if (depth > 0) {\n                this.weights = zeros3D(width, height, depth);\n                this.deltas = zeros3D(width, height, depth);\n            }\n            else if (height > 0) {\n                this.weights = zeros2D(width, height);\n                this.deltas = zeros2D(width, height);\n            }\n            this.setupPraxis();\n        }\n        get width() {\n            return this.inputLayer.width;\n        }\n        get height() {\n            return this.inputLayer.height;\n        }\n        get depth() {\n            return this.inputLayer.depth;\n        }\n    }\n\n    class Filter extends BaseLayer {\n        constructor(settings, inputLayer) {\n            super();\n            this.settings = settings;\n            this.inputLayer = inputLayer;\n        }\n        get width() {\n            return this.inputLayer.width;\n        }\n        get height() {\n            return this.inputLayer.height;\n        }\n        get depth() {\n            return this.inputLayer.depth;\n        }\n        get filterCount() {\n            return this.settings.filterCount;\n        }\n        get filterWidth() {\n            return this.settings.filterWidth;\n        }\n        get filterHeight() {\n            return this.settings.filterHeight;\n        }\n        get filters() {\n            return this.settings.filters;\n        }\n        set filters(filters) {\n            this.settings.filters = filters;\n        }\n        get filterDeltas() {\n            return this.settings.filterDeltas;\n        }\n        set filterDeltas(filterDeltas) {\n            this.settings.filterDeltas = filterDeltas;\n        }\n    }\n\n    class Internal {\n        constructor() {\n            this.predictKernel = null;\n            this.compareKernel = null;\n            this.praxis = null;\n        }\n        get width() {\n            return this.settings.width;\n        }\n        get height() {\n            return this.settings.height;\n        }\n        get depth() {\n            return this.settings.depth;\n        }\n        get weights() {\n            return this.settings.weights;\n        }\n        set weights(weights) {\n            this.settings.weights = weights;\n        }\n        get deltas() {\n            return this.settings.deltas;\n        }\n        set deltas(deltas) {\n            this.settings.deltas = deltas;\n        }\n        toJSON() {\n            return BaseLayer.toJSON(this);\n        }\n    }\n\n    class Modifier extends BaseLayer {\n        constructor(inputLayer, settings) {\n            super({\n                ...settings,\n                width: inputLayer.width,\n                height: inputLayer.height,\n                depth: inputLayer.depth,\n            });\n            this.inputLayer = inputLayer;\n        }\n        validate() {\n            var _a;\n            super.validate();\n            if (this.width !== this.inputLayer.width) {\n                throw new Error(`width of ${this.width} does not match inputLayer.width of ${this.inputLayer.width}`);\n            }\n            if (this.height !== this.inputLayer.height) {\n                throw new Error(`height of ${this.height} does not match inputLayer.height of ${this.inputLayer.height}`);\n            }\n            if (this.depth !== ((_a = this.inputLayer.depth) !== null && _a !== void 0 ? _a : 0)) {\n                throw new Error(`depth of ${this.depth} does not match inputLayer.depth of ${this.inputLayer.depth}`);\n            }\n        }\n    }\n\n    class Operator extends BaseLayer {\n        constructor(inputLayer1, inputLayer2, settings) {\n            super(settings);\n            this.inputLayer1 = inputLayer1;\n            this.inputLayer2 = inputLayer2;\n            this.validate();\n            this.weights = zeros2D(this.width, this.height);\n            this.deltas = zeros2D(this.width, this.height);\n            this.setupPraxis();\n        }\n    }\n\n    function compare1D(weights, targetValues) {\n        return weights[this.thread.y][this.thread.x] - targetValues[this.thread.x];\n    }\n    function compare2D$5(weights, targetValues) {\n        return (weights[this.thread.y][this.thread.x] -\n            targetValues[this.thread.y][this.thread.x]);\n    }\n    class Target extends BaseLayer {\n        constructor(settings, inputLayer) {\n            super(settings);\n            this.inputLayer = inputLayer;\n            this.validate();\n            if (this.depth) {\n                throw new Error('Target layer not implemented for depth');\n            }\n            else if (this.height) {\n                this.weights = zeros2D(this.width, this.height);\n                this.deltas = zeros2D(this.width, this.height);\n                this.errors = zeros2D(this.width, this.height);\n            }\n            else {\n                this.weights = zeros$1(this.width);\n                this.deltas = zeros$1(this.width);\n                this.errors = zeros$1(this.width);\n            }\n        }\n        setupKernels() {\n            if (this.width === 1) {\n                this.compareKernel = makeKernel(compare1D, {\n                    output: [this.width, this.height],\n                    immutable: true,\n                });\n            }\n            else {\n                this.compareKernel = makeKernel(compare2D$5, {\n                    output: [this.width, this.height],\n                    immutable: true,\n                });\n            }\n        }\n        predict() {\n            // TODO: should we clone here?\n            // NOTE: this looks like it shouldn't be, but the weights are immutable, and this is where they are reused.\n            release(this.weights);\n            this.weights = clone(this.inputLayer.weights);\n        }\n        compare(targetValues) {\n            // this is where weights attach to deltas\n            // deltas will be zero on learn, so save it in error for comparing to mse later\n            release(this.deltas);\n            release(this.errors);\n            release(this.inputLayer.deltas);\n            this.deltas = this.compareKernel(this.weights, targetValues);\n            this.inputLayer.deltas = clone(this.deltas);\n            this.errors = clone(this.deltas);\n        }\n        setupPraxis() { }\n    }\n    function target(settings, inputLayer) {\n        return new Target(settings, inputLayer);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-extraneous-class\n    class InternalModel {\n    }\n    // eslint-disable-next-line @typescript-eslint/no-extraneous-class\n    class EntryPoint extends BaseLayer {\n    }\n    // eslint-disable-next-line @typescript-eslint/no-extraneous-class\n    class Model extends BaseLayer {\n        learn(learningRate) {\n            // TODO: do we need to release here?\n            const { weights: oldWeights } = this;\n            if (!this.praxis)\n                throw new Error('this.praxis not defined');\n            this.weights = this.praxis.run(this, learningRate);\n            release(oldWeights);\n        }\n    }\n\n    /* Functions for turning sparse hashes into arrays and vice versa */\n    const lookup = {\n        /**\n         * Performs `[{a: 1}, {b: 6, c: 7}] -> {a: 0, b: 1, c: 2}`\n         * @param {Object} hashes\n         * @returns {Object}\n         */\n        toTable(hashes) {\n            const hash = hashes.reduce((memo, hash) => {\n                return Object.assign(memo, hash);\n            }, {});\n            return lookup.toHash(hash);\n        },\n        /**\n         * Performs `[{a: 1}, {b: 6, c: 7}] -> {a: 0, b: 1, c: 2}`\n         */\n        toTable2D(objects2D) {\n            const table = {};\n            let valueIndex = 0;\n            for (let i = 0; i < objects2D.length; i++) {\n                const objects = objects2D[i];\n                for (let j = 0; j < objects.length; j++) {\n                    const object = objects[j];\n                    for (const p in object) {\n                        if (object.hasOwnProperty(p) && !table.hasOwnProperty(p)) {\n                            table[p] = valueIndex++;\n                        }\n                    }\n                }\n            }\n            return table;\n        },\n        toInputTable2D(data) {\n            const table = {};\n            let tableIndex = 0;\n            for (let dataIndex = 0; dataIndex < data.length; dataIndex++) {\n                const input = data[dataIndex].input;\n                for (let i = 0; i < input.length; i++) {\n                    const object = input[i];\n                    for (const p in object) {\n                        if (!object.hasOwnProperty(p))\n                            continue;\n                        if (!table.hasOwnProperty(p)) {\n                            table[p] = tableIndex++;\n                        }\n                    }\n                }\n            }\n            return table;\n        },\n        toOutputTable2D(data) {\n            const table = {};\n            let tableIndex = 0;\n            for (let dataIndex = 0; dataIndex < data.length; dataIndex++) {\n                const output = data[dataIndex].output;\n                for (let i = 0; i < output.length; i++) {\n                    const object = output[i];\n                    for (const p in object) {\n                        if (!object.hasOwnProperty(p))\n                            continue;\n                        if (!table.hasOwnProperty(p)) {\n                            table[p] = tableIndex++;\n                        }\n                    }\n                }\n            }\n            return table;\n        },\n        /**\n         * performs `{a: 6, b: 7} -> {a: 0, b: 1}`\n         */\n        toHash(hash) {\n            const lookup = {};\n            let index = 0;\n            const keys = Object.keys(hash);\n            for (let i = 0; i < keys.length; i++) {\n                lookup[keys[i]] = index++;\n            }\n            return lookup;\n        },\n        /**\n         * performs `{a: 0, b: 1}, {a: 6} -> [6, 0]`\n         */\n        toArray(lookup, object, arrayLength) {\n            const result = new Float32Array(arrayLength);\n            for (const p in lookup) {\n                if (!lookup.hasOwnProperty(p))\n                    continue;\n                result[lookup[p]] = object.hasOwnProperty(p) ? object[p] : 0;\n            }\n            return result;\n        },\n        toArrayShort(lookup, object) {\n            const result = [];\n            for (const p in lookup) {\n                if (!lookup.hasOwnProperty(p))\n                    continue;\n                if (!object.hasOwnProperty(p))\n                    break;\n                result[lookup[p]] = object[p];\n            }\n            return Float32Array.from(result);\n        },\n        toArrays(lookup, objects, arrayLength) {\n            const result = [];\n            for (let i = 0; i < objects.length; i++) {\n                result.push(this.toArray(lookup, objects[i], arrayLength));\n            }\n            return result;\n        },\n        /**\n         * performs `{a: 0, b: 1}, [6, 7] -> {a: 6, b: 7}`\n         * @param {Object} lookup\n         * @param {Array} array\n         * @returns {Object}\n         */\n        toObject(lookup, array) {\n            const object = {};\n            for (const p in lookup) {\n                if (!lookup.hasOwnProperty(p))\n                    continue;\n                object[p] = array[lookup[p]];\n            }\n            return object;\n        },\n        toObjectPartial(lookup, array, offset = 0, limit = 0) {\n            const object = {};\n            let i = 0;\n            for (const p in lookup) {\n                if (!lookup.hasOwnProperty(p))\n                    continue;\n                if (offset > 0) {\n                    if (i++ < offset)\n                        continue;\n                }\n                if (limit > 0) {\n                    if (i++ >= limit)\n                        continue;\n                }\n                object[p] = array[lookup[p] - offset];\n            }\n            return object;\n        },\n        dataShape(data) {\n            const shape = [];\n            let lastData;\n            if (data.hasOwnProperty('input')) {\n                shape.push('datum');\n                lastData = data.input;\n            }\n            else if (Array.isArray(data)) {\n                if (data[0] &&\n                    data[0].input) {\n                    shape.push('array', 'datum');\n                    lastData = data[0].input;\n                }\n                else if (Array.isArray(data[0])) {\n                    shape.push('array');\n                    lastData = data[0];\n                }\n                else {\n                    lastData = data;\n                }\n            }\n            else {\n                lastData = data;\n            }\n            let p;\n            while (lastData) {\n                p = Object.keys(lastData)[0];\n                if (Array.isArray(lastData) ||\n                    typeof lastData.buffer === 'object') {\n                    shape.push('array');\n                    const possibleNumber = lastData[parseInt(p)];\n                    if (typeof possibleNumber === 'number') {\n                        shape.push('number');\n                        break;\n                    }\n                    else {\n                        lastData = possibleNumber;\n                    }\n                }\n                else if (typeof lastData === 'object' &&\n                    typeof lastData.buffer !== 'object') {\n                    shape.push('object');\n                    const possibleNumber = lastData[p];\n                    if (typeof possibleNumber === 'number') {\n                        shape.push('number');\n                        break;\n                    }\n                    else {\n                        lastData = possibleNumber;\n                    }\n                }\n                else {\n                    throw new Error('unhandled signature');\n                }\n            }\n            return shape;\n        },\n        addKeys(value, table) {\n            if (Array.isArray(value))\n                return table;\n            let i = Object.keys(table).length;\n            for (const p in value) {\n                if (!value.hasOwnProperty(p))\n                    continue;\n                if (table.hasOwnProperty(p))\n                    continue;\n                table[p] = i++;\n            }\n            return table;\n        },\n    };\n\n    class BasePraxis {\n        constructor(layerTemplate, settings = {}) {\n            this.layerTemplate = layerTemplate;\n            this.settings = { ...settings };\n            this.kernel = null;\n        }\n        get width() {\n            return this.layerTemplate.width;\n        }\n        get height() {\n            return this.layerTemplate.height;\n        }\n        get depth() {\n            return this.layerTemplate.depth;\n        }\n        setupKernels() { }\n        reuseKernels(praxis) {\n            if (praxis.width !== this.width) {\n                throw new Error(`${this.constructor.name} kernel width mismatch ${praxis.width} is not ${this.width}`);\n            }\n            if (praxis.height !== this.height) {\n                throw new Error(`${this.constructor.name} kernel width mismatch ${praxis.height} is not ${this.height}`);\n            }\n            if (praxis.hasOwnProperty('kernel')) {\n                this.kernel = praxis.kernel;\n            }\n        }\n        toJSON() {\n            return { ...this.settings };\n        }\n    }\n\n    function update$2(weights, deltas) {\n        return (weights[this.thread.y][this.thread.x] +\n            this.constants.learningRate * deltas[this.thread.y][this.thread.x]);\n    }\n    const defaultSettings$1 = {\n        learningRate: 0.3,\n    };\n    class ArthurDeviationBiases extends BasePraxis {\n        constructor(layer, settings) {\n            super(layer);\n            this.settings = { ...defaultSettings$1, ...settings };\n            this.kernel = null;\n        }\n        run(layer) {\n            return this.kernel(layer.weights, layer.deltas);\n        }\n        setupKernels() {\n            this.kernel = makeKernel(update$2, {\n                output: [this.width, this.height],\n                constants: {\n                    learningRate: this.settings.learningRate,\n                },\n            });\n        }\n    }\n    function arthurDeviationBiases(layer, settings) {\n        return new ArthurDeviationBiases(layer, settings);\n    }\n\n    function updateChange(value) {\n        return value;\n    }\n    function update$1(changes, weights, incomingWeights, inputDeltas) {\n        const lastChange = changes[this.thread.y][this.thread.x];\n        const inputDelta = inputDeltas[this.thread.y][0];\n        const weight = weights[this.thread.y][this.thread.x];\n        const incoming = incomingWeights[this.thread.x][0];\n        const change = this.constants.learningRate * inputDelta * incoming +\n            this.constants.momentum * lastChange;\n        return weight + change;\n    }\n    const defaultSettings = {\n        learningRate: 0.3,\n        momentum: 0.1,\n        weightsLayer: null,\n        incomingLayer: null,\n        deltaLayer: null,\n    };\n    class ArthurDeviationWeights extends BasePraxis {\n        constructor(layer, settings) {\n            super(layer);\n            this.kernelMap = null;\n            this.settings = { ...defaultSettings, ...settings };\n            this.changes = zeros2D(layer.width, layer.height);\n        }\n        get learningRate() {\n            return this.settings.learningRate;\n        }\n        get momentum() {\n            return this.settings.momentum;\n        }\n        get weightsLayer() {\n            return this.settings.weightsLayer;\n        }\n        set weightsLayer(layer) {\n            this.settings.weightsLayer = layer;\n        }\n        get deltaLayer() {\n            return this.settings.deltaLayer;\n        }\n        set deltaLayer(layer) {\n            this.settings.deltaLayer = layer;\n        }\n        get incomingLayer() {\n            return this.settings.incomingLayer;\n        }\n        set incomingLayer(layer) {\n            this.settings.incomingLayer = layer;\n        }\n        run() {\n            const output = this.kernelMap(this.changes, this.weightsLayer.weights, this.incomingLayer.weights, this.deltaLayer.deltas);\n            this.changes = output.changes;\n            return output.result;\n        }\n        setupKernels() {\n            this.kernelMap = makeKernelMap({\n                changes: updateChange,\n            }, update$1, {\n                output: [this.width, this.height],\n                constants: {\n                    learningRate: this.learningRate,\n                    momentum: this.momentum,\n                },\n            });\n        }\n    }\n    function arthurDeviationWeights(layer, settings) {\n        return new ArthurDeviationWeights(layer, settings);\n    }\n\n    function getMomentum(delta, decay, previousMomentum) {\n        return previousMomentum * decay + (1 - decay) * delta * delta;\n    }\n    function clipByValue(value, max, min) {\n        if (value > max) {\n            return max;\n        }\n        if (value < min) {\n            return min;\n        }\n        return value;\n    }\n    /**\n     * @description Momentum Root Mean Square Propagation Function\n     */\n    function update(weights, deltas, previousMomenta) {\n        const delta = deltas[this.thread.y][this.thread.x];\n        const clippedDelta = clipByValue(delta, this.constants.clipValue, -this.constants.clipValue);\n        const weight = weights[this.thread.y][this.thread.x];\n        const previousMomentum = previousMomenta[this.thread.y][this.thread.x];\n        const momentum = getMomentum(delta, this.constants.decayRate, previousMomentum);\n        return (weight +\n            (-this.constants.learningRate * clippedDelta) /\n                Math.sqrt(momentum + this.constants.smoothEps) -\n            this.constants.regularizationStrength * weight);\n    }\n    const defaults$8 = {\n        decayRate: 0.999,\n        regularizationStrength: 0.000001,\n        learningRate: 0.01,\n        smoothEps: 1e-8,\n        clipValue: 5,\n    };\n    class MomentumRootMeanSquaredPropagation extends BasePraxis {\n        constructor(layerTemplate, settings = {}) {\n            super(layerTemplate);\n            this.kernelMap = null;\n            this.settings = { ...defaults$8, ...settings };\n            this.momenta = zeros2D(layerTemplate.width, layerTemplate.height);\n        }\n        get clipValue() {\n            return this.settings.clipValue;\n        }\n        get decayRate() {\n            return this.settings.decayRate;\n        }\n        get learningRate() {\n            return this.settings.learningRate;\n        }\n        get regularizationStrength() {\n            return this.settings.regularizationStrength;\n        }\n        get smoothEps() {\n            return this.settings.smoothEps;\n        }\n        run(layer) {\n            const { momenta, result } = this.kernelMap(layer.weights, layer.deltas, this.momenta);\n            release(this.momenta);\n            this.momenta = momenta;\n            return result;\n        }\n        setupKernels() {\n            this.kernelMap = makeKernelMap({\n                momenta: getMomentum,\n            }, update, {\n                output: [this.width, this.height],\n                constants: {\n                    clipValue: this.clipValue,\n                    decayRate: this.decayRate,\n                    learningRate: this.learningRate,\n                    regularizationStrength: this.regularizationStrength,\n                    smoothEps: this.smoothEps,\n                },\n                functions: [clipByValue],\n                immutable: true,\n            });\n        }\n    }\n    function momentumRootMeanSquaredPropagation(layer, settings) {\n        return new MomentumRootMeanSquaredPropagation(layer, settings);\n    }\n    /**\n     * @description Mathematician friendly name of MomentumRootMeanSquaredPropagation class. For those that are not mere mortals\n     */\n    const MRmsProp = MomentumRootMeanSquaredPropagation;\n    const mRmsProp = momentumRootMeanSquaredPropagation;\n\n    var index = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        ArthurDeviationBiases: ArthurDeviationBiases,\n        arthurDeviationBiases: arthurDeviationBiases,\n        ArthurDeviationWeights: ArthurDeviationWeights,\n        arthurDeviationWeights: arthurDeviationWeights,\n        MomentumRootMeanSquaredPropagation: MomentumRootMeanSquaredPropagation,\n        momentumRootMeanSquaredPropagation: momentumRootMeanSquaredPropagation,\n        MRmsProp: MRmsProp,\n        mRmsProp: mRmsProp\n    });\n\n    function traverseLayersFrom(layer, cb) {\n        if (layer.hasOwnProperty('inputLayer')) {\n            traverseLayersFrom(layer.inputLayer, cb);\n        }\n        else {\n            if (layer.hasOwnProperty('inputLayer1')) {\n                traverseLayersFrom(layer.inputLayer1, cb);\n            }\n            if (layer.hasOwnProperty('inputLayer2')) {\n                traverseLayersFrom(layer.inputLayer2, cb);\n            }\n        }\n        cb(layer);\n    }\n\n    function flattenLayers(layers) {\n        const result = layers.slice(0);\n        for (let i = 0; i < result.length; i++) {\n            let offset = 0;\n            traverseLayersFrom(result[i], (layer) => {\n                if (!result.includes(layer)) {\n                    result.splice(i + offset, 0, layer);\n                    offset++;\n                }\n            });\n        }\n        return result;\n    }\n\n    function checkSameSize(layer1, layer2) {\n        if (layer1.width !== layer2.width) {\n            throw new Error(`Layer width mismatch of ${layer1.width} and ${layer2.width}`);\n        }\n        if (layer1.height !== layer2.height) {\n            throw new Error(`Layer height mismatch of ${layer1.height} and ${layer2.height}`);\n        }\n    }\n\n    function predict$8(inputWeights1, inputWeights2) {\n        return (inputWeights1[this.thread.y][this.thread.x] +\n            inputWeights2[this.thread.y][this.thread.x]);\n    }\n    class Add extends Operator {\n        get width() {\n            return this.inputLayer1.width;\n        }\n        get height() {\n            return this.inputLayer1.height;\n        }\n        get depth() {\n            return this.inputLayer1.depth;\n        }\n        validate() {\n            super.validate();\n            checkSameSize(this.inputLayer1, this.inputLayer2);\n        }\n        setupKernels() {\n            this.predictKernel = makeKernel(predict$8, {\n                output: [this.width, this.height],\n                immutable: true,\n            });\n        }\n        predict() {\n            release(this.weights);\n            this.weights = this.predictKernel(this.inputLayer1.weights, this.inputLayer2.weights);\n        }\n        compare() {\n            // TODO: Do we need release and clone here?\n            release(this.inputLayer1.deltas);\n            release(this.inputLayer2.deltas);\n            this.inputLayer1.deltas = clone(this.deltas);\n            this.inputLayer2.deltas = clone(this.deltas);\n        }\n    }\n    function add$1(inputLayer1, inputLayer2, settings) {\n        return new Add(inputLayer1, inputLayer2, settings);\n    }\n\n    function randomWeight() {\n        return Math.random() * 0.4 - 0.2;\n    }\n\n    /**\n     * Returns a random float between given min and max bounds (inclusive)\n     * @param min Minimum value of the ranfom float\n     * @param max Maximum value of the random float\n     */\n    function randomFloat(min, max) {\n        return Math.random() * (max - min) + min;\n    }\n    /**\n     * Complicated math. All you need to know is that it returns a random number.\n     * More info: https://en.wikipedia.org/wiki/Normal_distribution\n     */\n    function gaussRandom() {\n        if (gaussRandom.returnV) {\n            gaussRandom.returnV = false;\n            return gaussRandom.vVal;\n        }\n        const u = 2 * Math.random() - 1;\n        const v = 2 * Math.random() - 1;\n        const r = u * u + v * v;\n        if (r === 0 || r > 1) {\n            return gaussRandom();\n        }\n        const c = Math.sqrt((-2 * Math.log(r)) / r);\n        gaussRandom.vVal = v * c; // cache this\n        gaussRandom.returnV = true;\n        return u * c;\n    }\n    /**\n     * Returns a random integer between given min and max bounds\n     * @param min Minimum value of the random integer\n     * @param max Maximum value of the random integer\n     */\n    function randomInteger(min, max) {\n        return Math.floor(Math.random() * (max - min) + min);\n    }\n    /**\n     * If you know what this is: https://en.wikipedia.org/wiki/Normal_distribution\n     * @param mu\n     * @param std\n     */\n    function randomN(mu, std) {\n        return mu + gaussRandom() * std;\n    }\n    gaussRandom.returnV = false;\n    gaussRandom.vVal = 0;\n\n    var random$1 = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        randomFloat: randomFloat,\n        gaussRandom: gaussRandom,\n        randomInteger: randomInteger,\n        randomN: randomN\n    });\n\n    /**\n     * Returns an array of given size, full of randomness\n     */\n    function randos(size, std = null) {\n        const array = new Float32Array(size);\n        if (std === null) {\n            for (let i = 0; i < size; i++) {\n                array[i] = randomWeight();\n            }\n        }\n        else {\n            for (let i = 0; i < size; i++) {\n                array[i] = randomFloat(-std, std);\n            }\n        }\n        return array;\n    }\n    /**\n     * Returns a 2D matrix of given size, full of randomness\n     */\n    function randos2D(width, height, std) {\n        const result = new Array(height);\n        for (let y = 0; y < height; y++) {\n            result[y] = randos(width, std);\n        }\n        return result;\n    }\n    /**\n     * Returns a 3D tensor of given size, full of randomness\n     */\n    function randos3D(width, height, depth, std) {\n        const result = new Array(depth);\n        for (let z = 0; z < depth; z++) {\n            result[z] = randos2D(width, height, std);\n        }\n        return result;\n    }\n\n    const defaults$7 = {\n        ...baseLayerDefaultSettings,\n        std: null,\n    };\n    class Random extends Model {\n        constructor(settings) {\n            super();\n            this.settings = { ...defaults$7, ...settings };\n            this.setupPraxis();\n            this.validate();\n            if (!this.weights) {\n                this.weights = randos2D(this.width, this.height, settings.std);\n            }\n            if (!this.deltas) {\n                this.deltas = zeros2D(this.width, this.height);\n            }\n        }\n        predict() { }\n        compare() { }\n    }\n    function random(settings) {\n        return new Random(settings);\n    }\n\n    function predict$7(weights1, weights2) {\n        let sum = 0;\n        for (let i = 0; i < this.constants.size; i++) {\n            sum += weights1[this.thread.y][i] * weights2[i][this.thread.x];\n        }\n        return sum;\n    }\n    function compareFromX(deltas, inputDeltas, inputWeights) {\n        let sum = inputDeltas[this.thread.y][this.thread.x];\n        for (let i = 0; i < this.constants.size; i++) {\n            sum += deltas[this.thread.y][i] * inputWeights[this.thread.x][i];\n        }\n        return sum;\n    }\n    function compareFromY(deltas, inputDeltas, inputWeights) {\n        let sum = inputDeltas[this.thread.y][this.thread.x];\n        for (let i = 0; i < this.constants.size; i++) {\n            sum += deltas[i][this.thread.x] * inputWeights[i][this.thread.y];\n        }\n        return sum;\n    }\n    class Multiply extends Operator {\n        constructor() {\n            super(...arguments);\n            this.compareKernel1 = null;\n            this.compareKernel2 = null;\n        }\n        get width() {\n            return this.inputLayer2.width;\n        }\n        set width(width) {\n            throw new Error('Cannot set width on Multiply');\n        }\n        get height() {\n            return this.inputLayer1.height;\n        }\n        set height(height) {\n            throw new Error('Cannot set height on Multiply');\n        }\n        get depth() {\n            return this.inputLayer1.depth;\n        }\n        set depth(depth) {\n            throw new Error('Cannot set depth on Multiply');\n        }\n        validate() {\n            super.validate();\n            if (this.inputLayer1.width !== this.inputLayer2.height) {\n                throw new Error(`Layer width mismatch of ${this.inputLayer1.width} and ${this.inputLayer2.height}`);\n            }\n        }\n        setupKernels() {\n            this.predictKernel = makeKernel(predict$7, {\n                output: [this.width, this.height],\n                constants: {\n                    size: this.inputLayer2.height,\n                },\n                immutable: true,\n            });\n            this.compareKernel1 = makeKernel(compareFromX, {\n                output: [this.inputLayer1.width, this.inputLayer1.height],\n                constants: {\n                    size: this.inputLayer2.width,\n                },\n                immutable: true,\n            });\n            this.compareKernel2 = makeKernel(compareFromY, {\n                output: [this.inputLayer2.width, this.inputLayer2.height],\n                constants: {\n                    size: this.inputLayer1.height,\n                },\n                immutable: true,\n            });\n        }\n        reuseKernels(layer) {\n            super.reuseKernels(layer);\n            this.compareKernel1 = layer.compareKernel1;\n            this.compareKernel2 = layer.compareKernel2;\n        }\n        predict() {\n            release(this.weights);\n            if (!this.predictKernel)\n                throw new Error('this.predictKernel is not set');\n            this.weights = this.predictKernel(this.inputLayer1.weights, this.inputLayer2.weights);\n        }\n        compare() {\n            if (!this.compareKernel1)\n                throw new Error('this.compareKernel1 not set');\n            if (!this.compareKernel2)\n                throw new Error('this.compareKernel2 not set');\n            const inputLayer1Deltas = this.inputLayer1.deltas;\n            const inputLayer2Deltas = this.inputLayer2.deltas;\n            const newDeltas1 = this.compareKernel1(this.deltas, this.inputLayer1.deltas, this.inputLayer2.weights);\n            const newDeltas2 = this.compareKernel2(this.deltas, this.inputLayer2.deltas, this.inputLayer1.weights);\n            this.inputLayer2.deltas = newDeltas2;\n            this.inputLayer1.deltas = newDeltas1;\n            release(inputLayer1Deltas);\n            release(inputLayer2Deltas);\n        }\n        setupPraxis() { }\n        toJSON() {\n            return {\n                ...super.toJSON(),\n                width: this.width,\n                height: this.height,\n            };\n        }\n    }\n    function multiply$1(inputLayer1, inputLayer2, settings) {\n        return new Multiply(inputLayer1, inputLayer2, settings);\n    }\n\n    function predict2D$4(inputs) {\n        return 1 / (1 + Math.exp(-inputs[this.thread.y][this.thread.x]));\n    }\n    function predict3D$5(inputs) {\n        return (1 / (1 + Math.exp(-inputs[this.thread.z][this.thread.y][this.thread.x])));\n    }\n    function compare2D$4(weights, deltas) {\n        const weight = weights[this.thread.y][this.thread.x];\n        const delta = deltas[this.thread.y][this.thread.x];\n        return weight * (1 - weight) * delta;\n    }\n    function compare3D$4(weights, deltas) {\n        const weight = weights[this.thread.z][this.thread.y][this.thread.x];\n        const delta = deltas[this.thread.z][this.thread.y][this.thread.x];\n        return weight * (1 - weight) * delta;\n    }\n    class Sigmoid extends Activation {\n        setupKernels() {\n            if (this.depth > 0) {\n                this.predictKernel = makeKernel(predict3D$5, {\n                    output: [this.width, this.height, this.depth],\n                    functions: [activate$2],\n                    immutable: true,\n                });\n                this.compareKernel = makeKernel(compare3D$4, {\n                    output: [this.width, this.height, this.depth],\n                    functions: [measure$2],\n                    immutable: true,\n                });\n            }\n            else {\n                this.predictKernel = makeKernel(predict2D$4, {\n                    output: [this.width, this.height],\n                    functions: [activate$2],\n                    immutable: true,\n                });\n                this.compareKernel = makeKernel(compare2D$4, {\n                    output: [this.width, this.height],\n                    functions: [measure$2],\n                    immutable: true,\n                });\n            }\n        }\n        predict() {\n            release(this.weights);\n            this.weights = this.predictKernel(this.inputLayer.weights);\n        }\n        compare() {\n            release(this.inputLayer.deltas);\n            this.inputLayer.deltas = this.compareKernel(this.weights, this.deltas);\n        }\n        learn(learningRate) { }\n    }\n    function sigmoid$1(inputLayer, settings) {\n        return new Sigmoid(inputLayer, settings);\n    }\n\n    function arthurFeedForward(settings, inputLayer) {\n        const { height } = settings;\n        function initWeightsPraxis(layerTemplate, settings) {\n            const praxis = arthurDeviationWeights(layerTemplate, settings);\n            praxis.setupKernels();\n            return praxis;\n        }\n        function initBiasesPraxis(layerTemplate, settings) {\n            const praxis = arthurDeviationBiases(layerTemplate, settings);\n            praxis.setupKernels();\n            return praxis;\n        }\n        const weightsLayer = random({\n            id: 'weights',\n            height,\n            width: inputLayer.height,\n            initPraxis: initWeightsPraxis,\n        });\n        const biasesLayer = random({\n            id: 'biases',\n            height,\n            initPraxis: initBiasesPraxis,\n        });\n        const multiplyLayer = multiply$1(weightsLayer, inputLayer);\n        const addLayer = add$1(multiplyLayer, biasesLayer);\n        const sigmoidLayer = sigmoid$1(addLayer);\n        const weightsPraxis = weightsLayer.praxis;\n        weightsPraxis.weightsLayer = weightsLayer;\n        weightsPraxis.incomingLayer = inputLayer;\n        weightsPraxis.deltaLayer = sigmoidLayer;\n        return sigmoidLayer;\n    }\n\n    function getStride(settings, defaults) {\n        if (typeof settings.stride === 'number') {\n            return { strideX: settings.stride, strideY: settings.stride };\n        }\n        else {\n            let strideX = defaults.stride;\n            let strideY = defaults.stride;\n            if (typeof settings.strideX === 'number') {\n                strideX = settings.strideX;\n            }\n            if (typeof settings.strideY === 'number') {\n                strideY = settings.strideY;\n            }\n            return { strideX, strideY };\n        }\n    }\n    function getPadding(settings, defaults) {\n        if (typeof settings.padding === 'number') {\n            return { paddingX: settings.padding, paddingY: settings.padding };\n        }\n        else {\n            let paddingX = defaults.padding;\n            let paddingY = defaults.padding;\n            if (typeof settings.paddingX === 'number') {\n                paddingX = settings.paddingX;\n            }\n            if (typeof settings.paddingY === 'number') {\n                paddingY = settings.paddingY;\n            }\n            return { paddingX, paddingY };\n        }\n    }\n\n    /**\n     * Returns an array of a given size with each element filled with a single value\n     */\n    function values(size, value) {\n        return new Float32Array(size).fill(value);\n    }\n\n    function predict$6(inputs, filters, biases) {\n        const startFilterX = this.constants.paddingX - this.thread.x * this.constants.strideX;\n        const startInputX = this.thread.x * this.constants.strideX - this.constants.paddingX;\n        const endFilterX = Math.min(this.constants.filterWidth, startFilterX + this.constants.inputWidth);\n        const startFilterY = this.constants.paddingY - this.thread.y * this.constants.strideY;\n        const startInputY = this.thread.y * this.constants.strideY - this.constants.paddingY;\n        const endFilterY = Math.min(this.constants.filterHeight, startFilterY + this.constants.inputHeight);\n        let sum = 0;\n        for (let z = 0; z < this.constants.inputDepth; z++) {\n            for (let filterY = Math.max(0, startFilterY), inputY = Math.max(0, startInputY); filterY < endFilterY; filterY++, inputY++) {\n                for (let filterX = Math.max(0, startFilterX), inputX = Math.max(0, startInputX); filterX < endFilterX; filterX++, inputX++) {\n                    sum += filters[z][filterY][filterX] * inputs[z][inputY][inputX];\n                }\n            }\n        }\n        return sum + biases[this.thread.z];\n    }\n    function compareFilterDeltas$1(filterDeltas, inputs, deltas) {\n        const startDeltaX = Math.max(0, Math.ceil((this.constants.paddingX - this.thread.x) / this.constants.strideX));\n        const startInputX = startDeltaX * this.constants.strideX +\n            this.thread.x -\n            this.constants.paddingX;\n        const endDeltaX = Math.min(this.constants.deltaWidth, Math.floor((this.constants.inputWidth -\n            1 -\n            this.thread.x +\n            this.constants.paddingX) /\n            this.constants.strideX) + 1);\n        const startDeltaY = Math.max(0, Math.ceil((this.constants.paddingY - this.thread.y) / this.constants.strideY));\n        const startInputY = startDeltaY * this.constants.strideY +\n            this.thread.y -\n            this.constants.paddingY;\n        const endDeltaY = Math.min(this.constants.deltaHeight, Math.floor((this.constants.inputHeight -\n            1 -\n            this.thread.y +\n            this.constants.paddingY) /\n            this.constants.strideY) + 1);\n        let sum = filterDeltas[this.thread.z][this.thread.y][this.thread.x];\n        for (let deltaY = startDeltaY, inputY = startInputY; deltaY < endDeltaY; deltaY++, inputY += this.constants.strideY) {\n            for (let deltaX = startDeltaX, inputX = startInputX; deltaX < endDeltaX; deltaX++, inputX += this.constants.strideX) {\n                sum +=\n                    inputs[this.thread.z][inputY][inputX] *\n                        deltas[this.constants.deltaZ][deltaY][deltaX];\n            }\n        }\n        return sum;\n    }\n    function compareInputDeltas$1(inputDeltas, filters, deltas) {\n        const x = this.thread.x + this.constants.paddingX;\n        const startDeltaX = x < this.constants.filterWidth\n            ? 0\n            : Math.floor((x - this.constants.filterWidth + this.constants.strideX) /\n                this.constants.strideX);\n        const startFilterX = x - startDeltaX * this.constants.strideX;\n        const endDeltaX = Math.min(startDeltaX + Math.floor(startFilterX / this.constants.strideX) + 1, this.constants.deltaWidth);\n        const y = this.thread.y + this.constants.paddingY;\n        const startDeltaY = y < this.constants.filterHeight\n            ? 0\n            : Math.floor((y - this.constants.filterHeight + this.constants.strideY) /\n                this.constants.strideY);\n        const startFilterY = y - startDeltaY * this.constants.strideY;\n        const endDeltaY = Math.min(startDeltaY + Math.floor(startFilterY / this.constants.strideY) + 1, this.constants.deltaHeight);\n        let sum = inputDeltas[this.thread.z][this.thread.y][this.thread.x];\n        let deltaY = startDeltaY;\n        for (let filterY = startFilterY; deltaY < endDeltaY; filterY -= this.constants.strideY, deltaY++) {\n            let deltaX = startDeltaX;\n            for (let filterX = startFilterX; deltaX < endDeltaX; filterX -= this.constants.strideX, deltaX++) {\n                sum +=\n                    filters[this.thread.z][filterY][filterX] *\n                        deltas[this.constants.deltaZ][deltaY][deltaX];\n            }\n        }\n        return sum;\n    }\n    function compareBiases$1(biasDeltas, deltas) {\n        let sum = 0;\n        for (let y = 0; y < this.constants.deltaHeight; y++) {\n            for (let x = 0; x < this.constants.deltaWidth; x++) {\n                sum += deltas[this.thread.z][y][x];\n            }\n        }\n        return biasDeltas[this.thread.z][this.thread.y][this.thread.x] + sum;\n    }\n    const defaults$6 = {\n        stride: 0,\n        padding: 0,\n        bias: 0.1,\n        filterCount: 1,\n        filterWidth: 0,\n        filterHeight: 0,\n    };\n    class Convolution extends Filter {\n        constructor(settings, inputLayer) {\n            var _a, _b, _c;\n            super(settings, inputLayer);\n            this.compareFilterDeltasKernel = null;\n            this.compareInputDeltasKernel = null;\n            this.compareBiasesKernel = null;\n            this.settings = {\n                ...defaults$6,\n                ...settings,\n                ...getPadding(settings, defaults$6),\n                ...getStride(settings, defaults$6),\n            };\n            this.weights = (_a = settings.weights) !== null && _a !== void 0 ? _a : randos3D(this.width, this.height, this.depth);\n            this.deltas = zeros3D(this.width, this.height, this.depth);\n            this.biases = values(this.depth, this.bias);\n            this.biasDeltas = (_b = settings.biasDeltas) !== null && _b !== void 0 ? _b : randos(this.depth);\n            this.filters = (_c = settings.filters) !== null && _c !== void 0 ? _c : randos3D(this.filterWidth, this.filterHeight, this.filterCount);\n            this.filterDeltas = zeros3D(this.filterWidth, this.filterHeight, this.filterCount);\n            this.validate();\n        }\n        get strideX() {\n            return this.settings.strideX;\n        }\n        get strideY() {\n            return this.settings.strideY;\n        }\n        get paddingX() {\n            return this.settings.paddingX;\n        }\n        get paddingY() {\n            return this.settings.paddingX;\n        }\n        get width() {\n            return Math.floor((this.inputLayer.width + this.paddingX * 2 - this.filterWidth) /\n                this.strideX +\n                1);\n        }\n        get height() {\n            return Math.floor((this.inputLayer.height + this.paddingY * 2 - this.filterHeight) /\n                this.strideY +\n                1);\n        }\n        get bias() {\n            return this.settings.bias;\n        }\n        get depth() {\n            return this.filterCount;\n        }\n        get biases() {\n            return this.settings.biases;\n        }\n        set biases(biases) {\n            this.settings.biases = biases;\n        }\n        get biasDeltas() {\n            return this.settings.biasDeltas;\n        }\n        set biasDeltas(weights) {\n            this.settings.biasDeltas = weights;\n        }\n        get filters() {\n            return this.settings.filters;\n        }\n        set filters(filters) {\n            this.settings.filters = filters;\n        }\n        get filterDeltas() {\n            return this.settings.filterDeltas;\n        }\n        set filterDeltas(filterDeltas) {\n            this.settings.filterDeltas = filterDeltas;\n        }\n        setupKernels() {\n            this.predictKernel = makeKernel(predict$6, {\n                constants: {\n                    inputWidth: this.inputLayer.width,\n                    inputHeight: this.inputLayer.height,\n                    inputDepth: this.inputLayer.depth,\n                    strideX: this.strideX,\n                    strideY: this.strideY,\n                    paddingX: this.paddingX,\n                    paddingY: this.paddingY,\n                    filterWidth: this.filterWidth,\n                    filterHeight: this.filterHeight,\n                },\n                output: [this.width, this.height, this.depth],\n                immutable: true,\n            });\n            this.compareFilterDeltasKernel = makeKernel(compareFilterDeltas$1, {\n                constants: {\n                    deltasWidth: this.width,\n                    deltasHeight: this.height,\n                    deltasDepth: this.depth,\n                    inputWidth: this.inputLayer.width,\n                    inputHeight: this.inputLayer.height,\n                    inputDepth: this.inputLayer.depth,\n                    strideX: this.strideX,\n                    strideY: this.strideY,\n                    paddingX: this.paddingX,\n                    paddingY: this.paddingY,\n                    filterWidth: this.filterWidth,\n                    filterHeight: this.filterHeight,\n                },\n                output: [this.width, this.height, this.depth],\n                immutable: true,\n            });\n            this.compareInputDeltasKernel = makeKernel(compareInputDeltas$1, {\n                constants: {\n                    filterCount: this.filterCount,\n                },\n                output: [\n                    this.inputLayer.width,\n                    this.inputLayer.height,\n                    this.inputLayer.depth,\n                ],\n                immutable: true,\n            });\n            this.compareBiasesKernel = makeKernel(compareBiases$1, {\n                output: [1, 1, this.depth],\n                constants: {\n                    deltaWidth: this.width,\n                    deltaHeight: this.height,\n                },\n                immutable: true,\n            });\n        }\n        predict() {\n            this.weights = this.predictKernel(this.inputLayer.weights, this.filters, this.biases);\n        }\n        compare() {\n            const { filterDeltas, biasDeltas } = this;\n            this.filterDeltas = this.compareFilterDeltasKernel(filterDeltas, this.inputLayer.weights, this.deltas);\n            release(filterDeltas);\n            this.biasDeltas = this.compareBiasesKernel(biasDeltas, this.deltas);\n            release(biasDeltas);\n            release(this.deltas);\n            this.deltas = this.compareInputDeltasKernel(this.filters, this.inputLayer.deltas);\n            release(this.inputLayer.deltas);\n            // TODO: do we need to clone here?\n            this.inputLayer.deltas = clone(this.deltas);\n        }\n        learn(learningRate) {\n            // TODO: handle filters\n            // TODO: do we need to release here?\n            const { weights: oldWeights } = this;\n            this.weights = this.praxis.run(this, learningRate);\n            release(oldWeights);\n        }\n    }\n    function convolution(settings, inputLayer) {\n        return new Convolution(settings, inputLayer);\n    }\n\n    function setDropout(dropout) {\n        return dropout;\n    }\n    function trainingPredict(inputs) {\n        if (setDropout(Math.random()) < this.constants.probability) {\n            return 0;\n        }\n        return inputs[this.thread.y][this.thread.x];\n    }\n    function predict$5(inputs) {\n        return inputs[this.thread.y][this.thread.x] * this.constants.probability;\n    }\n    function compare$3(dropouts, deltas) {\n        if (dropouts[this.thread.y][this.thread.x] === 0) {\n            return 0;\n        }\n        return deltas[this.thread.y][this.thread.x];\n    }\n    const dropoutDefaults = {\n        ...baseLayerDefaultSettings,\n        probability: 0.5,\n    };\n    class Dropout extends Filter {\n        constructor(inputLayer, settings) {\n            super(settings, inputLayer);\n            this.predictKernelMap = null;\n            this.settings = { ...dropoutDefaults, ...settings };\n            this.dropouts = null;\n            this.validate();\n        }\n        setupKernels(isTraining) {\n            const output = [this.width, this.height];\n            if (isTraining) {\n                this.predictKernelMap = makeKernelMap({ dropouts: setDropout }, trainingPredict, {\n                    output,\n                    immutable: true,\n                });\n                this.compareKernel = makeKernel(compare$3, { output, immutable: true });\n            }\n            else {\n                this.predictKernelMap = makeKernelMap({}, predict$5, { output, immutable: true });\n            }\n        }\n        predict() {\n            release(this.weights);\n            if (this.dropouts) {\n                release(this.dropouts);\n            }\n            const { result, dropouts } = this\n                .predictKernelMap(this.inputLayer.weights);\n            this.weights = result;\n            this.dropouts = dropouts;\n        }\n        compare() {\n            release(this.deltas);\n            this.deltas = this.compareKernel(this.dropouts, this.inputLayer.deltas);\n        }\n    }\n    function dropout(inputLayer, settings) {\n        return new Dropout(inputLayer, settings);\n    }\n\n    function feedForward(settings, input) {\n        const { height, praxisOpts = null } = settings;\n        const weights = random({\n            id: 'weights',\n            height,\n            width: input.height,\n            praxisOpts,\n        });\n        const biases = random({ id: 'biases', height, praxisOpts });\n        return sigmoid$1(add$1(multiply$1(weights, input, { praxisOpts }), biases, { praxisOpts }), { praxisOpts });\n    }\n\n    function predict$4(inputs, filters, biases) {\n        let output = 0;\n        let i = 0;\n        for (let y = 0; y < this.constants.inputHeight; y++) {\n            for (let x = 0; x < this.constants.inputWidth; x++) {\n                output += inputs[y][x] * filters[this.thread.x][i];\n                i++;\n            }\n        }\n        return output + biases[this.thread.x];\n    }\n    function predict3D$4(inputs, filters, biases) {\n        let output = 0;\n        let i = 0;\n        for (let z = 0; z < this.constants.inputDepth; z++) {\n            for (let y = 0; y < this.constants.inputHeight; y++) {\n                for (let x = 0; x < this.constants.inputWidth; x++) {\n                    output += inputs[z][y][x] * filters[this.thread.x][i];\n                    i++;\n                }\n            }\n        }\n        return output + biases[this.thread.x];\n    }\n    function compareInputDeltas(inputDeltas, deltas, filters) {\n        let sum = 0;\n        const filterX = this.thread.x + this.thread.y * this.output.x;\n        for (let filterY = 0; filterY < this.constants.filterCount; filterY++) {\n            sum += filters[filterY][filterX] * deltas[0][filterY];\n        }\n        return sum + inputDeltas[this.thread.y][this.thread.x];\n    }\n    function compareInputDeltas3D(inputDeltas, deltas, filters) {\n        let sum = 0;\n        const filterX = this.thread.x + this.thread.y * this.output.x;\n        for (let filterY = 0; filterY < this.constants.filterCount; filterY++) {\n            sum += filters[filterY][filterX] * deltas[0][filterY];\n        }\n        return sum + inputDeltas[this.thread.z][this.thread.y][this.thread.x];\n    }\n    function compareBiases(biases, deltas) {\n        return biases[this.thread.x] + deltas[this.thread.y][this.thread.x];\n    }\n    function compareFilterDeltas(filterDeltas, inputWeights, deltas) {\n        return (filterDeltas[this.thread.y][this.thread.x] +\n            inputWeights[this.thread.y][this.thread.x] *\n                deltas[this.constants.deltaY][this.constants.deltaX]);\n    }\n    function compareFilterDeltas3D(filterDeltas, inputWeights, deltas) {\n        const inputZ = Math.floor(this.thread.x / (this.constants.inputWidth * this.constants.inputHeight));\n        const inputY = Math.floor((this.thread.x -\n            inputZ * this.constants.inputWidth * this.constants.inputHeight) /\n            this.constants.inputWidth);\n        const inputX = this.thread.x -\n            this.constants.inputWidth * (inputY + this.constants.inputHeight * inputZ);\n        return (filterDeltas[this.thread.y][this.thread.x] +\n            inputWeights[inputZ][inputY][inputX] * deltas[0][this.thread.y]);\n    }\n    class FullyConnected extends Filter {\n        constructor(settings, inputLayer) {\n            super(settings, inputLayer);\n            this.compareFilterDeltasKernel = null;\n            this.compareInputDeltasKernel = null;\n            this.compareBiasesKernel = null;\n            this.settings = { ...settings };\n            this.validate();\n            const connectionCount = inputLayer.width * inputLayer.height * inputLayer.depth;\n            this.biases = values(this.height, this.bias);\n            this.biasDeltas = zeros$1(this.height);\n            this.filters = randos2D(connectionCount, this.height);\n            this.filterDeltas = zeros2D(connectionCount, this.height);\n            if (this.depth > 0) {\n                this.weights = randos3D(this.width, this.height, this.depth);\n                this.deltas = zeros3D(this.width, this.height, this.depth);\n            }\n            else if (this.height > 0) {\n                this.weights = randos2D(this.width, this.height);\n                this.deltas = zeros2D(this.width, this.height);\n            }\n        }\n        get bias() {\n            return this.settings.bias;\n        }\n        get biases() {\n            return this.settings.biases;\n        }\n        set biases(biases) {\n            this.settings.biases = biases;\n        }\n        get biasDeltas() {\n            return this.settings.biases;\n        }\n        set biasDeltas(biasDeltas) {\n            this.settings.biasDeltas = biasDeltas;\n        }\n        validate() {\n            super.validate();\n            if (this.depth > 0)\n                throw new Error('depth not supported');\n        }\n        setupKernels() {\n            const { inputLayer } = this;\n            const connectionCount = inputLayer.width * inputLayer.height * inputLayer.depth;\n            if (inputLayer.depth > 0) {\n                this.predictKernel = makeKernel(predict3D$4, {\n                    output: [this.width, this.height],\n                    constants: {\n                        inputHeight: inputLayer.height,\n                        inputWidth: inputLayer.width,\n                        inputDepth: inputLayer.depth,\n                    },\n                });\n                this.compareFilterDeltasKernel = makeKernel(compareFilterDeltas3D, {\n                    output: [connectionCount, this.height],\n                    constants: {\n                        inputWidth: inputLayer.width,\n                        inputHeight: inputLayer.height,\n                    },\n                    immutable: true,\n                });\n                this.compareInputDeltasKernel = makeKernel(compareInputDeltas3D, {\n                    output: [inputLayer.width, inputLayer.height, inputLayer.depth],\n                    constants: {\n                        filterCount: this.height,\n                    },\n                    immutable: true,\n                });\n            }\n            else {\n                this.predictKernel = makeKernel(predict$4, {\n                    output: [this.width, this.height],\n                    constants: {\n                        inputHeight: inputLayer.height,\n                        inputWidth: inputLayer.width,\n                    },\n                });\n                this.compareFilterDeltasKernel = makeKernel(compareFilterDeltas, {\n                    output: [connectionCount, this.height],\n                    constants: {\n                        inputWidth: inputLayer.width,\n                    },\n                });\n                this.compareInputDeltasKernel = makeKernel(compareInputDeltas, {\n                    output: [inputLayer.width, inputLayer.height],\n                    constants: {\n                        filterCount: this.height,\n                    },\n                });\n            }\n            this.compareBiasesKernel = makeKernel(compareBiases, {\n                output: [this.width, this.height],\n            });\n        }\n        predict() {\n            this.weights = this.predictKernel(this.inputLayer.weights, this.filters, this.biases);\n        }\n        compare() {\n            const inputLayerDeltas = this.inputLayer.deltas;\n            this.inputLayer.deltas = this\n                .compareInputDeltasKernel(inputLayerDeltas, this.deltas, this.filters);\n            release(inputLayerDeltas);\n            const { biasDeltas, filterDeltas } = this;\n            // TODO: handle biasDeltas learn\n            this.biasDeltas = this.compareBiasesKernel(this.biases, this.deltas);\n            // TODO: handle filterDeltas learn\n            this.filterDeltas = this.compareFilterDeltasKernel(filterDeltas, this.inputLayer.weights, this.deltas);\n            release(biasDeltas);\n            release(filterDeltas);\n        }\n    }\n    function fullyConnected(settings, inputLayer) {\n        return new FullyConnected(settings, inputLayer);\n    }\n\n    function predict$3(weights) {\n        return -weights[this.thread.y][this.thread.x];\n    }\n    class Negative extends Modifier {\n        constructor(inputLayer, settings) {\n            super(inputLayer, settings);\n            this.validate();\n        }\n        setupKernels() {\n            this.predictKernel = makeKernel(predict$3, {\n                output: [this.width, this.height],\n            });\n        }\n        predict() {\n            this.weights = this.predictKernel(this.inputLayer.weights);\n        }\n    }\n    function negative(inputLayer, settings) {\n        return new Negative(inputLayer, settings);\n    }\n\n    function predict$2(inputLayerWeights1, inputLayerWeights2) {\n        return (inputLayerWeights1[this.thread.y][this.thread.x] *\n            inputLayerWeights2[this.thread.y][this.thread.x]);\n    }\n    function compare$2(weights, deltas) {\n        return (weights[this.thread.y][this.thread.x] * deltas[this.thread.y][this.thread.x]);\n    }\n    class MultiplyElement extends Operator {\n        get width() {\n            return this.inputLayer1.width;\n        }\n        get height() {\n            return this.inputLayer1.height;\n        }\n        get depth() {\n            return this.inputLayer1.depth;\n        }\n        validate() {\n            super.validate();\n            checkSameSize(this.inputLayer1, this.inputLayer2);\n        }\n        setupKernels() {\n            this.predictKernel = makeKernel(predict$2, {\n                output: [this.width, this.height],\n                immutable: true,\n            });\n            this.compareKernel = makeKernel(compare$2, {\n                output: [this.width, this.height],\n                immutable: true,\n            });\n        }\n        predict() {\n            release(this.weights);\n            this.weights = this.predictKernel(this.inputLayer1.weights, this.inputLayer2.weights);\n        }\n        compare() {\n            release(this.inputLayer1.deltas);\n            release(this.inputLayer2.deltas);\n            this.inputLayer1.deltas = this.compareKernel(this.inputLayer2.weights, this.deltas);\n            this.inputLayer2.deltas = this.compareKernel(this.inputLayer1.weights, this.deltas);\n        }\n    }\n    function multiplyElement$1(inputLayer1, inputLayer2, settings) {\n        return new MultiplyElement(inputLayer1, inputLayer2, settings);\n    }\n\n    function ones$1(size) {\n        return new Float32Array(size).fill(1);\n    }\n    function ones2D(width, height) {\n        const result = new Array(height);\n        for (let y = 0; y < height; y++) {\n            result[y] = ones$1(width);\n        }\n        return result;\n    }\n\n    class Ones extends Model {\n        constructor(settings) {\n            super(settings);\n            this.validate();\n            this.weights = ones2D(this.width, this.height);\n            this.deltas = zeros2D(this.width, this.height);\n        }\n    }\n    function ones(settings) {\n        return new Ones(settings);\n    }\n\n    function predict2D$3(inputs) {\n        return activate$1(inputs[this.thread.y][this.thread.x]);\n    }\n    function predict3D$3(inputs) {\n        return activate$1(inputs[this.thread.z][this.thread.y][this.thread.x]);\n    }\n    function compare2D$3(weights, errors) {\n        return measure$1(weights[this.thread.y][this.thread.x], errors[this.thread.y][this.thread.x]);\n    }\n    function compare3D$3(weights, errors) {\n        return measure$1(weights[this.thread.z][this.thread.y][this.thread.x], errors[this.thread.z][this.thread.y][this.thread.x]);\n    }\n    class Tanh extends Activation {\n        setupKernels() {\n            if (this.depth > 0) {\n                this.predictKernel = makeKernel(predict3D$3, {\n                    output: [this.width, this.height, this.depth],\n                    functions: [activate$1],\n                    immutable: true,\n                });\n                this.compareKernel = makeKernel(compare3D$3, {\n                    output: [this.width, this.height, this.depth],\n                    functions: [measure$1],\n                    immutable: true,\n                });\n            }\n            else {\n                this.predictKernel = makeKernel(predict2D$3, {\n                    output: [this.width, this.height],\n                    functions: [activate$1],\n                    immutable: true,\n                });\n                this.compareKernel = makeKernel(compare2D$3, {\n                    output: [this.width, this.height],\n                    functions: [measure$1],\n                    immutable: true,\n                });\n            }\n        }\n        predict() {\n            release(this.weights);\n            this.weights = this.predictKernel(this.inputLayer.weights);\n        }\n        compare() {\n            release(this.inputLayer.deltas);\n            this.inputLayer.deltas = this.compareKernel(this.weights, this.deltas);\n        }\n    }\n    function tanh$1(inputLayer, settings) {\n        return new Tanh(inputLayer, settings);\n    }\n\n    class Zeros extends Model {\n        constructor(settings) {\n            super(settings);\n            this.validate();\n            this.weights = zeros2D(this.width, this.height);\n            this.deltas = zeros2D(this.width, this.height);\n        }\n        predict() {\n            // throw new Error(`${this.constructor.name}-predict is not yet implemented`)\n        }\n        compare() {\n            // throw new Error(`${this.constructor.name}-compare is not yet implemented`)\n        }\n    }\n    function zeros(settings) {\n        return new Zeros(settings);\n    }\n\n    function gru(settings, recurrentInput, input) {\n        const { height } = settings;\n        const updateGateWeights = random({ height, width: input.height });\n        const updateGatePeepholes = random({ width: height, height });\n        const updateGateBias = zeros({ height });\n        const updateGate = sigmoid$1(add$1(add$1(multiply$1(updateGateWeights, input), multiply$1(updateGatePeepholes, recurrentInput)), updateGateBias));\n        const resetGateWeights = random({ height, width: input.height });\n        const resetGatePeepholes = random({ width: height, height });\n        const resetGateBias = zeros({ height });\n        const resetGate = sigmoid$1(add$1(add$1(multiply$1(resetGateWeights, input), multiply$1(resetGatePeepholes, recurrentInput)), resetGateBias));\n        const cellWeights = random({ height, width: input.height });\n        const cellPeepholes = random({ width: height, height });\n        const cellBias = zeros({ height });\n        const cell = tanh$1(add$1(add$1(multiply$1(cellWeights, input), multiply$1(cellPeepholes, multiplyElement$1(resetGate, recurrentInput))), cellBias));\n        // compute hidden state as gated, saturated cell activations\n        // negate updateGate\n        return add$1(multiplyElement$1(add$1(ones({ width: updateGate.width, height: updateGate.height }), negative(updateGate)), cell), multiplyElement$1(recurrentInput, updateGate));\n    }\n\n    const defaults$5 = {\n        weights: null,\n    };\n    class Input extends EntryPoint {\n        constructor(settings) {\n            super({ ...defaults$5, ...settings });\n            this.reshapeInput = null;\n            this.validate();\n            this.reshapeInput = null;\n            this.deltas = zeros2D(this.width, this.height);\n        }\n        setupKernels() {\n            if (this.width === 1) {\n                this.predict = this.predict1D;\n                this.reshapeInput = makeKernel(function (value) {\n                    return value[this.thread.y];\n                }, {\n                    output: [1, this.height],\n                    immutable: true,\n                });\n            }\n        }\n        reuseKernels(layer) {\n            // super.reuseKernels(layer);\n            this.reshapeInput = layer.reshapeInput;\n        }\n        predict(inputs) {\n            if ((Array.isArray(inputs) || inputs instanceof Float32Array) &&\n                typeof inputs[0] === 'number' &&\n                inputs.length === this.height * this.width) {\n                release(this.weights);\n                this.weights = kernelInput(inputs, [this.width, this.height]);\n            }\n            else if (Array.isArray(inputs) &&\n                inputs.length === this.height &&\n                (Array.isArray(inputs[0]) || inputs[0] instanceof Float32Array) &&\n                inputs[0].length === this.width) {\n                this.weights = clone(inputs);\n            }\n            else {\n                throw new Error('Inputs are not of sized correctly');\n            }\n        }\n        predict1D(inputs) {\n            if (this.weights)\n                release(this.weights);\n            if (this.reshapeInput) {\n                this.weights = this.reshapeInput(inputs);\n            }\n            else {\n                this.weights = inputs;\n            }\n        }\n        compare() {\n            // throw new Error(`${this.constructor.name}-compare is not yet implemented`)\n        }\n        learn() { }\n    }\n    function input(settings) {\n        return new Input(settings);\n    }\n\n    function predict2D$2(inputs) {\n        return activate(inputs[this.thread.y][this.thread.x]);\n    }\n    function predict3D$2(inputs) {\n        return activate(inputs[this.thread.z][this.thread.y][this.thread.x]);\n    }\n    function compare2D$2(weights, deltas) {\n        return measure(weights[this.thread.y][this.thread.x], deltas[this.thread.y][this.thread.x]);\n    }\n    function compare3D$2(weights, deltas) {\n        return measure(weights[this.thread.z][this.thread.y][this.thread.x], deltas[this.thread.z][this.thread.y][this.thread.x]);\n    }\n    class LeakyRelu extends Activation {\n        setupKernels() {\n            const { width, height, depth } = this.inputLayer;\n            if (this.depth > 0) {\n                this.predictKernel = makeKernel(predict3D$2, {\n                    output: [width, height, depth],\n                    functions: [activate],\n                    immutable: true,\n                });\n                this.compareKernel = makeKernel(compare3D$2, {\n                    output: [width, height, depth],\n                    functions: [measure],\n                    immutable: true,\n                });\n            }\n            else {\n                this.predictKernel = makeKernel(predict2D$2, {\n                    output: [width, height],\n                    functions: [activate],\n                    immutable: true,\n                });\n                this.compareKernel = makeKernel(compare2D$2, {\n                    output: [width, height],\n                    functions: [measure],\n                    immutable: true,\n                });\n            }\n        }\n        predict() {\n            release(this.weights);\n            this.weights = this.predictKernel(this.inputLayer.weights);\n        }\n        compare() {\n            const { deltas } = this;\n            this.deltas = this.compareKernel(this.weights, deltas);\n            release(deltas);\n        }\n    }\n    function leakyRelu(inputLayer, settings) {\n        return new LeakyRelu(inputLayer, settings);\n    }\n\n    function lstmCell(settings, input, recurrentInput) {\n        const { height } = settings;\n        if (typeof height !== 'number') {\n            throw new Error('no settings.height given');\n        }\n        if (recurrentInput.setDimensions) {\n            recurrentInput.setDimensions(1, height);\n        }\n        const inputGateWeights = random({\n            width: input.height,\n            height,\n            std: 0.08,\n            id: 'inputGateWeights',\n        });\n        const inputGatePeepholes = random({\n            width: height,\n            height,\n            std: 0.08,\n            id: 'inputGatePeepholes',\n        });\n        const inputGateBias = zeros({ width: 1, height, id: 'inputGateBias' });\n        const inputGate = sigmoid$1(add$1(add$1(multiply$1(inputGateWeights, input), multiply$1(inputGatePeepholes, recurrentInput)), inputGateBias), { id: 'inputGate' });\n        const forgetGateWeights = random({\n            width: input.height,\n            height,\n            std: 0.08,\n            id: 'forgetGateWeights',\n        });\n        const forgetGatePeepholes = random({\n            width: height,\n            height,\n            std: 0.08,\n            id: 'forgetGatePeepholes',\n        });\n        const forgetGateBias = zeros({ width: 1, height, id: 'forgetGateBias' });\n        const forgetGate = sigmoid$1(add$1(add$1(multiply$1(forgetGateWeights, input), multiply$1(forgetGatePeepholes, recurrentInput)), forgetGateBias), { id: 'forgetGate' });\n        const outputGateWeights = random({\n            width: input.height,\n            height,\n            std: 0.08,\n            id: 'outputGateWeights',\n        });\n        const outputGatePeepholes = random({\n            width: height,\n            height,\n            std: 0.08,\n            id: 'outputGatePeepholes',\n        });\n        const outputGateBias = zeros({ width: 1, height, id: 'outputGateBias' });\n        const outputGate = sigmoid$1(add$1(add$1(multiply$1(outputGateWeights, input), multiply$1(outputGatePeepholes, recurrentInput)), outputGateBias), { id: 'outputGate' });\n        const memoryWeights = random({\n            width: input.height,\n            height,\n            std: 0.08,\n            id: 'memoryWeights',\n        });\n        const memoryPeepholes = random({\n            width: height,\n            height,\n            std: 0.08,\n            id: 'memoryPeepholes',\n        });\n        const memoryBias = zeros({ width: 1, height, id: 'memoryBias' });\n        const memory = tanh$1(add$1(add$1(multiply$1(memoryWeights, input), multiply$1(memoryPeepholes, recurrentInput)), memoryBias), { id: 'memory' });\n        // compute new cell activation\n        const retainCell = multiplyElement$1(forgetGate, recurrentInput, {\n            id: 'retainCell',\n        }); // what do we keep from cell\n        const writeCell = multiplyElement$1(inputGate, memory, { id: 'writeCell' }); // what do we write to cell\n        const cell = add$1(retainCell, writeCell, { id: 'cell' }); // new cell contents\n        // compute hidden state as gated, saturated cell activations\n        return multiplyElement$1(outputGate, tanh$1(cell), { id: 'activations' });\n    }\n\n    function output(settings, inputLayer) {\n        const { height } = settings;\n        const outputGate = random({\n            height,\n            width: inputLayer.height,\n            id: 'outputGate',\n            std: 0.08,\n        });\n        const output = random({ height, id: 'output', std: 0.08 });\n        const outputGateConnector = multiply$1(outputGate, inputLayer, {\n            id: 'outputGateConnected',\n        });\n        return target({ id: 'target', ...settings }, add$1(outputGateConnector, output));\n    }\n\n    function setSwitchY(value) {\n        return value;\n    }\n    function setSwitchX(value) {\n        return value;\n    }\n    function predict$1(inputs) {\n        const startFilterX = this.constants.paddingX - this.thread.x * this.constants.strideX;\n        const startInputX = this.thread.x * this.constants.strideX - this.constants.paddingX;\n        const endFilterX = Math.min(this.constants.filterWidth, startFilterX + this.constants.inputWidth);\n        const startFilterY = this.constants.paddingY - this.thread.y * this.constants.strideY;\n        const startInputY = this.thread.y * this.constants.strideY - this.constants.paddingY;\n        const endFilterY = Math.min(this.constants.filterHeight, startFilterY + this.constants.inputHeight);\n        let largestValue = -99999;\n        // convolve centered at this particular location\n        for (let filterY = Math.max(0, startFilterY), inputY = Math.max(0, startInputY); filterY < endFilterY; filterY++, inputY++) {\n            for (let filterX = Math.max(0, startFilterX), inputX = Math.max(0, startInputX); filterX < endFilterX; filterX++, inputX++) {\n                if (inputY >= 0 &&\n                    inputY < this.constants.inputHeight &&\n                    inputX >= 0 &&\n                    inputX < this.constants.inputWidth) {\n                    const input = inputs[this.thread.z][inputY][inputX];\n                    if (input > largestValue) {\n                        largestValue = input;\n                    }\n                }\n            }\n        }\n        return largestValue;\n    }\n    function compare$1(deltas, switchY, switchX) {\n        const x = Math.floor((this.thread.x / this.output.x) * this.constants.outputWidth);\n        const y = Math.floor((this.thread.y / this.output.y) * this.constants.outputHeight);\n        let value = 0;\n        for (let deltasY = 0; deltasY < this.constants.inputHeight; deltasY++) {\n            for (let deltasX = 0; deltasX < this.constants.inputWidth; deltasX++) {\n                const switchXValue = switchX[deltasY][deltasX];\n                const switchYValue = switchY[deltasY][deltasX];\n                if (switchXValue === x && switchYValue === y) {\n                    value += deltas[deltasY][deltasX];\n                }\n            }\n        }\n        return value;\n    }\n    const defaults$4 = {\n        padding: 0,\n        stride: 0,\n        filterWidth: 0,\n        filterHeight: 0,\n        filterCount: 0,\n    };\n    class Pool extends Filter {\n        constructor(settings, inputLayer) {\n            super(settings, inputLayer);\n            this.predictKernelMap = null;\n            this.settings = {\n                ...settings,\n                ...getStride(settings, defaults$4),\n                ...getPadding(settings, defaults$4),\n            };\n            this.weights = randos3D(this.width, this.height, this.depth);\n            this.deltas = zeros3D(this.width, this.height, this.depth);\n            this.filters = randos3D(this.filterWidth, this.filterHeight, this.filterCount);\n            this.filterDeltas = zeros3D(this.filterWidth, this.filterHeight, this.filterCount);\n            this.validate();\n        }\n        get strideX() {\n            return this.settings.strideX;\n        }\n        get strideY() {\n            return this.settings.strideY;\n        }\n        get paddingX() {\n            return this.settings.paddingX;\n        }\n        get paddingY() {\n            return this.settings.paddingY;\n        }\n        get width() {\n            return Math.floor((this.inputLayer.width + this.paddingX * 2 - this.filterWidth) /\n                this.strideX +\n                1);\n        }\n        get height() {\n            return Math.floor((this.inputLayer.height + this.paddingY * 2 - this.filterHeight) /\n                this.strideY +\n                1);\n        }\n        get depth() {\n            return this.settings.filterCount;\n        }\n        get filterCount() {\n            // TODO: handle 1 depth?\n            return this.settings.filterCount;\n        }\n        get switchX() {\n            return this.settings.switchX;\n        }\n        set switchX(switchX) {\n            this.settings.switchX = switchX;\n        }\n        get switchY() {\n            return this.settings.switchY;\n        }\n        set switchY(switchY) {\n            this.settings.switchY = switchY;\n        }\n        setupKernels() {\n            this.predictKernelMap = makeKernelMap({\n                switchX: setSwitchX,\n                switchY: setSwitchY,\n            }, predict$1, {\n                output: [this.width, this.height, this.depth],\n                constants: {\n                    inputWidth: this.inputLayer.width,\n                    inputHeight: this.inputLayer.height,\n                    paddingX: this.paddingX,\n                    paddingY: this.paddingY,\n                    filterHeight: this.filterHeight,\n                    filterWidth: this.filterWidth,\n                },\n            });\n            this.compareKernel = makeKernel(compare$1, {\n                output: [\n                    this.inputLayer.width,\n                    this.inputLayer.height,\n                    this.inputLayer.depth,\n                ],\n                constants: {\n                    inputWidth: this.inputLayer.width,\n                    inputHeight: this.inputLayer.height,\n                    outputWidth: this.width,\n                    outputHeight: this.height,\n                },\n            });\n        }\n        predict() {\n            const { result: weights, switchX, switchY } = this\n                .predictKernelMap(this.inputLayer.weights);\n            this.switchX = switchX;\n            this.switchY = switchY;\n            this.weights = weights;\n        }\n        compare() {\n            // debugger;\n            // const depth = this.inputLayer.deltas.length;\n            // const height = this.inputLayer.deltas[0].length;\n            // const width = this.inputLayer.deltas[0][0].length;\n            // const type = typeof this.inputLayer.deltas[0][0][0];\n            const inputLayerDeltas = this.inputLayer.deltas;\n            this.inputLayer.deltas = this.compareKernel(this.deltas, this.switchX, this.switchY);\n            release(inputLayerDeltas);\n            // debugger;\n            // if (depth !== this.inputLayer.deltas.length) debugger;\n            // if (height !== this.inputLayer.deltas[0].length) debugger;\n            // if (width !== this.inputLayer.deltas[0][0].length) debugger;\n            // if (type !== typeof this.inputLayer.deltas[0][0][0]) debugger;\n        }\n    }\n    function pool(settings, inputLayer) {\n        return new Pool(settings, inputLayer);\n    }\n\n    class RecurrentInput extends Internal {\n        constructor(recurrentInput) {\n            super();\n            this.praxis = null;\n            this.predictKernel = null;\n            this.compareKernel = null;\n            this.settings = {};\n            this.recurrentInput = recurrentInput;\n            this.validate();\n        }\n        get width() {\n            return this.recurrentInput.width;\n        }\n        get height() {\n            return this.recurrentInput.height;\n        }\n        get depth() {\n            return this.recurrentInput.depth;\n        }\n        get deltas() {\n            return this.recurrentInput.deltas;\n        }\n        set deltas(deltas) {\n            const recurrentInputDeltas = this.recurrentInput.deltas;\n            this.recurrentInput.deltas = deltas;\n            release(recurrentInputDeltas);\n        }\n        get weights() {\n            return this.recurrentInput.weights;\n        }\n        set weights(weights) {\n            const recurrentInputWeights = this.recurrentInput.weights;\n            this.recurrentInput.weights = weights;\n            release(recurrentInputWeights);\n        }\n        validate() {\n            BaseLayer.prototype.validate.call(this);\n            if (this.width !== this.recurrentInput.width) {\n                throw new Error(`${this.constructor.name} layer width ${this.width} and ${this.recurrentInput.constructor.name} width (${this.recurrentInput.width}) are not same`);\n            }\n            if (this.height !== this.recurrentInput.height) {\n                throw new Error(`${this.constructor.name} layer height ${this.height} and ${this.recurrentInput.constructor.name} width (${this.recurrentInput.height}) are not same`);\n            }\n        }\n        setDimensions(width, height) {\n            this.recurrentInput.width = width;\n            this.recurrentInput.height = height;\n        }\n        predict() {\n            // throw new Error(`${this.constructor.name}-predict is not yet implemented`)\n        }\n        compare() {\n            // throw new Error(`${this.constructor.name}-compare is not yet implemented`)\n        }\n        learn() {\n            // throw new Error(`${this.constructor.name}-learn is not yet implemented`)\n        }\n        setupKernels() {\n            // throw new Error(\n            //   `${this.constructor.name}-setupKernels is not yet implemented`\n            // )\n        }\n        reuseKernels() {\n            // throw new Error(\n            //   `${this.constructor.name}-reuseKernels is not yet implemented`\n            // )\n        }\n    }\n\n    class RecurrentZeros extends Internal {\n        constructor(settings) {\n            super();\n            this.praxis = null;\n            this.settings = {};\n            this.predictKernel = null;\n            this.compareKernel = null;\n            if (settings) {\n                this.settings = { ...settings };\n            }\n        }\n        setDimensions(width, height) {\n            this.praxis = null;\n            this.settings = {\n                ...this.settings,\n                width,\n                height,\n                weights: zeros2D(width, height),\n                deltas: zeros2D(width, height),\n            };\n        }\n        setupKernels() {\n            // throw new Error(\n            //   `${this.constructor.name}-setupKernels is not yet implemented`\n            // )\n        }\n        reuseKernels() {\n            // throw new Error(\n            //   `${this.constructor.name}-reuseKernels is not yet implemented`\n            // )\n        }\n        predict() {\n            // throw new Error(`${this.constructor.name}-predict is not yet implemented`)\n        }\n        compare() {\n            // throw new Error(`${this.constructor.name}-compare is not yet implemented`)\n        }\n        learn(learningRate) {\n            const { weights: oldWeights } = this;\n            this.weights = this.praxis.run(this, learningRate);\n            // this.deltas = deltas;\n            release(oldWeights);\n        }\n    }\n    function recurrentZeros() {\n        return new RecurrentZeros();\n    }\n\n    function predict2D$1(inputs) {\n        return activate$3(inputs[this.thread.y][this.thread.x]);\n    }\n    function compare2D$1(weights, deltas) {\n        return measure$3(weights[this.thread.y][this.thread.x], deltas[this.thread.y][this.thread.x]);\n    }\n    function predict3D$1(inputs) {\n        return activate$3(inputs[this.thread.z][this.thread.y][this.thread.x]);\n    }\n    function compare3D$1(weights, deltas) {\n        return measure$3(weights[this.thread.z][this.thread.y][this.thread.x], deltas[this.thread.z][this.thread.y][this.thread.x]);\n    }\n    class Relu extends Activation {\n        setupKernels() {\n            const { width, height, depth } = this.inputLayer;\n            if (depth > 0) {\n                this.predictKernel = makeKernel(predict3D$1, {\n                    output: [width, height, depth],\n                    functions: [activate$3],\n                    immutable: true,\n                });\n                this.compareKernel = makeKernel(compare3D$1, {\n                    output: [width, height, depth],\n                    functions: [measure$3],\n                    immutable: true,\n                });\n            }\n            else {\n                this.predictKernel = makeKernel(predict2D$1, {\n                    output: [width, height],\n                    functions: [activate$3],\n                    immutable: true,\n                });\n                this.compareKernel = makeKernel(compare2D$1, {\n                    output: [width, height],\n                    functions: [measure$3],\n                    immutable: true,\n                });\n            }\n        }\n        predict() {\n            release(this.weights);\n            this.weights = this.predictKernel(this.inputLayer.weights);\n        }\n        compare() {\n            release(this.inputLayer.deltas);\n            this.inputLayer.deltas = this.compareKernel(this.weights, this.deltas);\n        }\n    }\n    function relu$1(inputLayer, settings) {\n        return new Relu(inputLayer, settings);\n    }\n\n    function rnnCell(settings, input, recurrentInput) {\n        const { height } = settings;\n        if (typeof height !== 'number')\n            throw new Error('height not set');\n        if (recurrentInput.setDimensions) {\n            recurrentInput.setDimensions(1, height);\n        }\n        // wxh\n        const weight = random({\n            id: 'weight',\n            height,\n            width: input.height,\n            std: 0.08,\n        });\n        // whh\n        const transition = random({\n            id: 'transition',\n            height,\n            width: height,\n            std: 0.08,\n        });\n        // bhh\n        const bias = zeros({ id: 'bias', height });\n        return relu$1(add$1(add$1(multiply$1(weight, input), multiply$1(transition, recurrentInput)), bias));\n    }\n\n    class Regression extends BaseLayer {\n        constructor(settings, inputLayer) {\n            super(settings);\n            this.inputLayer = inputLayer;\n            this.validate();\n        }\n        predict() {\n            release(this.weights);\n            this.weights = clone(this.inputLayer.weights);\n        }\n        learn() {\n            // throw new Error(`${this.constructor.name}-learn is not yet implemented`)\n        }\n    }\n    // TODO: handle `loss += 0.5*dy*dy;` total and sum in learn\n    function regression(settings, inputLayer) {\n        return new Regression(settings, inputLayer);\n    }\n\n    function getMaxValue2D(inputs) {\n        let maxInput = -Infinity;\n        for (let y = 0; y < this.constants.inputHeight; y++) {\n            for (let x = 0; x < this.constants.inputWidth; x++) {\n                const input = inputs[y][x];\n                if (input > maxInput) {\n                    maxInput = input;\n                }\n            }\n        }\n        return maxInput;\n    }\n    function getMaxValue3D(inputs) {\n        let maxInput = -Infinity;\n        for (let z = 0; z < this.constants.inputDepth; z++) {\n            for (let y = 0; y < this.constants.inputHeight; y++) {\n                for (let x = 0; x < this.constants.inputWidth; x++) {\n                    const input = inputs[z][y][x];\n                    if (input > maxInput) {\n                        maxInput = input;\n                    }\n                }\n            }\n        }\n        return maxInput;\n    }\n    function getSum2D(inputs) {\n        let sum = 0;\n        for (let y = 0; y < this.constants.inputHeight; y++) {\n            for (let x = 0; x < this.constants.inputWidth; x++) {\n                sum += inputs[y][x];\n            }\n        }\n        return sum;\n    }\n    function getSum3D(inputs) {\n        let sum = 0;\n        for (let z = 0; z < this.constants.inputDepth; z++) {\n            for (let y = 0; y < this.constants.inputHeight; y++) {\n                for (let x = 0; x < this.constants.inputWidth; x++) {\n                    sum += inputs[z][y][x];\n                }\n            }\n        }\n        return sum;\n    }\n    function getExponentials(inputs, maxInput) {\n        return Math.exp(inputs[this.thread.x] - maxInput[0]);\n    }\n    function getExponentials3D(inputs, maxInput) {\n        return Math.exp(inputs[this.thread.z][this.thread.y][this.thread.x] - maxInput[0]);\n    }\n    function predict2D(exponentials, exponentialsSum) {\n        return exponentials[this.thread.y][this.thread.x] / exponentialsSum[0];\n    }\n    function predict3D(exponentials, exponentialsSum) {\n        return (exponentials[this.thread.z][this.thread.y][this.thread.x] /\n            exponentialsSum[0]);\n    }\n    function compare2D(target, exponentials) {\n        let indicator = 0;\n        const index = this.thread.x + this.thread.y * this.output.x;\n        if (index === target) {\n            indicator = 1;\n        }\n        return -(indicator - exponentials[this.thread.y][this.thread.x]);\n    }\n    function compare3D(target, exponentials) {\n        let indicator = 0;\n        const index = this.thread.x +\n            this.thread.y * this.output.x +\n            this.thread.z * this.output.x * this.output.y;\n        if (index === target) {\n            indicator = 1;\n        }\n        return -(indicator - exponentials[this.thread.z][this.thread.y][this.thread.x]);\n    }\n    // TODO: handle: `return -Math.log(this.es[y]);` in learn\n    class SoftMax extends Modifier {\n        constructor(inputLayer, settings) {\n            super(inputLayer, settings);\n            this.errors = null;\n            this.getExponentialsKernel = null;\n            this.getMaxValueKernel = null;\n            this.getSumKernel = null;\n            this.validate();\n            if (this.depth > 0) {\n                this.weights = randos3D(this.width, this.height, this.depth);\n                this.deltas = zeros3D(this.width, this.height, this.depth);\n            }\n            else if (this.height > 0) {\n                this.weights = randos2D(this.width, this.height);\n                this.deltas = zeros2D(this.width, this.height);\n            }\n            else {\n                this.weights = randos(this.width);\n                this.deltas = zeros$1(this.width);\n            }\n        }\n        setupKernels() {\n            const { width, height, depth } = this;\n            if (depth > 0) {\n                this.getExponentialsKernel = makeKernel(getExponentials3D, {\n                    output: [width, height, depth],\n                });\n                this.getMaxValueKernel = makeKernel(getMaxValue3D, {\n                    output: [1, 1, 1],\n                    constants: {\n                        inputWidth: width,\n                        inputHeight: height,\n                        inputDepth: depth,\n                    },\n                });\n                this.getSumKernel = makeKernel(getSum3D, {\n                    output: [1, 1, 1],\n                    constants: {\n                        inputWidth: width,\n                        inputHeight: height,\n                        inputDepth: depth,\n                    },\n                });\n                this.predictKernel = makeKernel(predict3D, {\n                    output: [width, height, depth],\n                });\n                this.compareKernel = makeKernel(compare3D, {\n                    output: [width, height, depth],\n                    immutable: true,\n                });\n            }\n            else {\n                this.getExponentialsKernel = makeKernel(getExponentials, {\n                    output: [width, height],\n                });\n                this.getMaxValueKernel = makeKernel(getMaxValue2D, {\n                    output: [1, 1],\n                    constants: {\n                        inputWidth: width,\n                        inputHeight: height,\n                    },\n                });\n                this.getSumKernel = makeKernel(getSum2D, {\n                    output: [1, 1],\n                    constants: {\n                        inputWidth: width,\n                        inputHeight: height,\n                    },\n                });\n                this.predictKernel = makeKernel(predict2D, {\n                    output: [width, height],\n                });\n                this.compareKernel = makeKernel(compare2D, {\n                    output: [width, height],\n                    immutable: true,\n                });\n            }\n        }\n        predict() {\n            const maxValue = this.getMaxValueKernel(this.inputLayer.weights);\n            const exponentials = this.getExponentialsKernel(this.inputLayer.weights, maxValue);\n            const exponentialsSum = this.getSumKernel(exponentials);\n            this.weights = this.predictKernel(exponentials, exponentialsSum);\n        }\n        compare(targetValues) {\n            const { deltas, errors } = this;\n            this.errors = this.compareKernel(targetValues[0], deltas);\n            this.deltas = clone(this.errors);\n            release(deltas);\n            release(errors);\n            const inputLayerDeltas = this.inputLayer.deltas;\n            this.inputLayer.deltas = clone(this.deltas);\n            release(inputLayerDeltas);\n        }\n    }\n    function softMax(inputLayer, settings) {\n        return new SoftMax(inputLayer, settings);\n    }\n\n    class SVM extends BaseLayer {\n        constructor(inputLayer, settings) {\n            super(settings);\n            this.inputLayer = inputLayer;\n        }\n        predict() {\n            release(this.weights);\n            this.weights = clone(this.inputLayer.weights);\n            this.validate();\n        }\n        learn() {\n            // throw new Error(`${this.constructor.name}-learn is not yet implemented`)\n        }\n    }\n    // function learn(target) {\n    //   if (y === i) {\n    //     continue;\n    //   }\n    //   const ydiff = -yscore + x.w[i] + margin;\n    //   if (ydiff > 0) {\n    //     // violating dimension, apply loss\n    //     x.dw[i] += 1;\n    //     x.dw[y] -= 1;\n    //     loss += ydiff;\n    //   }\n    // }\n    function svm(inputLayer, settings) {\n        return new SVM(inputLayer, settings);\n    }\n\n    function predict(value) {\n        return value[this.thread.x][this.thread.y];\n    }\n    const compare = predict;\n    class Transpose extends Modifier {\n        get width() {\n            return this.inputLayer.height;\n        }\n        get height() {\n            return this.inputLayer.width;\n        }\n        constructor(inputLayer) {\n            super(inputLayer);\n            this.validate();\n        }\n        setupKernels() {\n            this.predictKernel = makeKernel(predict, {\n                output: [this.height, this.width],\n            });\n            this.compareKernel = makeKernel(compare, {\n                output: [this.width, this.height],\n            });\n        }\n        predict() {\n            this.weights = this.predictKernel(this.inputLayer.weights);\n        }\n        compare() {\n            this.inputLayer.deltas = this.compareKernel(this.deltas);\n        }\n    }\n    function transpose(inputLayer) {\n        return new Transpose(inputLayer);\n    }\n\n    const layerTypes = {\n        Activation,\n        Internal,\n        InternalModel,\n        EntryPoint,\n        Filter,\n        Model,\n        Modifier,\n        Operator,\n        Target,\n    };\n\n    var layer = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        layerTypes: layerTypes,\n        Add: Add,\n        add: add$1,\n        arthurFeedForward: arthurFeedForward,\n        BaseLayer: BaseLayer,\n        baseLayerDefaultSettings: baseLayerDefaultSettings,\n        Convolution: Convolution,\n        convolution: convolution,\n        Dropout: Dropout,\n        dropout: dropout,\n        feedForward: feedForward,\n        FullyConnected: FullyConnected,\n        fullyConnected: fullyConnected,\n        gru: gru,\n        Input: Input,\n        input: input,\n        LeakyRelu: LeakyRelu,\n        leakyRelu: leakyRelu,\n        lstmCell: lstmCell,\n        Multiply: Multiply,\n        multiply: multiply$1,\n        MultiplyElement: MultiplyElement,\n        multiplyElement: multiplyElement$1,\n        Negative: Negative,\n        negative: negative,\n        Ones: Ones,\n        ones: ones,\n        output: output,\n        Pool: Pool,\n        pool: pool,\n        Random: Random,\n        random: random,\n        RecurrentInput: RecurrentInput,\n        RecurrentZeros: RecurrentZeros,\n        rnnCell: rnnCell,\n        Regression: Regression,\n        regression: regression,\n        Relu: Relu,\n        relu: relu$1,\n        Sigmoid: Sigmoid,\n        sigmoid: sigmoid$1,\n        SoftMax: SoftMax,\n        softMax: softMax,\n        SVM: SVM,\n        svm: svm,\n        Tanh: Tanh,\n        tanh: tanh$1,\n        Target: Target,\n        target: target,\n        Transpose: Transpose,\n        transpose: transpose,\n        Zeros: Zeros,\n        zeros: zeros\n    });\n\n    const layerNameTypes = Object.keys(layer);\n    function layerFromJSON(jsonLayer, inputLayer1, inputLayer2) {\n        if (!layerNameTypes.find((layerNameType) => layerNameType === jsonLayer.type)) {\n            return null;\n        }\n        const Layer = layer[jsonLayer.type];\n        if (Layer.prototype instanceof layerTypes.Filter) {\n            if (!inputLayer1)\n                throw new Error('inputLayer missing');\n            return new Layer(jsonLayer, inputLayer1);\n        }\n        else if (Layer.prototype instanceof layerTypes.Activation ||\n            Layer.prototype instanceof layerTypes.Modifier) {\n            if (!inputLayer1)\n                throw new Error('inputLayer missing');\n            return new Layer(inputLayer1, jsonLayer);\n        }\n        else if (Layer.prototype instanceof layerTypes.Internal) {\n            return new Layer(jsonLayer);\n        }\n        else if (Layer.prototype instanceof layerTypes.Operator) {\n            if (!inputLayer1)\n                throw new Error('inputLayer1 missing');\n            if (!inputLayer2)\n                throw new Error('inputLayer2 missing');\n            return new Layer(inputLayer1, inputLayer2, jsonLayer);\n        }\n        else if (Layer.prototype instanceof layerTypes.InternalModel ||\n            Layer.prototype instanceof layerTypes.EntryPoint ||\n            Layer.prototype instanceof layerTypes.Model) {\n            return new Layer(jsonLayer);\n        }\n        else if (Layer === Target) {\n            if (!inputLayer1)\n                throw new Error('inputLayer missing');\n            return new Layer(jsonLayer, inputLayer1);\n        }\n        return null;\n    }\n\n    class LookupTable {\n        constructor(data, prop) {\n            this.prop = null;\n            this.table = {};\n            this.length = 0;\n            const table = this.table;\n            if (prop) {\n                this.prop = prop;\n                for (let i = 0; i < data.length; i++) {\n                    const datum = data[i];\n                    const object = datum[prop];\n                    for (const p in object) {\n                        if (!object.hasOwnProperty(p))\n                            continue;\n                        if (table.hasOwnProperty(p))\n                            continue;\n                        table[p] = this.length++;\n                    }\n                }\n            }\n            else if (Array.isArray(data) && Array.isArray(data[0])) {\n                for (let i = 0; i < data.length; i++) {\n                    const array = data[i];\n                    for (let j = 0; j < array.length; j++) {\n                        const object = array[j];\n                        for (const p in object) {\n                            if (!object.hasOwnProperty(p))\n                                continue;\n                            if (table.hasOwnProperty(p))\n                                continue;\n                            table[p] = this.length++;\n                        }\n                    }\n                }\n            }\n            else {\n                for (let i = 0; i < data.length; i++) {\n                    const object = data[i];\n                    for (const p in object) {\n                        if (!object.hasOwnProperty(p))\n                            continue;\n                        if (table.hasOwnProperty(p))\n                            continue;\n                        table[p] = this.length++;\n                    }\n                }\n            }\n        }\n    }\n\n    var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n    function createCommonjsModule(fn, basedir, module) {\n    \treturn module = {\n    \t\tpath: basedir,\n    \t\texports: {},\n    \t\trequire: function (path, base) {\n    \t\t\treturn commonjsRequire(path, (base === undefined || base === null) ? module.path : base);\n    \t\t}\n    \t}, fn(module, module.exports), module.exports;\n    }\n\n    function commonjsRequire () {\n    \tthrow new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');\n    }\n\n    var browser = createCommonjsModule(function (module, exports) {\n    var __assign = (commonjsGlobal && commonjsGlobal.__assign) || function () {\n        __assign = Object.assign || function(t) {\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\n                s = arguments[i];\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                    t[p] = s[p];\n            }\n            return t;\n        };\n        return __assign.apply(this, arguments);\n    };\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.thaw = exports.Block = exports.Thaw = void 0;\n    /**\n     * thaw an array of items\n     */\n    var Thaw = /** @class */ (function () {\n        function Thaw(items, options) {\n            var _this = this;\n            if (options === void 0) { options = {}; }\n            var _a = __assign(__assign({}, Thaw.defaultSettings), options), each = _a.each, done = _a.done;\n            this.i = 0;\n            this.isStopped = false;\n            this.items = items;\n            this.options = options;\n            this.tick = function () {\n                if (_this.isStopped)\n                    return;\n                _this.timeout = setTimeout(_this.tick, 0);\n                if (Thaw.thawing)\n                    return;\n                var item = _this.items[_this.i];\n                if (_this.i >= _this.items.length) {\n                    if (done !== null) {\n                        Thaw.thawing = true;\n                        done();\n                        Thaw.thawing = false;\n                    }\n                    _this.isStopped = true;\n                    clearTimeout(_this.timeout);\n                    return;\n                }\n                if (each !== null) {\n                    Thaw.thawing = true;\n                    each(item, _this.i);\n                    Thaw.thawing = false;\n                }\n                else if (item !== undefined) {\n                    item();\n                }\n                _this.i++;\n            };\n            Thaw.thaws.push(this);\n            if (!options.delay) {\n                this.tick();\n            }\n        }\n        Object.defineProperty(Thaw, \"isThawing\", {\n            /**\n             * returns if Thaw.js is thawing\n             */\n            get: function () {\n                return Thaw.thawing;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        /**\n         * Stops all Thaw instances\n         */\n        Thaw.stopAll = function () {\n            for (var i = 0; i < Thaw.thaws.length; i++) {\n                Thaw.thaws[i].stop();\n            }\n        };\n        /**\n         * readies thaw to continue\n         */\n        Thaw.prototype.makeReady = function () {\n            if (this.isStopped) {\n                this.isStopped = false;\n                return true;\n            }\n            return false;\n        };\n        /**\n         * Adds an item to the end of this instance of Thaw and readies Thaw to process it\n         */\n        Thaw.prototype.add = function (item) {\n            this.items.push(item);\n            if (this.makeReady()) {\n                this.tick();\n            }\n            return this;\n        };\n        /**\n         * Inserts an item just after the current item being processed in Thaw and readies Thaw to process it\n         */\n        Thaw.prototype.insert = function (item) {\n            this.items.splice(this.i, 0, item);\n            if (this.makeReady()) {\n                this.tick();\n            }\n            return this;\n        };\n        /**\n         * Adds an Array to the end of this instance of Thaw and readies Thaw to process it\n         */\n        Thaw.prototype.addArray = function (items) {\n            this.items = this.items.concat(items);\n            if (this.makeReady()) {\n                this.tick();\n            }\n            return this;\n        };\n        /**\n         * Inserts an Array just after the current item being processed in Thaw and readies Thaw to process them\n         */\n        Thaw.prototype.insertArray = function (items) {\n            var before = this.items.splice(0, this.i);\n            var after = this.items;\n            this.items = before.concat(items, after);\n            if (this.makeReady()) {\n                this.tick();\n            }\n            return this;\n        };\n        /**\n         * Stops this instance of Thaw\n         */\n        Thaw.prototype.stop = function () {\n            this.isStopped = true;\n            clearTimeout(this.timeout);\n            if (this.options.done) {\n                this.options.done();\n            }\n            return this;\n        };\n        Thaw.thawing = false;\n        Thaw.thaws = [];\n        Thaw.defaultSettings = {\n            each: null,\n            done: null\n        };\n        return Thaw;\n    }());\n    exports.Thaw = Thaw;\n    /**\n     * simple thaw\n     */\n    function thaw(items, options) {\n        return new Thaw(items, options);\n    }\n    exports.thaw = thaw;\n    var Block = /** @class */ (function () {\n        function Block(options, count) {\n            if (count === void 0) { count = 200; }\n            this.index = 0;\n            this.thaws = [];\n            this.count = count;\n            this.options = options;\n        }\n        /**\n         * add an item to the end of items\n         */\n        Block.prototype.add = function (item) {\n            var next = this.next();\n            next.add(item);\n            return this;\n        };\n        /**\n         * add an Array to the end of items\n         */\n        Block.prototype.addArray = function (items) {\n            var next = this.next();\n            next.addArray(items);\n            return this;\n        };\n        /**\n         * insert an item into items @ current position\n         */\n        Block.prototype.insert = function (item) {\n            var next = this.next();\n            next.insert(item);\n            return this;\n        };\n        /**\n         * insert and array into items @ current position\n         */\n        Block.prototype.insertArray = function (items) {\n            var next = this.next();\n            next.insertArray(items);\n            return this;\n        };\n        /**\n         * Stops all thaws in this block\n         */\n        Block.prototype.stop = function () {\n            for (var i = 0; i < this.thaws.length; i++) {\n                this.thaws[i].stop();\n            }\n            return this;\n        };\n        /**\n         * Get next available in block\n         */\n        Block.prototype.next = function () {\n            var thaw;\n            var thaws = this.thaws;\n            if (thaws.length < this.count) {\n                thaw = new Thaw([], this.options);\n                thaws.push(thaw);\n            }\n            else {\n                thaw = thaws[this.index] || null;\n            }\n            this.index++;\n            if (this.index >= this.count) {\n                this.index = 0;\n            }\n            return thaw;\n        };\n        return Block;\n    }());\n    exports.Block = Block;\n    if (typeof window !== 'undefined') {\n        // @ts-ignore\n        window.Thaw = Thaw;\n        // @ts-ignore\n        window.thaw = thaw;\n        // @ts-ignore\n        window.Thaw.Block = Block;\n    }\n    });\n\n    const defaults$3 = {\n        learningRate: 0.3,\n        binaryThresh: 0.5,\n        initPraxis: (layerTemplate, settings) => {\n            var _a;\n            return momentumRootMeanSquaredPropagation(layerTemplate, (_a = layerTemplate.settings.praxisOpts) !== null && _a !== void 0 ? _a : settings);\n        },\n    };\n    const trainDefaults$3 = {\n        iterations: 20000,\n        errorThresh: 0.005,\n        log: false,\n        logPeriod: 10,\n        learningRate: 0.3,\n        callbackPeriod: 10,\n        errorCheckInterval: 100,\n        timeout: Infinity,\n    };\n    class FeedForward {\n        constructor(options = {}) {\n            this.trainOpts = {};\n            this.layers = null;\n            this._inputLayer = null;\n            this._hiddenLayers = null;\n            this._outputLayer = null;\n            this._model = null;\n            this.meanSquaredError = null;\n            this.inputLookup = null;\n            this.inputLookupLength = null;\n            this.outputLookup = null;\n            this.outputLookupLength = null;\n            this.options = { ...defaults$3, ...options };\n            this._updateTrainingOptions({\n                ...trainDefaults$3,\n                ...options,\n            });\n        }\n        static _validateTrainingOptions(options) {\n            const { iterations, errorThresh, log, logPeriod, learningRate, callback, callbackPeriod, timeout, } = options;\n            const validations = {\n                iterations: () => typeof iterations === 'number' && iterations > 0,\n                errorThresh: () => typeof errorThresh === 'number' && errorThresh > 0 && errorThresh < 1,\n                log: () => typeof log === 'function' || typeof log === 'boolean',\n                logPeriod: () => typeof logPeriod === 'number' && logPeriod > 0,\n                learningRate: () => typeof learningRate === 'number' &&\n                    learningRate > 0 &&\n                    learningRate < 1,\n                callback: () => typeof callback === 'function' || callback === null,\n                callbackPeriod: () => typeof callbackPeriod === 'number' && callbackPeriod > 0,\n                timeout: () => typeof timeout === 'number' && timeout > 0,\n            };\n            Object.keys(trainDefaults$3).forEach((key) => {\n                if (validations.hasOwnProperty(key) && !validations[key]()) {\n                    const val = options[key];\n                    throw new Error(`[${key}, ${(val !== null && val !== void 0 ? val : 'undefined').toString()}] is out of normal training range, your network will probably not train.`);\n                }\n            });\n        }\n        /**\n         * if a method is passed in method is used\n         * if false passed in nothing is logged\n         */\n        _setLogMethod(log) {\n            if (typeof log === 'function') {\n                this.trainOpts.log = log;\n            }\n            else if (log) {\n                // eslint-disable-next-line\n                this.trainOpts.log = console.log;\n            }\n            else {\n                this.trainOpts.log = false;\n            }\n        }\n        _updateTrainingOptions(opts) {\n            var _a;\n            this.trainOpts = { ...trainDefaults$3, ...this.trainOpts, ...opts };\n            FeedForward._validateTrainingOptions(this.trainOpts);\n            this._setLogMethod((_a = opts.log) !== null && _a !== void 0 ? _a : this.trainOpts.log);\n            const { callback, callbackPeriod, errorCheckInterval } = this.trainOpts;\n            if (callback && callbackPeriod !== errorCheckInterval) {\n                console.warn(`options.callbackPeriod with value of ${(callbackPeriod !== null && callbackPeriod !== void 0 ? callbackPeriod : 'undefined').toString()} does not match options.errorCheckInterval with value of ${(errorCheckInterval !== null && errorCheckInterval !== void 0 ? errorCheckInterval : 'undefined').toString()}, if logging error, it will repeat.  These values may need to match`);\n            }\n        }\n        _connectOptionsLayers() {\n            const { inputLayerIndex, outputLayerIndex, layers } = this.options;\n            if (!layers)\n                throw new Error('this.options.layers in unexpected state');\n            if (typeof inputLayerIndex !== 'number')\n                throw new Error('inputLayerIndex not a number');\n            if (typeof outputLayerIndex !== 'number')\n                throw new Error('inputLayerIndex not a number');\n            const inputLayer = layers[inputLayerIndex];\n            if (!inputLayer) {\n                throw new Error('inputLayer not found in this.options.layers');\n            }\n            const outputLayer = layers[outputLayerIndex];\n            if (!outputLayer) {\n                throw new Error('outputLayer not found in this.options.layers');\n            }\n            this._inputLayer = inputLayer;\n            this._hiddenLayers = layers.slice(inputLayerIndex, outputLayerIndex - inputLayerIndex);\n            this._outputLayer = outputLayer;\n            return layers;\n        }\n        _connectNewLayers() {\n            const { inputLayer, outputLayer } = this.options;\n            if (!inputLayer)\n                throw new Error('inputLayer not defined');\n            const layers = [];\n            this._inputLayer = inputLayer();\n            const hiddenLayers = this._connectHiddenLayers(this._inputLayer);\n            if (!outputLayer)\n                throw new Error('outputLayer not defined');\n            this._outputLayer = outputLayer(hiddenLayers[hiddenLayers.length - 1], hiddenLayers.length);\n            layers.push(this._inputLayer);\n            layers.push(...hiddenLayers);\n            layers.push(this._outputLayer);\n            return flattenLayers(layers);\n        }\n        _connectHiddenLayers(previousLayer) {\n            this._hiddenLayers = [];\n            const result = [];\n            const { hiddenLayers } = this.options;\n            if (!hiddenLayers)\n                throw new Error('hiddenLayers not defined');\n            for (let i = 0; i < hiddenLayers.length; i++) {\n                const hiddenLayer = hiddenLayers[i](previousLayer, i);\n                result.push(hiddenLayer);\n                this._hiddenLayers.push(hiddenLayer);\n                previousLayer = hiddenLayer;\n            }\n            return result;\n        }\n        initialize() {\n            this.layers = this.options.layers\n                ? this._connectOptionsLayers()\n                : this._connectNewLayers();\n            this.initializeLayers(this.layers);\n            this._model = this.layers.filter((l) => l instanceof Model);\n        }\n        initializeLayers(layers) {\n            var _a, _b;\n            for (let i = 0; i < layers.length; i++) {\n                const layer = layers[i];\n                // TODO: optimize for when training or just running\n                layer.setupKernels(true);\n                if (layer instanceof Model &&\n                    layer.praxis === null &&\n                    typeof this.options.initPraxis === 'function') {\n                    layer.praxis = this.options.initPraxis(layer, (_b = (_a = layer.settings.praxisOpts) !== null && _a !== void 0 ? _a : this.options.praxisOpts) !== null && _b !== void 0 ? _b : {});\n                    layer.praxis.setupKernels();\n                }\n            }\n            const lastLayer = layers[layers.length - 1];\n            this.meanSquaredError = new MeanSquaredError({\n                width: lastLayer.width,\n                height: lastLayer.height,\n            });\n        }\n        run(input) {\n            let typeSafeInput;\n            if (Array.isArray(input) || input.buffer) {\n                typeSafeInput = input;\n            }\n            else {\n                if (this.inputLookup) {\n                    typeSafeInput = lookup.toArray(this.inputLookup, input, this.inputLookupLength);\n                }\n                else {\n                    throw new Error('input is incompatible with net');\n                }\n            }\n            let output = this.runInput(typeSafeInput);\n            if (output instanceof gpu_js.Texture) {\n                output = output.toArray();\n            }\n            if (this.outputLookup) {\n                return lookup.toObject(this.outputLookup, output);\n            }\n            return output;\n        }\n        runInput(input) {\n            if (!this.layers)\n                throw new Error('not initialized');\n            this.layers[0].predict(input);\n            for (let i = 1; i < this.layers.length; i++) {\n                this.layers[i].predict();\n            }\n            return this.layers[this.layers.length - 1].weights;\n        }\n        train(data, options = {}) {\n            const { preparedData, status, endTime } = this._prepTraining(data, options);\n            let continueTicking = true;\n            const calculateError = () => this._calculateTrainingError(preparedData);\n            const trainPatterns = () => this._trainPatterns(preparedData);\n            while (continueTicking) {\n                continueTicking = this._trainingTick(status, endTime, calculateError, trainPatterns);\n            }\n            return status;\n        }\n        async trainAsync(data, options = {}) {\n            const { preparedData, status, endTime } = this._prepTraining(data, options);\n            return await new Promise((resolve, reject) => {\n                try {\n                    const calculateError = () => this._calculateTrainingError(preparedData);\n                    const trainPatterns = () => this._trainPatterns(preparedData);\n                    const thawedTrain = new browser.Thaw(new Array(this.trainOpts.iterations), {\n                        delay: true,\n                        each: () => this._trainingTick(status, endTime, calculateError, trainPatterns) || thawedTrain.stop(),\n                        done: () => resolve(status),\n                    });\n                    thawedTrain.tick();\n                }\n                catch (trainError) {\n                    reject(trainError);\n                }\n            });\n        }\n        _trainingTick(status, endTime, calculateError, trainPatterns) {\n            const { trainOpts } = this;\n            if (status.iterations >= trainOpts.iterations ||\n                status.error <= trainOpts.errorThresh ||\n                Date.now() >= endTime) {\n                return false;\n            }\n            if (typeof trainOpts.log === 'function' &&\n                status.iterations % trainOpts.logPeriod === 0) {\n                status.error = calculateError();\n                trainOpts.log(`iterations: ${status.iterations}, training error: ${status.error}`);\n            }\n            else if (status.iterations % trainOpts.errorCheckInterval ===\n                0) {\n                status.error = calculateError();\n            }\n            else {\n                trainPatterns();\n            }\n            if (trainOpts.callback &&\n                status.iterations % trainOpts.callbackPeriod === 0) {\n                trainOpts.callback(Object.assign(status));\n            }\n            status.iterations++;\n            return true;\n        }\n        _prepTraining(data, options) {\n            this._updateTrainingOptions(options);\n            const formattedData = this.formatData(data);\n            const endTime = this.trainOpts.timeout\n                ? Date.now() + this.trainOpts.timeout\n                : 0;\n            const status = {\n                error: 1,\n                iterations: 0,\n            };\n            this.verifyIsInitialized();\n            return {\n                preparedData: this.transferData(formattedData),\n                status,\n                endTime,\n            };\n        }\n        verifyIsInitialized() {\n            if (!this._model) {\n                this.initialize();\n            }\n        }\n        _calculateTrainingError(preparedData) {\n            let sum = new Float32Array([0]);\n            const meanSquaredError = this.meanSquaredError;\n            for (let i = 0; i < preparedData.length; ++i) {\n                const prevSum = sum;\n                const error = this._trainPattern(preparedData[i].input, preparedData[i].output, true);\n                sum = meanSquaredError.add(sum, error);\n                release(error);\n                release(prevSum);\n            }\n            const result = meanSquaredError.divide(preparedData.length, sum);\n            release(sum);\n            if (result instanceof gpu_js.Texture) {\n                const resultArray = result.toArray();\n                release(result);\n                return resultArray[0];\n            }\n            return result[0];\n        }\n        /**\n         * @param data\n         * @private\n         */\n        _trainPatterns(data) {\n            for (let i = 0; i < data.length; ++i) {\n                this._trainPattern(data[i].input, data[i].output, false);\n            }\n        }\n        _trainPattern(input, target, logErrorRate) {\n            var _a;\n            // forward propagate\n            this.runInput(input);\n            // back propagate\n            this._calculateDeltas(target);\n            this.adjustWeights();\n            if (logErrorRate) {\n                if (!((_a = this._outputLayer) === null || _a === void 0 ? void 0 : _a.errors)) {\n                    throw new Error('outputLayer.errors not defined');\n                }\n                return this.meanSquaredError.calculate(this._outputLayer.errors);\n            }\n            return null;\n        }\n        _calculateDeltas(target) {\n            const layers = this.layers;\n            for (let i = layers.length - 1; i > -1; i--) {\n                layers[i].compare(target);\n            }\n        }\n        /**\n         *\n         */\n        adjustWeights() {\n            const _model = this._model;\n            for (let i = 0; i < _model.length; i++) {\n                _model[i].learn(this.trainOpts.learningRate);\n            }\n        }\n        /**\n         *\n         * @param data\n         * @returns {*}\n         */\n        formatData(data) {\n            if (!Array.isArray(data)) {\n                // turn stream datum into array\n                const tmp = [];\n                tmp.push(data);\n                data = tmp;\n            }\n            // turn sparse hash input into arrays with 0s as filler\n            const inputDatumCheck = data[0].input;\n            let formattedData;\n            if (Array.isArray(data) &&\n                !Array.isArray(inputDatumCheck) &&\n                !(inputDatumCheck instanceof Float32Array)) {\n                if (!this.inputLookup) {\n                    const lookupTable = new LookupTable(data, 'input');\n                    this.inputLookup = lookupTable.table;\n                    this.inputLookupLength = lookupTable.length;\n                }\n                formattedData = data.map((datumParam) => {\n                    const array = lookup.toArray(this.inputLookup, datumParam.input, this.inputLookupLength);\n                    return { input: array };\n                }, this);\n            }\n            else {\n                formattedData = data;\n            }\n            const outputDatumCheck = data[0].output;\n            if (!Array.isArray(outputDatumCheck) &&\n                !(outputDatumCheck instanceof Float32Array)) {\n                if (!this.outputLookup) {\n                    const lookupTable = new LookupTable(data, 'output');\n                    this.outputLookup = lookupTable.table;\n                    this.outputLookupLength = lookupTable.length;\n                }\n                formattedData = data.map((datumParam, index) => {\n                    const array = lookup.toArray(this.outputLookup, datumParam.output, this.inputLookupLength);\n                    return {\n                        input: formattedData[index].input,\n                        output: array,\n                    };\n                }, this);\n            }\n            return formattedData;\n        }\n        transferData(formattedData) {\n            const transferredData = new Array(formattedData.length);\n            const transferInput = makeKernel(function (value) {\n                return value[this.thread.x];\n            }, {\n                output: [formattedData[0].input.length],\n                immutable: true,\n            });\n            const transferOutput = makeKernel(function (value) {\n                return value[this.thread.x];\n            }, {\n                output: [formattedData[0].output.length],\n                immutable: true,\n            });\n            for (let i = 0; i < formattedData.length; i++) {\n                const formattedDatum = formattedData[i];\n                transferredData[i] = {\n                    input: transferInput(formattedDatum.input),\n                    output: transferOutput(formattedDatum.output),\n                };\n            }\n            return transferredData;\n        }\n        /**\n         *\n         * @param data\n         * @returns {\n         *  {\n         *    error: number,\n         *    misclasses: Array\n         *  }\n         * }\n         */\n        test() {\n            throw new Error(`${this.constructor.name}-test is not yet implemented`);\n        }\n        /**\n         *\n         */\n        toJSON() {\n            var _a;\n            if (!this.layers) {\n                this.initialize();\n            }\n            if (!this._model ||\n                !this.layers ||\n                !this._inputLayer ||\n                !this._hiddenLayers ||\n                !this._outputLayer) {\n                throw new Error('network is not initialized');\n            }\n            const jsonLayers = [];\n            for (let i = 0; i < this.layers.length; i++) {\n                const layer = this.layers[i];\n                const jsonLayer = layer.toJSON();\n                if (layer.hasOwnProperty('inputLayer')) {\n                    jsonLayer.inputLayerIndex = this.layers.indexOf(layer.inputLayer);\n                }\n                else if (layer.hasOwnProperty('inputLayer1') &&\n                    layer.hasOwnProperty('inputLayer2')) {\n                    jsonLayer.inputLayer1Index = this.layers.indexOf(layer.inputLayer1);\n                    jsonLayer.inputLayer2Index = this.layers.indexOf(layer.inputLayer2);\n                }\n                jsonLayers.push(jsonLayer);\n            }\n            return {\n                type: this.constructor.name,\n                sizes: (_a = this.options.sizes) !== null && _a !== void 0 ? _a : [this._inputLayer.height]\n                    .concat(this._hiddenLayers.map((l) => l.height))\n                    .concat([this._outputLayer.height]),\n                outputLayerIndex: this.layers.indexOf(this._outputLayer),\n                layers: jsonLayers,\n                inputLayerIndex: this.layers.indexOf(this._inputLayer),\n            };\n        }\n        static fromJSON(json, getLayer) {\n            var _a, _b, _c, _d;\n            const jsonLayers = json.layers;\n            const layers = [];\n            const inputLayer = getLayer\n                ? (_a = layerFromJSON(jsonLayers[0])) !== null && _a !== void 0 ? _a : getLayer(jsonLayers[0]) : layerFromJSON(jsonLayers[0]);\n            if (!inputLayer)\n                throw new Error('unable to find layer');\n            layers.push(inputLayer);\n            for (let i = 1; i < jsonLayers.length; i++) {\n                const jsonLayer = jsonLayers[i];\n                if (typeof jsonLayer.inputLayerIndex === 'undefined' &&\n                    typeof jsonLayer.inputLayer1Index === 'undefined' &&\n                    typeof jsonLayer.inputLayer2Index === 'undefined') {\n                    const layer = getLayer\n                        ? (_b = layerFromJSON(jsonLayer)) !== null && _b !== void 0 ? _b : getLayer(jsonLayer) : layerFromJSON(jsonLayer);\n                    if (!layer)\n                        throw new Error('unable to find layer');\n                    layers.push(layer);\n                }\n                else if (typeof jsonLayer.inputLayerIndex === 'number') {\n                    const inputLayer = layers[jsonLayer.inputLayerIndex];\n                    if (!inputLayer) {\n                        throw new Error('inputLayer1 not found');\n                    }\n                    const layer = getLayer\n                        ? (_c = layerFromJSON(jsonLayer, inputLayer)) !== null && _c !== void 0 ? _c : getLayer(jsonLayer, inputLayer) : layerFromJSON(jsonLayer, inputLayer);\n                    if (!layer)\n                        throw new Error('unable to find layer');\n                    layers.push(layer);\n                }\n                else {\n                    if (typeof jsonLayer.inputLayer1Index !== 'number') {\n                        throw new Error('Cannot create network from provided JSON. inputLayer1Index not defined.');\n                    }\n                    if (typeof jsonLayer.inputLayer2Index !== 'number') {\n                        throw new Error('Cannot create network from provided JSON. inputLayer2Index not defined.');\n                    }\n                    const inputLayer1 = layers[jsonLayer.inputLayer1Index];\n                    const inputLayer2 = layers[jsonLayer.inputLayer2Index];\n                    if (inputLayer1 === undefined)\n                        throw new Error(`Cannot create network from provided JSON. layer of index ${jsonLayer.inputLayer1Index} not found.`);\n                    if (inputLayer2 === undefined)\n                        throw new Error(`Cannot create network from provided JSON. layer of index ${jsonLayer.inputLayer2Index} not found.`);\n                    const layer = getLayer\n                        ? (_d = layerFromJSON(jsonLayer, inputLayer1, inputLayer2)) !== null && _d !== void 0 ? _d : getLayer(jsonLayer, inputLayer1, inputLayer2) : layerFromJSON(jsonLayer, inputLayer1, inputLayer2);\n                    if (!layer)\n                        throw new Error('unable to find layer');\n                    layers.push(layer);\n                }\n            }\n            return new this({ ...json, layers });\n        }\n        /**\n         *\n         * @returns {Function}\n         */\n        toFunction() {\n            throw new Error(`${this.constructor.name}-toFunction is not yet implemented`);\n        }\n        /**\n         * This will create a TrainStream (WriteStream) for us to send the training data to.\n         * @param opts training options\n         * @returns {TrainStream|*}\n         */\n        createTrainStream() {\n            throw new Error(`${this.constructor.name}-createTrainStream is not yet implemented`);\n        }\n    }\n\n    function likely(input, net) {\n        if (!net) {\n            throw new TypeError(`Required parameter 'net' is of type ${typeof net}. Must be of type 'brain.NeuralNetwork'`);\n        }\n        const output = net.run(input);\n        let maxProp = null;\n        let maxValue = -1;\n        Object.entries(output).forEach(([key, value]) => {\n            if (typeof value !== 'undefined' &&\n                typeof value === 'number' &&\n                value > maxValue) {\n                maxProp = key;\n                maxValue = value;\n            }\n        });\n        return maxProp;\n    }\n\n    function arraysToFloat32Arrays(arrays) {\n        const result = [];\n        for (let i = 0; i < arrays.length; i++) {\n            result.push(Float32Array.from(arrays[i]));\n        }\n        return result;\n    }\n    function inputOutputArraysToFloat32Arrays(input, output) {\n        const result = [];\n        for (let i = 0; i < input.length; i++) {\n            result.push(Float32Array.from(input[i]));\n        }\n        for (let i = 0; i < output.length; i++) {\n            result.push(Float32Array.from(output[i]));\n        }\n        return result;\n    }\n    function arrayToFloat32Arrays(array) {\n        const result = [];\n        for (let i = 0; i < array.length; i++) {\n            result.push(Float32Array.from([array[i]]));\n        }\n        return result;\n    }\n    function inputOutputArrayToFloat32Arrays(input, output) {\n        const result = [];\n        for (let i = 0; i < input.length; i++) {\n            result.push(Float32Array.from([input[i]]));\n        }\n        for (let i = 0; i < output.length; i++) {\n            result.push(Float32Array.from([output[i]]));\n        }\n        return result;\n    }\n    function arrayToFloat32Array(array) {\n        return Float32Array.from(array);\n    }\n    function inputOutputObjectsToFloat32Arrays(input, output, inputTable, outputTable, inputLength, outputLength) {\n        const results = [];\n        for (let i = 0; i < input.length; i++) {\n            const object = input[i];\n            const result = new Float32Array(inputLength);\n            for (const p in object) {\n                if (object.hasOwnProperty(p)) {\n                    result[inputTable[p]] = object[p];\n                }\n            }\n            results.push(result);\n        }\n        for (let i = 0; i < output.length; i++) {\n            const object = output[i];\n            const result = new Float32Array(outputLength);\n            for (const p in object) {\n                if (object.hasOwnProperty(p)) {\n                    result[outputTable[p]] = object[p];\n                }\n            }\n            results.push(result);\n        }\n        return results;\n    }\n    function objectToFloat32Arrays(object) {\n        const result = [];\n        for (const p in object) {\n            if (!object.hasOwnProperty(p))\n                continue;\n            result.push(Float32Array.from([object[p]]));\n        }\n        return result;\n    }\n    function inputOutputObjectToFloat32Arrays(input, output) {\n        const result = [];\n        for (const p in input) {\n            if (!input.hasOwnProperty(p))\n                continue;\n            result.push(Float32Array.from([input[p]]));\n        }\n        for (const p in output) {\n            if (!output.hasOwnProperty(p))\n                continue;\n            result.push(Float32Array.from([output[p]]));\n        }\n        return result;\n    }\n    function objectToFloat32Array(object, table, length) {\n        const result = new Float32Array(length);\n        for (const p in object) {\n            if (object.hasOwnProperty(p)) {\n                result[table[p]] = object[p];\n            }\n        }\n        return result;\n    }\n\n    function max(values) {\n        if (Array.isArray(values) || values instanceof Float32Array) {\n            return Math.max(...values);\n        }\n        else {\n            return Math.max(...Object.values(values));\n        }\n    }\n\n    function mse$1(errors) {\n        // mean squared error\n        let sum = 0;\n        for (let i = 0; i < errors.length; i++) {\n            sum += errors[i] ** 2;\n        }\n        return sum / errors.length;\n    }\n\n    function getTypedArrayFn(value, table) {\n        if (value.buffer instanceof ArrayBuffer) {\n            return null;\n        }\n        if (Array.isArray(value)) {\n            return arrayToFloat32Array;\n        }\n        if (!table)\n            throw new Error('table is not Object');\n        const { length } = Object.keys(table);\n        return (v) => {\n            const array = new Float32Array(length);\n            for (const p in table) {\n                if (!table.hasOwnProperty(p))\n                    continue;\n                if (typeof v[p] !== 'number')\n                    continue;\n                array[table[p]] = v[p] || 0;\n            }\n            return array;\n        };\n    }\n    function defaults$2() {\n        return {\n            inputSize: 0,\n            outputSize: 0,\n            binaryThresh: 0.5,\n        };\n    }\n    function trainDefaults$2() {\n        return {\n            activation: 'sigmoid',\n            iterations: 20000,\n            errorThresh: 0.005,\n            log: false,\n            logPeriod: 10,\n            leakyReluAlpha: 0.01,\n            learningRate: 0.3,\n            momentum: 0.1,\n            callbackPeriod: 10,\n            timeout: Infinity,\n            beta1: 0.9,\n            beta2: 0.999,\n            epsilon: 1e-8,\n        };\n    }\n    class NeuralNetwork {\n        constructor(options = {}) {\n            this.options = defaults$2();\n            this.trainOpts = trainDefaults$2();\n            this.sizes = [];\n            this.outputLayer = -1;\n            this.biases = [];\n            this.weights = []; // weights for bias nodes\n            this.outputs = [];\n            // state for training\n            this.deltas = [];\n            this.changes = []; // for momentum\n            this.errors = [];\n            this.errorCheckInterval = 1;\n            this.inputLookup = null;\n            this.inputLookupLength = 0;\n            this.outputLookup = null;\n            this.outputLookupLength = 0;\n            this._formatInput = null;\n            this._formatOutput = null;\n            this.runInput = (input) => {\n                this.setActivation();\n                return this.runInput(input);\n            };\n            this.calculateDeltas = (output) => {\n                this.setActivation();\n                return this.calculateDeltas(output);\n            };\n            // adam\n            this.biasChangesLow = [];\n            this.biasChangesHigh = [];\n            this.changesLow = [];\n            this.changesHigh = [];\n            this.iterations = 0;\n            this.options = { ...this.options, ...options };\n            this.updateTrainingOptions(options);\n            const { inputSize, hiddenLayers, outputSize } = this.options;\n            if (inputSize && outputSize) {\n                this.sizes = [inputSize].concat(hiddenLayers !== null && hiddenLayers !== void 0 ? hiddenLayers : []).concat([outputSize]);\n            }\n        }\n        /**\n         *\n         * Expects this.sizes to have been set\n         */\n        initialize() {\n            if (!this.sizes.length) {\n                throw new Error('Sizes must be set before initializing');\n            }\n            this.outputLayer = this.sizes.length - 1;\n            this.biases = new Array(this.outputLayer); // weights for bias nodes\n            this.weights = new Array(this.outputLayer);\n            this.outputs = new Array(this.outputLayer);\n            // state for training\n            this.deltas = new Array(this.outputLayer);\n            this.changes = new Array(this.outputLayer); // for momentum\n            this.errors = new Array(this.outputLayer);\n            for (let layerIndex = 0; layerIndex <= this.outputLayer; layerIndex++) {\n                const size = this.sizes[layerIndex];\n                this.deltas[layerIndex] = zeros$1(size);\n                this.errors[layerIndex] = zeros$1(size);\n                this.outputs[layerIndex] = zeros$1(size);\n                if (layerIndex > 0) {\n                    this.biases[layerIndex] = randos(size);\n                    this.weights[layerIndex] = new Array(size);\n                    this.changes[layerIndex] = new Array(size);\n                    for (let nodeIndex = 0; nodeIndex < size; nodeIndex++) {\n                        const prevSize = this.sizes[layerIndex - 1];\n                        this.weights[layerIndex][nodeIndex] = randos(prevSize);\n                        this.changes[layerIndex][nodeIndex] = zeros$1(prevSize);\n                    }\n                }\n            }\n            this.setActivation();\n            if (this.trainOpts.praxis === 'adam') {\n                this._setupAdam();\n            }\n        }\n        setActivation(activation) {\n            const value = activation !== null && activation !== void 0 ? activation : this.trainOpts.activation;\n            switch (value) {\n                case 'sigmoid':\n                    this.runInput = this._runInputSigmoid;\n                    this.calculateDeltas = this._calculateDeltasSigmoid;\n                    break;\n                case 'relu':\n                    this.runInput = this._runInputRelu;\n                    this.calculateDeltas = this._calculateDeltasRelu;\n                    break;\n                case 'leaky-relu':\n                    this.runInput = this._runInputLeakyRelu;\n                    this.calculateDeltas = this._calculateDeltasLeakyRelu;\n                    break;\n                case 'tanh':\n                    this.runInput = this._runInputTanh;\n                    this.calculateDeltas = this._calculateDeltasTanh;\n                    break;\n                default:\n                    throw new Error(`Unknown activation ${value}. Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'`);\n            }\n        }\n        get isRunnable() {\n            return this.sizes.length > 0;\n        }\n        run(input) {\n            if (!this.isRunnable) {\n                throw new Error('network not runnable');\n            }\n            let formattedInput;\n            if (this.inputLookup) {\n                formattedInput = lookup.toArray(this.inputLookup, input, this.inputLookupLength);\n            }\n            else {\n                formattedInput = input;\n            }\n            this.validateInput(formattedInput);\n            const output = this.runInput(formattedInput).slice(0);\n            if (this.outputLookup) {\n                return lookup.toObject(this.outputLookup, output);\n            }\n            return output;\n        }\n        _runInputSigmoid(input) {\n            this.outputs[0] = input; // set output state of input layer\n            let output = null;\n            for (let layer = 1; layer <= this.outputLayer; layer++) {\n                const activeLayer = this.sizes[layer];\n                const activeWeights = this.weights[layer];\n                const activeBiases = this.biases[layer];\n                const activeOutputs = this.outputs[layer];\n                for (let node = 0; node < activeLayer; node++) {\n                    const weights = activeWeights[node];\n                    let sum = activeBiases[node];\n                    for (let k = 0; k < weights.length; k++) {\n                        sum += weights[k] * input[k];\n                    }\n                    // sigmoid\n                    activeOutputs[node] = 1 / (1 + Math.exp(-sum));\n                }\n                output = input = activeOutputs;\n            }\n            if (!output) {\n                throw new Error('output was empty');\n            }\n            return output;\n        }\n        _runInputRelu(input) {\n            this.outputs[0] = input; // set output state of input layer\n            let output = null;\n            for (let layer = 1; layer <= this.outputLayer; layer++) {\n                const activeSize = this.sizes[layer];\n                const activeWeights = this.weights[layer];\n                const activeBiases = this.biases[layer];\n                const activeOutputs = this.outputs[layer];\n                for (let node = 0; node < activeSize; node++) {\n                    const weights = activeWeights[node];\n                    let sum = activeBiases[node];\n                    for (let k = 0; k < weights.length; k++) {\n                        sum += weights[k] * input[k];\n                    }\n                    // relu\n                    activeOutputs[node] = sum < 0 ? 0 : sum;\n                }\n                output = input = activeOutputs;\n            }\n            if (!output) {\n                throw new Error('output was empty');\n            }\n            return output;\n        }\n        _runInputLeakyRelu(input) {\n            this.outputs[0] = input; // set output state of input layer\n            const { leakyReluAlpha } = this.trainOpts;\n            let output = null;\n            for (let layer = 1; layer <= this.outputLayer; layer++) {\n                const activeSize = this.sizes[layer];\n                const activeWeights = this.weights[layer];\n                const activeBiases = this.biases[layer];\n                const activeOutputs = this.outputs[layer];\n                for (let node = 0; node < activeSize; node++) {\n                    const weights = activeWeights[node];\n                    let sum = activeBiases[node];\n                    for (let k = 0; k < weights.length; k++) {\n                        sum += weights[k] * input[k];\n                    }\n                    // leaky relu\n                    activeOutputs[node] = Math.max(sum, leakyReluAlpha * sum);\n                }\n                output = input = activeOutputs;\n            }\n            if (!output) {\n                throw new Error('output was empty');\n            }\n            return output;\n        }\n        _runInputTanh(input) {\n            this.outputs[0] = input; // set output state of input layer\n            let output = null;\n            for (let layer = 1; layer <= this.outputLayer; layer++) {\n                const activeSize = this.sizes[layer];\n                const activeWeights = this.weights[layer];\n                const activeBiases = this.biases[layer];\n                const activeOutputs = this.outputs[layer];\n                for (let node = 0; node < activeSize; node++) {\n                    const weights = activeWeights[node];\n                    let sum = activeBiases[node];\n                    for (let k = 0; k < weights.length; k++) {\n                        sum += weights[k] * input[k];\n                    }\n                    // tanh\n                    activeOutputs[node] = Math.tanh(sum);\n                }\n                output = input = activeOutputs;\n            }\n            if (!output) {\n                throw new Error('output was empty');\n            }\n            return output;\n        }\n        /**\n         *\n         * Verifies network sizes are initialized\n         * If they are not it will initialize them based off the data set.\n         */\n        verifyIsInitialized(preparedData) {\n            if (this.sizes.length && this.outputLayer > 0)\n                return;\n            this.sizes = [];\n            this.sizes.push(preparedData[0].input.length);\n            if (!this.options.hiddenLayers) {\n                this.sizes.push(Math.max(3, Math.floor(preparedData[0].input.length / 2)));\n            }\n            else {\n                this.options.hiddenLayers.forEach((size) => {\n                    this.sizes.push(size);\n                });\n            }\n            this.sizes.push(preparedData[0].output.length);\n            this.initialize();\n        }\n        updateTrainingOptions(trainOpts) {\n            const merged = { ...this.trainOpts, ...trainOpts };\n            this.validateTrainingOptions(merged);\n            this.trainOpts = merged;\n            this.setLogMethod(this.trainOpts.log);\n        }\n        validateTrainingOptions(options) {\n            const validations = {\n                activation: () => {\n                    return ['sigmoid', 'relu', 'leaky-relu', 'tanh'].includes(options.activation);\n                },\n                iterations: () => {\n                    const val = options.iterations;\n                    return typeof val === 'number' && val > 0;\n                },\n                errorThresh: () => {\n                    const val = options.errorThresh;\n                    return typeof val === 'number' && val > 0 && val < 1;\n                },\n                log: () => {\n                    const val = options.log;\n                    return typeof val === 'function' || typeof val === 'boolean';\n                },\n                logPeriod: () => {\n                    const val = options.logPeriod;\n                    return typeof val === 'number' && val > 0;\n                },\n                leakyReluAlpha: () => {\n                    const val = options.leakyReluAlpha;\n                    return typeof val === 'number' && val > 0 && val < 1;\n                },\n                learningRate: () => {\n                    const val = options.learningRate;\n                    return typeof val === 'number' && val > 0 && val < 1;\n                },\n                momentum: () => {\n                    const val = options.momentum;\n                    return typeof val === 'number' && val > 0 && val < 1;\n                },\n                callback: () => {\n                    const val = options.callback;\n                    return typeof val === 'function' || val === undefined;\n                },\n                callbackPeriod: () => {\n                    const val = options.callbackPeriod;\n                    return typeof val === 'number' && val > 0;\n                },\n                timeout: () => {\n                    const val = options.timeout;\n                    return typeof val === 'number' && val > 0;\n                },\n                praxis: () => {\n                    const val = options.praxis;\n                    return !val || val === 'adam';\n                },\n                beta1: () => {\n                    const val = options.beta1;\n                    return val > 0 && val < 1;\n                },\n                beta2: () => {\n                    const val = options.beta2;\n                    return val > 0 && val < 1;\n                },\n                epsilon: () => {\n                    const val = options.epsilon;\n                    return val > 0 && val < 1;\n                },\n            };\n            for (const p in validations) {\n                const v = options;\n                if (!validations[p]()) {\n                    throw new Error(`[${p}, ${v[p]}] is out of normal training range, your network will probably not train.`);\n                }\n            }\n        }\n        /**\n         *\n         *  Gets JSON of trainOpts object\n         *    NOTE: Activation is stored directly on JSON object and not in the training options\n         */\n        getTrainOptsJSON() {\n            const { activation, iterations, errorThresh, log, logPeriod, leakyReluAlpha, learningRate, momentum, callbackPeriod, timeout, praxis, beta1, beta2, epsilon, } = this.trainOpts;\n            return {\n                activation,\n                iterations,\n                errorThresh,\n                log: typeof log === 'function'\n                    ? true\n                    : typeof log === 'boolean'\n                        ? log\n                        : false,\n                logPeriod,\n                leakyReluAlpha,\n                learningRate,\n                momentum,\n                callbackPeriod,\n                timeout: timeout === Infinity ? 'Infinity' : timeout,\n                praxis,\n                beta1,\n                beta2,\n                epsilon,\n            };\n        }\n        setLogMethod(log) {\n            if (typeof log === 'function') {\n                this.trainOpts.log = log;\n            }\n            else if (log) {\n                this.trainOpts.log = this.logTrainingStatus;\n            }\n            else {\n                this.trainOpts.log = false;\n            }\n        }\n        logTrainingStatus(status) {\n            console.log(`iterations: ${status.iterations}, training error: ${status.error}`);\n        }\n        calculateTrainingError(data) {\n            let sum = 0;\n            for (let i = 0; i < data.length; ++i) {\n                sum += this.trainPattern(data[i], true);\n            }\n            return sum / data.length;\n        }\n        trainPatterns(data) {\n            for (let i = 0; i < data.length; ++i) {\n                this.trainPattern(data[i]);\n            }\n        }\n        trainingTick(data, status, endTime) {\n            const { callback, callbackPeriod, errorThresh, iterations, log, logPeriod, } = this.trainOpts;\n            if (status.iterations >= iterations ||\n                status.error <= errorThresh ||\n                Date.now() >= endTime) {\n                return false;\n            }\n            status.iterations++;\n            if (log && status.iterations % logPeriod === 0) {\n                status.error = this.calculateTrainingError(data);\n                log(status);\n            }\n            else if (status.iterations % this.errorCheckInterval === 0) {\n                status.error = this.calculateTrainingError(data);\n            }\n            else {\n                this.trainPatterns(data);\n            }\n            if (callback && status.iterations % callbackPeriod === 0) {\n                callback({\n                    iterations: status.iterations,\n                    error: status.error,\n                });\n            }\n            return true;\n        }\n        prepTraining(data, options = {}) {\n            this.updateTrainingOptions(options);\n            const preparedData = this.formatData(data);\n            const endTime = Date.now() + this.trainOpts.timeout;\n            const status = {\n                error: 1,\n                iterations: 0,\n            };\n            this.verifyIsInitialized(preparedData);\n            this.validateData(preparedData);\n            return {\n                preparedData,\n                status,\n                endTime,\n            };\n        }\n        train(data, options = {}) {\n            const { preparedData, status, endTime } = this.prepTraining(data, options);\n            while (true) {\n                if (!this.trainingTick(preparedData, status, endTime)) {\n                    break;\n                }\n            }\n            return status;\n        }\n        async trainAsync(data, options = {}) {\n            const { preparedData, status, endTime } = this.prepTraining(data, options);\n            return await new Promise((resolve, reject) => {\n                try {\n                    const thawedTrain = new browser.Thaw(new Array(this.trainOpts.iterations), {\n                        delay: true,\n                        each: () => this.trainingTick(preparedData, status, endTime) ||\n                            thawedTrain.stop(),\n                        done: () => resolve(status),\n                    });\n                    thawedTrain.tick();\n                }\n                catch (trainError) {\n                    reject(trainError);\n                }\n            });\n        }\n        trainPattern(value, logErrorRate) {\n            // forward propagate\n            this.runInput(value.input);\n            // back propagate\n            this.calculateDeltas(value.output);\n            this.adjustWeights();\n            if (logErrorRate) {\n                return mse$1(this.errors[this.outputLayer]);\n            }\n            return null;\n        }\n        _calculateDeltasSigmoid(target) {\n            for (let layer = this.outputLayer; layer >= 0; layer--) {\n                const activeSize = this.sizes[layer];\n                const activeOutput = this.outputs[layer];\n                const activeError = this.errors[layer];\n                const activeDeltas = this.deltas[layer];\n                const nextLayer = this.weights[layer + 1];\n                for (let node = 0; node < activeSize; node++) {\n                    const output = activeOutput[node];\n                    let error = 0;\n                    if (layer === this.outputLayer) {\n                        error = target[node] - output;\n                    }\n                    else {\n                        const deltas = this.deltas[layer + 1];\n                        for (let k = 0; k < deltas.length; k++) {\n                            error += deltas[k] * nextLayer[k][node];\n                        }\n                    }\n                    activeError[node] = error;\n                    activeDeltas[node] = error * output * (1 - output);\n                }\n            }\n        }\n        _calculateDeltasRelu(target) {\n            for (let layer = this.outputLayer; layer >= 0; layer--) {\n                const currentSize = this.sizes[layer];\n                const currentOutputs = this.outputs[layer];\n                const nextWeights = this.weights[layer + 1];\n                const nextDeltas = this.deltas[layer + 1];\n                const currentErrors = this.errors[layer];\n                const currentDeltas = this.deltas[layer];\n                for (let node = 0; node < currentSize; node++) {\n                    const output = currentOutputs[node];\n                    let error = 0;\n                    if (layer === this.outputLayer) {\n                        error = target[node] - output;\n                    }\n                    else {\n                        for (let k = 0; k < nextDeltas.length; k++) {\n                            error += nextDeltas[k] * nextWeights[k][node];\n                        }\n                    }\n                    currentErrors[node] = error;\n                    currentDeltas[node] = output > 0 ? error : 0;\n                }\n            }\n        }\n        _calculateDeltasLeakyRelu(target) {\n            const alpha = this.trainOpts.leakyReluAlpha;\n            for (let layer = this.outputLayer; layer >= 0; layer--) {\n                const currentSize = this.sizes[layer];\n                const currentOutputs = this.outputs[layer];\n                const nextDeltas = this.deltas[layer + 1];\n                const nextWeights = this.weights[layer + 1];\n                const currentErrors = this.errors[layer];\n                const currentDeltas = this.deltas[layer];\n                for (let node = 0; node < currentSize; node++) {\n                    const output = currentOutputs[node];\n                    let error = 0;\n                    if (layer === this.outputLayer) {\n                        error = target[node] - output;\n                    }\n                    else {\n                        for (let k = 0; k < nextDeltas.length; k++) {\n                            error += nextDeltas[k] * nextWeights[k][node];\n                        }\n                    }\n                    currentErrors[node] = error;\n                    currentDeltas[node] = output > 0 ? error : alpha * error;\n                }\n            }\n        }\n        _calculateDeltasTanh(target) {\n            for (let layer = this.outputLayer; layer >= 0; layer--) {\n                const currentSize = this.sizes[layer];\n                const currentOutputs = this.outputs[layer];\n                const nextDeltas = this.deltas[layer + 1];\n                const nextWeights = this.weights[layer + 1];\n                const currentErrors = this.errors[layer];\n                const currentDeltas = this.deltas[layer];\n                for (let node = 0; node < currentSize; node++) {\n                    const output = currentOutputs[node];\n                    let error = 0;\n                    if (layer === this.outputLayer) {\n                        error = target[node] - output;\n                    }\n                    else {\n                        for (let k = 0; k < nextDeltas.length; k++) {\n                            error += nextDeltas[k] * nextWeights[k][node];\n                        }\n                    }\n                    currentErrors[node] = error;\n                    currentDeltas[node] = (1 - output * output) * error;\n                }\n            }\n        }\n        /**\n         *\n         * Changes weights of networks\n         */\n        adjustWeights() {\n            const { learningRate, momentum } = this.trainOpts;\n            for (let layer = 1; layer <= this.outputLayer; layer++) {\n                const incoming = this.outputs[layer - 1];\n                const activeSize = this.sizes[layer];\n                const activeDelta = this.deltas[layer];\n                const activeChanges = this.changes[layer];\n                const activeWeights = this.weights[layer];\n                const activeBiases = this.biases[layer];\n                for (let node = 0; node < activeSize; node++) {\n                    const delta = activeDelta[node];\n                    for (let k = 0; k < incoming.length; k++) {\n                        let change = activeChanges[node][k];\n                        change = learningRate * delta * incoming[k] + momentum * change;\n                        activeChanges[node][k] = change;\n                        activeWeights[node][k] += change;\n                    }\n                    activeBiases[node] += learningRate * delta;\n                }\n            }\n        }\n        _setupAdam() {\n            this.biasChangesLow = [];\n            this.biasChangesHigh = [];\n            this.changesLow = [];\n            this.changesHigh = [];\n            this.iterations = 0;\n            for (let layer = 0; layer <= this.outputLayer; layer++) {\n                const size = this.sizes[layer];\n                if (layer > 0) {\n                    this.biasChangesLow[layer] = zeros$1(size);\n                    this.biasChangesHigh[layer] = zeros$1(size);\n                    this.changesLow[layer] = new Array(size);\n                    this.changesHigh[layer] = new Array(size);\n                    for (let node = 0; node < size; node++) {\n                        const prevSize = this.sizes[layer - 1];\n                        this.changesLow[layer][node] = zeros$1(prevSize);\n                        this.changesHigh[layer][node] = zeros$1(prevSize);\n                    }\n                }\n            }\n            this.adjustWeights = this._adjustWeightsAdam;\n        }\n        _adjustWeightsAdam() {\n            this.iterations++;\n            const { iterations } = this;\n            const { beta1, beta2, epsilon, learningRate } = this.trainOpts;\n            for (let layer = 1; layer <= this.outputLayer; layer++) {\n                const incoming = this.outputs[layer - 1];\n                const currentSize = this.sizes[layer];\n                const currentDeltas = this.deltas[layer];\n                const currentChangesLow = this.changesLow[layer];\n                const currentChangesHigh = this.changesHigh[layer];\n                const currentWeights = this.weights[layer];\n                const currentBiases = this.biases[layer];\n                const currentBiasChangesLow = this.biasChangesLow[layer];\n                const currentBiasChangesHigh = this.biasChangesHigh[layer];\n                for (let node = 0; node < currentSize; node++) {\n                    const delta = currentDeltas[node];\n                    for (let k = 0; k < incoming.length; k++) {\n                        const gradient = delta * incoming[k];\n                        const changeLow = currentChangesLow[node][k] * beta1 + (1 - beta1) * gradient;\n                        const changeHigh = currentChangesHigh[node][k] * beta2 +\n                            (1 - beta2) * gradient * gradient;\n                        const momentumCorrection = changeLow / (1 - Math.pow(beta1, iterations));\n                        const gradientCorrection = changeHigh / (1 - Math.pow(beta2, iterations));\n                        currentChangesLow[node][k] = changeLow;\n                        currentChangesHigh[node][k] = changeHigh;\n                        currentWeights[node][k] +=\n                            (learningRate * momentumCorrection) /\n                                (Math.sqrt(gradientCorrection) + epsilon);\n                    }\n                    const biasGradient = currentDeltas[node];\n                    const biasChangeLow = currentBiasChangesLow[node] * beta1 + (1 - beta1) * biasGradient;\n                    const biasChangeHigh = currentBiasChangesHigh[node] * beta2 +\n                        (1 - beta2) * biasGradient * biasGradient;\n                    const biasMomentumCorrection = currentBiasChangesLow[node] / (1 - Math.pow(beta1, iterations));\n                    const biasGradientCorrection = currentBiasChangesHigh[node] / (1 - Math.pow(beta2, iterations));\n                    currentBiasChangesLow[node] = biasChangeLow;\n                    currentBiasChangesHigh[node] = biasChangeHigh;\n                    currentBiases[node] +=\n                        (learningRate * biasMomentumCorrection) /\n                            (Math.sqrt(biasGradientCorrection) + epsilon);\n                }\n            }\n        }\n        validateData(data) {\n            const inputSize = this.sizes[0];\n            const outputSize = this.sizes[this.sizes.length - 1];\n            const { length } = data;\n            for (let i = 0; i < length; i++) {\n                const { input, output } = data[i];\n                if (input.length !== inputSize) {\n                    throw new Error(`input at index ${i} length ${input.length} must be ${inputSize}`);\n                }\n                if (data[i].output.length !== outputSize) {\n                    throw new Error(`output at index ${i} length ${output.length} must be ${outputSize}`);\n                }\n            }\n        }\n        validateInput(formattedInput) {\n            const inputSize = this.sizes[0];\n            if (formattedInput.length !== inputSize) {\n                throw new Error(`input length ${formattedInput.length} must match options.inputSize of ${inputSize}`);\n            }\n        }\n        formatData(data) {\n            if (!Array.isArray(data[0].input)) {\n                if (this.inputLookup) {\n                    this.inputLookupLength = Object.keys(this.inputLookup).length;\n                }\n                else {\n                    const inputLookup = new LookupTable(data, 'input');\n                    this.inputLookup = inputLookup.table;\n                    this.inputLookupLength = inputLookup.length;\n                }\n            }\n            if (!Array.isArray(data[0].output)) {\n                if (this.outputLookup) {\n                    this.outputLookupLength = Object.keys(this.outputLookup).length;\n                }\n                else {\n                    const lookup = new LookupTable(data, 'output');\n                    this.outputLookup = lookup.table;\n                    this.outputLookupLength = lookup.length;\n                }\n            }\n            if (!this._formatInput) {\n                this._formatInput = getTypedArrayFn(data[0].input, this.inputLookup);\n            }\n            if (!this._formatOutput) {\n                this._formatOutput = getTypedArrayFn(data[0].output, this.outputLookup);\n            }\n            // turn sparse hash input into arrays with 0s as filler\n            if (this._formatInput && this._formatOutput) {\n                const result = [];\n                for (let i = 0; i < data.length; i++) {\n                    result.push({\n                        input: this._formatInput(data[i].input),\n                        output: this._formatOutput(data[i].output),\n                    });\n                }\n                return result;\n            }\n            if (this._formatInput) {\n                const result = [];\n                for (let i = 0; i < data.length; i++) {\n                    result.push({\n                        input: this._formatInput(data[i].input),\n                        output: data[i].output,\n                    });\n                }\n                return result;\n            }\n            if (this._formatOutput) {\n                const result = [];\n                for (let i = 0; i < data.length; i++) {\n                    result.push({\n                        input: data[i].input,\n                        output: this._formatOutput(data[i].output),\n                    });\n                }\n                return result;\n            }\n            return data;\n        }\n        addFormat(data) {\n            var _a, _b;\n            if (!Array.isArray(data.input) || typeof data.input[0] !== 'number') {\n                this.inputLookup = lookup.addKeys(data.input, (_a = this.inputLookup) !== null && _a !== void 0 ? _a : {});\n                if (this.inputLookup) {\n                    this.inputLookupLength = Object.keys(this.inputLookup).length;\n                }\n            }\n            if (!Array.isArray(data.output) || typeof data.output[0] !== 'number') {\n                this.outputLookup = lookup.addKeys(data.output, (_b = this.outputLookup) !== null && _b !== void 0 ? _b : {});\n                if (this.outputLookup) {\n                    this.outputLookupLength = Object.keys(this.outputLookup).length;\n                }\n            }\n        }\n        test(data) {\n            const { preparedData } = this.prepTraining(data);\n            // for binary classification problems with one output node\n            const isBinary = preparedData[0].output.length === 1;\n            // for classification problems\n            const misclasses = [];\n            // run each pattern through the trained network and collect\n            // error and misclassification statistics\n            let errorSum = 0;\n            if (isBinary) {\n                let falsePos = 0;\n                let falseNeg = 0;\n                let truePos = 0;\n                let trueNeg = 0;\n                for (let i = 0; i < preparedData.length; i++) {\n                    const output = this.runInput(preparedData[i].input);\n                    const target = preparedData[i].output;\n                    const actual = output[0] > this.options.binaryThresh ? 1 : 0;\n                    const expected = target[0];\n                    if (actual !== expected) {\n                        const misclass = preparedData[i];\n                        misclasses.push({\n                            input: misclass.input,\n                            output: misclass.output,\n                            actual,\n                            expected,\n                        });\n                    }\n                    if (actual === 0 && expected === 0) {\n                        trueNeg++;\n                    }\n                    else if (actual === 1 && expected === 1) {\n                        truePos++;\n                    }\n                    else if (actual === 0 && expected === 1) {\n                        falseNeg++;\n                    }\n                    else if (actual === 1 && expected === 0) {\n                        falsePos++;\n                    }\n                    errorSum += mse$1(output.map((value, i) => {\n                        return target[i] - value;\n                    }));\n                }\n                return {\n                    error: errorSum / preparedData.length,\n                    misclasses,\n                    total: preparedData.length,\n                    trueNeg,\n                    truePos,\n                    falseNeg,\n                    falsePos,\n                    precision: truePos > 0 ? truePos / (truePos + falsePos) : 0,\n                    recall: truePos > 0 ? truePos / (truePos + falseNeg) : 0,\n                    accuracy: (trueNeg + truePos) / preparedData.length,\n                };\n            }\n            for (let i = 0; i < preparedData.length; i++) {\n                const output = this.runInput(preparedData[i].input);\n                const target = preparedData[i].output;\n                const actual = output.indexOf(max(output));\n                const expected = target.indexOf(max(target));\n                if (actual !== expected) {\n                    const misclass = preparedData[i];\n                    misclasses.push({\n                        input: misclass.input,\n                        output: misclass.output,\n                        actual,\n                        expected,\n                    });\n                }\n                errorSum += mse$1(output.map((value, i) => {\n                    return target[i] - value;\n                }));\n            }\n            return {\n                error: errorSum / preparedData.length,\n                misclasses,\n                total: preparedData.length,\n            };\n        }\n        toJSON() {\n            var _a, _b;\n            if (!this.isRunnable) {\n                this.initialize();\n            }\n            // use Array.from, keeping json small\n            const jsonLayerWeights = this.weights.map((layerWeights) => {\n                return layerWeights.map((layerWeights) => Array.from(layerWeights));\n            });\n            const jsonLayerBiases = this.biases.map((layerBiases) => Array.from(layerBiases));\n            const jsonLayers = [];\n            const outputLength = this.sizes.length - 1;\n            for (let i = 0; i <= outputLength; i++) {\n                jsonLayers.push({\n                    weights: (_a = jsonLayerWeights[i]) !== null && _a !== void 0 ? _a : [],\n                    biases: (_b = jsonLayerBiases[i]) !== null && _b !== void 0 ? _b : [],\n                });\n            }\n            return {\n                type: 'NeuralNetwork',\n                sizes: [...this.sizes],\n                layers: jsonLayers,\n                inputLookup: this.inputLookup ? { ...this.inputLookup } : null,\n                inputLookupLength: this.inputLookupLength,\n                outputLookup: this.outputLookup ? { ...this.outputLookup } : null,\n                outputLookupLength: this.outputLookupLength,\n                options: { ...this.options },\n                trainOpts: this.getTrainOptsJSON(),\n            };\n        }\n        fromJSON(json) {\n            this.options = { ...defaults$2(), ...json.options };\n            if (json.hasOwnProperty('trainOpts')) {\n                const trainOpts = {\n                    ...json.trainOpts,\n                    timeout: json.trainOpts.timeout === 'Infinity'\n                        ? Infinity\n                        : json.trainOpts.timeout,\n                };\n                this.updateTrainingOptions(trainOpts);\n            }\n            this.sizes = json.sizes;\n            this.initialize();\n            this.inputLookup = json.inputLookup ? { ...json.inputLookup } : null;\n            this.inputLookupLength = json.inputLookupLength;\n            this.outputLookup = json.outputLookup ? { ...json.outputLookup } : null;\n            this.outputLookupLength = json.outputLookupLength;\n            const jsonLayers = json.layers;\n            const layerWeights = this.weights.map((layerWeights, layerIndex) => {\n                return jsonLayers[layerIndex].weights.map((layerWeights) => Float32Array.from(layerWeights));\n            });\n            const layerBiases = this.biases.map((layerBiases, layerIndex) => Float32Array.from(jsonLayers[layerIndex].biases));\n            for (let i = 0; i <= this.outputLayer; i++) {\n                this.weights[i] = layerWeights[i] || [];\n                this.biases[i] = layerBiases[i] || [];\n            }\n            return this;\n        }\n        toFunction(cb) {\n            const { activation, leakyReluAlpha } = this.trainOpts;\n            let needsVar = false;\n            const nodeHandle = (layerIndex, nodeIndex) => {\n                if (layerIndex === 0) {\n                    return `(input[${nodeIndex}]||0)`;\n                }\n                const weights = this.weights[layerIndex][nodeIndex];\n                const bias = this.biases[layerIndex][nodeIndex];\n                if (!weights) {\n                    throw new Error(`weights at layerIndex ${layerIndex} & nodeIndex ${nodeIndex} not found`);\n                }\n                if (!bias) {\n                    throw new Error(`bias as layerIndex ${layerIndex} & nodeIndex ${nodeIndex} not found`);\n                }\n                const weightsArray = [];\n                weights.forEach((weight, subNodeIndex) => {\n                    if (weight < 0) {\n                        weightsArray.push(`${weight}*${nodeHandle(layerIndex - 1, subNodeIndex)}`);\n                    }\n                    else {\n                        weightsArray.push(`+${weight}*${nodeHandle(layerIndex - 1, subNodeIndex)}`);\n                    }\n                });\n                const result = `(${bias.toString()}${weightsArray.join('')})`;\n                switch (activation) {\n                    case 'sigmoid':\n                        return `1/(1+1/Math.exp(${result}))`;\n                    case 'relu': {\n                        needsVar = true;\n                        return `((v=${result})<0?0:v)`;\n                    }\n                    case 'leaky-relu': {\n                        needsVar = true;\n                        return `Math.max((v=${result}),${leakyReluAlpha}*v)`;\n                    }\n                    case 'tanh':\n                        return `Math.tanh(${result})`;\n                    default:\n                        throw new Error(`Unknown activation ${activation}. Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'`);\n                }\n            };\n            function checkKeys(keys) {\n                if (keys.find((v) => v.includes('\"'))) {\n                    throw new Error(`key contains '\"', which is not compatible`);\n                }\n            }\n            const layersAsMath = [];\n            let result;\n            let inputLookup = '';\n            if (this.inputLookup) {\n                const keys = Object.keys(this.inputLookup);\n                checkKeys(keys);\n                inputLookup = `input = new Float32Array([${Object.keys(this.inputLookup)\n                .map((key) => `input[\"${key}\"]`)\n                .join(',')}]);`;\n            }\n            if (this.sizes.length < 1)\n                throw new Error('No layers');\n            for (let nodeIndex = 0; nodeIndex < this.sizes[this.outputLayer]; nodeIndex++) {\n                layersAsMath.push(nodeHandle(this.outputLayer, nodeIndex));\n            }\n            if (this.outputLookup) {\n                const keys = Object.keys(this.outputLookup);\n                checkKeys(keys);\n                const values = keys\n                    .map((key, i) => `\"${key}\":${layersAsMath[i]}`)\n                    .join(',');\n                result = `{${values}}`;\n            }\n            else {\n                result = `[${layersAsMath.join(',')}]`;\n            }\n            const source = `${inputLookup}${needsVar ? 'var v;' : ''}return ${result};`;\n            // eslint-disable-next-line @typescript-eslint/no-implied-eval,no-new-func\n            return new Function('input', cb ? cb(source) : source);\n        }\n    }\n\n    function weightedSumSigmoid(weights, biases, inputs) {\n        let sum = biases[this.thread.x];\n        for (let k = 0; k < this.constants.size; k++) {\n            sum += weights[this.thread.x][k] * inputs[k];\n        }\n        // sigmoid\n        return 1 / (1 + Math.exp(-sum));\n    }\n    function weightedSumRelu(weights, biases, inputs) {\n        let sum = biases[this.thread.x];\n        for (let k = 0; k < this.constants.size; k++) {\n            sum += weights[this.thread.x][k] * inputs[k];\n        }\n        // relu\n        return sum < 0 ? 0 : sum;\n    }\n    function weightedSumLeakyRelu(weights, biases, inputs) {\n        let sum = biases[this.thread.x];\n        for (let k = 0; k < this.constants.size; k++) {\n            sum += weights[this.thread.x][k] * inputs[k];\n        }\n        // leaky relu\n        return sum < 0 ? 0 : 0.01 * sum;\n    }\n    function weightedSumTanh(weights, biases, inputs) {\n        let sum = biases[this.thread.x];\n        for (let k = 0; k < this.constants.size; k++) {\n            sum += weights[this.thread.x][k] * inputs[k];\n        }\n        // tanh\n        return Math.tanh(sum);\n    }\n    function calcErrorOutput(output, target) {\n        return target - output;\n    }\n    function calcDeltasSigmoid(error, output) {\n        // sigmoid derivative\n        return error * output * (1 - output);\n    }\n    function calcDeltasRelu(error, output) {\n        // relu derivative\n        return output > 0 ? error : 0;\n    }\n    function calcDeltasLeakyRelu(error, output) {\n        // leaky relu derivative\n        return output > 0 ? error : 0.01 * error;\n    }\n    function calcDeltasTanh(error, output) {\n        // tanh derivative\n        return (1 - output * output) * error;\n    }\n    function calcError(x, size, nextWeights, nextDeltas) {\n        let error = 0;\n        for (let k = 0; k < size; k++) {\n            error += nextDeltas[k] * nextWeights[k][x];\n        }\n        return error;\n    }\n    function calcChanges(learningRate, momentum, previousChange, delta, previousOutput) {\n        return learningRate * delta * previousOutput + momentum * previousChange;\n    }\n    function addWeights(change, weight) {\n        return change + weight;\n    }\n    function addBiases(biases, deltas) {\n        return (biases[this.thread.x] + deltas[this.thread.x] * this.constants.learningRate);\n    }\n    // mean squared error, reimplemented for GPU\n    function mse(errors) {\n        let sum = 0;\n        for (let i = 0; i < this.constants.size; i++) {\n            sum += errors[i] ** 2;\n        }\n        return sum / this.constants.size;\n    }\n    class NeuralNetworkGPU extends NeuralNetwork {\n        constructor(options = {}) {\n            super(options);\n            this.texturizeInputData = () => {\n                throw new Error('not yet setup');\n            };\n            this.forwardPropagate = [];\n            this.backwardPropagate = [];\n            this.changesPropagate = [];\n            this.biasesPropagate = [];\n            this.getMSE = () => {\n                throw new Error('not yet setup');\n            };\n            this._addMSE = () => {\n                throw new Error('not yet setup');\n            };\n            this._divideMSESum = () => {\n                throw new Error('not yet setup');\n            };\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-expect-error\n            this.outputs = [];\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-expect-error\n            this.deltas = [];\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-expect-error\n            this.errors = [];\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-expect-error\n            this.weights = [];\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-expect-error\n            this.changes = [];\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-expect-error\n            this.biases = [];\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-expect-error\n            this.runInput = (input) => {\n                let output;\n                this.outputs[0] = input;\n                for (let layer = 1; layer <= this.outputLayer; layer++) {\n                    release(this.outputs[layer]);\n                    this.outputs[layer] = this.forwardPropagate[layer](this.weights[layer], this.biases[layer], input);\n                    output = input = this.outputs[layer];\n                }\n                return output;\n            };\n            this.calculateDeltas = (target) => {\n                for (let layer = this.outputLayer; layer > 0; layer--) {\n                    release(this.deltas[layer]);\n                    release(this.errors[layer]);\n                    let output;\n                    if (layer === this.outputLayer) {\n                        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                        // @ts-expect-error\n                        output = this.backwardPropagate[layer](this.outputs[layer], target);\n                    }\n                    else {\n                        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                        // @ts-expect-error\n                        output = this.backwardPropagate[layer](this.weights[layer + 1], this.outputs[layer], this.deltas[layer + 1]);\n                    }\n                    this.deltas[layer] = output.result;\n                    this.errors[layer] = output.error;\n                }\n            };\n            this.errorCheckInterval = 100;\n            this.gpu = new gpu_js.GPU({ mode: options.mode });\n        }\n        initialize() {\n            super.initialize();\n            this.buildRunInput();\n            this.buildCalculateDeltas();\n            this.buildGetChanges();\n            this.buildChangeBiases();\n            this.buildGetMSE();\n        }\n        setActivation() { }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        trainPattern(value, logErrorRate) {\n            // forward propagate\n            this.runInput(value.input);\n            // back propagate\n            this.calculateDeltas(value.output);\n            this.adjustWeights();\n            if (logErrorRate) {\n                return this.getMSE(this.errors[this.outputLayer]);\n            }\n            return null;\n        }\n        calculateTrainingError(data) {\n            let sum = new Float32Array([0]);\n            for (let i = 0; i < data.length; ++i) {\n                const prevSum = sum;\n                const error = this.trainPattern(data[i], true);\n                sum = this._addMSE(sum, error);\n                release(error);\n                release(prevSum);\n            }\n            const result = this._divideMSESum(data.length, sum);\n            release(sum);\n            return (result instanceof gpu_js.Texture\n                ? result.toArray()\n                : result)[0];\n        }\n        adjustWeights() {\n            this.getChanges();\n            this.changeBiases();\n        }\n        buildRunInput() {\n            let weightedSum = null;\n            switch (this.trainOpts.activation) {\n                case 'sigmoid':\n                    weightedSum = weightedSumSigmoid;\n                    break;\n                case 'relu':\n                    weightedSum = weightedSumRelu;\n                    break;\n                case 'leaky-relu':\n                    weightedSum = weightedSumLeakyRelu;\n                    break;\n                case 'tanh':\n                    weightedSum = weightedSumTanh;\n                    break;\n                default:\n                    throw new Error(`Unknown activation ${this.trainOpts.activation}. Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'`);\n            }\n            for (let layer = 1; layer <= this.outputLayer; layer++) {\n                this.forwardPropagate[layer] = this.gpu.createKernel(weightedSum, {\n                    output: [this.sizes[layer]],\n                    pipeline: true,\n                    constants: {\n                        size: this.sizes[layer - 1],\n                    },\n                    immutable: true,\n                });\n            }\n            this.texturizeInputData = this.gpu.createKernel(function (value) {\n                return value[this.thread.x];\n            }, {\n                output: [this.sizes[1]],\n                pipeline: true,\n                immutable: true,\n            });\n        }\n        buildCalculateDeltas() {\n            let calcDeltas;\n            switch (this.trainOpts.activation) {\n                case 'sigmoid':\n                    calcDeltas = calcDeltasSigmoid;\n                    break;\n                case 'relu':\n                    calcDeltas = calcDeltasRelu;\n                    break;\n                case 'leaky-relu':\n                    calcDeltas = calcDeltasLeakyRelu;\n                    break;\n                case 'tanh':\n                    calcDeltas = calcDeltasTanh;\n                    break;\n                default:\n                    throw new Error(`Unknown activation ${this.trainOpts.activation}. Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'`);\n            }\n            calcDeltas = gpu_js.alias(gpu_js.utils.getMinifySafeName(() => calcDeltas), calcDeltas);\n            this.gpu.addFunction(calcDeltas);\n            for (let layer = this.outputLayer; layer > 0; layer--) {\n                if (layer === this.outputLayer) {\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-expect-error\n                    this.backwardPropagate[this.outputLayer] = this.gpu.createKernelMap({\n                        error: calcErrorOutput,\n                    }, function (outputs, targets) {\n                        const output = outputs[this.thread.x];\n                        const target = targets[this.thread.x];\n                        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                        // @ts-expect-error\n                        return calcDeltas(calcErrorOutput(output, target), output);\n                    }, {\n                        output: [this.sizes[this.outputLayer]],\n                        pipeline: true,\n                        immutable: true,\n                    });\n                }\n                else {\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-expect-error\n                    this.backwardPropagate[layer] = this.gpu.createKernelMap({\n                        error: calcError,\n                    }, function (nextWeights, outputs, nextDeltas) {\n                        const output = outputs[this.thread.x];\n                        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                        // @ts-expect-error\n                        return calcDeltas(calcError(this.thread.x, this.constants.size, nextWeights, nextDeltas), output);\n                    }, {\n                        output: [this.sizes[layer]],\n                        pipeline: true,\n                        constants: {\n                            size: this.sizes[layer + 1],\n                        },\n                        immutable: true,\n                    });\n                }\n            }\n        }\n        buildGetChanges() {\n            for (let layer = 1; layer <= this.outputLayer; layer++) {\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-expect-error\n                this.changesPropagate[layer] = this.gpu.createKernelMap({\n                    weights: addWeights,\n                    changes: calcChanges,\n                }, function (previousOutputs, deltas, weights, previousChanges) {\n                    const change = calcChanges(this.constants.learningRate, this.constants.momentum, previousChanges[this.thread.y][this.thread.x], deltas[this.thread.y], previousOutputs[this.thread.x]);\n                    return addWeights(change, weights[this.thread.y][this.thread.x]);\n                }, {\n                    output: [this.sizes[layer - 1], this.sizes[layer]],\n                    pipeline: true,\n                    constants: {\n                        size: this.sizes[layer - 1],\n                        learningRate: this.trainOpts.learningRate,\n                        momentum: this.trainOpts.momentum,\n                    },\n                    immutable: true,\n                });\n            }\n        }\n        getChanges() {\n            for (let layer = 1; layer <= this.outputLayer; layer++) {\n                const weights = this.weights[layer];\n                const changes = this.changes[layer];\n                const output = this.changesPropagate[layer](this.outputs[layer - 1], this.deltas[layer], weights, changes);\n                release(weights);\n                release(changes);\n                this.weights[layer] = output.weights;\n                this.changes[layer] = output.changes;\n                release(output.result);\n            }\n        }\n        buildChangeBiases() {\n            for (let layer = 1; layer <= this.outputLayer; layer++) {\n                this.biasesPropagate[layer] = this.gpu.createKernel(addBiases, {\n                    output: [this.sizes[layer]],\n                    pipeline: true,\n                    constants: {\n                        learningRate: this.trainOpts.learningRate,\n                    },\n                    immutable: true,\n                });\n            }\n        }\n        changeBiases() {\n            for (let layer = 1; layer <= this.outputLayer; layer++) {\n                const biases = this.biases[layer];\n                this.biases[layer] = this.biasesPropagate[layer](biases, this.deltas[layer]);\n                release(biases);\n            }\n        }\n        buildGetMSE() {\n            this.getMSE = this.gpu.createKernel(mse, {\n                output: [1],\n                constants: {\n                    size: this.sizes[this.outputLayer],\n                },\n                pipeline: true,\n                immutable: true,\n            });\n            this._addMSE = this.gpu.createKernel(function (value1, value2) {\n                return value1[0] + value2[0];\n            }, {\n                output: [1],\n                pipeline: true,\n                immutable: true,\n            });\n            this._divideMSESum = this.gpu.createKernel(function (length, mseSum) {\n                const value = mseSum[0];\n                if (value > 0) {\n                    return value / length;\n                }\n                return 0;\n            }, {\n                output: [1],\n            });\n        }\n        run(input) {\n            if (!this.isRunnable) {\n                throw new Error('network not runnable');\n            }\n            let formattedInput;\n            if (this.inputLookup) {\n                formattedInput = lookup.toArray(this.inputLookup, input, this.inputLookupLength);\n            }\n            else {\n                formattedInput = input;\n            }\n            this.validateInput(formattedInput);\n            const outputTextures = this.runInput(formattedInput);\n            const output = outputTextures instanceof gpu_js.Texture\n                ? outputTextures.toArray()\n                : outputTextures;\n            if (this.outputLookup) {\n                return lookup.toObject(this.outputLookup, output);\n            }\n            return output;\n        }\n        // @ts-expect-error the underlying network works as normal, but we are working on the GPU\n        prepTraining(data, options = {}) {\n            this.updateTrainingOptions(options);\n            const preparedData = this.formatData(data);\n            const endTime = Date.now() + this.trainOpts.timeout;\n            const status = {\n                error: 1,\n                iterations: 0,\n            };\n            this.verifyIsInitialized(preparedData);\n            const texturizeOutputData = this.gpu.createKernel(function (value) {\n                return value[this.thread.x];\n            }, {\n                output: [preparedData[0].output.length],\n                pipeline: true,\n                immutable: true,\n            });\n            return {\n                preparedData: preparedData.map((set) => ({\n                    input: this.texturizeInputData(set.input),\n                    output: texturizeOutputData(set.output),\n                })),\n                status,\n                endTime,\n            };\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        toFunction() {\n            throw new Error(`${this.constructor.name}-toFunction is not yet implemented`);\n        }\n        toJSON() {\n            var _a, _b;\n            if (this.sizes === null) {\n                this.initialize();\n            }\n            // use Array.from, keeping json small\n            const jsonLayerWeights = this.weights.map((layerWeights) => {\n                return (layerWeights instanceof gpu_js.Texture\n                    ? layerWeights.toArray()\n                    : layerWeights).map((layerWeights) => Array.from(layerWeights));\n            });\n            const jsonLayerBiases = this.biases.map((layerBiases) => Array.from(layerBiases instanceof gpu_js.Texture\n                ? layerBiases.toArray()\n                : layerBiases));\n            const jsonLayers = [];\n            for (let i = 0; i <= this.outputLayer; i++) {\n                jsonLayers.push({\n                    weights: (_a = jsonLayerWeights[i]) !== null && _a !== void 0 ? _a : [],\n                    biases: (_b = jsonLayerBiases[i]) !== null && _b !== void 0 ? _b : [],\n                });\n            }\n            return {\n                type: 'NeuralNetworkGPU',\n                sizes: [...this.sizes],\n                layers: jsonLayers,\n                inputLookup: this.inputLookup ? { ...this.inputLookup } : null,\n                inputLookupLength: this.inputLookupLength,\n                outputLookup: this.outputLookup ? { ...this.outputLookup } : null,\n                outputLookupLength: this.outputLookupLength,\n                options: { ...this.options },\n                trainOpts: this.getTrainOptsJSON(),\n            };\n        }\n    }\n\n    class RecurrentConnection extends Internal {\n        constructor() {\n            super(...arguments);\n            this.settings = {};\n            this.layer = null;\n        }\n        setLayer(layer) {\n            this.layer = layer;\n        }\n        get width() {\n            if (!this.layer)\n                throw new Error('layer not set');\n            return this.layer.width;\n        }\n        set width(value) {\n            throw new Error(`${this.constructor.name}-width is not yet implemented`);\n        }\n        get height() {\n            if (!this.layer)\n                throw new Error('layer not set');\n            return this.layer.height;\n        }\n        set height(value) {\n            throw new Error(`${this.constructor.name}-height is not yet implemented`);\n        }\n        get deltas() {\n            if (!this.layer)\n                throw new Error('layer not set');\n            return this.layer.deltas;\n        }\n        set deltas(deltas) {\n            if (!this.layer)\n                throw new Error('layer not set');\n            release(this.layer.deltas);\n            this.layer.deltas = deltas;\n        }\n        get weights() {\n            if (!this.layer)\n                throw new Error('layer not set');\n            return this.layer.weights;\n        }\n        set weights(weights) {\n            if (!this.layer)\n                throw new Error('layer not set');\n            release(this.layer.weights);\n            this.layer.weights = weights;\n        }\n        predict() {\n            // throw new Error(`${this.constructor.name}-predict is not yet implemented`)\n        }\n        compare() {\n            // throw new Error(`${this.constructor.name}-compare is not yet implemented`)\n        }\n        learn() {\n            throw new Error('no longer using');\n        }\n        setupKernels() {\n            // throw new Error(\n            //   `${this.constructor.name}-setupKernels is not yet implemented`\n            // )\n        }\n        reuseKernels() {\n            // throw new Error(\n            //   `${this.constructor.name}-reuseKernels is not yet implemented`\n            // )\n        }\n    }\n\n    class Recurrent extends FeedForward {\n        // TODO: use generics in extend\n        constructor(options = {}) {\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-expect-error\n            super(options);\n            this.trainOpts = {};\n            this._outputConnection = null;\n            this._layerSets = [];\n            this._hiddenLayerOutputIndices = [];\n            this._model = null;\n        }\n        _connectLayers() {\n            if (!this.options.inputLayer) {\n                throw new Error('inputLayer not found');\n            }\n            if (!this.options.outputLayer) {\n                throw new Error('outputLayer not found');\n            }\n            const inputLayer = this.options.inputLayer();\n            const hiddenLayers = this._connectHiddenLayers(inputLayer);\n            const outputLayer = this.options.outputLayer(hiddenLayers[hiddenLayers.length - 1], -1);\n            return {\n                inputLayer,\n                hiddenLayers,\n                outputLayer,\n            };\n        }\n        _connectLayersDeep() {\n            const layers = [];\n            const previousLayers = this._layerSets[this._layerSets.length - 1];\n            let usedHiddenLayerOutputIndex = 0;\n            function findInputLayer(inputLayer) {\n                const index = previousLayers.indexOf(inputLayer);\n                if (index < 0)\n                    throw new Error('unable to find layer');\n                return layers[index];\n            }\n            function layerSettings(layer) {\n                return {\n                    ...layer.settings,\n                    weights: null,\n                    deltas: null,\n                    praxis: null,\n                };\n            }\n            for (let i = 0; i < previousLayers.length; i++) {\n                const previousLayer = previousLayers[i];\n                let layer;\n                if (previousLayer instanceof Activation) {\n                    layer = new previousLayer.constructor(findInputLayer(previousLayer.inputLayer), layerSettings(previousLayer));\n                }\n                else if (previousLayer instanceof EntryPoint) {\n                    layer = new previousLayer.constructor(layerSettings(previousLayer));\n                }\n                else if (previousLayer instanceof Filter) {\n                    layer = new previousLayer.constructor(layerSettings(previousLayer.inputLayer), findInputLayer(previousLayer.inputLayer));\n                }\n                else if (previousLayer instanceof Internal) {\n                    const previousHiddenLayerOutput = previousLayers[this._hiddenLayerOutputIndices[usedHiddenLayerOutputIndex++]];\n                    if (previousLayer instanceof RecurrentConnection) {\n                        throw new Error('unfinished');\n                    }\n                    else if (previousLayer instanceof RecurrentInput) {\n                        layer = new RecurrentInput(previousHiddenLayerOutput);\n                    }\n                    else if (previousLayer instanceof RecurrentZeros) {\n                        layer = new RecurrentInput(previousHiddenLayerOutput);\n                    }\n                    else {\n                        throw new Error(`hidden layer ${previousLayer.constructor.name} extends unknown hidden layer`);\n                    }\n                }\n                else if (previousLayer instanceof InternalModel ||\n                    previousLayer instanceof Model) {\n                    layer = previousLayer;\n                }\n                else if (previousLayer instanceof Modifier) {\n                    layer = new previousLayer.constructor(findInputLayer(previousLayer.inputLayer), layerSettings(previousLayer.inputLayer));\n                }\n                else if (previousLayer instanceof Operator) {\n                    layer = new previousLayer.constructor(findInputLayer(previousLayer.inputLayer1), findInputLayer(previousLayer.inputLayer2), layerSettings(previousLayer));\n                }\n                else if (previousLayer instanceof Target) {\n                    layer = new previousLayer.constructor(layerSettings(previousLayer), findInputLayer(previousLayer.inputLayer));\n                }\n                else {\n                    throw new Error(`hidden layer ${previousLayer.constructor.name} extends unknown hidden layer`);\n                }\n                layers.push(layer);\n            }\n            return layers;\n        }\n        _connectHiddenLayers(previousLayer) {\n            const hiddenLayers = [];\n            if (!this.options.hiddenLayers)\n                throw new Error('hiddenLayers not defined');\n            for (let i = 0; i < this.options.hiddenLayers.length; i++) {\n                const recurrentInput = new RecurrentZeros();\n                const hiddenLayer = this.options.hiddenLayers[i](previousLayer, recurrentInput, i);\n                previousLayer = hiddenLayer;\n                hiddenLayers.push(hiddenLayer);\n            }\n            return hiddenLayers;\n        }\n        initialize() {\n            this._outputConnection = new RecurrentConnection();\n            let layerSet;\n            if (this.options.layers) {\n                layerSet = this._connectOptionsLayers();\n            }\n            else {\n                const { inputLayer, hiddenLayers, outputLayer } = this._connectLayers();\n                layerSet = flattenLayers([inputLayer, ...hiddenLayers, outputLayer]);\n                this._hiddenLayerOutputIndices = hiddenLayers.map((l) => layerSet.indexOf(l));\n                this._inputLayer = inputLayer;\n                this._hiddenLayers = hiddenLayers;\n                this._outputLayer = outputLayer;\n            }\n            this.layers = layerSet;\n            this._layerSets = [layerSet];\n            this._model = layerSet.filter((l) => l instanceof Model || l instanceof InternalModel);\n            this.initializeLayers(layerSet);\n        }\n        initializeDeep() {\n            const layers = this._connectLayersDeep();\n            for (let i = 0; i < layers.length; i++) {\n                const layer = layers[i];\n                layer.setupKernels(true);\n                layer.reuseKernels(this._layerSets[0][i]);\n            }\n            this._layerSets.push(layers);\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        run(inputs) {\n            while (this._layerSets.length <= inputs.length) {\n                this.initializeDeep();\n            }\n            const result = this.runInputs(inputs);\n            if (result instanceof gpu_js.Texture) {\n                return result.toArray();\n            }\n            return result;\n        }\n        runInput(input) {\n            throw new Error('use .runInputs()');\n        }\n        runInputs(inputs) {\n            while (this._layerSets.length < inputs.length) {\n                this.initializeDeep();\n            }\n            const max = inputs.length - 1; // last output will be compared with last index\n            for (let x = 0; x <= max; x++) {\n                const layerSet = this._layerSets[x];\n                layerSet[0].predict(inputs[x]);\n                for (let i = 1; i < layerSet.length; i++) {\n                    layerSet[i].predict();\n                }\n            }\n            const lastLayerUsed = this._layerSets[max];\n            const result = lastLayerUsed[lastLayerUsed.length - 1].weights;\n            this.end();\n            return result;\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        train(data, options = {}) {\n            const { preparedData, status, endTime } = this._prepTraining(data, options);\n            let continueTicking = true;\n            const calculateError = () => this._calculateTrainingError(preparedData);\n            const trainPatters = () => this._trainPatterns(preparedData);\n            while (continueTicking) {\n                continueTicking = this._trainingTick(status, endTime, calculateError, trainPatters);\n            }\n            return status;\n        }\n        end() {\n            const x = this._layerSets.length - 1;\n            const lastLayerSet = this._layerSets[x];\n            lastLayerSet[0].predict([new Float32Array([0])]);\n            for (let i = 1; i < lastLayerSet.length; i++) {\n                lastLayerSet[i].predict();\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        transferData(formattedData) {\n            return formattedData;\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        _prepTraining(data, options) {\n            this._updateTrainingOptions(options);\n            const endTime = this.trainOpts.timeout\n                ? Date.now() + this.trainOpts.timeout\n                : 0;\n            const status = {\n                error: 1,\n                iterations: 0,\n            };\n            this.verifyIsInitialized();\n            return {\n                preparedData: this.transferData(data),\n                status,\n                endTime,\n            };\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        _calculateTrainingError(data) {\n            if (!this.meanSquaredError) {\n                throw new Error('this.meanSquaredError not setup');\n            }\n            let sum = new Float32Array(1);\n            for (let i = 0; i < data.length; ++i) {\n                const prevSum = sum;\n                const error = this._trainPattern(data[i], true);\n                sum = this.meanSquaredError.add(sum, error);\n                release(error);\n                release(prevSum);\n            }\n            const result = this.meanSquaredError.divide(data.length, sum);\n            release(sum);\n            if (result instanceof gpu_js.Texture) {\n                const resultArray = result.toArray();\n                return resultArray[0];\n            }\n            return result[0];\n        }\n        // TODO: more types\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        formatData(data) {\n            return data;\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        _calculateDeltas(target) {\n            const lastLayerSet = this._layerSets[this._layerSets.length - 1];\n            // Iterate from the second to last layer backwards, propagating 0's\n            for (let i = lastLayerSet.length - 2; i >= 0; i--) {\n                lastLayerSet[i].compare();\n            }\n            for (let x = target.length - 2; x >= 0; x--) {\n                const layerSet = this._layerSets[x];\n                layerSet[layerSet.length - 1].compare(target[x + 1]);\n                for (let i = layerSet.length - 2; i >= 0; i--) {\n                    layerSet[i].compare();\n                }\n            }\n        }\n        adjustWeights() {\n            var _a;\n            const _model = this._model;\n            for (let i = 0; i < _model.length; i++) {\n                _model[i].learn((_a = this.options.learningRate) !== null && _a !== void 0 ? _a : 0);\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        _trainPatterns(data) {\n            for (let i = 0; i < data.length; ++i) {\n                this._trainPattern(data[i], false);\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        _trainPattern(inputs, logErrorRate) {\n            // forward propagate\n            this.runInputs(inputs);\n            // back propagate\n            this._calculateDeltas(inputs);\n            this.adjustWeights();\n            if (logErrorRate) {\n                if (!this.meanSquaredError) {\n                    throw new Error('this.meanSquaredError not setup');\n                }\n                let error = new Float32Array(1);\n                for (let i = 0, max = inputs.length - 2; i <= max; i++) {\n                    const layerSet = this._layerSets[i];\n                    const lastLayer = layerSet[layerSet.length - 1];\n                    const prevError = error;\n                    error = this.meanSquaredError.addAbsolute(prevError, lastLayer.errors);\n                    release(prevError);\n                }\n                return clone(this.meanSquaredError.divide(inputs.length, error));\n            }\n            return null;\n        }\n    }\n\n    /**\n     * A matrix\n     */\n    class Matrix {\n        constructor(rows, columns) {\n            this.rows = 0;\n            this.columns = 0;\n            if (rows)\n                this.rows = rows;\n            if (columns)\n                this.columns = columns;\n            this.weights = zeros$1(this.rows * this.columns);\n            this.deltas = zeros$1(this.rows * this.columns);\n        }\n        getWeight(row, col) {\n            // slow but careful accessor function\n            // we want row-major order\n            const ix = this.columns * row + col;\n            if (ix < 0 || ix >= this.weights.length) {\n                throw new Error('get accessor is skewed');\n            }\n            return this.weights[ix];\n        }\n        setWeight(row, col, v) {\n            // slow but careful accessor function\n            const ix = this.columns * row + col;\n            if (ix < 0 || ix >= this.weights.length) {\n                throw new Error('set accessor is skewed');\n            }\n            this.weights[ix] = v;\n            return this;\n        }\n        getDelta(row, col) {\n            // slow but careful accessor function\n            // we want row-major order\n            const ix = this.columns * row + col;\n            if (ix < 0 || ix >= this.deltas.length) {\n                throw new Error('get accessor is skewed');\n            }\n            return this.deltas[ix];\n        }\n        setDelta(row, col, v) {\n            // slow but careful accessor function\n            const ix = this.columns * row + col;\n            if (ix < 0 || ix >= this.weights.length) {\n                throw new Error('set accessor is skewed');\n            }\n            this.deltas[ix] = v;\n            return this;\n        }\n        toJSON() {\n            return {\n                rows: this.rows,\n                columns: this.columns,\n                weights: Array.from(this.weights.slice(0)),\n            };\n        }\n        static fromJSON(json) {\n            const matrix = new Matrix(json.rows, json.columns);\n            for (let i = 0, max = json.rows * json.columns; i < max; i++) {\n                matrix.weights[i] = json.weights[i]; // copy over weights\n            }\n            return matrix;\n        }\n        static fromArray(weights) {\n            const matrix = new Matrix(weights.length, weights[0].length);\n            matrix.fromArray(weights);\n            return matrix;\n        }\n        deltasToArray() {\n            return this.toArray('deltas');\n        }\n        weightsToArray() {\n            return this.toArray('weights');\n        }\n        toArray(prop = 'weights') {\n            const result = new Array(this.rows);\n            this.iterate({\n                row: (rowIndex) => {\n                    result[rowIndex] = new Array(this.columns);\n                },\n                column: (rowIndex, columnIndex) => {\n                    if (prop === 'weights') {\n                        result[rowIndex][columnIndex] = this.getWeight(rowIndex, columnIndex);\n                    }\n                    else if (prop === 'deltas') {\n                        result[rowIndex][columnIndex] = this.getDelta(rowIndex, columnIndex);\n                    }\n                },\n            });\n            return result;\n        }\n        fromArray(array, prop = 'weights') {\n            if (array.length !== this.rows) {\n                throw new Error('rows do not match');\n            }\n            if (array[0].length !== this.columns) {\n                throw new Error('columns do not match');\n            }\n            this.iterate({\n                column: (rowIndex, columnIndex) => {\n                    const value = array[rowIndex][columnIndex];\n                    if (typeof value !== 'number') {\n                        throw new Error('value not number');\n                    }\n                    if (prop === 'weights') {\n                        this.setWeight(rowIndex, columnIndex, value);\n                    }\n                    else if (prop === 'deltas') {\n                        this.setDelta(rowIndex, columnIndex, value);\n                    }\n                },\n            });\n            return this;\n        }\n        iterate(callbacks) {\n            const rows = this.rows;\n            const columns = this.columns;\n            for (let rowIndex = 0; rowIndex < rows; rowIndex++) {\n                if (callbacks.row) {\n                    callbacks.row(rowIndex);\n                }\n                for (let columnIndex = 0; columnIndex < columns; columnIndex++) {\n                    if (callbacks.column) {\n                        callbacks.column(rowIndex, columnIndex);\n                    }\n                }\n            }\n            return this;\n        }\n    }\n\n    /** return Matrix but filled with random numbers from gaussian\n     */\n    class RandomMatrix extends Matrix {\n        constructor(rows, columns, std) {\n            super(rows, columns);\n            this.std = std;\n            for (let i = 0, max = this.weights.length; i < max; i++) {\n                this.weights[i] = randomFloat(-std, std);\n            }\n        }\n    }\n\n    class DataFormatter {\n        constructor(values, maxThreshold = 0) {\n            this.values = values;\n            this.indexTable = {};\n            this.characterTable = {};\n            this.characters = [];\n            this.specialIndexes = [];\n            this.isSetup = false;\n            if (values === undefined)\n                return;\n            this.setup(values, maxThreshold);\n        }\n        setup(values, maxThreshold = 0) {\n            if (this.isSetup)\n                throw new Error('DataFormatter is already setup');\n            this.values = values;\n            // go over all characters and keep track of all unique ones seen\n            // count up all characters\n            this.buildCharactersFromIterable(values);\n            this.buildTables(maxThreshold);\n            if (values[0].input) {\n                this.addInputOutput();\n            }\n            this.addUnrecognized();\n            this.isSetup = true;\n        }\n        buildCharactersFromIterable(values) {\n            const tempCharactersTable = {};\n            for (let dataFormatterIndex = 0, dataFormatterLength = values.length; dataFormatterIndex < dataFormatterLength; dataFormatterIndex++) {\n                const characters = values[dataFormatterIndex];\n                // if (typeof characters === 'string') {\n                //   const character = characters;\n                //   if (tempCharactersTable.hasOwnProperty(character)) continue;\n                //   tempCharactersTable[character] = true;\n                //   this.characters.push(character);\n                if (characters.hasOwnProperty('length')) {\n                    const iteratable = characters;\n                    for (let characterIndex = 0, charactersLength = iteratable.length; characterIndex < charactersLength; characterIndex++) {\n                        const character = iteratable[characterIndex];\n                        if (tempCharactersTable.hasOwnProperty(character))\n                            continue;\n                        tempCharactersTable[character] = true;\n                        this.characters.push(character);\n                    }\n                }\n                else if (typeof characters === 'number') {\n                    if (tempCharactersTable.hasOwnProperty(characters))\n                        continue;\n                    tempCharactersTable[characters] = true;\n                    this.characters.push(characters);\n                }\n                else if (typeof characters === 'boolean') {\n                    const character = characters.toString();\n                    if (tempCharactersTable.hasOwnProperty(character))\n                        continue;\n                    tempCharactersTable[character] = true;\n                    this.characters.push(character);\n                }\n                else if (Array.isArray(characters) &&\n                    typeof characters[0] === 'string') {\n                    for (let i = 0; i < characters.length; i++) {\n                        const character = characters[i];\n                        if (tempCharactersTable.hasOwnProperty(character))\n                            continue;\n                        tempCharactersTable[character] = true;\n                        this.characters.push(character);\n                    }\n                }\n                else if (Array.isArray(characters) &&\n                    (typeof characters[0] === 'number' ||\n                        typeof characters[0] === 'boolean')) {\n                    for (let i = 0; i < characters.length; i++) {\n                        const character = characters[i].toString();\n                        if (tempCharactersTable.hasOwnProperty(dataFormatterIndex))\n                            continue;\n                        tempCharactersTable[character] = true;\n                        this.characters.push(character);\n                    }\n                }\n                else if (characters.hasOwnProperty('input') &&\n                    characters.hasOwnProperty('output')) {\n                    const { input, output } = characters;\n                    if (Array.isArray(input)) {\n                        this.addCharacters(input, tempCharactersTable);\n                    }\n                    else {\n                        this.addCharacters(input.toString(), tempCharactersTable);\n                    }\n                    if (Array.isArray(output)) {\n                        this.addCharacters(output, tempCharactersTable);\n                    }\n                    else {\n                        this.addCharacters(output.toString(), tempCharactersTable);\n                    }\n                }\n                else {\n                    throw new Error('Unhandled value');\n                }\n            }\n        }\n        addCharacters(characters, charactersTable) {\n            for (let i = 0; i < characters.length; i++) {\n                const character = characters[i].toString();\n                if (charactersTable.hasOwnProperty(character))\n                    continue;\n                charactersTable[character] = true;\n                this.characters.push(character);\n            }\n        }\n        buildTables(maxThreshold) {\n            // filter by count threshold and create pointers\n            const charactersLength = this.characters.length;\n            for (let characterIndex = 0; characterIndex < charactersLength; characterIndex++) {\n                const character = this.characters[characterIndex];\n                if (characterIndex >= maxThreshold) {\n                    // add character to dataFormatter\n                    this.indexTable[character] = characterIndex;\n                    this.characterTable[characterIndex] = character;\n                }\n            }\n        }\n        toIndexes(value, maxThreshold = 0) {\n            const result = [];\n            const { indexTable } = this;\n            switch (typeof value) {\n                case 'number':\n                case 'boolean':\n                    value = value.toString();\n            }\n            for (let i = 0, max = value.length; i < max; i++) {\n                const character = value[i].toString();\n                let index = indexTable[character];\n                if (index === undefined) {\n                    if (indexTable.unrecognized) {\n                        index = indexTable.unrecognized;\n                    }\n                    else {\n                        throw new Error(`unrecognized character \"${character}\"`);\n                    }\n                }\n                if (index < maxThreshold)\n                    continue;\n                result.push(index);\n            }\n            return result;\n        }\n        toIndexesInputOutput(input, output, maxThreshold = 0) {\n            const result = this.toIndexesValue(input, maxThreshold, true);\n            if (typeof output === 'undefined')\n                return result;\n            return result.concat(this.toIndexesValue(output, maxThreshold, false));\n        }\n        toIndexesValue(value, maxThreshold, isInput) {\n            if (typeof value === 'string') {\n                value = value.split('');\n            }\n            else if (typeof value === 'number' || typeof value === 'boolean') {\n                value = value.toString().split('');\n            }\n            else if (Array.isArray(value) &&\n                (typeof value[0] === 'number' ||\n                    typeof value[0] === 'boolean' ||\n                    typeof value[0] === 'string')) {\n                value = value.map((v) => v.toString());\n            }\n            else {\n                throw new Error('unrecognized value');\n            }\n            if (isInput) {\n                value = value.concat(['stop-input', 'start-output']);\n            }\n            return this.toIndexes(value, maxThreshold);\n        }\n        toCharacters(indices, maxThreshold = 0) {\n            const result = [];\n            const { indexTable, characterTable } = this;\n            for (let i = 0, max = indices.length; i < max; i++) {\n                const index = indices[i];\n                if (index < maxThreshold)\n                    continue;\n                let character = characterTable[index];\n                if (character === undefined) {\n                    if (indexTable.unrecognized) {\n                        character = characterTable[indexTable.unrecognized];\n                    }\n                    else {\n                        throw new Error(`unrecognized index \"${index}\"`);\n                    }\n                }\n                else if (character !== null) {\n                    result.push(character.toString());\n                }\n            }\n            return result;\n        }\n        toString(indices, maxThreshold) {\n            return this.toCharacters(indices, maxThreshold).join('');\n        }\n        addInputOutput() {\n            this.addSpecial('stop-input');\n            this.addSpecial('start-output');\n        }\n        addUnrecognized() {\n            this.addSpecial('unrecognized');\n        }\n        static fromAllPrintable(maxThreshold, values = ['\\n']) {\n            for (let i = 32; i <= 126; i++) {\n                values.push(String.fromCharCode(i));\n            }\n            return new DataFormatter(values, maxThreshold);\n        }\n        static fromAllPrintableInputOutput(maxThreshold, values = ['\\n']) {\n            const dataFormatter = DataFormatter.fromAllPrintable(maxThreshold, values);\n            dataFormatter.addInputOutput();\n            dataFormatter.addUnrecognized();\n            return dataFormatter;\n        }\n        static fromStringInputOutput(string, maxThreshold) {\n            const values = Array.from(new Set(string)).join('');\n            const dataFormatter = new DataFormatter(values.split(''), maxThreshold);\n            dataFormatter.addInputOutput();\n            dataFormatter.addUnrecognized();\n            dataFormatter.isSetup = true;\n            return dataFormatter;\n        }\n        static fromArrayInputOutput(data, maxThreshold) {\n            const values = [];\n            for (let i = 0; i < data.length; i++) {\n                const datum = data[i];\n                values.push(validateAndCast(datum.input), validateAndCast(datum.output));\n            }\n            const flatArray = Array.isArray(values)\n                ? values.flat()\n                : values;\n            const dataFormatter = new DataFormatter(Array.from(new Set(flatArray)), maxThreshold);\n            dataFormatter.addInputOutput();\n            dataFormatter.addUnrecognized();\n            dataFormatter.isSetup = true;\n            return dataFormatter;\n        }\n        static fromString(string, maxThreshold = 0) {\n            const values = Array.from(new Set(string)).join('');\n            return new DataFormatter(values.split(''), maxThreshold);\n        }\n        toJSON() {\n            return {\n                indexTable: this.indexTable,\n                characterTable: this.characterTable,\n                values: this.values,\n                characters: this.characters,\n                specialIndexes: this.specialIndexes,\n            };\n        }\n        /** TODO: Type better, The type of json is not \"string that is a valid JSON\", it is a POJO in the shape of DataFormatter.\n         * this method re-hydrates the the data as an instance of DataFormatter.\n         */\n        static fromJSON(json) {\n            const dataFormatter = new DataFormatter();\n            dataFormatter.indexTable = json.indexTable;\n            dataFormatter.characterTable = json.characterTable;\n            dataFormatter.values = json.values;\n            dataFormatter.characters = json.characters;\n            dataFormatter.specialIndexes = json.specialIndexes;\n            dataFormatter.isSetup = true;\n            return dataFormatter;\n        }\n        addSpecial(special, character = null) {\n            const specialIndex = (this.indexTable[special] = this.characters.length);\n            this.characterTable[specialIndex] = character;\n            this.specialIndexes.push(this.characters.length);\n            this.characters.push(special);\n        }\n        toFunctionString() {\n            return `\nvar characterTable = ${JSON.stringify(this.characterTable)};\nvar indexTable = ${JSON.stringify(this.indexTable)};\nvar characters = ${JSON.stringify(this.characters)};\nvar dataFormatter = {\n  toIndexes: function ${this.toIndexes.toString()},\n  toIndexesInputOutput: function ${this.toIndexesInputOutput.toString()},\n  toCharacters: function ${this.toCharacters.toString()},\n  toIndexesValue: function ${this.toIndexesValue.toString()},\n};`;\n        }\n        formatDataIn(input, output) {\n            var _a;\n            if (input === undefined)\n                return [];\n            if (Array.isArray(input) && typeof input[0] === 'number') {\n                return input;\n            }\n            if ((_a = this.indexTable) === null || _a === void 0 ? void 0 : _a.hasOwnProperty('stop-input')) {\n                return this.toIndexesInputOutput(input, output);\n            }\n            return this.toIndexes(input);\n        }\n        formatDataOut(input, output) {\n            return this.toCharacters(output).join('');\n        }\n        format(data) {\n            if (typeof data[0] === 'number' &&\n                !Array.isArray(data[0]) &&\n                (!data[0].hasOwnProperty('input') || !data[0].hasOwnProperty('output'))) {\n                return data;\n            }\n            const result = [];\n            if (typeof data[0] === 'string' ||\n                typeof data[0] === 'number' ||\n                Array.isArray(data[0])) {\n                if (!this.isSetup) {\n                    this.setup(data);\n                    for (let i = 0; i < data.length; i++) {\n                        result.push(this.formatDataIn(validateAndCast(data[i])));\n                    }\n                }\n                else {\n                    for (let i = 0, max = data.length; i < max; i++) {\n                        result.push(this.formatDataIn(data[i]));\n                    }\n                }\n            }\n            else if (data[0].input && data[0].output) {\n                if (!this.isSetup) {\n                    this.setup(data);\n                }\n                for (let i = 0, max = data.length; i < max; i++) {\n                    result.push(this.formatDataIn(validateAndCast(data[i].input), validateAndCast(data[i].output)));\n                }\n            }\n            else {\n                throw new Error('unrecognized data');\n            }\n            return result;\n        }\n    }\n    function validateAndCast(value) {\n        if (typeof value === 'string')\n            return value;\n        if (typeof value === 'number')\n            return value.toString();\n        if (typeof value === 'boolean')\n            return value.toString();\n        if (Array.isArray(value) && typeof value[0] === 'string')\n            return value;\n        if (typeof value[0] === 'boolean') {\n            return value.map((v) => v.toString());\n        }\n        if (typeof value[0] === 'number') {\n            return value.map((v) => v.toString());\n        }\n        throw new Error('unrecognized value, expected string[], string, number[], number, boolean[], or boolean');\n    }\n\n    function copy(product, left) {\n        product.rows = left.rows;\n        product.columns = left.columns;\n        product.weights = left.weights.slice(0);\n        product.deltas = left.deltas.slice(0);\n    }\n\n    /**\n     * add {left} and {right} matrix weights into {into}\n     */\n    function add(product, left, right) {\n        for (let i = 0; i < left.weights.length; i++) {\n            product.weights[i] = left.weights[i] + right.weights[i];\n            product.deltas[i] = 0;\n        }\n    }\n\n    /**\n     * adds {from} deltas to {left} and {right} deltas\n     */\n    function addB(product, left, right) {\n        for (let i = 0; i < product.deltas.length; i++) {\n            left.deltas[i] = product.deltas[i];\n            right.deltas[i] = product.deltas[i];\n        }\n    }\n\n    /**\n     * makes matrix weights and deltas all ones\n     */\n    function allOnes(product) {\n        for (let i = 0; i < product.weights.length; i++) {\n            product.weights[i] = 1;\n            product.deltas[i] = 0;\n        }\n    }\n\n    function cloneNegative(product, left) {\n        product.rows = left.rows;\n        product.columns = left.columns;\n        product.weights = left.weights.slice(0);\n        product.deltas = left.deltas.slice(0);\n        for (let i = 0; i < left.weights.length; i++) {\n            product.weights[i] = -left.weights[i];\n            product.deltas[i] = 0;\n        }\n    }\n\n    /**\n     * multiply {left} and {right} matrix weights to {into}\n     */\n    function multiply(product, left, right) {\n        const leftRows = left.rows;\n        const leftColumns = left.columns;\n        const rightColumns = right.columns;\n        // loop over rows of left\n        for (let leftRow = 0; leftRow < leftRows; leftRow++) {\n            const leftRowBase = leftColumns * leftRow;\n            const rightRowBase = rightColumns * leftRow;\n            // loop over cols of right\n            for (let rightColumn = 0; rightColumn < rightColumns; rightColumn++) {\n                // dot product loop\n                let dot = 0;\n                // loop over columns of left\n                for (let leftColumn = 0; leftColumn < leftColumns; leftColumn++) {\n                    const rightColumnBase = rightColumns * leftColumn;\n                    const leftIndex = leftRowBase + leftColumn;\n                    const rightIndex = rightColumnBase + rightColumn;\n                    dot += left.weights[leftIndex] * right.weights[rightIndex];\n                    left.deltas[leftIndex] = 0;\n                    right.deltas[rightIndex] = 0;\n                }\n                product.weights[rightRowBase + rightColumn] = dot;\n            }\n        }\n    }\n\n    /**\n     * multiplies {from} deltas to {left} and {right}\n     */\n    function multiplyB(product, left, right) {\n        const leftRows = left.rows;\n        const leftColumns = left.columns;\n        const rightColumns = right.columns;\n        // loop over rows of left\n        for (let leftRowRoot = 0; leftRowRoot < leftRows; leftRowRoot++) {\n            const leftRowBase = leftColumns * leftRowRoot;\n            const rightRowBase = rightColumns * leftRowRoot;\n            // loop over cols of right\n            for (let rightColumn = 0; rightColumn < rightColumns; rightColumn++) {\n                // loop over columns of left\n                for (let leftColumn = 0; leftColumn < leftColumns; leftColumn++) {\n                    const rightColumnBase = rightColumns * leftColumn;\n                    const leftRow = leftRowBase + leftColumn;\n                    const rightRow = rightColumnBase + rightColumn;\n                    const backPropagateValue = product.deltas[rightRowBase + rightColumn];\n                    left.deltas[leftRow] += right.weights[rightRow] * backPropagateValue;\n                    right.deltas[rightRow] += left.weights[leftRow] * backPropagateValue;\n                }\n            }\n        }\n    }\n\n    function multiplyElement(product, left, right) {\n        const { weights } = left;\n        for (let i = 0; i < weights.length; i++) {\n            product.weights[i] = left.weights[i] * right.weights[i];\n            product.deltas[i] = 0;\n        }\n    }\n\n    /**\n     * multiplies {left} and {right} weight by {from} deltas into {left} and {right} deltas\n     */\n    function multiplyElementB(product, left, right) {\n        for (let i = 0; i < left.weights.length; i++) {\n            left.deltas[i] = right.weights[i] * product.deltas[i];\n            right.deltas[i] = left.weights[i] * product.deltas[i];\n        }\n    }\n\n    /**\n     *\n     * relu {m} weights to {into} weights\n     */\n    function relu(product, left) {\n        for (let i = 0; i < left.weights.length; i++) {\n            product.weights[i] = Math.max(0, left.weights[i]); // relu\n            product.deltas[i] = 0;\n        }\n    }\n\n    /**\n     * adds {from} deltas to {m} deltas when {m} weights are above other a threshold of 0\n     */\n    function reluB(product, left) {\n        for (let i = 0; i < product.deltas.length; i++) {\n            left.deltas[i] = left.weights[i] > 0 ? product.deltas[i] : 0;\n        }\n    }\n\n    function rowPluck(product, left, rowPluckIndex) {\n        const { columns } = left;\n        const rowBase = columns * rowPluckIndex;\n        for (let column = 0; column < columns; column++) {\n            product.weights[column] = left.weights[rowBase + column];\n            product.deltas[column] = 0;\n        }\n    }\n\n    /**\n     * adds {from} deltas into {m} deltas\n     */\n    function rowPluckB(product, left, rowIndex) {\n        const { columns } = left;\n        const rowBase = columns * rowIndex;\n        for (let column = 0; column < columns; column++) {\n            left.deltas[rowBase + column] = product.deltas[column];\n        }\n    }\n\n    function sigmoid(product, left) {\n        // sigmoid nonlinearity\n        for (let i = 0; i < left.weights.length; i++) {\n            product.weights[i] = 1 / (1 + Math.exp(-left.weights[i]));\n            product.deltas[i] = 0;\n        }\n    }\n    // function sig(x) {\n    //   // helper function for computing sigmoid\n    //   return 1 / (1 + Math.exp(-x));\n    // }\n\n    function sigmoidB(product, left) {\n        for (let i = 0; i < product.deltas.length; i++) {\n            const mwi = product.weights[i];\n            left.deltas[i] = mwi * (1 - mwi) * product.deltas[i];\n        }\n    }\n\n    function softmax(matrix) {\n        // probability volume\n        const result = new Matrix(matrix.rows, matrix.columns);\n        let maxVal = -999999;\n        for (let i = 0; i < matrix.weights.length; i++) {\n            if (matrix.weights[i] > maxVal) {\n                maxVal = matrix.weights[i];\n            }\n        }\n        let s = 0;\n        for (let i = 0; i < matrix.weights.length; i++) {\n            result.weights[i] = Math.exp(matrix.weights[i] - maxVal);\n            s += result.weights[i];\n        }\n        for (let i = 0; i < matrix.weights.length; i++) {\n            result.weights[i] /= s;\n        }\n        // no backward pass here needed\n        // since we will use the computed probabilities outside\n        // to set gradients directly on m\n        return result;\n    }\n\n    function tanh(product, left) {\n        // tanh nonlinearity\n        for (let i = 0; i < left.weights.length; i++) {\n            product.weights[i] = Math.tanh(left.weights[i]);\n            product.deltas[i] = 0;\n        }\n    }\n\n    function tanhB(product, left) {\n        for (let i = 0; i < product.deltas.length; i++) {\n            // grad for z = tanh(x) is (1 - z^2)\n            const mwi = product.weights[i];\n            left.deltas[i] = (1 - mwi * mwi) * product.deltas[i];\n        }\n    }\n\n    class Equation {\n        constructor() {\n            this.states = [];\n            this.inputRow = 0;\n        }\n        add(left, right) {\n            if (left.weights.length !== right.weights.length) {\n                throw new Error('misaligned matrices');\n            }\n            const product = new Matrix(left.rows, left.columns);\n            this.states.push({\n                name: 'add',\n                product,\n                left,\n                right,\n                forwardFn: add,\n                backpropagationFn: addB,\n            });\n            return product;\n        }\n        allOnes(rows, columns) {\n            const product = new Matrix(rows, columns);\n            this.states.push({\n                name: 'allOnes',\n                product,\n                left: product,\n                forwardFn: allOnes,\n                backpropagationFn: () => { },\n            });\n            return product;\n        }\n        cloneNegative(matrix) {\n            const product = new Matrix(matrix.rows, matrix.columns);\n            this.states.push({\n                name: 'cloneNegative',\n                product,\n                left: matrix,\n                forwardFn: cloneNegative,\n                backpropagationFn: () => { },\n            });\n            return product;\n        }\n        /**\n         * connects two matrices together by subtract\n         */\n        subtract(left, right) {\n            if (left.weights.length !== right.weights.length) {\n                throw new Error('misaligned matrices');\n            }\n            return this.add(this.add(this.allOnes(left.rows, left.columns), this.cloneNegative(left)), right);\n        }\n        /**\n         * connects two matrices together by multiply\n         */\n        multiply(left, right) {\n            if (left.columns !== right.rows) {\n                throw new Error('misaligned matrices');\n            }\n            const product = new Matrix(left.rows, right.columns);\n            this.states.push({\n                name: 'multiply',\n                product,\n                left,\n                right,\n                forwardFn: multiply,\n                backpropagationFn: multiplyB,\n            });\n            return product;\n        }\n        /**\n         * connects two matrices together by multiplyElement\n         */\n        multiplyElement(left, right) {\n            if (left.weights.length !== right.weights.length) {\n                throw new Error('misaligned matrices');\n            }\n            const product = new Matrix(left.rows, left.columns);\n            this.states.push({\n                name: 'multiplyElement',\n                product,\n                left,\n                right,\n                forwardFn: multiplyElement,\n                backpropagationFn: multiplyElementB,\n            });\n            return product;\n        }\n        /**\n         * connects a matrix to relu\n         */\n        relu(matrix) {\n            const product = new Matrix(matrix.rows, matrix.columns);\n            this.states.push({\n                name: 'relu',\n                product,\n                left: matrix,\n                forwardFn: relu,\n                backpropagationFn: reluB,\n            });\n            return product;\n        }\n        /**\n         * input a matrix\n         */\n        input(input) {\n            this.states.push({\n                name: 'input',\n                product: input,\n                forwardFn: (product) => {\n                    if (!this.inputValue)\n                        return;\n                    if (this.inputValue.length !== product.weights.length) {\n                        throw new Error('this.inputValue is of wrong dimensions');\n                    }\n                    product.weights = input.weights = this.inputValue;\n                },\n                backpropagationFn: () => { },\n            });\n            return input;\n        }\n        /**\n         * connects a matrix via a row\n         */\n        inputMatrixToRow(matrix) {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const self = this;\n            const product = new Matrix(matrix.columns, 1);\n            this.states.push({\n                name: 'inputMatrixToRow',\n                product,\n                left: matrix,\n                get right() {\n                    return self.inputRow;\n                },\n                forwardFn: rowPluck,\n                backpropagationFn: rowPluckB,\n            });\n            return product;\n        }\n        /**\n         * connects a matrix to sigmoid\n         */\n        sigmoid(matrix) {\n            const product = new Matrix(matrix.rows, matrix.columns);\n            this.states.push({\n                name: 'sigmoid',\n                product,\n                left: matrix,\n                forwardFn: sigmoid,\n                backpropagationFn: sigmoidB,\n            });\n            return product;\n        }\n        /**\n         * connects a matrix to tanh\n         */\n        tanh(matrix) {\n            const product = new Matrix(matrix.rows, matrix.columns);\n            this.states.push({\n                name: 'tanh',\n                product,\n                left: matrix,\n                forwardFn: tanh,\n                backpropagationFn: tanhB,\n            });\n            return product;\n        }\n        /**\n         *\n         * Observe a matrix for debugging\n         */\n        observe(matrix) {\n            this.states.push({\n                name: 'observe',\n                product: new Matrix(),\n                forwardFn: () => { },\n                backpropagationFn: () => { },\n            });\n            return matrix;\n        }\n        /**\n         * Run index through equations via forward propagation\n         */\n        runIndex(rowIndex = 0) {\n            this.inputRow = rowIndex;\n            let state = this.states[0];\n            for (let i = 0, max = this.states.length; i < max; i++) {\n                state = this.states[i];\n                if (!state.hasOwnProperty('forwardFn'))\n                    continue;\n                state.forwardFn(state.product, state.left, state.right);\n            }\n            return state.product;\n        }\n        /**\n         * Run value through equations via forward propagation\n         */\n        runInput(inputValue) {\n            this.inputValue = inputValue;\n            let state = this.states[0];\n            for (let i = 0, max = this.states.length; i < max; i++) {\n                state = this.states[i];\n                if (!state.hasOwnProperty('forwardFn'))\n                    continue;\n                state.forwardFn(state.product, state.left, state.right);\n            }\n            return state.product;\n        }\n        /**\n         * Run value through equations via back propagation\n         */\n        backpropagate() {\n            let i = this.states.length;\n            let state = this.states[0];\n            while (i-- > 0) {\n                state = this.states[i];\n                if (!state.hasOwnProperty('backpropagationFn'))\n                    continue;\n                state.backpropagationFn(state.product, state.left, state.right);\n            }\n            return state.product;\n        }\n        /**\n         * Run index through equations via back propagation\n         */\n        backpropagateIndex(rowIndex = 0) {\n            this.inputRow = rowIndex;\n            let i = this.states.length;\n            let state = this.states[0];\n            while (i-- > 0) {\n                state = this.states[i];\n                if (!state.hasOwnProperty('backpropagationFn'))\n                    continue;\n                state.backpropagationFn(state.product, state.left, state.right);\n            }\n            return state.product;\n        }\n        /**\n         * Predict a target value from equation\n         */\n        predictTarget(input, target) {\n            let errorSum = 0;\n            const output = this.runInput(input);\n            for (let i = 0; i < output.weights.length; i++) {\n                const error = output.weights[i] - target[i];\n                // set gradients into log probabilities\n                errorSum += Math.abs(error);\n                // write gradients into log probabilities\n                output.deltas[i] = error;\n            }\n            return errorSum;\n        }\n        /**\n         * Predict a target index from equation\n         */\n        predictTargetIndex(input, target) {\n            const output = this.runIndex(input);\n            // set gradients into log probabilities\n            const logProbabilities = output; // interpret output as log probabilities\n            const probabilities = softmax(output); // compute the softmax probabilities\n            // write gradients into log probabilities\n            logProbabilities.deltas = probabilities.weights.slice(0);\n            logProbabilities.deltas[target] -= 1;\n            // accumulate base 2 log prob and do smoothing\n            return -Math.log2(probabilities.weights[target]);\n        }\n    }\n\n    function maxI(matrix) {\n        // argmax of array w\n        const { weights } = matrix;\n        let maxv = weights[0];\n        let maxix = 0;\n        for (let i = 1; i < weights.length; i++) {\n            const v = weights[i];\n            if (v < maxv)\n                continue;\n            maxix = i;\n            maxv = v;\n        }\n        return maxix;\n    }\n\n    function sampleI(matrix) {\n        // sample argmax from w, assuming w are\n        // probabilities that sum to one\n        const r = randomFloat(0, 1);\n        const w = matrix.weights;\n        let x = 0;\n        let i = 0;\n        while (true) {\n            x += w[i];\n            if (x > r) {\n                return i;\n            }\n            i++;\n        }\n    }\n\n    const trainDefaults$1 = {\n        iterations: 20000,\n        errorThresh: 0.005,\n        log: false,\n        logPeriod: 10,\n        learningRate: 0.01,\n        callbackPeriod: 10,\n        timeout: Infinity,\n    };\n    const defaults$1 = () => {\n        return {\n            inputSize: 20,\n            inputRange: 20,\n            hiddenLayers: [20, 20],\n            outputSize: 20,\n            decayRate: 0.999,\n            smoothEps: 1e-8,\n            regc: 0.000001,\n            clipval: 5,\n            maxPredictionLength: 100,\n            dataFormatter: new DataFormatter(),\n        };\n    };\n    class RNN {\n        constructor(options = {}) {\n            this.options = { ...defaults$1() };\n            this.trainOpts = { ...trainDefaults$1 };\n            this.stepCache = {};\n            this.runs = 0;\n            this.ratioClipped = 0;\n            this.model = Object.seal({\n                isInitialized: false,\n                input: new Matrix(0, 0),\n                hiddenLayers: [],\n                output: new Matrix(0, 0),\n                equations: [],\n                allMatrices: [],\n                equationConnections: [],\n                outputConnector: new RandomMatrix(0, 0, 0.08),\n            });\n            this.initialLayerInputs = [];\n            this.options = { ...this.options, ...options };\n            this.updateTrainingOptions({\n                ...trainDefaults$1,\n            });\n            if (options.json) {\n                this.fromJSON(options.json);\n            }\n        }\n        initialize() {\n            const { dataFormatter } = this.options;\n            if (dataFormatter === null || dataFormatter === void 0 ? void 0 : dataFormatter.characters.length) {\n                this.options.inputSize = this.options.inputRange = this.options.outputSize =\n                    dataFormatter.characters.length;\n            }\n            this.model = this.mapModel();\n        }\n        createHiddenLayers() {\n            const { hiddenLayers, inputSize } = this.options;\n            const hiddenLayersModel = [];\n            // 0 is end, so add 1 to offset\n            hiddenLayersModel.push(this.getHiddenLayer(hiddenLayers[0], inputSize));\n            let prevSize = hiddenLayers[0];\n            for (let d = 1; d < hiddenLayers.length; d++) {\n                // loop over depths\n                const hiddenSize = hiddenLayers[d];\n                hiddenLayersModel.push(this.getHiddenLayer(hiddenSize, prevSize));\n                prevSize = hiddenSize;\n            }\n            return hiddenLayersModel;\n        }\n        getHiddenLayer(hiddenSize, prevSize) {\n            return {\n                // wxh\n                weight: new RandomMatrix(hiddenSize, prevSize, 0.08),\n                // whh\n                transition: new RandomMatrix(hiddenSize, hiddenSize, 0.08),\n                // bhh\n                bias: new Matrix(hiddenSize, 1),\n            };\n        }\n        getEquation(equation, inputMatrix, previousResult, hiddenLayer) {\n            if (!hiddenLayer.weight || !hiddenLayer.transition || !hiddenLayer.bias) {\n                throw new Error('hiddenLayer does not have expected properties');\n            }\n            const relu = equation.relu.bind(equation);\n            const add = equation.add.bind(equation);\n            const multiply = equation.multiply.bind(equation);\n            return relu(add(add(multiply(hiddenLayer.weight, inputMatrix), multiply(hiddenLayer.transition, previousResult)), hiddenLayer.bias));\n        }\n        createInputMatrix() {\n            const { inputRange, inputSize } = this.options;\n            if (inputRange < 1)\n                throw new Error('this.options.inputRange not an expected number');\n            if (inputSize < 1)\n                throw new Error('this.options.inputSize not an expected number');\n            // 0 is end, so add 1 to offset\n            return new RandomMatrix(inputRange + 1, inputSize, 0.08);\n        }\n        createOutputMatrices() {\n            const { outputSize, hiddenLayers } = this.options;\n            const lastHiddenSize = last(hiddenLayers);\n            // 0 is end, so add 1 to offset\n            return {\n                // whd\n                outputConnector: new RandomMatrix(outputSize + 1, lastHiddenSize, 0.08),\n                // 0 is end, so add 1 to offset\n                // bd\n                output: new Matrix(outputSize + 1, 1),\n            };\n        }\n        bindEquation() {\n            const { model } = this;\n            const { hiddenLayers } = this.options;\n            const equation = new Equation();\n            const outputs = [];\n            const equationConnection = model.equationConnections.length > 0\n                ? last(model.equationConnections)\n                : this.initialLayerInputs;\n            // 0 index\n            let output = this.getEquation(equation, equation.inputMatrixToRow(model.input), equationConnection[0], model.hiddenLayers[0]);\n            outputs.push(output);\n            // 1+ indices\n            for (let i = 1, max = hiddenLayers.length; i < max; i++) {\n                if (!equationConnection[i]) {\n                    throw new Error(`Cannot find equation at index ${i}`);\n                }\n                output = this.getEquation(equation, output, equationConnection[i], model.hiddenLayers[i]);\n                outputs.push(output);\n            }\n            model.equationConnections.push(outputs);\n            equation.add(equation.multiply(model.outputConnector, output), model.output);\n            model.equations.push(equation);\n        }\n        mapModel() {\n            const allMatrices = [];\n            this.initialLayerInputs = this.options.hiddenLayers.map((size) => new Matrix(size, 1));\n            const input = this.createInputMatrix();\n            allMatrices.push(input);\n            const hiddenLayers = this.createHiddenLayers();\n            if (!hiddenLayers.length)\n                throw new Error('net.hiddenLayers not set');\n            for (let i = 0, max = hiddenLayers.length; i < max; i++) {\n                const hiddenMatrix = hiddenLayers[i];\n                for (const property in hiddenMatrix) {\n                    if (!hiddenMatrix.hasOwnProperty(property))\n                        continue;\n                    allMatrices.push(hiddenMatrix[property]);\n                }\n            }\n            const { output, outputConnector } = this.createOutputMatrices();\n            allMatrices.push(outputConnector);\n            allMatrices.push(output);\n            return Object.seal({\n                isInitialized: true,\n                input,\n                hiddenLayers,\n                output,\n                equations: [],\n                allMatrices,\n                equationConnections: [],\n                outputConnector,\n            });\n        }\n        trainInput(input) {\n            this.runs++;\n            const { model } = this;\n            const max = input.length;\n            let log2ppl = 0;\n            let equation;\n            while (model.equations.length <= input.length + 1) {\n                // last is zero\n                this.bindEquation();\n            }\n            for (let inputIndex = -1, inputMax = input.length; inputIndex < inputMax; inputIndex++) {\n                // start and end tokens are zeros\n                const equationIndex = inputIndex + 1;\n                equation = model.equations[equationIndex];\n                const source = inputIndex === -1 ? 0 : input[inputIndex] + 1; // first step: start with START token\n                const target = inputIndex === max - 1 ? 0 : input[inputIndex + 1] + 1; // last step: end with END token\n                log2ppl += equation.predictTargetIndex(source, target);\n            }\n            return Math.pow(2, log2ppl / (max - 1)) / 100;\n        }\n        backpropagate(input) {\n            let i = input.length;\n            const { model } = this;\n            const { equations } = model;\n            while (i > 0) {\n                equations[i].backpropagateIndex(input[i - 1] + 1);\n                i--;\n            }\n            equations[0].backpropagateIndex(0);\n        }\n        adjustWeights() {\n            const { regc, clipval, decayRate, smoothEps } = this.options;\n            const { trainOpts, model, stepCache } = this;\n            const { learningRate } = trainOpts;\n            const { allMatrices } = model;\n            let numClipped = 0;\n            let numTot = 0;\n            for (let matrixIndex = 0; matrixIndex < allMatrices.length; matrixIndex++) {\n                const matrix = allMatrices[matrixIndex];\n                const { weights, deltas } = matrix;\n                if (!(matrixIndex in stepCache)) {\n                    stepCache[matrixIndex] = zeros$1(matrix.rows * matrix.columns);\n                }\n                const cache = stepCache[matrixIndex];\n                for (let i = 0; i < weights.length; i++) {\n                    let r = deltas[i];\n                    const w = weights[i];\n                    // rmsprop adaptive learning rate\n                    cache[i] = cache[i] * decayRate + (1 - decayRate) * r * r;\n                    // gradient clip\n                    if (r > clipval) {\n                        r = clipval;\n                        numClipped++;\n                    }\n                    else if (r < -clipval) {\n                        r = -clipval;\n                        numClipped++;\n                    }\n                    numTot++;\n                    // update (and regularize)\n                    weights[i] =\n                        w + (-learningRate * r) / Math.sqrt(cache[i] + smoothEps) - regc * w;\n                }\n            }\n            this.ratioClipped = numClipped / numTot;\n        }\n        get isRunnable() {\n            if (this.model && this.model.equations.length === 0) {\n                console.error(`No equations bound, did you run train()?`);\n                return false;\n            }\n            return true;\n        }\n        checkRunnable() {\n            if (!this.isRunnable) {\n                throw new Error('Network not runnable');\n            }\n        }\n        run(rawInput = [], isSampleI = false, temperature = 1) {\n            const maxPredictionLength = this.options.maxPredictionLength +\n                (rawInput !== null ? rawInput.length : 0) +\n                (this.options.dataFormatter\n                    ? this.options.dataFormatter.specialIndexes.length\n                    : 0);\n            this.checkRunnable();\n            const input = this.options.dataFormatter && rawInput.length > 0\n                ? this.options.dataFormatter.formatDataIn(rawInput)\n                : rawInput;\n            const { model } = this;\n            const output = [];\n            let i = 0;\n            while (true) {\n                const previousIndex = i === 0 ? 0 : i < input.length ? input[i - 1] + 1 : output[i - 1];\n                while (model.equations.length <= i) {\n                    this.bindEquation();\n                }\n                const equation = model.equations[i];\n                // sample predicted letter\n                const outputMatrix = equation.runIndex(previousIndex);\n                const logProbabilities = new Matrix(model.output.rows, model.output.columns);\n                copy(logProbabilities, outputMatrix);\n                if (temperature !== 1 && isSampleI) {\n                    /**\n                     * scale log probabilities by temperature and re-normalize\n                     * if temperature is high, logProbabilities will go towards zero\n                     * and the softmax outputs will be more diffuse. if temperature is\n                     * very low, the softmax outputs will be more peaky\n                     */\n                    for (let j = 0, max = logProbabilities.weights.length; j < max; j++) {\n                        logProbabilities.weights[j] /= temperature;\n                    }\n                }\n                const probs = softmax(logProbabilities);\n                const nextIndex = isSampleI ? sampleI(probs) : maxI(probs);\n                i++;\n                if (nextIndex === 0) {\n                    // END token predicted, break out\n                    break;\n                }\n                if (i >= maxPredictionLength) {\n                    // something is wrong\n                    break;\n                }\n                output.push(nextIndex);\n            }\n            /**\n             * we slice the input length here, not because output contains it, but it will be erroneous as we are sending the\n             * network what is contained in input, so the data is essentially guessed by the network what could be next, till it\n             * locks in on a value.\n             * Kind of like this, values are from input:\n             * 0 -> 4 (or in English: \"beginning on input\" -> \"I have no idea? I'll guess what they want next!\")\n             * 2 -> 2 (oh how interesting, I've narrowed down values...)\n             * 1 -> 9 (oh how interesting, I've now know what the values are...)\n             * then the output looks like: [4, 2, 9,...]\n             * so we then remove the erroneous data to get our true output\n             */\n            return this.options.dataFormatter.formatDataOut(input, output.slice(input.length).map((value) => value - 1));\n        }\n        /**\n         *\n         * Verifies network sizes are initialized\n         * If they are not it will initialize them\n         */\n        verifyIsInitialized() {\n            if (!this.model.isInitialized) {\n                this.initialize();\n            }\n        }\n        /**\n         *\n         * @param options\n         *    Supports all `trainDefaults` properties\n         *    also supports:\n         *       learningRate: (number),\n         *       momentum: (number),\n         *       activation: 'sigmoid', 'relu', 'leaky-relu', 'tanh'\n         */\n        updateTrainingOptions(options) {\n            var _a;\n            this.trainOpts = { ...trainDefaults$1, ...options };\n            this.validateTrainingOptions(this.trainOpts);\n            this.setLogMethod((_a = options.log) !== null && _a !== void 0 ? _a : this.trainOpts.log);\n            // TODO: Remove this?\n            // this.activation = options.activation || this.activation;\n        }\n        validateTrainingOptions(options) {\n            const validations = {\n                iterations: () => {\n                    const val = options.iterations;\n                    return typeof val === 'number' && val > 0;\n                },\n                errorThresh: () => {\n                    const val = options.errorThresh;\n                    return typeof val === 'number' && val > 0 && val < 1;\n                },\n                log: () => {\n                    const val = options.log;\n                    return typeof val === 'function' || typeof val === 'boolean';\n                },\n                logPeriod: () => {\n                    const val = options.logPeriod;\n                    return typeof val === 'number' && val > 0;\n                },\n                learningRate: () => {\n                    const val = options.learningRate;\n                    return typeof val === 'number' && val > 0 && val < 1;\n                },\n                callback: () => {\n                    const val = options.callback;\n                    return typeof val === 'function' || val === undefined;\n                },\n                callbackPeriod: () => {\n                    const val = options.callbackPeriod;\n                    return typeof val === 'number' && val > 0;\n                },\n                timeout: () => {\n                    const val = options.timeout;\n                    return typeof val === 'number' && val > 0;\n                },\n            };\n            for (const p in validations) {\n                const v = options;\n                if (!validations[p]()) {\n                    throw new Error(`[${p}, ${v[p]}] is out of normal training range, your network will probably not train.`);\n                }\n            }\n        }\n        setLogMethod(log) {\n            if (typeof log === 'function') {\n                this.trainOpts.log = log;\n            }\n            else if (log) {\n                this.trainOpts.log = console.log;\n            }\n            else {\n                this.trainOpts.log = false;\n            }\n        }\n        prepTraining(data, options) {\n            var _a;\n            this.updateTrainingOptions(options);\n            const preparedData = this.options.dataFormatter.format(data);\n            const endTime = Date.now() + ((_a = this.trainOpts.timeout) !== null && _a !== void 0 ? _a : 0);\n            const status = {\n                error: 1,\n                iterations: 0,\n            };\n            this.verifyIsInitialized();\n            return {\n                preparedData,\n                status,\n                endTime,\n            };\n        }\n        train(data, trainOpts = {}) {\n            var _a;\n            this.trainOpts = trainOpts = {\n                ...trainDefaults$1,\n                ...trainOpts,\n            };\n            const { iterations, errorThresh, logPeriod, callback, callbackPeriod, } = this.trainOpts;\n            const log = trainOpts.log === true ? console.log : trainOpts.log;\n            let error = Infinity;\n            let i;\n            let inputs;\n            if ((_a = this.options) === null || _a === void 0 ? void 0 : _a.dataFormatter) {\n                inputs = this.options.dataFormatter.format(data);\n            }\n            else if (Array.isArray(data) &&\n                Array.isArray(data[0]) &&\n                typeof data[0][0] === 'number') {\n                inputs = data;\n            }\n            else {\n                throw new Error('training not in expected format of number[][]');\n            }\n            this.verifyIsInitialized();\n            for (i = 0; i < iterations && error > errorThresh; i++) {\n                let sum = 0;\n                for (let j = 0; j < inputs.length; j++) {\n                    const err = this.trainPattern(inputs[j], true);\n                    sum += err;\n                }\n                error = sum / data.length;\n                if (isNaN(error)) {\n                    throw new Error('Network error rate is unexpected NaN, check network configurations and try again. Most probably input format is not correct or training data is not enough. ');\n                }\n                if (log && i % logPeriod === 0) {\n                    log(`iterations: ${i}, training error: ${error}`);\n                }\n                if (callback && i % callbackPeriod === 0) {\n                    callback({ error, iterations: i });\n                }\n            }\n            return {\n                error,\n                iterations: i,\n            };\n        }\n        addFormat() {\n            throw new Error('not yet implemented');\n        }\n        toJSON() {\n            if (!this.model.isInitialized) {\n                this.initialize();\n            }\n            const { model, options } = this;\n            return {\n                type: this.constructor.name,\n                options: { ...options, dataFormatter: options.dataFormatter.toJSON() },\n                trainOpts: {\n                    ...this.trainOpts,\n                    timeout: this.trainOpts.timeout === Infinity\n                        ? 'Infinity'\n                        : this.trainOpts.timeout,\n                },\n                input: model.input.toJSON(),\n                hiddenLayers: model.hiddenLayers.map((hiddenLayer) => {\n                    const layers = {};\n                    for (const p in hiddenLayer) {\n                        if (!hiddenLayer.hasOwnProperty(p))\n                            continue;\n                        layers[p] = hiddenLayer[p].toJSON();\n                    }\n                    return layers;\n                }),\n                outputConnector: this.model.outputConnector.toJSON(),\n                output: this.model.output.toJSON(),\n            };\n        }\n        fromJSON(json) {\n            const { options } = json;\n            const allMatrices = [];\n            const input = Matrix.fromJSON(json.input);\n            allMatrices.push(input);\n            const hiddenLayers = [];\n            json.hiddenLayers.forEach((hiddenLayer) => {\n                const layers = {};\n                for (const p in hiddenLayer) {\n                    layers[p] = Matrix.fromJSON(hiddenLayer[p]);\n                    allMatrices.push(layers[p]);\n                }\n                hiddenLayers.push(layers);\n            });\n            const outputConnector = Matrix.fromJSON(json.outputConnector);\n            allMatrices.push(outputConnector);\n            const output = Matrix.fromJSON(json.output);\n            allMatrices.push(output);\n            if (options.dataFormatter) {\n                this.options = {\n                    ...defaults$1(),\n                    ...options,\n                    dataFormatter: DataFormatter.fromJSON(options.dataFormatter),\n                };\n            }\n            else {\n                this.options = {\n                    ...defaults$1(),\n                    ...options,\n                    dataFormatter: new DataFormatter(),\n                };\n            }\n            this.model = Object.seal({\n                isInitialized: true,\n                input,\n                hiddenLayers,\n                output,\n                allMatrices,\n                outputConnector,\n                equations: [],\n                equationConnections: [],\n            });\n            this.initialLayerInputs = this.options.hiddenLayers.map((size) => new Matrix(size, 1));\n            this.bindEquation();\n            return this;\n        }\n        toFunction(cb) {\n            const { model } = this;\n            const { equations } = this.model;\n            const equation = equations[1];\n            const { states } = equation;\n            const jsonString = JSON.stringify(this.toJSON());\n            function previousConnectionIndex(m) {\n                const connection = model.equationConnections[0];\n                const { states } = equations[0];\n                for (let i = 0, max = states.length; i < max; i++) {\n                    if (states[i].product === m) {\n                        return i;\n                    }\n                }\n                return connection.indexOf(m);\n            }\n            function matrixOrigin(m, stateIndex) {\n                for (let i = 0, max = states.length; i < max; i++) {\n                    const state = states[i];\n                    if (i === stateIndex) {\n                        const j = previousConnectionIndex(m);\n                        if (j > -1 && (m === state.left || m === state.right)) {\n                            return `typeof prevStates[${j}] === 'object' ? prevStates[${j}].product : new Matrix(${m.rows}, ${m.columns})`;\n                        }\n                        return `new Matrix(${m.rows}, ${m.columns})`;\n                    }\n                    if (m === state.product)\n                        return `states[${i}].product`;\n                    if (m === state.right)\n                        return `states[${i}].right`;\n                    if (m === state.left)\n                        return `states[${i}].left`;\n                }\n                return '';\n            }\n            function matrixToString(m, stateIndex) {\n                if (!m || !m.rows || !m.columns)\n                    return 'null';\n                if (m === model.input)\n                    return `json.input`;\n                if (m === model.outputConnector)\n                    return `json.outputConnector`;\n                if (m === model.output)\n                    return `json.output`;\n                for (let i = 0, max = model.hiddenLayers.length; i < max; i++) {\n                    const hiddenLayer = model.hiddenLayers[i];\n                    for (const p in hiddenLayer) {\n                        if (!hiddenLayer.hasOwnProperty(p))\n                            continue;\n                        if (hiddenLayer[p] !== m)\n                            continue;\n                        return `json.hiddenLayers[${i}].${p}`;\n                    }\n                }\n                return matrixOrigin(m, stateIndex);\n            }\n            function toInner(fnString) {\n                // crude, but should be sufficient for now\n                // function() { body }\n                const fnParts = fnString.toString().split('{');\n                fnParts.shift();\n                // body }\n                const fnBodyString = fnParts.join('{');\n                const fnBodyParts = fnBodyString.split('}');\n                fnBodyParts.pop();\n                // body\n                return fnBodyParts\n                    .join('}')\n                    .split('\\n')\n                    .join('\\n        ')\n                    .replace('product.deltas[i] = 0;', '')\n                    .replace('product.deltas[column] = 0;', '')\n                    .replace('left.deltas[leftIndex] = 0;', '')\n                    .replace('right.deltas[rightIndex] = 0;', '')\n                    .replace('product.deltas = left.deltas.slice(0);', '');\n            }\n            function fileName(fnName) {\n                return `src/recurrent/matrix/${fnName.replace(/[A-Z]/g, function (value) {\n                return `-${value.toLowerCase()}`;\n            })}.js`;\n            }\n            const statesRaw = [];\n            const usedFunctionNames = {};\n            const innerFunctionsSwitch = [];\n            for (let i = 0, max = states.length; i < max; i++) {\n                const state = states[i];\n                statesRaw.push(`states[${i}] = {\n      name: '${state.forwardFn.name}',\n      left: ${state.left ? matrixToString(state.left, i) : 'undefined'},\n      right: ${state.right ? matrixToString(state.right, i) : 'undefined'},\n      product: ${matrixToString(state.product, i)}\n    }`);\n                const fnName = state.forwardFn.name;\n                if (!usedFunctionNames[fnName]) {\n                    usedFunctionNames[fnName] = true;\n                    innerFunctionsSwitch.push(`        case '${fnName}': //compiled from ${fileName(fnName)}\n          ${toInner(state.forwardFn.toString())}\n          break;`);\n                }\n            }\n            const src = `\n  if (typeof rawInput === 'undefined') rawInput = [];\n  if (typeof isSampleI === 'undefined') isSampleI = false;\n  if (typeof temperature === 'undefined') temperature = 1;\n  var json = ${jsonString};\n  ${this.options.dataFormatter\n            ? `${this.options.dataFormatter.toFunctionString()};\n  Object.assign(dataFormatter, json.options.dataFormatter);`\n            : ''}\n  ${this.options.dataFormatter &&\n            typeof this.options.dataFormatter.formatDataIn === 'function'\n            ? `const formatDataIn = function (input, output) { ${toInner(this.options.dataFormatter.formatDataIn.toString())} }.bind(dataFormatter);`\n            : ''}\n  ${this.options.dataFormatter !== null &&\n            typeof this.options.dataFormatter.formatDataOut === 'function'\n            ? `const formatDataOut = function formatDataOut(input, output) { ${toInner(this.options.dataFormatter.formatDataOut.toString())} }.bind(dataFormatter);`\n            : ''}\n  var maxPredictionLength =\n    ${this.options.maxPredictionLength} +\n    rawInput.length +\n    ${this.options.dataFormatter\n            ? this.options.dataFormatter.specialIndexes.length\n            : 0};\n  var input = ${this.options.dataFormatter &&\n            typeof this.options.dataFormatter.formatDataIn === 'function'\n            ? 'formatDataIn(rawInput)'\n            : 'rawInput'};\n  var _i = 0;\n  var output = [];\n  var states = [];\n  var prevStates;\n  while (true) {\n    var previousIndex = (_i === 0\n        ? 0\n        : _i < input.length\n          ? input[_i - 1] + 1\n          : output[_i - 1])\n          ;\n    var rowPluckIndex = previousIndex;\n    prevStates = states;\n    states = [];\n    ${statesRaw.join(';\\n    ')};\n    for (var stateIndex = 0, stateMax = ${statesRaw.length}; stateIndex < stateMax; stateIndex++) {\n      var state = states[stateIndex];\n      var product = state.product;\n      var left = state.left;\n      var right = state.right;\n      switch (state.name) {\n${innerFunctionsSwitch.join('\\n')}\n      }\n    }\n\n    var logProbabilities = state.product;\n    if (temperature !== 1 && isSampleI) {\n      for (var q = 0, nq = logProbabilities.weights.length; q < nq; q++) {\n        logProbabilities.weights[q] /= temperature;\n      }\n    }\n\n    var probs = softmax(logProbabilities);\n    var nextIndex = isSampleI ? sampleI(probs) : maxI(probs);\n\n    _i++;\n    if (nextIndex === 0) {\n      break;\n    }\n    if (_i >= maxPredictionLength) {\n      break;\n    }\n\n    output.push(nextIndex);\n  }\n  ${this.options.dataFormatter &&\n            typeof this.options.dataFormatter.formatDataOut === 'function'\n            ? 'return formatDataOut(input, output.slice(input.length).map(function(value) { return value - 1; }))'\n            : 'return output.slice(input.length).map(function(value) { return value - 1; })'};\n  function Matrix(rows, columns) {\n    this.rows = rows;\n    this.columns = columns;\n    this.weights = zeros(rows * columns);\n  }\n  ${zeros$1.toString()}\n  ${softmax.toString().replace('_1.Matrix', 'Matrix')}\n  ${randomFloat.toString()}\n  ${sampleI.toString()}\n  ${maxI.toString()}`;\n            // eslint-disable-next-line\n            return new Function('rawInput', 'isSampleI', 'temperature', cb ? cb(src) : src);\n        }\n        trainPattern(input, logErrorRate) {\n            const error = this.trainInput(input);\n            this.backpropagate(input);\n            this.adjustWeights();\n            if (logErrorRate) {\n                return error;\n            }\n            return 0;\n        }\n    }\n    function last(values) {\n        return values[values.length - 1];\n    }\n\n    class GRU extends RNN {\n        getHiddenLayer(hiddenSize, prevSize) {\n            return getGRUHiddenLayer(hiddenSize, prevSize);\n        }\n        getEquation(equation, inputMatrix, previousResult, hiddenLayer) {\n            return getGRUEquation(equation, inputMatrix, previousResult, hiddenLayer);\n        }\n    }\n    function getGRUHiddenLayer(hiddenSize, prevSize) {\n        return {\n            // update Gate\n            // wzxh\n            updateGateInputMatrix: new RandomMatrix(hiddenSize, prevSize, 0.08),\n            updateGateHiddenMatrix: new RandomMatrix(hiddenSize, hiddenSize, 0.08),\n            updateGateBias: new Matrix(hiddenSize, 1),\n            // reset Gate\n            // wrxh\n            resetGateInputMatrix: new RandomMatrix(hiddenSize, prevSize, 0.08),\n            resetGateHiddenMatrix: new RandomMatrix(hiddenSize, hiddenSize, 0.08),\n            resetGateBias: new Matrix(hiddenSize, 1),\n            // cell write parameters\n            // wcxh\n            cellWriteInputMatrix: new RandomMatrix(hiddenSize, prevSize, 0.08),\n            cellWriteHiddenMatrix: new RandomMatrix(hiddenSize, hiddenSize, 0.08),\n            cellWriteBias: new Matrix(hiddenSize, 1),\n        };\n    }\n    function getGRUEquation(equation, inputMatrix, previousResult, hiddenLayer) {\n        if (!hiddenLayer.updateGateInputMatrix ||\n            !hiddenLayer.updateGateHiddenMatrix ||\n            !hiddenLayer.updateGateBias ||\n            !hiddenLayer.resetGateInputMatrix ||\n            !hiddenLayer.resetGateHiddenMatrix ||\n            !hiddenLayer.resetGateBias ||\n            !hiddenLayer.cellWriteInputMatrix ||\n            !hiddenLayer.cellWriteHiddenMatrix ||\n            !hiddenLayer.cellWriteBias) {\n            throw new Error('hiddenLayer does not have expected properties');\n        }\n        const sigmoid = equation.sigmoid.bind(equation);\n        const add = equation.add.bind(equation);\n        const multiply = equation.multiply.bind(equation);\n        const multiplyElement = equation.multiplyElement.bind(equation);\n        const tanh = equation.tanh.bind(equation);\n        const allOnes = equation.allOnes.bind(equation);\n        const cloneNegative = equation.cloneNegative.bind(equation);\n        // update gate\n        const updateGate = sigmoid(add(add(multiply(hiddenLayer.updateGateInputMatrix, inputMatrix), multiply(hiddenLayer.updateGateHiddenMatrix, previousResult)), hiddenLayer.updateGateBias));\n        // reset gate\n        const resetGate = sigmoid(add(add(multiply(hiddenLayer.resetGateInputMatrix, inputMatrix), multiply(hiddenLayer.resetGateHiddenMatrix, previousResult)), hiddenLayer.resetGateBias));\n        // cell\n        const cell = tanh(add(add(multiply(hiddenLayer.cellWriteInputMatrix, inputMatrix), multiply(hiddenLayer.cellWriteHiddenMatrix, multiplyElement(resetGate, previousResult))), hiddenLayer.cellWriteBias));\n        // compute hidden state as gated, saturated cell activations\n        // negate updateGate\n        return add(multiplyElement(add(allOnes(updateGate.rows, updateGate.columns), cloneNegative(updateGate)), cell), multiplyElement(previousResult, updateGate));\n    }\n\n    class ArrayLookupTable {\n        constructor(data, prop) {\n            this.prop = prop;\n            this.length = 0;\n            this.table = {};\n            for (let i = 0; i < data.length; i++) {\n                const datum = data[i];\n                const ioValue = datum[prop];\n                for (let j = 0; j < ioValue.length; j++) {\n                    const value = ioValue[j];\n                    for (const p in value) {\n                        if (!value.hasOwnProperty(p))\n                            continue;\n                        if (this.table.hasOwnProperty(p))\n                            continue;\n                        this.table[p] = this.length++;\n                    }\n                }\n            }\n        }\n    }\n\n    const defaults = () => {\n        return {\n            ...defaults$1(),\n            inputSize: 1,\n            hiddenLayers: [20],\n            outputSize: 1,\n            inputRange: 0,\n        };\n    };\n    class RNNTimeStep extends RNN {\n        constructor(options = {}) {\n            super();\n            this.inputLookupLength = 0;\n            this.inputLookup = null;\n            this.outputLookup = null;\n            this.outputLookupLength = 0;\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-expect-error\n            this.model = Object.seal({\n                isInitialized: false,\n                hiddenLayers: [],\n                output: new Matrix(0, 0),\n                equations: [],\n                allMatrices: [],\n                equationConnections: [],\n                outputConnector: new RandomMatrix(0, 0, 0.08),\n            });\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-expect-error\n            this.options = defaults();\n            this.options = { ...this.options, ...options };\n            this.updateTrainingOptions({\n                ...trainDefaults,\n                ...options,\n            });\n            if (options.json) {\n                this.fromJSON(options.json);\n            }\n        }\n        createInputMatrix() {\n            throw new Error('Input Matrices do not exist on RNNTimeStep');\n        }\n        createOutputMatrices() {\n            const { outputSize } = this.options;\n            const lastHiddenSize = last(this.options.hiddenLayers);\n            // whd\n            const outputConnector = new RandomMatrix(outputSize, lastHiddenSize, 0.08);\n            // bd\n            const output = new RandomMatrix(outputSize, 1, 0.08);\n            return { output, outputConnector };\n        }\n        bindEquation() {\n            const { model, options } = this;\n            const { hiddenLayers, inputSize } = options;\n            const layers = model.hiddenLayers;\n            const equation = new Equation();\n            const outputs = [];\n            const equationConnection = model.equationConnections.length > 0\n                ? model.equationConnections[model.equationConnections.length - 1]\n                : this.initialLayerInputs;\n            // 0 index\n            let output = this.getEquation(equation, equation.input(new Matrix(inputSize, 1)), equationConnection[0], layers[0]);\n            outputs.push(output);\n            // 1+ indices\n            for (let i = 1, max = hiddenLayers.length; i < max; i++) {\n                output = this.getEquation(equation, output, equationConnection[i], layers[i]);\n                outputs.push(output);\n            }\n            model.equationConnections.push(outputs);\n            equation.add(equation.multiply(model.outputConnector, output), model.output);\n            model.equations.push(equation);\n        }\n        initialize() {\n            this.model = this.mapModel();\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        mapModel() {\n            const allMatrices = [];\n            this.initialLayerInputs = this.options.hiddenLayers.map((size) => new Matrix(size, 1));\n            const hiddenLayers = this.createHiddenLayers();\n            for (let i = 0, max = hiddenLayers.length; i < max; i++) {\n                const hiddenMatrix = hiddenLayers[i];\n                for (const property in hiddenMatrix) {\n                    if (!hiddenMatrix.hasOwnProperty(property))\n                        continue;\n                    allMatrices.push(hiddenMatrix[property]);\n                }\n            }\n            const { outputConnector, output } = this.createOutputMatrices();\n            allMatrices.push(outputConnector);\n            allMatrices.push(output);\n            return Object.seal({\n                isInitialized: true,\n                hiddenLayers,\n                output,\n                equations: [],\n                allMatrices,\n                equationConnections: [],\n                outputConnector,\n            });\n        }\n        backpropagate() {\n            for (let i = this.model.equations.length - 1; i > -1; i--) {\n                this.model.equations[i].backpropagate();\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        run(rawInput) {\n            const shape = lookup.dataShape(rawInput).join(',');\n            switch (shape) {\n                case 'array,number':\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-expect-error\n                    return this.runArray(rawInput);\n                case 'array,array,number':\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-expect-error\n                    return this.runArrayOfArray(rawInput);\n                case 'object,number':\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-expect-error\n                    return this.runObject(rawInput); // Backward compatibility, will be result of `unknown` and need casting.  Better to just use net.runObject() directly\n                case 'array,object,number':\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-expect-error\n                    return this.runArrayOfObject(rawInput);\n                default:\n                    throw new Error(`Unrecognized data shape ${shape}`);\n            }\n        }\n        forecast(rawInput, count = 1) {\n            const shape = lookup.dataShape(rawInput).join(',');\n            switch (shape) {\n                case 'array,number':\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-expect-error\n                    return this.forecastArray(rawInput, count);\n                case 'array,array,number':\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-expect-error\n                    return this.forecastArrayOfArray(rawInput, count);\n                case 'object,number':\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-expect-error\n                    return this.runObject(rawInput);\n                case 'array,object,number':\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-expect-error\n                    return this.forecastArrayOfObject(rawInput, count);\n                default:\n                    throw new Error(`Unrecognized data shape ${shape}`);\n            }\n        }\n        forecastArray(input, count = 1) {\n            this.checkRunnable();\n            const { model } = this;\n            const { equations } = model;\n            const length = input.length + count;\n            while (equations.length <= length) {\n                this.bindEquation();\n            }\n            let lastOutput;\n            let equationIndex = 0;\n            if (this.options.inputSize === 1) {\n                for (let i = 0; i < input.length; i++) {\n                    lastOutput = equations[equationIndex++].runInput(Float32Array.from([input[i]]));\n                }\n            }\n            else {\n                for (let i = 0; i < input.length; i++) {\n                    lastOutput = equations[equationIndex++].runInput(Float32Array.from([]));\n                }\n            }\n            if (!lastOutput) {\n                throw new Error('lastOutput not set');\n            }\n            const result = [lastOutput.weights[0]];\n            for (let i = 0, max = count - 1; i < max; i++) {\n                lastOutput = equations[equationIndex++].runInput(lastOutput.weights);\n                result.push(lastOutput.weights[0]);\n            }\n            this.end();\n            return Float32Array.from(result);\n        }\n        forecastArrayOfArray(input, count = 1) {\n            this.checkRunnable();\n            const { model } = this;\n            const { equations } = model;\n            const length = input.length + count;\n            while (equations.length <= length) {\n                this.bindEquation();\n            }\n            let lastOutput;\n            let equationIndex = 0;\n            for (let i = 0; i < input.length; i++) {\n                lastOutput = equations[equationIndex++].runInput(input[i]);\n            }\n            if (!lastOutput) {\n                throw new Error('lastOutput not set');\n            }\n            const result = [Float32Array.from(lastOutput.weights)];\n            for (let i = 0, max = count - 1; i < max; i++) {\n                lastOutput = equations[equationIndex++].runInput(lastOutput.weights);\n                result.push(Float32Array.from(lastOutput.weights.slice(0)));\n            }\n            this.end();\n            return result;\n        }\n        forecastArrayOfObject(input, count = 1) {\n            if (!this.inputLookup) {\n                throw new Error('this.inputLookup not set');\n            }\n            if (!this.outputLookup) {\n                throw new Error('this.outputLookup not set');\n            }\n            const formattedData = input.map((value) => lookup.toArray(this.inputLookup, value, this.inputLookupLength));\n            return this.forecastArrayOfArray(formattedData, count).map((value) => lookup.toObject(this.outputLookup, value));\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        train(data, trainOpts = {}) {\n            this.trainOpts = trainOpts = {\n                ...trainDefaults$1,\n                ...trainOpts,\n            };\n            // Don't destructure here because this.setSize() can reset this.options.\n            if (this.options.inputSize === 1 && this.options.outputSize === 1) {\n                this.setSize(data);\n            }\n            this.verifySize();\n            const formattedData = this.formatData(data);\n            let error = Infinity;\n            let i;\n            this.verifyIsInitialized();\n            const { iterations, errorThresh, logPeriod, callback, callbackPeriod, } = this.trainOpts;\n            const log = trainOpts.log === true ? console.log : trainOpts.log;\n            for (i = 0; i < iterations && error > errorThresh; i++) {\n                let sum = 0;\n                for (let j = 0; j < formattedData.length; j++) {\n                    const err = this.trainPattern(formattedData[j], true);\n                    sum += err;\n                }\n                error = sum / formattedData.length;\n                if (isNaN(error))\n                    throw new Error('Network error rate is unexpected NaN, check network configurations and try again. Most probably input format is not correct or training data is not enough. ');\n                if (log && i % logPeriod === 0) {\n                    log(`iterations: ${i}, training error: ${error}`);\n                }\n                if (callback && i % callbackPeriod === 0) {\n                    callback({ error, iterations: i });\n                }\n            }\n            return {\n                error,\n                iterations: i,\n            };\n        }\n        trainArrayOfArray(input) {\n            if (input.length < 2) {\n                throw new Error('input must be an array of 2 or more');\n            }\n            const { equations } = this.model;\n            while (equations.length < input.length) {\n                this.bindEquation();\n            }\n            let errorSum = 0;\n            for (let i = 0, max = input.length - 1; i < max; i++) {\n                errorSum += equations[i].predictTarget(input[i], input[i + 1]);\n            }\n            this.end();\n            return errorSum / input.length;\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        trainPattern(input, logErrorRate) {\n            const error = this.trainArrayOfArray(input);\n            this.backpropagate();\n            this.adjustWeights();\n            if (logErrorRate) {\n                return error;\n            }\n            return 0;\n        }\n        setSize(data) {\n            let size = 0;\n            const dataShape = lookup.dataShape(data).join(',');\n            switch (dataShape) {\n                case 'array,array,number':\n                case 'array,object,number':\n                case 'array,datum,array,number':\n                case 'array,datum,object,number':\n                    size = 1;\n                    // probably 1\n                    break;\n                case 'array,array,array,number':\n                    size = data[0][0].length;\n                    break;\n                case 'array,array,object,number':\n                    // inputs and outputs should match\n                    size = Object.keys(lookup.toTable2D(data)).length;\n                    break;\n                case 'array,datum,array,array,number':\n                    size = data[0].input[0].length;\n                    break;\n                case 'array,datum,array,object,number':\n                    size = Object.keys(lookup.toInputTable2D(data)).length;\n                    break;\n                default:\n                    throw new Error('unknown data shape or configuration');\n            }\n            this.options = Object.seal({\n                ...this.options,\n                inputSize: size,\n                outputSize: size,\n            });\n        }\n        verifySize() {\n            if (this.options.inputSize || this.options.outputSize) {\n                if (this.options.inputSize !== this.options.outputSize) {\n                    throw new Error('manually set inputSize and outputSize mismatch');\n                }\n            }\n        }\n        runArray(input) {\n            this.checkRunnable();\n            const { equations } = this.model;\n            while (equations.length <= input.length) {\n                this.bindEquation();\n            }\n            let lastOutput;\n            for (let i = 0; i < input.length; i++) {\n                lastOutput = equations[i].runInput(new Float32Array([input[i]]));\n            }\n            this.end();\n            return lastOutput.weights[0];\n        }\n        runArrayOfArray(input) {\n            this.checkRunnable();\n            const { model } = this;\n            const { equations } = model;\n            while (equations.length <= input.length) {\n                this.bindEquation();\n            }\n            let lastOutput;\n            for (let i = 0; i < input.length; i++) {\n                const outputMatrix = equations[i].runInput(input[i]);\n                lastOutput = outputMatrix.weights;\n            }\n            this.end();\n            return lastOutput !== null && lastOutput !== void 0 ? lastOutput : Float32Array.from([]);\n        }\n        runObject(input) {\n            if (!this.inputLookup) {\n                throw new Error('this.inputLookup not set');\n            }\n            if (!this.outputLookup) {\n                throw new Error('this.outputLookup not set');\n            }\n            if (!this.outputLookupLength) {\n                throw new Error('this.outputLookupLength not set');\n            }\n            if (this.inputLookup === this.outputLookup) {\n                const inputArray = lookup.toArrayShort(this.inputLookup, input);\n                return lookup.toObjectPartial(this.outputLookup, this.forecastArray(inputArray, this.outputLookupLength - inputArray.length), inputArray.length);\n            }\n            return lookup.toObject(this.outputLookup, this.forecastArray(lookup.toArray(this.inputLookup, input, this.inputLookupLength), this.outputLookupLength));\n        }\n        runArrayOfObject(input) {\n            if (this.inputLookup === null) {\n                throw new Error('this.inputLookup not set');\n            }\n            if (this.outputLookup === null) {\n                throw new Error('this.outputLookup not set');\n            }\n            const formattedInput = input.map((value) => lookup.toArray(this.inputLookup, value, this.inputLookupLength));\n            return this.forecastArrayOfArray(formattedInput, 1).map((value) => lookup.toObject(this.outputLookup, value))[0];\n        }\n        runArrayOfObjectOfArray(input) {\n            if (!this.inputLookup) {\n                throw new Error('this.inputLookup not set');\n            }\n            if (!this.outputLookup) {\n                throw new Error('this.outputLookup not set');\n            }\n            return lookup.toObject(this.outputLookup, this.runArrayOfArray(lookup.toArrays(this.inputLookup, input, this.inputLookupLength)));\n        }\n        end() {\n            this.model.equations[this.model.equations.length - 1].runInput(new Float32Array(this.options.outputSize));\n        }\n        requireInputOutputOfOne() {\n            if (this.options.inputSize !== 1) {\n                throw new Error('inputSize must be 1 for this data size');\n            }\n            if (this.options.outputSize !== 1) {\n                throw new Error('outputSize must be 1 for this data size');\n            }\n        }\n        // Handles data shape of 'array,number'\n        formatArray(data) {\n            const result = [];\n            this.requireInputOutputOfOne();\n            for (let i = 0; i < data.length; i++) {\n                result.push(Float32Array.from([data[i]]));\n            }\n            return [result];\n        }\n        // Handles data shape of 'array,array,number'\n        formatArrayOfArray(data) {\n            const result = [];\n            const { inputSize, outputSize } = this.options;\n            if (inputSize === 1 && outputSize === 1) {\n                for (let i = 0; i < data.length; i++) {\n                    result.push(arrayToFloat32Arrays(data[i]));\n                }\n                return result;\n            }\n            if (inputSize !== data[0].length) {\n                throw new Error('inputSize must match data input size');\n            }\n            if (outputSize !== data[0].length) {\n                throw new Error('outputSize must match data output size');\n            }\n            for (let i = 0; i < data.length; i++) {\n                result.push(Float32Array.from(data[i]));\n            }\n            return [result];\n        }\n        // Handles data shape of 'array,object,number'\n        formatArrayOfObject(data) {\n            this.requireInputOutputOfOne();\n            if (!this.inputLookup) {\n                const lookupTable = new LookupTable(data);\n                this.inputLookup = this.outputLookup = lookupTable.table;\n                this.inputLookupLength = this.outputLookupLength = lookupTable.length;\n            }\n            const result = [];\n            for (let i = 0; i < data.length; i++) {\n                result.push(objectToFloat32Arrays(data[i]));\n            }\n            return result;\n        }\n        // Handles data shape of 'array,object,number' when this.options.inputSize > 1\n        formatArrayOfObjectMulti(data) {\n            if (!this.inputLookup) {\n                const lookupTable = new LookupTable(data);\n                this.inputLookup = this.outputLookup = lookupTable.table;\n                this.inputLookupLength = this.outputLookupLength = lookupTable.length;\n            }\n            const result = [];\n            for (let i = 0; i < data.length; i++) {\n                result.push([\n                    objectToFloat32Array(data[i], this.inputLookup, this.inputLookupLength),\n                ]);\n            }\n            return result;\n        }\n        // Handles data shape of 'array,datum,array,number'\n        formatArrayOfDatumOfArray(data) {\n            const result = [];\n            this.requireInputOutputOfOne();\n            for (let i = 0; i < data.length; i++) {\n                const datum = data[i];\n                result.push(inputOutputArrayToFloat32Arrays(datum.input, datum.output));\n            }\n            return result;\n        }\n        // Handles data shape of 'array,datum,object,number'\n        formatArrayOfDatumOfObject(data) {\n            this.requireInputOutputOfOne();\n            if (!this.inputLookup) {\n                const inputLookup = new LookupTable(data, 'input');\n                this.inputLookup = inputLookup.table;\n                this.inputLookupLength = inputLookup.length;\n            }\n            if (!this.outputLookup) {\n                const outputLookup = new LookupTable(data, 'output');\n                this.outputLookup = outputLookup.table;\n                this.outputLookupLength = outputLookup.length;\n            }\n            const result = [];\n            for (let i = 0; i < data.length; i++) {\n                const datum = data[i];\n                result.push(inputOutputObjectToFloat32Arrays(datum.input, datum.output));\n            }\n            return result;\n        }\n        // Handles data shape of 'array,array,array,number'\n        formatArrayOfArrayOfArray(data) {\n            const result = [];\n            for (let i = 0; i < data.length; i++) {\n                result.push(arraysToFloat32Arrays(data[i]));\n            }\n            return result;\n        }\n        // Handles data shape of 'array,array,object,number'\n        formatArrayOfArrayOfObject(data) {\n            if (!this.inputLookup) {\n                const lookupTable = new LookupTable(data);\n                this.inputLookup = this.outputLookup = lookupTable.table;\n                this.inputLookupLength = this.outputLookupLength = lookupTable.length;\n            }\n            const result = [];\n            for (let i = 0; i < data.length; i++) {\n                const array = [];\n                for (let j = 0; j < data[i].length; j++) {\n                    array.push(objectToFloat32Array(data[i][j], this.inputLookup, this.inputLookupLength));\n                }\n                result.push(array);\n            }\n            return result;\n        }\n        // Handles data shape of 'array,datum,array,array,number'\n        formatArrayOfDatumOfArrayOfArray(data) {\n            const result = [];\n            const { inputSize, outputSize } = this.options;\n            if (inputSize !== data[0].input[0].length) {\n                throw new Error('inputSize must match data input size');\n            }\n            if (outputSize !== data[0].output[0].length) {\n                throw new Error('outputSize must match data output size');\n            }\n            for (let i = 0; i < data.length; i++) {\n                const datum = data[i];\n                result.push(inputOutputArraysToFloat32Arrays(datum.input, datum.output));\n            }\n            return result;\n        }\n        // 'Handles data shape of array,datum,array,object,number'\n        formatArrayOfDatumOfArrayOfObject(data) {\n            if (!this.inputLookup) {\n                const inputLookup = new ArrayLookupTable(data, 'input');\n                this.inputLookup = inputLookup.table;\n                this.inputLookupLength = inputLookup.length;\n            }\n            if (!this.outputLookup) {\n                const outputLookup = new ArrayLookupTable(data, 'output');\n                this.outputLookup = outputLookup.table;\n                this.outputLookupLength = outputLookup.length;\n            }\n            if (!this.outputLookupLength) {\n                throw new Error('this.outputLookupLength not set to usable number');\n            }\n            const result = [];\n            for (let i = 0; i < data.length; i++) {\n                const datum = data[i];\n                result.push(inputOutputObjectsToFloat32Arrays(datum.input, datum.output, this.inputLookup, this.outputLookup, this.inputLookupLength, this.outputLookupLength));\n            }\n            return result;\n        }\n        formatData(data) {\n            const dataShape = lookup.dataShape(data).join(',');\n            switch (dataShape) {\n                case 'array,number':\n                    return this.formatArray(data);\n                case 'array,array,number':\n                    return this.formatArrayOfArray(data);\n                case 'array,object,number':\n                    if (this.options.inputSize === 1) {\n                        return this.formatArrayOfObject(data);\n                    }\n                    else {\n                        return this.formatArrayOfObjectMulti(data);\n                    }\n                case 'array,datum,array,number':\n                    return this.formatArrayOfDatumOfArray(data);\n                case 'array,datum,object,number':\n                    return this.formatArrayOfDatumOfObject(data);\n                case 'array,array,array,number':\n                    return this.formatArrayOfArrayOfArray(data);\n                case 'array,array,object,number':\n                    return this.formatArrayOfArrayOfObject(data);\n                case 'array,datum,array,array,number':\n                    return this.formatArrayOfDatumOfArrayOfArray(data);\n                case 'array,datum,array,object,number':\n                    return this.formatArrayOfDatumOfArrayOfObject(data);\n                default:\n                    throw new Error('unknown data shape or configuration');\n            }\n        }\n        test(data) {\n            // for classification problems\n            const misclasses = [];\n            // run each pattern through the trained network and collect\n            // error and misclassification statistics\n            let errorSum = 0;\n            const formattedData = this.formatData(data);\n            for (let i = 0; i < formattedData.length; i++) {\n                const input = formattedData[i];\n                const output = this.run(input.splice(0, input.length - 1));\n                const target = input[input.length - 1];\n                let errors = 0;\n                let errorCount = 0;\n                for (let j = 0; j < output.length; j++) {\n                    errorCount++;\n                    const error = target[j] - output[j];\n                    // mse\n                    errors += error * error;\n                }\n                errorSum += errors / errorCount;\n                const errorsAbs = Math.abs(errors);\n                if (errorsAbs > this.trainOpts.errorThresh) {\n                    const misclass = data[i];\n                    misclasses.push({\n                        value: misclass,\n                        actual: output,\n                    });\n                }\n            }\n            return {\n                error: errorSum / formattedData.length,\n                misclasses,\n                total: formattedData.length,\n            };\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        addFormat(value) {\n            var _a, _b, _c, _d, _e, _f;\n            const dataShape = lookup.dataShape(value).join(',');\n            switch (dataShape) {\n                case 'array,array,number':\n                case 'datum,array,array,number':\n                case 'array,number':\n                case 'datum,array,number':\n                    return;\n                case 'datum,object,number': {\n                    this.inputLookup = lookup.addKeys(value.input, (_a = this.inputLookup) !== null && _a !== void 0 ? _a : {});\n                    if (this.inputLookup) {\n                        this.inputLookupLength = Object.keys(this.inputLookup).length;\n                    }\n                    this.outputLookup = lookup.addKeys(value.output, (_b = this.outputLookup) !== null && _b !== void 0 ? _b : {});\n                    if (this.outputLookup) {\n                        this.outputLookupLength = Object.keys(this.outputLookup).length;\n                    }\n                    break;\n                }\n                case 'object,number': {\n                    this.inputLookup = this.outputLookup = lookup.addKeys(value, (_c = this.inputLookup) !== null && _c !== void 0 ? _c : {});\n                    if (this.inputLookup) {\n                        this.inputLookupLength = this.outputLookupLength = Object.keys(this.inputLookup).length;\n                    }\n                    break;\n                }\n                case 'array,object,number': {\n                    const typedValue = value;\n                    for (let i = 0; i < typedValue.length; i++) {\n                        this.inputLookup = this.outputLookup = lookup.addKeys(typedValue[i], (_d = this.inputLookup) !== null && _d !== void 0 ? _d : {});\n                        if (this.inputLookup) {\n                            this.inputLookupLength = this.outputLookupLength = Object.keys(this.inputLookup).length;\n                        }\n                    }\n                    break;\n                }\n                case 'datum,array,object,number': {\n                    const typedValue = value;\n                    const typedInput = typedValue.input;\n                    for (let i = 0; i < typedInput.length; i++) {\n                        this.inputLookup = lookup.addKeys(typedInput[i], (_e = this.inputLookup) !== null && _e !== void 0 ? _e : {});\n                        if (this.inputLookup) {\n                            this.inputLookupLength = Object.keys(this.inputLookup).length;\n                        }\n                    }\n                    const typedOutput = typedValue.output;\n                    for (let i = 0; i < typedOutput.length; i++) {\n                        this.outputLookup = lookup.addKeys(typedOutput[i], (_f = this.outputLookup) !== null && _f !== void 0 ? _f : {});\n                        if (this.outputLookup) {\n                            this.outputLookupLength = Object.keys(this.outputLookup).length;\n                        }\n                    }\n                    break;\n                }\n                default:\n                    throw new Error('unknown data shape or configuration');\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        toJSON() {\n            if (!this.model) {\n                this.initialize();\n            }\n            const { model } = this;\n            const options = { ...this.options, ...defaults$1 };\n            return {\n                type: this.constructor.name,\n                options,\n                hiddenLayers: model.hiddenLayers.map((hiddenLayer) => {\n                    const layers = {};\n                    for (const p in hiddenLayer) {\n                        if (!hiddenLayer.hasOwnProperty(p))\n                            continue;\n                        layers[p] = hiddenLayer[p].toJSON();\n                    }\n                    return layers;\n                }),\n                outputConnector: model.outputConnector.toJSON(),\n                output: model.output.toJSON(),\n                inputLookup: this.inputLookup,\n                inputLookupLength: this.inputLookupLength,\n                outputLookup: this.outputLookup,\n                outputLookupLength: this.outputLookupLength,\n            };\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        fromJSON(json) {\n            const { options } = json;\n            const allMatrices = [];\n            const hiddenLayers = [];\n            // backward compatibility for hiddenSizes\n            json.hiddenLayers.forEach((hiddenLayer) => {\n                const layers = {};\n                for (const p in hiddenLayer) {\n                    layers[p] = Matrix.fromJSON(hiddenLayer[p]);\n                    allMatrices.push(layers[p]);\n                }\n                hiddenLayers.push(layers);\n            });\n            const outputConnector = Matrix.fromJSON(json.outputConnector);\n            allMatrices.push(outputConnector);\n            const output = Matrix.fromJSON(json.output);\n            allMatrices.push(output);\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-expect-error\n            this.options = { ...defaults(), ...options };\n            this.inputLookup = json.inputLookup;\n            this.inputLookupLength = json.inputLookupLength;\n            this.outputLookup = json.outputLookup;\n            this.outputLookupLength = json.outputLookupLength;\n            this.model = Object.seal({\n                isInitialized: true,\n                hiddenLayers,\n                output,\n                allMatrices,\n                outputConnector,\n                equations: [],\n                equationConnections: [],\n            });\n            this.initialLayerInputs = options.hiddenLayers.map((size) => new Matrix(size, 1));\n            this.bindEquation();\n            return this;\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        toFunction(cb) {\n            const { model, inputLookup, inputLookupLength, outputLookup, outputLookupLength, } = this;\n            const { inputSize } = this.options;\n            const { equations } = model;\n            const equation = equations[1];\n            const { states } = equation;\n            const jsonString = JSON.stringify(this.toJSON());\n            function previousConnectionIndex(m) {\n                const connection = model.equationConnections[0];\n                const { states } = equations[0];\n                for (let i = 0, max = states.length; i < max; i++) {\n                    if (states[i].product === m) {\n                        return i;\n                    }\n                }\n                return connection.indexOf(m);\n            }\n            function matrixOrigin(m, stateIndex) {\n                for (let i = 0, max = states.length; i < max; i++) {\n                    const state = states[i];\n                    if (i === stateIndex) {\n                        const j = previousConnectionIndex(m);\n                        switch (m) {\n                            case state.left:\n                                if (j > -1) {\n                                    return `typeof prevStates[${j}] === 'object' ? prevStates[${j}].product : new Matrix(${m.rows}, ${m.columns})`;\n                                }\n                            // eslint-disable-next-line no-fallthrough\n                            case state.right:\n                                if (j > -1) {\n                                    return `typeof prevStates[${j}] === 'object' ? prevStates[${j}].product : new Matrix(${m.rows}, ${m.columns})`;\n                                }\n                            // eslint-disable-next-line no-fallthrough\n                            case state.product:\n                                return `new Matrix(${m.rows}, ${m.columns})`;\n                            default:\n                                throw Error('unknown state');\n                        }\n                    }\n                    if (m === state.product)\n                        return `states[${i}].product`;\n                    if (m === state.right)\n                        return `states[${i}].right`;\n                    if (m === state.left)\n                        return `states[${i}].left`;\n                }\n                return '';\n            }\n            function matrixToString(m, stateIndex) {\n                if (!m || !m.rows || !m.columns)\n                    return 'null';\n                if (m === model.outputConnector)\n                    return `json.outputConnector`;\n                if (m === model.output)\n                    return `json.output`;\n                for (let i = 0, max = model.hiddenLayers.length; i < max; i++) {\n                    const hiddenLayer = model.hiddenLayers[i];\n                    for (const p in hiddenLayer) {\n                        if (!hiddenLayer.hasOwnProperty(p))\n                            continue;\n                        if (hiddenLayer[p] !== m)\n                            continue;\n                        return `json.hiddenLayers[${i}].${p}`;\n                    }\n                }\n                return matrixOrigin(m, stateIndex);\n            }\n            function formatInputData() {\n                if (!inputLookup)\n                    return '';\n                if (inputSize === 1) {\n                    if (inputLookup === outputLookup) {\n                        return `function lookupInput(input) {\n            var table = ${JSON.stringify(inputLookup)};\n            var result = [];\n            for (var p in table) {\n              if (!input.hasOwnProperty(p)) break;\n              result.push(Float32Array.from([input[p]]));\n            }\n            return result;\n          }`;\n                    }\n                    return `function lookupInput(input) {\n          var table = ${JSON.stringify(inputLookup)};\n          var result = [];\n          for (var p in table) {\n            result.push(Float32Array.from([input[p]]));\n          }\n          return result;\n        }`;\n                }\n                return `function lookupInput(rawInputs) {\n        var table = ${JSON.stringify(inputLookup)};\n        var result = [];\n        for (var i = 0; i < rawInputs.length; i++) {\n          var rawInput = rawInputs[i];\n          var input = new Float32Array(${inputLookupLength});\n          for (var p in table) {\n            input[table[p]] = rawInput.hasOwnProperty(p) ? rawInput[p] : 0;\n          }\n          result.push(input);\n        }\n        return result;\n      }`;\n            }\n            function formatOutputData() {\n                if (!outputLookup)\n                    return '';\n                if (inputSize === 1) {\n                    if (inputLookup === outputLookup) {\n                        return `function lookupOutputPartial(output, input) {\n            var table = ${JSON.stringify(outputLookup)};\n            var offset = input.length;\n            var result = {};\n            var i = 0;\n            for (var p in table) {\n              if (i++ < offset) continue;\n              result[p] = output[table[p] - offset][0];\n            }\n            return result;\n          }`;\n                    }\n                    return `function lookupOutput(output) {\n          var table = ${JSON.stringify(outputLookup)};\n          var result = {};\n          for (var p in table) {\n            result[p] = output[table[p]][0];\n          }\n          return result;\n        }`;\n                }\n                return `function lookupOutput(output) {\n        var table = ${JSON.stringify(outputLookup)};\n        var result = {};\n        for (var p in table) {\n          result[p] = output[table[p]];\n        }\n        return result;\n      }`;\n            }\n            function toInner(fnString) {\n                // crude, but should be sufficient for now\n                // function() { body }\n                // crude, but should be sufficient for now\n                // function() { body }\n                const fnParts = fnString.toString().split('{');\n                fnParts.shift();\n                // body }\n                const fnBodyString = fnParts.join('{');\n                const fnBodyParts = fnBodyString.split('}');\n                fnBodyParts.pop();\n                // body\n                return fnBodyParts\n                    .join('}')\n                    .split('\\n')\n                    .join('\\n        ')\n                    .replace('product.deltas[i] = 0;', '')\n                    .replace('product.deltas[column] = 0;', '')\n                    .replace('left.deltas[leftIndex] = 0;', '')\n                    .replace('right.deltas[rightIndex] = 0;', '')\n                    .replace('product.deltas = left.deltas.slice(0);', '');\n            }\n            function fileName(fnName) {\n                return `src/recurrent/matrix/${fnName.replace(/[A-Z]/g, function (value) {\n                return `-${value.toLowerCase()}`;\n            })}.js`;\n            }\n            const statesRaw = [];\n            const usedFunctionNames = {};\n            const innerFunctionsSwitch = [];\n            for (let i = 0, max = states.length; i < max; i++) {\n                const state = states[i];\n                statesRaw.push(`states[${i}] = {\n      name: '${state.forwardFn.name}',\n      left: ${state.left ? matrixToString(state.left, i) : 'undefined'},\n      right: ${state.right ? matrixToString(state.right, i) : 'undefined'},\n      product: ${matrixToString(state.product, i)}\n    }`);\n                const fnName = state.forwardFn.name;\n                if (!usedFunctionNames[fnName]) {\n                    usedFunctionNames[fnName] = true;\n                    if (state.name === 'input') {\n                        innerFunctionsSwitch.push(`case '${fnName}':`);\n                        innerFunctionsSwitch.push(inputLookup && inputSize === 1\n                            ? 'product.weights = _i < input.length ? input[_i]: prevStates[prevStates.length - 1].product.weights;'\n                            : inputSize === 1\n                                ? 'product.weights = [input[_i]];'\n                                : 'product.weights = input[_i];');\n                        innerFunctionsSwitch.push('break;');\n                    }\n                    else {\n                        innerFunctionsSwitch.push(`        case '${fnName}':${fnName !== 'forwardFn'\n                        ? ` //compiled from ${fileName(fnName)}`\n                        : ''}\n          ${toInner(state.forwardFn.toString())}\n          break;`);\n                    }\n                }\n            }\n            const forceForecast = inputSize === 1 && this.outputLookup;\n            const src = `\n  var input = ${this.inputLookup ? 'lookupInput(rawInput)' : 'rawInput'};\n  var json = ${jsonString};\n  var output = [];\n  var states = [];\n  var prevStates;\n  var state;\n  var max = ${forceForecast\n            ? inputLookup === outputLookup\n                ? inputLookupLength\n                : `input.length + ${outputLookupLength - 1}`\n            : 'input.length'};\n  for (var _i = 0; _i < max; _i++) {\n    prevStates = states;\n    states = [];\n    ${statesRaw.join(';\\n    ')};\n    for (var stateIndex = 0, stateMax = ${statesRaw.length}; stateIndex < stateMax; stateIndex++) {\n      state = states[stateIndex];\n      var product = state.product;\n      var left = state.left;\n      var right = state.right;\n\n      switch (state.name) {\n${innerFunctionsSwitch.join('\\n')}\n      }\n    }\n    ${inputSize === 1 && inputLookup\n            ? 'if (_i >= input.length - 1) { output.push(state.product.weights); }'\n            : 'output = state.product.weights;'}\n  }\n  ${outputLookup\n            ? outputLookup === inputLookup\n                ? 'return lookupOutputPartial(output, input)'\n                : 'return lookupOutput(output)'\n            : inputSize === 1\n                ? 'return output[0]'\n                : 'return output'};\n  ${formatInputData()}\n  ${formatOutputData()}\n\n  function Matrix(rows, columns) {\n    this.rows = rows;\n    this.columns = columns;\n    this.weights = new Float32Array(rows * columns);\n  }\n  ${softmax.toString().replace('_2.default', 'Matrix')}\n  ${randomFloat.toString()}\n  ${sampleI.toString()}\n  ${maxI.toString()}`;\n            // eslint-disable-next-line\n            return new Function('rawInput', cb ? cb(src) : src);\n        }\n    }\n    const trainDefaults = { ...trainDefaults$1 };\n\n    class GRUTimeStep extends RNNTimeStep {\n        getHiddenLayer(hiddenSize, prevSize) {\n            return getGRUHiddenLayer(hiddenSize, prevSize);\n        }\n        getEquation(equation, inputMatrix, previousResult, hiddenLayer) {\n            return getGRUEquation(equation, inputMatrix, previousResult, hiddenLayer);\n        }\n    }\n\n    class LSTM extends RNN {\n        getHiddenLayer(hiddenSize, prevSize) {\n            return getHiddenLSTMLayer(hiddenSize, prevSize);\n        }\n        getEquation(equation, inputMatrix, previousResult, hiddenLayer) {\n            return getLSTMEquation(equation, inputMatrix, previousResult, hiddenLayer);\n        }\n    }\n    function getHiddenLSTMLayer(hiddenSize, prevSize) {\n        return {\n            // gates parameters\n            // wix\n            inputMatrix: new RandomMatrix(hiddenSize, prevSize, 0.08),\n            inputHidden: new RandomMatrix(hiddenSize, hiddenSize, 0.08),\n            inputBias: new Matrix(hiddenSize, 1),\n            // wfx\n            forgetMatrix: new RandomMatrix(hiddenSize, prevSize, 0.08),\n            forgetHidden: new RandomMatrix(hiddenSize, hiddenSize, 0.08),\n            forgetBias: new Matrix(hiddenSize, 1),\n            // wox\n            outputMatrix: new RandomMatrix(hiddenSize, prevSize, 0.08),\n            outputHidden: new RandomMatrix(hiddenSize, hiddenSize, 0.08),\n            outputBias: new Matrix(hiddenSize, 1),\n            // cell write params\n            // wcx\n            cellActivationMatrix: new RandomMatrix(hiddenSize, prevSize, 0.08),\n            cellActivationHidden: new RandomMatrix(hiddenSize, hiddenSize, 0.08),\n            cellActivationBias: new Matrix(hiddenSize, 1),\n        };\n    }\n    function getLSTMEquation(equation, inputMatrix, previousResult, hiddenLayer) {\n        if (!hiddenLayer.inputMatrix ||\n            !hiddenLayer.inputHidden ||\n            !hiddenLayer.inputBias ||\n            !hiddenLayer.forgetMatrix ||\n            !hiddenLayer.forgetHidden ||\n            !hiddenLayer.forgetBias ||\n            !hiddenLayer.outputMatrix ||\n            !hiddenLayer.outputHidden ||\n            !hiddenLayer.outputBias ||\n            !hiddenLayer.cellActivationMatrix ||\n            !hiddenLayer.cellActivationHidden ||\n            !hiddenLayer.cellActivationBias) {\n            throw new Error('hiddenLayer does not have expected properties');\n        }\n        const sigmoid = equation.sigmoid.bind(equation);\n        const add = equation.add.bind(equation);\n        const multiply = equation.multiply.bind(equation);\n        const multiplyElement = equation.multiplyElement.bind(equation);\n        const tanh = equation.tanh.bind(equation);\n        const inputGate = sigmoid(add(add(multiply(hiddenLayer.inputMatrix, inputMatrix), multiply(hiddenLayer.inputHidden, previousResult)), hiddenLayer.inputBias));\n        const forgetGate = sigmoid(add(add(multiply(hiddenLayer.forgetMatrix, inputMatrix), multiply(hiddenLayer.forgetHidden, previousResult)), hiddenLayer.forgetBias));\n        // output gate\n        const outputGate = sigmoid(add(add(multiply(hiddenLayer.outputMatrix, inputMatrix), multiply(hiddenLayer.outputHidden, previousResult)), hiddenLayer.outputBias));\n        // write operation on cells\n        const cellWrite = tanh(add(add(multiply(hiddenLayer.cellActivationMatrix, inputMatrix), multiply(hiddenLayer.cellActivationHidden, previousResult)), hiddenLayer.cellActivationBias));\n        // compute new cell activation\n        const retainCell = multiplyElement(forgetGate, previousResult); // what do we keep from cell\n        const writeCell = multiplyElement(inputGate, cellWrite); // what do we write to cell\n        const cell = add(retainCell, writeCell); // new cell contents\n        // compute hidden state as gated, saturated cell activations\n        return multiplyElement(outputGate, tanh(cell));\n    }\n\n    class LSTMTimeStep extends RNNTimeStep {\n        getHiddenLayer(hiddenSize, prevSize) {\n            return getHiddenLSTMLayer(hiddenSize, prevSize);\n        }\n        getEquation(equation, inputMatrix, previousResult, hiddenLayer) {\n            return getLSTMEquation(equation, inputMatrix, previousResult, hiddenLayer);\n        }\n    }\n\n    /**\n     *\n     * @param start\n     * @param end\n     * @returns {Array}\n     */\n    function range(start, end) {\n        const result = [];\n        for (; start < end; start++) {\n            result.push(start);\n        }\n        return result;\n    }\n\n    function toArray(values) {\n        if (Array.isArray(values)) {\n            return Float32Array.from(values);\n        }\n        return Float32Array.from(Object.values(values));\n    }\n\n    function drawInput({ pixelX, pixelY, radius, inputs, row, line, fontSize, fontClassName, }) {\n        let svg = `<rect\n              x=\"${pixelX / 2 - radius}\"\n              y=\"${pixelY / 2 + row * pixelY - radius}\"\n              width=\"${2 * radius}\"\n              height=\"${2 * radius}\"\n              stroke=\"black\"\n              stroke-width=\"1\"\n              fill=\"${inputs.color}\"\n              class=\"${inputs.className}\" />\n            <line\n              x1=\"${pixelX / 4}\"\n              y1=\"${pixelY / 2 + row * pixelY}\"\n              x2=\"${pixelX / 2 - radius}\"\n              y2=\"${pixelY / 2 + row * pixelY}\"\n              style=\"stroke:${line.color};stroke-width:${line.width}\"\n              class=\"${line.className}\" />`;\n        if (inputs.labels) {\n            svg += `<text\n              x=\"${pixelX / 8}\"\n              y=\"${pixelY / 2 + row * pixelY - 5}\"\n              fill=\"black\"\n              font-size=\"${fontSize}\"\n              class=\"${fontClassName}\">${inputs.labels[row]}</text>`;\n        }\n        return svg;\n    }\n    function drawNeuron({ pixelX, pixelY, row, column, radius, hidden, }) {\n        return `<circle\n            cx=\"${pixelX / 2 + column * pixelX}\"\n            cy=\"${pixelY / 2 + row * pixelY}\"\n            r=\"${radius}\"\n            stroke=\"black\"\n            stroke-width=\"1\"\n            fill=\"${hidden.color}\"\n            class=\"${hidden.className}\" />`;\n    }\n    function drawOutput({ pixelX, pixelY, row, column, line, outputs, radius, }) {\n        return `<circle\n            cx=\"${pixelX / 2 + column * pixelX}\"\n            cy=\"${pixelY / 2 + row * pixelY}\"\n            r=\"${radius}\"\n            stroke=\"black\"\n            stroke-width=\"1\"\n            fill=\"${outputs.color}\"\n            class=\"${outputs.className}\" />\n          <line\n            x1=\"${pixelX / 2 + column * pixelX + radius}\"\n            y1=\"${pixelY / 2 + row * pixelY}\"\n            x2=\"${pixelX / 2 + column * pixelX + pixelX / 4}\"\n            y2=\"${pixelY / 2 + row * pixelY}\"\n            style=\"stroke:${line.color};stroke-width:${line.width}\"\n            class=\"${line.className}\" />`;\n    }\n    function drawBackwardConnections({ pixelX, pixelY, row, column, radius, lineY, line, previousConnectionIndex, }) {\n        return `<line\n            x1=\"${pixelX / 2 + (column - 1) * pixelX + radius}\"\n            y1=\"${lineY / 2 + previousConnectionIndex * lineY}\"\n            x2=\"${pixelX / 2 + column * pixelX - radius}\"\n            y2=\"${pixelY / 2 + row * pixelY}\"\n            style=\"stroke:${line.color};stroke-width:${line.width}\"\n            class=\"${line.className}\" />`;\n    }\n    function neuralNetworkToInnerSVG(options) {\n        const { sizes, height, width } = options;\n        let svg = '';\n        const pixelX = width / sizes.length;\n        for (let column = 0; column < sizes.length; column++) {\n            const size = sizes[column];\n            const pixelY = height / size;\n            for (let row = 0; row < size; row++) {\n                if (column === 0) {\n                    svg += drawInput({ pixelX, pixelY, row, column, ...options });\n                }\n                else {\n                    if (column === sizes.length - 1) {\n                        svg += drawOutput({ pixelX, pixelY, row, column, ...options });\n                    }\n                    else {\n                        svg += drawNeuron({ pixelX, pixelY, row, column, ...options });\n                    }\n                    const previousSize = sizes[column - 1];\n                    const lineY = height / previousSize;\n                    for (let previousConnectionIndex = 0; previousConnectionIndex < previousSize; previousConnectionIndex++) {\n                        svg += drawBackwardConnections({\n                            pixelX,\n                            pixelY,\n                            row,\n                            column,\n                            lineY,\n                            previousConnectionIndex,\n                            ...options,\n                        });\n                    }\n                }\n            }\n        }\n        return svg;\n    }\n    function drawRecurrentConnections({ pixelX, pixelY, row, column, radius, recurrentLine, }) {\n        const moveX = pixelX / 2 + column * pixelX + radius + 1;\n        const moveY = pixelY / 2 + row * pixelY;\n        const x = moveX - radius * 2 - 2;\n        const y = moveY;\n        const x1 = x + 100;\n        const y1 = y + 50;\n        const x2 = moveX - 100;\n        const y2 = moveY + 50;\n        return `<path\n              d=\"M ${moveX} ${moveY} C ${x1} ${y1}, ${x2} ${y2}, ${x} ${y}\"\n              stroke=\"${recurrentLine.color}\"\n              stroke-width=\"${recurrentLine.width}\"\n              fill=\"transparent\"\n              stroke-linecap=\"round\"\n              marker-end=\"url(#arrow)\"\n              class=\"${recurrentLine.className}\" />`;\n    }\n    function rnnToInnerSVG(options) {\n        const { width, height, recurrentLine, sizes, radius } = options;\n        const pixelX = width / sizes.length;\n        let svg = `<defs>\n              <marker id=\"arrow\" markerWidth=\"10\" markerHeight=\"10\" refX=\"8\" refY=\"3\" orient=\"auto\" markerUnits=\"strokeWidth\">\n                <path d=\"M0,0 L0,6 L9,3 z\" fill=\"${recurrentLine.color}\" />\n              </marker>\n            </defs>`;\n        svg += neuralNetworkToInnerSVG(options);\n        for (let column = 1; column < sizes.length; column++) {\n            const size = sizes[column];\n            const pixelY = height / size;\n            for (let row = 0; row < size; row++) {\n                svg += drawRecurrentConnections({\n                    pixelX,\n                    pixelY,\n                    row,\n                    column,\n                    radius,\n                    recurrentLine,\n                });\n            }\n        }\n        return svg;\n    }\n    function getFeedForwardLayers(network) {\n        const { options } = network;\n        if (!options) {\n            throw new Error('options not defined');\n        }\n        if (!options.inputLayer) {\n            throw new Error('options.inputLater not defined');\n        }\n        if (!options.hiddenLayers) {\n            throw new Error('options.hiddenLayers not defined');\n        }\n        if (options.hiddenLayers.length < 1) {\n            throw new Error('options.hiddenLayers is empty');\n        }\n        if (!options.outputLayer) {\n            throw new Error('options.outputLayer not defined');\n        }\n        const inputLayer = options.inputLayer();\n        const hiddenLayers = [];\n        hiddenLayers.push(options.hiddenLayers[0](inputLayer, 0));\n        for (let i = 1; i < options.hiddenLayers.length; i++) {\n            hiddenLayers.push(options.hiddenLayers[i](hiddenLayers[i - 1], i));\n        }\n        const outputLayer = options.outputLayer(hiddenLayers[hiddenLayers.length - 1], hiddenLayers.length);\n        return {\n            inputSize: inputLayer.height,\n            hiddenLayers: hiddenLayers.map((hiddenLayer) => hiddenLayer.height),\n            outputSize: outputLayer.height,\n        };\n    }\n    function getRecurrentLayers(network) {\n        const hiddenLayers = [];\n        const { options } = network;\n        if (!options.inputLayer) {\n            throw new Error('inputLayer not defined');\n        }\n        if (!options.outputLayer) {\n            throw new Error('outputLayer not defined');\n        }\n        const inputLayer = options.inputLayer();\n        hiddenLayers.push(options.hiddenLayers[0](inputLayer, recurrentZeros(), 0));\n        for (let i = 1; i < options.hiddenLayers.length; i++) {\n            hiddenLayers.push(options.hiddenLayers[i](hiddenLayers[i - 1], recurrentZeros(), i));\n        }\n        const outputLayer = options.outputLayer(hiddenLayers[hiddenLayers.length - 1], -1);\n        return {\n            inputSize: inputLayer.height,\n            hiddenLayers: hiddenLayers.map((hiddenLayer) => hiddenLayer.height),\n            outputSize: outputLayer.height,\n        };\n    }\n    function wrapOuterSVG(svgBody, width, height) {\n        // language=html\n        return `<svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            version=\"1.1\"\n            width=\"${width}\"\n            height=\"${height}\">${svgBody}</svg>`;\n    }\n    function getNeuralNetworkJSONSizes(json) {\n        return json.sizes;\n    }\n    function getNeuralNetworkSizes(net) {\n        const { options, sizes } = net;\n        const { inputSize, outputSize, hiddenLayers } = options;\n        if (!sizes) {\n            if (typeof inputSize === 'number' && inputSize < 1) {\n                throw new Error('inputSize not set');\n            }\n            if (typeof outputSize === 'number' && outputSize < 1) {\n                throw new Error('outputSize not set');\n            }\n            if (hiddenLayers === null || hiddenLayers === void 0 ? void 0 : hiddenLayers.some((v) => v < 1)) {\n                throw new Error('hiddenLayers not set');\n            }\n        }\n        return typeof inputSize === 'number' &&\n            Array.isArray(hiddenLayers) &&\n            typeof outputSize === 'number'\n            ? [inputSize].concat(hiddenLayers).concat([outputSize])\n            : sizes;\n    }\n    function getRNNSizes(net) {\n        const { options } = net;\n        const { inputSize, outputSize, hiddenLayers } = options;\n        return [inputSize].concat(hiddenLayers).concat([outputSize]);\n    }\n    function defaultOptions() {\n        return {\n            line: {\n                width: 0.5,\n                color: 'black',\n                className: 'connection',\n            },\n            recurrentLine: {\n                width: 1,\n                color: 'red',\n                className: 'recurrence',\n            },\n            inputs: {\n                color: 'rgba(0, 128, 0, 0.5)',\n                labels: null,\n                className: 'input',\n            },\n            outputs: {\n                color: 'rgba(100, 149, 237, 0.5)',\n                className: 'output',\n            },\n            hidden: {\n                color: 'rgba(255, 127, 80, 0.5)',\n                className: 'hidden-neuron',\n            },\n            fontSize: '14px',\n            fontClassName: 'label',\n            radius: 8,\n            width: 400,\n            height: 250,\n            sizes: [],\n        };\n    }\n    function toSVG(net, options) {\n        const mergedOptions = { ...defaultOptions(), ...options };\n        const { width, height, inputs } = mergedOptions;\n        // Get network size array for NeuralNetwork or NeuralNetworkGPU\n        let sizes = [];\n        if (net instanceof NeuralNetwork || net instanceof NeuralNetworkGPU) {\n            sizes = getNeuralNetworkSizes(net);\n        }\n        // get network size for Recurrent\n        else if (net instanceof Recurrent) {\n            const { inputSize, hiddenLayers, outputSize } = getRecurrentLayers(net);\n            sizes = [inputSize].concat(hiddenLayers).concat([outputSize]);\n        }\n        // get network size for FeedForward\n        else if (net instanceof FeedForward) {\n            const { inputSize, hiddenLayers, outputSize } = getFeedForwardLayers(net);\n            sizes = [inputSize].concat(hiddenLayers).concat([outputSize]);\n        }\n        // handle json, recurrent first\n        else if (net instanceof RNN ||\n            net instanceof LSTM ||\n            net instanceof GRU ||\n            net instanceof RNNTimeStep ||\n            net instanceof LSTMTimeStep ||\n            net instanceof GRUTimeStep) {\n            return wrapOuterSVG(rnnToInnerSVG({\n                ...mergedOptions,\n                sizes: checkSizes(getRNNSizes(net), inputs.labels),\n            }), width, height);\n        }\n        // handle json, NeuralNetwork\n        else if (net.hasOwnProperty('type')) {\n            switch (net.type) {\n                case 'NeuralNetwork':\n                case 'NeuralNetworkGPU':\n                    return wrapOuterSVG(neuralNetworkToInnerSVG({\n                        ...mergedOptions,\n                        sizes: checkSizes(getNeuralNetworkJSONSizes(net), inputs.labels),\n                    }), width, height);\n                case 'RNN':\n                case 'GRU':\n                case 'LSTM':\n                case 'RNNTimeStep':\n                case 'GRUTimeStep':\n                case 'LSTMTimeStep':\n                    return wrapOuterSVG(rnnToInnerSVG({\n                        ...mergedOptions,\n                        sizes: checkSizes(getRNNSizes(net), inputs.labels),\n                    }), width, height);\n                default:\n                    throw new Error('unrecognized network');\n            }\n        }\n        else if (net.hasOwnProperty('inputSize') &&\n            net.hasOwnProperty('hiddenLayers') &&\n            net.hasOwnProperty('outputSize')) {\n            const { inputSize, hiddenLayers, outputSize } = net;\n            sizes = [inputSize, ...hiddenLayers, outputSize];\n        }\n        else if (net.hasOwnProperty('sizes')) {\n            sizes = net.sizes;\n        }\n        else {\n            throw new Error('unrecognized network');\n        }\n        return wrapOuterSVG(neuralNetworkToInnerSVG({\n            ...mergedOptions,\n            sizes: checkSizes(sizes, inputs.labels),\n        }), width, height);\n    }\n    function checkSizes(sizes, labels) {\n        if (!sizes) {\n            throw new Error('sizes not set');\n        }\n        if (sizes.some((size) => size < 1)) {\n            throw new Error('sizes not set correctly');\n        }\n        if (labels && labels.length !== sizes[0]) {\n            throw new Error('not enough labels for inputs');\n        }\n        return sizes;\n    }\n\n    const recurrent = {\n        RNNTimeStep,\n        LSTMTimeStep,\n        GRUTimeStep,\n        RNN,\n        LSTM,\n        GRU,\n    };\n    const utilities = {\n        max,\n        mse: mse$1,\n        ones: ones$1,\n        ones2D,\n        random: random$1,\n        randomWeight,\n        randos,\n        range,\n        toArray,\n        DataFormatter,\n        zeros: zeros$1,\n        toSVG,\n    };\n\n    exports.CrossValidate = CrossValidate;\n    exports.FeedForward = FeedForward;\n    exports.NeuralNetwork = NeuralNetwork;\n    exports.NeuralNetworkGPU = NeuralNetworkGPU;\n    exports.Recurrent = Recurrent;\n    exports.activation = index$1;\n    exports.layer = layer;\n    exports.layerTypes = layerTypes;\n    exports.likely = likely;\n    exports.lookup = lookup;\n    exports.praxis = index;\n    exports.recurrent = recurrent;\n    exports.utilities = utilities;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=browser.js.map\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root {\\r\\n  --padding: 16px;\\r\\n  --border-radius: 16px;\\r\\n  --border: 1px solid grey;\\r\\n}\\r\\n\\r\\n.ui-wrapper {\\r\\n  display: flex;\\r\\n  gap: 16px;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n#wrapper {\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n#regenerate {\\r\\n  width: fit-content;\\r\\n}\\r\\n\\r\\n.button {\\r\\n  background: blue;\\r\\n  border: var(--border);\\r\\n  padding: var(--padding);\\r\\n  border-radius: 30px;\\r\\n  font-size: 22px;\\r\\n  color: white;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.button--passive {\\r\\n  background-color: white;\\r\\n  color: grey;\\r\\n}\\r\\n\\r\\n.bottom-controls {\\r\\n  display: flex;\\r\\n  align-items: flex-end;\\r\\n  gap: 16px;\\r\\n}\\r\\n\\r\\n.activation-types {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  align-items: center;\\r\\n  justify-content: space-between;\\r\\n  width: fit-content;\\r\\n  gap: 8px;\\r\\n}\\r\\n\\r\\n.activation-types .button {\\r\\n  width: 100%;\\r\\n  text-transform: uppercase;\\r\\n}\\r\\n\\r\\n.stats__container {\\r\\n  display: flex;\\r\\n  gap: 16px;\\r\\n}\\r\\n\\r\\n.stats {\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  padding: var(--padding);\\r\\n  border-radius: var(--border-radius);\\r\\n  border: var(--border);\\r\\n  width: 200px;\\r\\n  height: 55px;\\r\\n  padding: 16px 8px 8px;\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.stats__title {\\r\\n  position: absolute;\\r\\n  top: -20%;\\r\\n  width: 80%;\\r\\n  left: 50%;\\r\\n  transform: translateX(-50%);\\r\\n  padding: 8px;\\r\\n  background-color: blue;\\r\\n  color: white;\\r\\n  font-weight: bold;\\r\\n  font-size: 18px;\\r\\n  border-radius: 8px;\\r\\n  text-transform: uppercase;\\r\\n}\\r\\n\\r\\n.stats__value {\\r\\n  font-size: 22px;\\r\\n}\\r\\n\\r\\n.stats input {\\r\\n  width: 100%;\\r\\n  border: none;\\r\\n}\\r\\n\\r\\n.graph-wrapper {\\r\\n  display: flex;\\r\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/style.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,eAAe;EACf,qBAAqB;EACrB,wBAAwB;AAC1B;;AAEA;EACE,aAAa;EACb,SAAS;EACT,sBAAsB;AACxB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;EAChB,qBAAqB;EACrB,uBAAuB;EACvB,mBAAmB;EACnB,eAAe;EACf,YAAY;EACZ,eAAe;AACjB;;AAEA;EACE,uBAAuB;EACvB,WAAW;AACb;;AAEA;EACE,aAAa;EACb,qBAAqB;EACrB,SAAS;AACX;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,8BAA8B;EAC9B,kBAAkB;EAClB,QAAQ;AACV;;AAEA;EACE,WAAW;EACX,yBAAyB;AAC3B;;AAEA;EACE,aAAa;EACb,SAAS;AACX;;AAEA;EACE,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,uBAAuB;EACvB,mCAAmC;EACnC,qBAAqB;EACrB,YAAY;EACZ,YAAY;EACZ,qBAAqB;EACrB,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,UAAU;EACV,SAAS;EACT,2BAA2B;EAC3B,YAAY;EACZ,sBAAsB;EACtB,YAAY;EACZ,iBAAiB;EACjB,eAAe;EACf,kBAAkB;EAClB,yBAAyB;AAC3B;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,WAAW;EACX,YAAY;AACd;;AAEA;EACE,aAAa;AACf\",\"sourcesContent\":[\":root {\\r\\n  --padding: 16px;\\r\\n  --border-radius: 16px;\\r\\n  --border: 1px solid grey;\\r\\n}\\r\\n\\r\\n.ui-wrapper {\\r\\n  display: flex;\\r\\n  gap: 16px;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n#wrapper {\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n#regenerate {\\r\\n  width: fit-content;\\r\\n}\\r\\n\\r\\n.button {\\r\\n  background: blue;\\r\\n  border: var(--border);\\r\\n  padding: var(--padding);\\r\\n  border-radius: 30px;\\r\\n  font-size: 22px;\\r\\n  color: white;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.button--passive {\\r\\n  background-color: white;\\r\\n  color: grey;\\r\\n}\\r\\n\\r\\n.bottom-controls {\\r\\n  display: flex;\\r\\n  align-items: flex-end;\\r\\n  gap: 16px;\\r\\n}\\r\\n\\r\\n.activation-types {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  align-items: center;\\r\\n  justify-content: space-between;\\r\\n  width: fit-content;\\r\\n  gap: 8px;\\r\\n}\\r\\n\\r\\n.activation-types .button {\\r\\n  width: 100%;\\r\\n  text-transform: uppercase;\\r\\n}\\r\\n\\r\\n.stats__container {\\r\\n  display: flex;\\r\\n  gap: 16px;\\r\\n}\\r\\n\\r\\n.stats {\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  padding: var(--padding);\\r\\n  border-radius: var(--border-radius);\\r\\n  border: var(--border);\\r\\n  width: 200px;\\r\\n  height: 55px;\\r\\n  padding: 16px 8px 8px;\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.stats__title {\\r\\n  position: absolute;\\r\\n  top: -20%;\\r\\n  width: 80%;\\r\\n  left: 50%;\\r\\n  transform: translateX(-50%);\\r\\n  padding: 8px;\\r\\n  background-color: blue;\\r\\n  color: white;\\r\\n  font-weight: bold;\\r\\n  font-size: 18px;\\r\\n  border-radius: 8px;\\r\\n  text-transform: uppercase;\\r\\n}\\r\\n\\r\\n.stats__value {\\r\\n  font-size: 22px;\\r\\n}\\r\\n\\r\\n.stats input {\\r\\n  width: 100%;\\r\\n  border: none;\\r\\n}\\r\\n\\r\\n.graph-wrapper {\\r\\n  display: flex;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","/**\n * gpu.js\n * http://gpu.rocks/\n *\n * GPU Accelerated JavaScript\n *\n * @version 2.16.0\n * @date Wed Nov 16 2022 15:48:37 GMT-0500 (Eastern Standard Time)\n *\n * @license MIT\n * The MIT License\n *\n * Copyright (c) 2022 gpu.js Team\n */(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.GPU = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = global || self, factory(global.acorn = {}));\n}(this, function (exports) { 'use strict';\n\n\n  var reservedWords = {\n    3: \"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile\",\n    5: \"class enum extends super const export import\",\n    6: \"enum\",\n    strict: \"implements interface let package private protected public static yield\",\n    strictBind: \"eval arguments\"\n  };\n\n\n  var ecma5AndLessKeywords = \"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this\";\n\n  var keywords = {\n    5: ecma5AndLessKeywords,\n    \"5module\": ecma5AndLessKeywords + \" export import\",\n    6: ecma5AndLessKeywords + \" const class extends export import super\"\n  };\n\n  var keywordRelationalOperator = /^in(stanceof)?$/;\n\n\n  var nonASCIIidentifierStartChars = \"\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u037f\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u052f\\u0531-\\u0556\\u0559\\u0560-\\u0588\\u05d0-\\u05ea\\u05ef-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u0860-\\u086a\\u08a0-\\u08b4\\u08b6-\\u08bd\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u09fc\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0af9\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c39\\u0c3d\\u0c58-\\u0c5a\\u0c60\\u0c61\\u0c80\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d54-\\u0d56\\u0d5f-\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e86-\\u0e8a\\u0e8c-\\u0ea3\\u0ea5\\u0ea7-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f5\\u13f8-\\u13fd\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f8\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1878\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191e\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19b0-\\u19c9\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1c80-\\u1c88\\u1c90-\\u1cba\\u1cbd-\\u1cbf\\u1ce9-\\u1cec\\u1cee-\\u1cf3\\u1cf5\\u1cf6\\u1cfa\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2118-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309b-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312f\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fef\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua69d\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua7bf\\ua7c2-\\ua7c6\\ua7f7-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua8fd\\ua8fe\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\ua9e0-\\ua9e4\\ua9e6-\\ua9ef\\ua9fa-\\ua9fe\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa7e-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uab30-\\uab5a\\uab5c-\\uab67\\uab70-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\";\n  var nonASCIIidentifierChars = \"\\u200c\\u200d\\xb7\\u0300-\\u036f\\u0387\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u0669\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u06f0-\\u06f9\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07c0-\\u07c9\\u07eb-\\u07f3\\u07fd\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08d3-\\u08e1\\u08e3-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09cb-\\u09cd\\u09d7\\u09e2\\u09e3\\u09e6-\\u09ef\\u09fe\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2\\u0ae3\\u0ae6-\\u0aef\\u0afa-\\u0aff\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c00-\\u0c04\\u0c3e-\\u0c44\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0c66-\\u0c6f\\u0c81-\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0ce6-\\u0cef\\u0d00-\\u0d03\\u0d3b\\u0d3c\\u0d3e-\\u0d44\\u0d46-\\u0d48\\u0d4a-\\u0d4d\\u0d57\\u0d62\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0de6-\\u0def\\u0df2\\u0df3\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0e50-\\u0e59\\u0eb1\\u0eb4-\\u0ebc\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f3e\\u0f3f\\u0f71-\\u0f84\\u0f86\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102b-\\u103e\\u1040-\\u1049\\u1056-\\u1059\\u105e-\\u1060\\u1062-\\u1064\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u1369-\\u1371\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b4-\\u17d3\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u18a9\\u1920-\\u192b\\u1930-\\u193b\\u1946-\\u194f\\u19d0-\\u19da\\u1a17-\\u1a1b\\u1a55-\\u1a5e\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1ab0-\\u1abd\\u1b00-\\u1b04\\u1b34-\\u1b44\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1b80-\\u1b82\\u1ba1-\\u1bad\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c24-\\u1c37\\u1c40-\\u1c49\\u1c50-\\u1c59\\u1cd0-\\u1cd2\\u1cd4-\\u1ce8\\u1ced\\u1cf4\\u1cf7-\\u1cf9\\u1dc0-\\u1df9\\u1dfb-\\u1dff\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2cef-\\u2cf1\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua620-\\ua629\\ua66f\\ua674-\\ua67d\\ua69e\\ua69f\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua823-\\ua827\\ua880\\ua881\\ua8b4-\\ua8c5\\ua8d0-\\ua8d9\\ua8e0-\\ua8f1\\ua8ff-\\ua909\\ua926-\\ua92d\\ua947-\\ua953\\ua980-\\ua983\\ua9b3-\\ua9c0\\ua9d0-\\ua9d9\\ua9e5\\ua9f0-\\ua9f9\\uaa29-\\uaa36\\uaa43\\uaa4c\\uaa4d\\uaa50-\\uaa59\\uaa7b-\\uaa7d\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uaaeb-\\uaaef\\uaaf5\\uaaf6\\uabe3-\\uabea\\uabec\\uabed\\uabf0-\\uabf9\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f\";\n\n  var nonASCIIidentifierStart = new RegExp(\"[\" + nonASCIIidentifierStartChars + \"]\");\n  var nonASCIIidentifier = new RegExp(\"[\" + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"]\");\n\n  nonASCIIidentifierStartChars = nonASCIIidentifierChars = null;\n\n\n  var astralIdentifierStartCodes = [0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541];\n\n  var astralIdentifierCodes = [509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];\n\n  function isInAstralSet(code, set) {\n    var pos = 0x10000;\n    for (var i = 0; i < set.length; i += 2) {\n      pos += set[i];\n      if (pos > code) { return false }\n      pos += set[i + 1];\n      if (pos >= code) { return true }\n    }\n  }\n\n\n  function isIdentifierStart(code, astral) {\n    if (code < 65) { return code === 36 }\n    if (code < 91) { return true }\n    if (code < 97) { return code === 95 }\n    if (code < 123) { return true }\n    if (code <= 0xffff) { return code >= 0xaa && nonASCIIidentifierStart.test(String.fromCharCode(code)) }\n    if (astral === false) { return false }\n    return isInAstralSet(code, astralIdentifierStartCodes)\n  }\n\n\n  function isIdentifierChar(code, astral) {\n    if (code < 48) { return code === 36 }\n    if (code < 58) { return true }\n    if (code < 65) { return false }\n    if (code < 91) { return true }\n    if (code < 97) { return code === 95 }\n    if (code < 123) { return true }\n    if (code <= 0xffff) { return code >= 0xaa && nonASCIIidentifier.test(String.fromCharCode(code)) }\n    if (astral === false) { return false }\n    return isInAstralSet(code, astralIdentifierStartCodes) || isInAstralSet(code, astralIdentifierCodes)\n  }\n\n\n\n\n\n  var TokenType = function TokenType(label, conf) {\n    if ( conf === void 0 ) conf = {};\n\n    this.label = label;\n    this.keyword = conf.keyword;\n    this.beforeExpr = !!conf.beforeExpr;\n    this.startsExpr = !!conf.startsExpr;\n    this.isLoop = !!conf.isLoop;\n    this.isAssign = !!conf.isAssign;\n    this.prefix = !!conf.prefix;\n    this.postfix = !!conf.postfix;\n    this.binop = conf.binop || null;\n    this.updateContext = null;\n  };\n\n  function binop(name, prec) {\n    return new TokenType(name, {beforeExpr: true, binop: prec})\n  }\n  var beforeExpr = {beforeExpr: true}, startsExpr = {startsExpr: true};\n\n\n  var keywords$1 = {};\n\n  function kw(name, options) {\n    if ( options === void 0 ) options = {};\n\n    options.keyword = name;\n    return keywords$1[name] = new TokenType(name, options)\n  }\n\n  var types = {\n    num: new TokenType(\"num\", startsExpr),\n    regexp: new TokenType(\"regexp\", startsExpr),\n    string: new TokenType(\"string\", startsExpr),\n    name: new TokenType(\"name\", startsExpr),\n    eof: new TokenType(\"eof\"),\n\n    bracketL: new TokenType(\"[\", {beforeExpr: true, startsExpr: true}),\n    bracketR: new TokenType(\"]\"),\n    braceL: new TokenType(\"{\", {beforeExpr: true, startsExpr: true}),\n    braceR: new TokenType(\"}\"),\n    parenL: new TokenType(\"(\", {beforeExpr: true, startsExpr: true}),\n    parenR: new TokenType(\")\"),\n    comma: new TokenType(\",\", beforeExpr),\n    semi: new TokenType(\";\", beforeExpr),\n    colon: new TokenType(\":\", beforeExpr),\n    dot: new TokenType(\".\"),\n    question: new TokenType(\"?\", beforeExpr),\n    arrow: new TokenType(\"=>\", beforeExpr),\n    template: new TokenType(\"template\"),\n    invalidTemplate: new TokenType(\"invalidTemplate\"),\n    ellipsis: new TokenType(\"...\", beforeExpr),\n    backQuote: new TokenType(\"`\", startsExpr),\n    dollarBraceL: new TokenType(\"${\", {beforeExpr: true, startsExpr: true}),\n\n\n    eq: new TokenType(\"=\", {beforeExpr: true, isAssign: true}),\n    assign: new TokenType(\"_=\", {beforeExpr: true, isAssign: true}),\n    incDec: new TokenType(\"++/--\", {prefix: true, postfix: true, startsExpr: true}),\n    prefix: new TokenType(\"!/~\", {beforeExpr: true, prefix: true, startsExpr: true}),\n    logicalOR: binop(\"||\", 1),\n    logicalAND: binop(\"&&\", 2),\n    bitwiseOR: binop(\"|\", 3),\n    bitwiseXOR: binop(\"^\", 4),\n    bitwiseAND: binop(\"&\", 5),\n    equality: binop(\"==/!=/===/!==\", 6),\n    relational: binop(\"</>/<=/>=\", 7),\n    bitShift: binop(\"<</>>/>>>\", 8),\n    plusMin: new TokenType(\"+/-\", {beforeExpr: true, binop: 9, prefix: true, startsExpr: true}),\n    modulo: binop(\"%\", 10),\n    star: binop(\"*\", 10),\n    slash: binop(\"/\", 10),\n    starstar: new TokenType(\"**\", {beforeExpr: true}),\n\n    _break: kw(\"break\"),\n    _case: kw(\"case\", beforeExpr),\n    _catch: kw(\"catch\"),\n    _continue: kw(\"continue\"),\n    _debugger: kw(\"debugger\"),\n    _default: kw(\"default\", beforeExpr),\n    _do: kw(\"do\", {isLoop: true, beforeExpr: true}),\n    _else: kw(\"else\", beforeExpr),\n    _finally: kw(\"finally\"),\n    _for: kw(\"for\", {isLoop: true}),\n    _function: kw(\"function\", startsExpr),\n    _if: kw(\"if\"),\n    _return: kw(\"return\", beforeExpr),\n    _switch: kw(\"switch\"),\n    _throw: kw(\"throw\", beforeExpr),\n    _try: kw(\"try\"),\n    _var: kw(\"var\"),\n    _const: kw(\"const\"),\n    _while: kw(\"while\", {isLoop: true}),\n    _with: kw(\"with\"),\n    _new: kw(\"new\", {beforeExpr: true, startsExpr: true}),\n    _this: kw(\"this\", startsExpr),\n    _super: kw(\"super\", startsExpr),\n    _class: kw(\"class\", startsExpr),\n    _extends: kw(\"extends\", beforeExpr),\n    _export: kw(\"export\"),\n    _import: kw(\"import\", startsExpr),\n    _null: kw(\"null\", startsExpr),\n    _true: kw(\"true\", startsExpr),\n    _false: kw(\"false\", startsExpr),\n    _in: kw(\"in\", {beforeExpr: true, binop: 7}),\n    _instanceof: kw(\"instanceof\", {beforeExpr: true, binop: 7}),\n    _typeof: kw(\"typeof\", {beforeExpr: true, prefix: true, startsExpr: true}),\n    _void: kw(\"void\", {beforeExpr: true, prefix: true, startsExpr: true}),\n    _delete: kw(\"delete\", {beforeExpr: true, prefix: true, startsExpr: true})\n  };\n\n\n  var lineBreak = /\\r\\n?|\\n|\\u2028|\\u2029/;\n  var lineBreakG = new RegExp(lineBreak.source, \"g\");\n\n  function isNewLine(code, ecma2019String) {\n    return code === 10 || code === 13 || (!ecma2019String && (code === 0x2028 || code === 0x2029))\n  }\n\n  var nonASCIIwhitespace = /[\\u1680\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/;\n\n  var skipWhiteSpace = /(?:\\s|\\/\\/.*|\\/\\*[^]*?\\*\\/)*/g;\n\n  var ref = Object.prototype;\n  var hasOwnProperty = ref.hasOwnProperty;\n  var toString = ref.toString;\n\n\n  function has(obj, propName) {\n    return hasOwnProperty.call(obj, propName)\n  }\n\n  var isArray = Array.isArray || (function (obj) { return (\n    toString.call(obj) === \"[object Array]\"\n  ); });\n\n  function wordsRegexp(words) {\n    return new RegExp(\"^(?:\" + words.replace(/ /g, \"|\") + \")$\")\n  }\n\n\n  var Position = function Position(line, col) {\n    this.line = line;\n    this.column = col;\n  };\n\n  Position.prototype.offset = function offset (n) {\n    return new Position(this.line, this.column + n)\n  };\n\n  var SourceLocation = function SourceLocation(p, start, end) {\n    this.start = start;\n    this.end = end;\n    if (p.sourceFile !== null) { this.source = p.sourceFile; }\n  };\n\n\n  function getLineInfo(input, offset) {\n    for (var line = 1, cur = 0;;) {\n      lineBreakG.lastIndex = cur;\n      var match = lineBreakG.exec(input);\n      if (match && match.index < offset) {\n        ++line;\n        cur = match.index + match[0].length;\n      } else {\n        return new Position(line, offset - cur)\n      }\n    }\n  }\n\n\n  var defaultOptions = {\n    ecmaVersion: 10,\n    sourceType: \"script\",\n    onInsertedSemicolon: null,\n    onTrailingComma: null,\n    allowReserved: null,\n    allowReturnOutsideFunction: false,\n    allowImportExportEverywhere: false,\n    allowAwaitOutsideFunction: false,\n    allowHashBang: false,\n    locations: false,\n    onToken: null,\n    onComment: null,\n    ranges: false,\n    program: null,\n    sourceFile: null,\n    directSourceFile: null,\n    preserveParens: false\n  };\n\n\n  function getOptions(opts) {\n    var options = {};\n\n    for (var opt in defaultOptions)\n      { options[opt] = opts && has(opts, opt) ? opts[opt] : defaultOptions[opt]; }\n\n    if (options.ecmaVersion >= 2015)\n      { options.ecmaVersion -= 2009; }\n\n    if (options.allowReserved == null)\n      { options.allowReserved = options.ecmaVersion < 5; }\n\n    if (isArray(options.onToken)) {\n      var tokens = options.onToken;\n      options.onToken = function (token) { return tokens.push(token); };\n    }\n    if (isArray(options.onComment))\n      { options.onComment = pushComment(options, options.onComment); }\n\n    return options\n  }\n\n  function pushComment(options, array) {\n    return function(block, text, start, end, startLoc, endLoc) {\n      var comment = {\n        type: block ? \"Block\" : \"Line\",\n        value: text,\n        start: start,\n        end: end\n      };\n      if (options.locations)\n        { comment.loc = new SourceLocation(this, startLoc, endLoc); }\n      if (options.ranges)\n        { comment.range = [start, end]; }\n      array.push(comment);\n    }\n  }\n\n  var\n      SCOPE_TOP = 1,\n      SCOPE_FUNCTION = 2,\n      SCOPE_VAR = SCOPE_TOP | SCOPE_FUNCTION,\n      SCOPE_ASYNC = 4,\n      SCOPE_GENERATOR = 8,\n      SCOPE_ARROW = 16,\n      SCOPE_SIMPLE_CATCH = 32,\n      SCOPE_SUPER = 64,\n      SCOPE_DIRECT_SUPER = 128;\n\n  function functionFlags(async, generator) {\n    return SCOPE_FUNCTION | (async ? SCOPE_ASYNC : 0) | (generator ? SCOPE_GENERATOR : 0)\n  }\n\n  var\n      BIND_NONE = 0, \n      BIND_VAR = 1, \n      BIND_LEXICAL = 2, \n      BIND_FUNCTION = 3, \n      BIND_SIMPLE_CATCH = 4, \n      BIND_OUTSIDE = 5; \n\n  var Parser = function Parser(options, input, startPos) {\n    this.options = options = getOptions(options);\n    this.sourceFile = options.sourceFile;\n    this.keywords = wordsRegexp(keywords[options.ecmaVersion >= 6 ? 6 : options.sourceType === \"module\" ? \"5module\" : 5]);\n    var reserved = \"\";\n    if (options.allowReserved !== true) {\n      for (var v = options.ecmaVersion;; v--)\n        { if (reserved = reservedWords[v]) { break } }\n      if (options.sourceType === \"module\") { reserved += \" await\"; }\n    }\n    this.reservedWords = wordsRegexp(reserved);\n    var reservedStrict = (reserved ? reserved + \" \" : \"\") + reservedWords.strict;\n    this.reservedWordsStrict = wordsRegexp(reservedStrict);\n    this.reservedWordsStrictBind = wordsRegexp(reservedStrict + \" \" + reservedWords.strictBind);\n    this.input = String(input);\n\n    this.containsEsc = false;\n\n\n    if (startPos) {\n      this.pos = startPos;\n      this.lineStart = this.input.lastIndexOf(\"\\n\", startPos - 1) + 1;\n      this.curLine = this.input.slice(0, this.lineStart).split(lineBreak).length;\n    } else {\n      this.pos = this.lineStart = 0;\n      this.curLine = 1;\n    }\n\n    this.type = types.eof;\n    this.value = null;\n    this.start = this.end = this.pos;\n    this.startLoc = this.endLoc = this.curPosition();\n\n    this.lastTokEndLoc = this.lastTokStartLoc = null;\n    this.lastTokStart = this.lastTokEnd = this.pos;\n\n    this.context = this.initialContext();\n    this.exprAllowed = true;\n\n    this.inModule = options.sourceType === \"module\";\n    this.strict = this.inModule || this.strictDirective(this.pos);\n\n    this.potentialArrowAt = -1;\n\n    this.yieldPos = this.awaitPos = this.awaitIdentPos = 0;\n    this.labels = [];\n    this.undefinedExports = {};\n\n    if (this.pos === 0 && options.allowHashBang && this.input.slice(0, 2) === \"#!\")\n      { this.skipLineComment(2); }\n\n    this.scopeStack = [];\n    this.enterScope(SCOPE_TOP);\n\n    this.regexpState = null;\n  };\n\n  var prototypeAccessors = { inFunction: { configurable: true },inGenerator: { configurable: true },inAsync: { configurable: true },allowSuper: { configurable: true },allowDirectSuper: { configurable: true },treatFunctionsAsVar: { configurable: true } };\n\n  Parser.prototype.parse = function parse () {\n    var node = this.options.program || this.startNode();\n    this.nextToken();\n    return this.parseTopLevel(node)\n  };\n\n  prototypeAccessors.inFunction.get = function () { return (this.currentVarScope().flags & SCOPE_FUNCTION) > 0 };\n  prototypeAccessors.inGenerator.get = function () { return (this.currentVarScope().flags & SCOPE_GENERATOR) > 0 };\n  prototypeAccessors.inAsync.get = function () { return (this.currentVarScope().flags & SCOPE_ASYNC) > 0 };\n  prototypeAccessors.allowSuper.get = function () { return (this.currentThisScope().flags & SCOPE_SUPER) > 0 };\n  prototypeAccessors.allowDirectSuper.get = function () { return (this.currentThisScope().flags & SCOPE_DIRECT_SUPER) > 0 };\n  prototypeAccessors.treatFunctionsAsVar.get = function () { return this.treatFunctionsAsVarInScope(this.currentScope()) };\n\n  Parser.prototype.inNonArrowFunction = function inNonArrowFunction () { return (this.currentThisScope().flags & SCOPE_FUNCTION) > 0 };\n\n  Parser.extend = function extend () {\n      var plugins = [], len = arguments.length;\n      while ( len-- ) plugins[ len ] = arguments[ len ];\n\n    var cls = this;\n    for (var i = 0; i < plugins.length; i++) { cls = plugins[i](cls); }\n    return cls\n  };\n\n  Parser.parse = function parse (input, options) {\n    return new this(options, input).parse()\n  };\n\n  Parser.parseExpressionAt = function parseExpressionAt (input, pos, options) {\n    var parser = new this(options, input, pos);\n    parser.nextToken();\n    return parser.parseExpression()\n  };\n\n  Parser.tokenizer = function tokenizer (input, options) {\n    return new this(options, input)\n  };\n\n  Object.defineProperties( Parser.prototype, prototypeAccessors );\n\n  var pp = Parser.prototype;\n\n\n  var literal = /^(?:'((?:\\\\.|[^'])*?)'|\"((?:\\\\.|[^\"])*?)\")/;\n  pp.strictDirective = function(start) {\n    for (;;) {\n      skipWhiteSpace.lastIndex = start;\n      start += skipWhiteSpace.exec(this.input)[0].length;\n      var match = literal.exec(this.input.slice(start));\n      if (!match) { return false }\n      if ((match[1] || match[2]) === \"use strict\") { return true }\n      start += match[0].length;\n\n      skipWhiteSpace.lastIndex = start;\n      start += skipWhiteSpace.exec(this.input)[0].length;\n      if (this.input[start] === \";\")\n        { start++; }\n    }\n  };\n\n\n  pp.eat = function(type) {\n    if (this.type === type) {\n      this.next();\n      return true\n    } else {\n      return false\n    }\n  };\n\n\n  pp.isContextual = function(name) {\n    return this.type === types.name && this.value === name && !this.containsEsc\n  };\n\n\n  pp.eatContextual = function(name) {\n    if (!this.isContextual(name)) { return false }\n    this.next();\n    return true\n  };\n\n\n  pp.expectContextual = function(name) {\n    if (!this.eatContextual(name)) { this.unexpected(); }\n  };\n\n\n  pp.canInsertSemicolon = function() {\n    return this.type === types.eof ||\n      this.type === types.braceR ||\n      lineBreak.test(this.input.slice(this.lastTokEnd, this.start))\n  };\n\n  pp.insertSemicolon = function() {\n    if (this.canInsertSemicolon()) {\n      if (this.options.onInsertedSemicolon)\n        { this.options.onInsertedSemicolon(this.lastTokEnd, this.lastTokEndLoc); }\n      return true\n    }\n  };\n\n\n  pp.semicolon = function() {\n    if (!this.eat(types.semi) && !this.insertSemicolon()) { this.unexpected(); }\n  };\n\n  pp.afterTrailingComma = function(tokType, notNext) {\n    if (this.type === tokType) {\n      if (this.options.onTrailingComma)\n        { this.options.onTrailingComma(this.lastTokStart, this.lastTokStartLoc); }\n      if (!notNext)\n        { this.next(); }\n      return true\n    }\n  };\n\n\n  pp.expect = function(type) {\n    this.eat(type) || this.unexpected();\n  };\n\n\n  pp.unexpected = function(pos) {\n    this.raise(pos != null ? pos : this.start, \"Unexpected token\");\n  };\n\n  function DestructuringErrors() {\n    this.shorthandAssign =\n    this.trailingComma =\n    this.parenthesizedAssign =\n    this.parenthesizedBind =\n    this.doubleProto =\n      -1;\n  }\n\n  pp.checkPatternErrors = function(refDestructuringErrors, isAssign) {\n    if (!refDestructuringErrors) { return }\n    if (refDestructuringErrors.trailingComma > -1)\n      { this.raiseRecoverable(refDestructuringErrors.trailingComma, \"Comma is not permitted after the rest element\"); }\n    var parens = isAssign ? refDestructuringErrors.parenthesizedAssign : refDestructuringErrors.parenthesizedBind;\n    if (parens > -1) { this.raiseRecoverable(parens, \"Parenthesized pattern\"); }\n  };\n\n  pp.checkExpressionErrors = function(refDestructuringErrors, andThrow) {\n    if (!refDestructuringErrors) { return false }\n    var shorthandAssign = refDestructuringErrors.shorthandAssign;\n    var doubleProto = refDestructuringErrors.doubleProto;\n    if (!andThrow) { return shorthandAssign >= 0 || doubleProto >= 0 }\n    if (shorthandAssign >= 0)\n      { this.raise(shorthandAssign, \"Shorthand property assignments are valid only in destructuring patterns\"); }\n    if (doubleProto >= 0)\n      { this.raiseRecoverable(doubleProto, \"Redefinition of __proto__ property\"); }\n  };\n\n  pp.checkYieldAwaitInDefaultParams = function() {\n    if (this.yieldPos && (!this.awaitPos || this.yieldPos < this.awaitPos))\n      { this.raise(this.yieldPos, \"Yield expression cannot be a default value\"); }\n    if (this.awaitPos)\n      { this.raise(this.awaitPos, \"Await expression cannot be a default value\"); }\n  };\n\n  pp.isSimpleAssignTarget = function(expr) {\n    if (expr.type === \"ParenthesizedExpression\")\n      { return this.isSimpleAssignTarget(expr.expression) }\n    return expr.type === \"Identifier\" || expr.type === \"MemberExpression\"\n  };\n\n  var pp$1 = Parser.prototype;\n\n\n\n  pp$1.parseTopLevel = function(node) {\n    var exports = {};\n    if (!node.body) { node.body = []; }\n    while (this.type !== types.eof) {\n      var stmt = this.parseStatement(null, true, exports);\n      node.body.push(stmt);\n    }\n    if (this.inModule)\n      { for (var i = 0, list = Object.keys(this.undefinedExports); i < list.length; i += 1)\n        {\n          var name = list[i];\n\n          this.raiseRecoverable(this.undefinedExports[name].start, (\"Export '\" + name + \"' is not defined\"));\n        } }\n    this.adaptDirectivePrologue(node.body);\n    this.next();\n    node.sourceType = this.options.sourceType;\n    return this.finishNode(node, \"Program\")\n  };\n\n  var loopLabel = {kind: \"loop\"}, switchLabel = {kind: \"switch\"};\n\n  pp$1.isLet = function(context) {\n    if (this.options.ecmaVersion < 6 || !this.isContextual(\"let\")) { return false }\n    skipWhiteSpace.lastIndex = this.pos;\n    var skip = skipWhiteSpace.exec(this.input);\n    var next = this.pos + skip[0].length, nextCh = this.input.charCodeAt(next);\n    if (nextCh === 91) { return true } \n    if (context) { return false }\n\n    if (nextCh === 123) { return true } \n    if (isIdentifierStart(nextCh, true)) {\n      var pos = next + 1;\n      while (isIdentifierChar(this.input.charCodeAt(pos), true)) { ++pos; }\n      var ident = this.input.slice(next, pos);\n      if (!keywordRelationalOperator.test(ident)) { return true }\n    }\n    return false\n  };\n\n  pp$1.isAsyncFunction = function() {\n    if (this.options.ecmaVersion < 8 || !this.isContextual(\"async\"))\n      { return false }\n\n    skipWhiteSpace.lastIndex = this.pos;\n    var skip = skipWhiteSpace.exec(this.input);\n    var next = this.pos + skip[0].length;\n    return !lineBreak.test(this.input.slice(this.pos, next)) &&\n      this.input.slice(next, next + 8) === \"function\" &&\n      (next + 8 === this.input.length || !isIdentifierChar(this.input.charAt(next + 8)))\n  };\n\n\n  pp$1.parseStatement = function(context, topLevel, exports) {\n    var starttype = this.type, node = this.startNode(), kind;\n\n    if (this.isLet(context)) {\n      starttype = types._var;\n      kind = \"let\";\n    }\n\n\n    switch (starttype) {\n    case types._break: case types._continue: return this.parseBreakContinueStatement(node, starttype.keyword)\n    case types._debugger: return this.parseDebuggerStatement(node)\n    case types._do: return this.parseDoStatement(node)\n    case types._for: return this.parseForStatement(node)\n    case types._function:\n      if ((context && (this.strict || context !== \"if\" && context !== \"label\")) && this.options.ecmaVersion >= 6) { this.unexpected(); }\n      return this.parseFunctionStatement(node, false, !context)\n    case types._class:\n      if (context) { this.unexpected(); }\n      return this.parseClass(node, true)\n    case types._if: return this.parseIfStatement(node)\n    case types._return: return this.parseReturnStatement(node)\n    case types._switch: return this.parseSwitchStatement(node)\n    case types._throw: return this.parseThrowStatement(node)\n    case types._try: return this.parseTryStatement(node)\n    case types._const: case types._var:\n      kind = kind || this.value;\n      if (context && kind !== \"var\") { this.unexpected(); }\n      return this.parseVarStatement(node, kind)\n    case types._while: return this.parseWhileStatement(node)\n    case types._with: return this.parseWithStatement(node)\n    case types.braceL: return this.parseBlock(true, node)\n    case types.semi: return this.parseEmptyStatement(node)\n    case types._export:\n    case types._import:\n      if (this.options.ecmaVersion > 10 && starttype === types._import) {\n        skipWhiteSpace.lastIndex = this.pos;\n        var skip = skipWhiteSpace.exec(this.input);\n        var next = this.pos + skip[0].length, nextCh = this.input.charCodeAt(next);\n        if (nextCh === 40) \n          { return this.parseExpressionStatement(node, this.parseExpression()) }\n      }\n\n      if (!this.options.allowImportExportEverywhere) {\n        if (!topLevel)\n          { this.raise(this.start, \"'import' and 'export' may only appear at the top level\"); }\n        if (!this.inModule)\n          { this.raise(this.start, \"'import' and 'export' may appear only with 'sourceType: module'\"); }\n      }\n      return starttype === types._import ? this.parseImport(node) : this.parseExport(node, exports)\n\n    default:\n      if (this.isAsyncFunction()) {\n        if (context) { this.unexpected(); }\n        this.next();\n        return this.parseFunctionStatement(node, true, !context)\n      }\n\n      var maybeName = this.value, expr = this.parseExpression();\n      if (starttype === types.name && expr.type === \"Identifier\" && this.eat(types.colon))\n        { return this.parseLabeledStatement(node, maybeName, expr, context) }\n      else { return this.parseExpressionStatement(node, expr) }\n    }\n  };\n\n  pp$1.parseBreakContinueStatement = function(node, keyword) {\n    var isBreak = keyword === \"break\";\n    this.next();\n    if (this.eat(types.semi) || this.insertSemicolon()) { node.label = null; }\n    else if (this.type !== types.name) { this.unexpected(); }\n    else {\n      node.label = this.parseIdent();\n      this.semicolon();\n    }\n\n    var i = 0;\n    for (; i < this.labels.length; ++i) {\n      var lab = this.labels[i];\n      if (node.label == null || lab.name === node.label.name) {\n        if (lab.kind != null && (isBreak || lab.kind === \"loop\")) { break }\n        if (node.label && isBreak) { break }\n      }\n    }\n    if (i === this.labels.length) { this.raise(node.start, \"Unsyntactic \" + keyword); }\n    return this.finishNode(node, isBreak ? \"BreakStatement\" : \"ContinueStatement\")\n  };\n\n  pp$1.parseDebuggerStatement = function(node) {\n    this.next();\n    this.semicolon();\n    return this.finishNode(node, \"DebuggerStatement\")\n  };\n\n  pp$1.parseDoStatement = function(node) {\n    this.next();\n    this.labels.push(loopLabel);\n    node.body = this.parseStatement(\"do\");\n    this.labels.pop();\n    this.expect(types._while);\n    node.test = this.parseParenExpression();\n    if (this.options.ecmaVersion >= 6)\n      { this.eat(types.semi); }\n    else\n      { this.semicolon(); }\n    return this.finishNode(node, \"DoWhileStatement\")\n  };\n\n\n  pp$1.parseForStatement = function(node) {\n    this.next();\n    var awaitAt = (this.options.ecmaVersion >= 9 && (this.inAsync || (!this.inFunction && this.options.allowAwaitOutsideFunction)) && this.eatContextual(\"await\")) ? this.lastTokStart : -1;\n    this.labels.push(loopLabel);\n    this.enterScope(0);\n    this.expect(types.parenL);\n    if (this.type === types.semi) {\n      if (awaitAt > -1) { this.unexpected(awaitAt); }\n      return this.parseFor(node, null)\n    }\n    var isLet = this.isLet();\n    if (this.type === types._var || this.type === types._const || isLet) {\n      var init$1 = this.startNode(), kind = isLet ? \"let\" : this.value;\n      this.next();\n      this.parseVar(init$1, true, kind);\n      this.finishNode(init$1, \"VariableDeclaration\");\n      if ((this.type === types._in || (this.options.ecmaVersion >= 6 && this.isContextual(\"of\"))) && init$1.declarations.length === 1) {\n        if (this.options.ecmaVersion >= 9) {\n          if (this.type === types._in) {\n            if (awaitAt > -1) { this.unexpected(awaitAt); }\n          } else { node.await = awaitAt > -1; }\n        }\n        return this.parseForIn(node, init$1)\n      }\n      if (awaitAt > -1) { this.unexpected(awaitAt); }\n      return this.parseFor(node, init$1)\n    }\n    var refDestructuringErrors = new DestructuringErrors;\n    var init = this.parseExpression(true, refDestructuringErrors);\n    if (this.type === types._in || (this.options.ecmaVersion >= 6 && this.isContextual(\"of\"))) {\n      if (this.options.ecmaVersion >= 9) {\n        if (this.type === types._in) {\n          if (awaitAt > -1) { this.unexpected(awaitAt); }\n        } else { node.await = awaitAt > -1; }\n      }\n      this.toAssignable(init, false, refDestructuringErrors);\n      this.checkLVal(init);\n      return this.parseForIn(node, init)\n    } else {\n      this.checkExpressionErrors(refDestructuringErrors, true);\n    }\n    if (awaitAt > -1) { this.unexpected(awaitAt); }\n    return this.parseFor(node, init)\n  };\n\n  pp$1.parseFunctionStatement = function(node, isAsync, declarationPosition) {\n    this.next();\n    return this.parseFunction(node, FUNC_STATEMENT | (declarationPosition ? 0 : FUNC_HANGING_STATEMENT), false, isAsync)\n  };\n\n  pp$1.parseIfStatement = function(node) {\n    this.next();\n    node.test = this.parseParenExpression();\n    node.consequent = this.parseStatement(\"if\");\n    node.alternate = this.eat(types._else) ? this.parseStatement(\"if\") : null;\n    return this.finishNode(node, \"IfStatement\")\n  };\n\n  pp$1.parseReturnStatement = function(node) {\n    if (!this.inFunction && !this.options.allowReturnOutsideFunction)\n      { this.raise(this.start, \"'return' outside of function\"); }\n    this.next();\n\n\n    if (this.eat(types.semi) || this.insertSemicolon()) { node.argument = null; }\n    else { node.argument = this.parseExpression(); this.semicolon(); }\n    return this.finishNode(node, \"ReturnStatement\")\n  };\n\n  pp$1.parseSwitchStatement = function(node) {\n    this.next();\n    node.discriminant = this.parseParenExpression();\n    node.cases = [];\n    this.expect(types.braceL);\n    this.labels.push(switchLabel);\n    this.enterScope(0);\n\n\n    var cur;\n    for (var sawDefault = false; this.type !== types.braceR;) {\n      if (this.type === types._case || this.type === types._default) {\n        var isCase = this.type === types._case;\n        if (cur) { this.finishNode(cur, \"SwitchCase\"); }\n        node.cases.push(cur = this.startNode());\n        cur.consequent = [];\n        this.next();\n        if (isCase) {\n          cur.test = this.parseExpression();\n        } else {\n          if (sawDefault) { this.raiseRecoverable(this.lastTokStart, \"Multiple default clauses\"); }\n          sawDefault = true;\n          cur.test = null;\n        }\n        this.expect(types.colon);\n      } else {\n        if (!cur) { this.unexpected(); }\n        cur.consequent.push(this.parseStatement(null));\n      }\n    }\n    this.exitScope();\n    if (cur) { this.finishNode(cur, \"SwitchCase\"); }\n    this.next(); \n    this.labels.pop();\n    return this.finishNode(node, \"SwitchStatement\")\n  };\n\n  pp$1.parseThrowStatement = function(node) {\n    this.next();\n    if (lineBreak.test(this.input.slice(this.lastTokEnd, this.start)))\n      { this.raise(this.lastTokEnd, \"Illegal newline after throw\"); }\n    node.argument = this.parseExpression();\n    this.semicolon();\n    return this.finishNode(node, \"ThrowStatement\")\n  };\n\n\n  var empty = [];\n\n  pp$1.parseTryStatement = function(node) {\n    this.next();\n    node.block = this.parseBlock();\n    node.handler = null;\n    if (this.type === types._catch) {\n      var clause = this.startNode();\n      this.next();\n      if (this.eat(types.parenL)) {\n        clause.param = this.parseBindingAtom();\n        var simple = clause.param.type === \"Identifier\";\n        this.enterScope(simple ? SCOPE_SIMPLE_CATCH : 0);\n        this.checkLVal(clause.param, simple ? BIND_SIMPLE_CATCH : BIND_LEXICAL);\n        this.expect(types.parenR);\n      } else {\n        if (this.options.ecmaVersion < 10) { this.unexpected(); }\n        clause.param = null;\n        this.enterScope(0);\n      }\n      clause.body = this.parseBlock(false);\n      this.exitScope();\n      node.handler = this.finishNode(clause, \"CatchClause\");\n    }\n    node.finalizer = this.eat(types._finally) ? this.parseBlock() : null;\n    if (!node.handler && !node.finalizer)\n      { this.raise(node.start, \"Missing catch or finally clause\"); }\n    return this.finishNode(node, \"TryStatement\")\n  };\n\n  pp$1.parseVarStatement = function(node, kind) {\n    this.next();\n    this.parseVar(node, false, kind);\n    this.semicolon();\n    return this.finishNode(node, \"VariableDeclaration\")\n  };\n\n  pp$1.parseWhileStatement = function(node) {\n    this.next();\n    node.test = this.parseParenExpression();\n    this.labels.push(loopLabel);\n    node.body = this.parseStatement(\"while\");\n    this.labels.pop();\n    return this.finishNode(node, \"WhileStatement\")\n  };\n\n  pp$1.parseWithStatement = function(node) {\n    if (this.strict) { this.raise(this.start, \"'with' in strict mode\"); }\n    this.next();\n    node.object = this.parseParenExpression();\n    node.body = this.parseStatement(\"with\");\n    return this.finishNode(node, \"WithStatement\")\n  };\n\n  pp$1.parseEmptyStatement = function(node) {\n    this.next();\n    return this.finishNode(node, \"EmptyStatement\")\n  };\n\n  pp$1.parseLabeledStatement = function(node, maybeName, expr, context) {\n    for (var i$1 = 0, list = this.labels; i$1 < list.length; i$1 += 1)\n      {\n      var label = list[i$1];\n\n      if (label.name === maybeName)\n        { this.raise(expr.start, \"Label '\" + maybeName + \"' is already declared\");\n    } }\n    var kind = this.type.isLoop ? \"loop\" : this.type === types._switch ? \"switch\" : null;\n    for (var i = this.labels.length - 1; i >= 0; i--) {\n      var label$1 = this.labels[i];\n      if (label$1.statementStart === node.start) {\n        label$1.statementStart = this.start;\n        label$1.kind = kind;\n      } else { break }\n    }\n    this.labels.push({name: maybeName, kind: kind, statementStart: this.start});\n    node.body = this.parseStatement(context ? context.indexOf(\"label\") === -1 ? context + \"label\" : context : \"label\");\n    this.labels.pop();\n    node.label = expr;\n    return this.finishNode(node, \"LabeledStatement\")\n  };\n\n  pp$1.parseExpressionStatement = function(node, expr) {\n    node.expression = expr;\n    this.semicolon();\n    return this.finishNode(node, \"ExpressionStatement\")\n  };\n\n\n  pp$1.parseBlock = function(createNewLexicalScope, node) {\n    if ( createNewLexicalScope === void 0 ) createNewLexicalScope = true;\n    if ( node === void 0 ) node = this.startNode();\n\n    node.body = [];\n    this.expect(types.braceL);\n    if (createNewLexicalScope) { this.enterScope(0); }\n    while (!this.eat(types.braceR)) {\n      var stmt = this.parseStatement(null);\n      node.body.push(stmt);\n    }\n    if (createNewLexicalScope) { this.exitScope(); }\n    return this.finishNode(node, \"BlockStatement\")\n  };\n\n\n  pp$1.parseFor = function(node, init) {\n    node.init = init;\n    this.expect(types.semi);\n    node.test = this.type === types.semi ? null : this.parseExpression();\n    this.expect(types.semi);\n    node.update = this.type === types.parenR ? null : this.parseExpression();\n    this.expect(types.parenR);\n    node.body = this.parseStatement(\"for\");\n    this.exitScope();\n    this.labels.pop();\n    return this.finishNode(node, \"ForStatement\")\n  };\n\n\n  pp$1.parseForIn = function(node, init) {\n    var isForIn = this.type === types._in;\n    this.next();\n\n    if (\n      init.type === \"VariableDeclaration\" &&\n      init.declarations[0].init != null &&\n      (\n        !isForIn ||\n        this.options.ecmaVersion < 8 ||\n        this.strict ||\n        init.kind !== \"var\" ||\n        init.declarations[0].id.type !== \"Identifier\"\n      )\n    ) {\n      this.raise(\n        init.start,\n        ((isForIn ? \"for-in\" : \"for-of\") + \" loop variable declaration may not have an initializer\")\n      );\n    } else if (init.type === \"AssignmentPattern\") {\n      this.raise(init.start, \"Invalid left-hand side in for-loop\");\n    }\n    node.left = init;\n    node.right = isForIn ? this.parseExpression() : this.parseMaybeAssign();\n    this.expect(types.parenR);\n    node.body = this.parseStatement(\"for\");\n    this.exitScope();\n    this.labels.pop();\n    return this.finishNode(node, isForIn ? \"ForInStatement\" : \"ForOfStatement\")\n  };\n\n\n  pp$1.parseVar = function(node, isFor, kind) {\n    node.declarations = [];\n    node.kind = kind;\n    for (;;) {\n      var decl = this.startNode();\n      this.parseVarId(decl, kind);\n      if (this.eat(types.eq)) {\n        decl.init = this.parseMaybeAssign(isFor);\n      } else if (kind === \"const\" && !(this.type === types._in || (this.options.ecmaVersion >= 6 && this.isContextual(\"of\")))) {\n        this.unexpected();\n      } else if (decl.id.type !== \"Identifier\" && !(isFor && (this.type === types._in || this.isContextual(\"of\")))) {\n        this.raise(this.lastTokEnd, \"Complex binding patterns require an initialization value\");\n      } else {\n        decl.init = null;\n      }\n      node.declarations.push(this.finishNode(decl, \"VariableDeclarator\"));\n      if (!this.eat(types.comma)) { break }\n    }\n    return node\n  };\n\n  pp$1.parseVarId = function(decl, kind) {\n    decl.id = this.parseBindingAtom();\n    this.checkLVal(decl.id, kind === \"var\" ? BIND_VAR : BIND_LEXICAL, false);\n  };\n\n  var FUNC_STATEMENT = 1, FUNC_HANGING_STATEMENT = 2, FUNC_NULLABLE_ID = 4;\n\n\n  pp$1.parseFunction = function(node, statement, allowExpressionBody, isAsync) {\n    this.initFunction(node);\n    if (this.options.ecmaVersion >= 9 || this.options.ecmaVersion >= 6 && !isAsync) {\n      if (this.type === types.star && (statement & FUNC_HANGING_STATEMENT))\n        { this.unexpected(); }\n      node.generator = this.eat(types.star);\n    }\n    if (this.options.ecmaVersion >= 8)\n      { node.async = !!isAsync; }\n\n    if (statement & FUNC_STATEMENT) {\n      node.id = (statement & FUNC_NULLABLE_ID) && this.type !== types.name ? null : this.parseIdent();\n      if (node.id && !(statement & FUNC_HANGING_STATEMENT))\n        { this.checkLVal(node.id, (this.strict || node.generator || node.async) ? this.treatFunctionsAsVar ? BIND_VAR : BIND_LEXICAL : BIND_FUNCTION); }\n    }\n\n    var oldYieldPos = this.yieldPos, oldAwaitPos = this.awaitPos, oldAwaitIdentPos = this.awaitIdentPos;\n    this.yieldPos = 0;\n    this.awaitPos = 0;\n    this.awaitIdentPos = 0;\n    this.enterScope(functionFlags(node.async, node.generator));\n\n    if (!(statement & FUNC_STATEMENT))\n      { node.id = this.type === types.name ? this.parseIdent() : null; }\n\n    this.parseFunctionParams(node);\n    this.parseFunctionBody(node, allowExpressionBody, false);\n\n    this.yieldPos = oldYieldPos;\n    this.awaitPos = oldAwaitPos;\n    this.awaitIdentPos = oldAwaitIdentPos;\n    return this.finishNode(node, (statement & FUNC_STATEMENT) ? \"FunctionDeclaration\" : \"FunctionExpression\")\n  };\n\n  pp$1.parseFunctionParams = function(node) {\n    this.expect(types.parenL);\n    node.params = this.parseBindingList(types.parenR, false, this.options.ecmaVersion >= 8);\n    this.checkYieldAwaitInDefaultParams();\n  };\n\n\n  pp$1.parseClass = function(node, isStatement) {\n    this.next();\n\n    var oldStrict = this.strict;\n    this.strict = true;\n\n    this.parseClassId(node, isStatement);\n    this.parseClassSuper(node);\n    var classBody = this.startNode();\n    var hadConstructor = false;\n    classBody.body = [];\n    this.expect(types.braceL);\n    while (!this.eat(types.braceR)) {\n      var element = this.parseClassElement(node.superClass !== null);\n      if (element) {\n        classBody.body.push(element);\n        if (element.type === \"MethodDefinition\" && element.kind === \"constructor\") {\n          if (hadConstructor) { this.raise(element.start, \"Duplicate constructor in the same class\"); }\n          hadConstructor = true;\n        }\n      }\n    }\n    node.body = this.finishNode(classBody, \"ClassBody\");\n    this.strict = oldStrict;\n    return this.finishNode(node, isStatement ? \"ClassDeclaration\" : \"ClassExpression\")\n  };\n\n  pp$1.parseClassElement = function(constructorAllowsSuper) {\n    var this$1 = this;\n\n    if (this.eat(types.semi)) { return null }\n\n    var method = this.startNode();\n    var tryContextual = function (k, noLineBreak) {\n      if ( noLineBreak === void 0 ) noLineBreak = false;\n\n      var start = this$1.start, startLoc = this$1.startLoc;\n      if (!this$1.eatContextual(k)) { return false }\n      if (this$1.type !== types.parenL && (!noLineBreak || !this$1.canInsertSemicolon())) { return true }\n      if (method.key) { this$1.unexpected(); }\n      method.computed = false;\n      method.key = this$1.startNodeAt(start, startLoc);\n      method.key.name = k;\n      this$1.finishNode(method.key, \"Identifier\");\n      return false\n    };\n\n    method.kind = \"method\";\n    method.static = tryContextual(\"static\");\n    var isGenerator = this.eat(types.star);\n    var isAsync = false;\n    if (!isGenerator) {\n      if (this.options.ecmaVersion >= 8 && tryContextual(\"async\", true)) {\n        isAsync = true;\n        isGenerator = this.options.ecmaVersion >= 9 && this.eat(types.star);\n      } else if (tryContextual(\"get\")) {\n        method.kind = \"get\";\n      } else if (tryContextual(\"set\")) {\n        method.kind = \"set\";\n      }\n    }\n    if (!method.key) { this.parsePropertyName(method); }\n    var key = method.key;\n    var allowsDirectSuper = false;\n    if (!method.computed && !method.static && (key.type === \"Identifier\" && key.name === \"constructor\" ||\n        key.type === \"Literal\" && key.value === \"constructor\")) {\n      if (method.kind !== \"method\") { this.raise(key.start, \"Constructor can't have get/set modifier\"); }\n      if (isGenerator) { this.raise(key.start, \"Constructor can't be a generator\"); }\n      if (isAsync) { this.raise(key.start, \"Constructor can't be an async method\"); }\n      method.kind = \"constructor\";\n      allowsDirectSuper = constructorAllowsSuper;\n    } else if (method.static && key.type === \"Identifier\" && key.name === \"prototype\") {\n      this.raise(key.start, \"Classes may not have a static property named prototype\");\n    }\n    this.parseClassMethod(method, isGenerator, isAsync, allowsDirectSuper);\n    if (method.kind === \"get\" && method.value.params.length !== 0)\n      { this.raiseRecoverable(method.value.start, \"getter should have no params\"); }\n    if (method.kind === \"set\" && method.value.params.length !== 1)\n      { this.raiseRecoverable(method.value.start, \"setter should have exactly one param\"); }\n    if (method.kind === \"set\" && method.value.params[0].type === \"RestElement\")\n      { this.raiseRecoverable(method.value.params[0].start, \"Setter cannot use rest params\"); }\n    return method\n  };\n\n  pp$1.parseClassMethod = function(method, isGenerator, isAsync, allowsDirectSuper) {\n    method.value = this.parseMethod(isGenerator, isAsync, allowsDirectSuper);\n    return this.finishNode(method, \"MethodDefinition\")\n  };\n\n  pp$1.parseClassId = function(node, isStatement) {\n    if (this.type === types.name) {\n      node.id = this.parseIdent();\n      if (isStatement)\n        { this.checkLVal(node.id, BIND_LEXICAL, false); }\n    } else {\n      if (isStatement === true)\n        { this.unexpected(); }\n      node.id = null;\n    }\n  };\n\n  pp$1.parseClassSuper = function(node) {\n    node.superClass = this.eat(types._extends) ? this.parseExprSubscripts() : null;\n  };\n\n\n  pp$1.parseExport = function(node, exports) {\n    this.next();\n    if (this.eat(types.star)) {\n      this.expectContextual(\"from\");\n      if (this.type !== types.string) { this.unexpected(); }\n      node.source = this.parseExprAtom();\n      this.semicolon();\n      return this.finishNode(node, \"ExportAllDeclaration\")\n    }\n    if (this.eat(types._default)) { \n      this.checkExport(exports, \"default\", this.lastTokStart);\n      var isAsync;\n      if (this.type === types._function || (isAsync = this.isAsyncFunction())) {\n        var fNode = this.startNode();\n        this.next();\n        if (isAsync) { this.next(); }\n        node.declaration = this.parseFunction(fNode, FUNC_STATEMENT | FUNC_NULLABLE_ID, false, isAsync);\n      } else if (this.type === types._class) {\n        var cNode = this.startNode();\n        node.declaration = this.parseClass(cNode, \"nullableID\");\n      } else {\n        node.declaration = this.parseMaybeAssign();\n        this.semicolon();\n      }\n      return this.finishNode(node, \"ExportDefaultDeclaration\")\n    }\n    if (this.shouldParseExportStatement()) {\n      node.declaration = this.parseStatement(null);\n      if (node.declaration.type === \"VariableDeclaration\")\n        { this.checkVariableExport(exports, node.declaration.declarations); }\n      else\n        { this.checkExport(exports, node.declaration.id.name, node.declaration.id.start); }\n      node.specifiers = [];\n      node.source = null;\n    } else { \n      node.declaration = null;\n      node.specifiers = this.parseExportSpecifiers(exports);\n      if (this.eatContextual(\"from\")) {\n        if (this.type !== types.string) { this.unexpected(); }\n        node.source = this.parseExprAtom();\n      } else {\n        for (var i = 0, list = node.specifiers; i < list.length; i += 1) {\n          var spec = list[i];\n\n          this.checkUnreserved(spec.local);\n          this.checkLocalExport(spec.local);\n        }\n\n        node.source = null;\n      }\n      this.semicolon();\n    }\n    return this.finishNode(node, \"ExportNamedDeclaration\")\n  };\n\n  pp$1.checkExport = function(exports, name, pos) {\n    if (!exports) { return }\n    if (has(exports, name))\n      { this.raiseRecoverable(pos, \"Duplicate export '\" + name + \"'\"); }\n    exports[name] = true;\n  };\n\n  pp$1.checkPatternExport = function(exports, pat) {\n    var type = pat.type;\n    if (type === \"Identifier\")\n      { this.checkExport(exports, pat.name, pat.start); }\n    else if (type === \"ObjectPattern\")\n      { for (var i = 0, list = pat.properties; i < list.length; i += 1)\n        {\n          var prop = list[i];\n\n          this.checkPatternExport(exports, prop);\n        } }\n    else if (type === \"ArrayPattern\")\n      { for (var i$1 = 0, list$1 = pat.elements; i$1 < list$1.length; i$1 += 1) {\n        var elt = list$1[i$1];\n\n          if (elt) { this.checkPatternExport(exports, elt); }\n      } }\n    else if (type === \"Property\")\n      { this.checkPatternExport(exports, pat.value); }\n    else if (type === \"AssignmentPattern\")\n      { this.checkPatternExport(exports, pat.left); }\n    else if (type === \"RestElement\")\n      { this.checkPatternExport(exports, pat.argument); }\n    else if (type === \"ParenthesizedExpression\")\n      { this.checkPatternExport(exports, pat.expression); }\n  };\n\n  pp$1.checkVariableExport = function(exports, decls) {\n    if (!exports) { return }\n    for (var i = 0, list = decls; i < list.length; i += 1)\n      {\n      var decl = list[i];\n\n      this.checkPatternExport(exports, decl.id);\n    }\n  };\n\n  pp$1.shouldParseExportStatement = function() {\n    return this.type.keyword === \"var\" ||\n      this.type.keyword === \"const\" ||\n      this.type.keyword === \"class\" ||\n      this.type.keyword === \"function\" ||\n      this.isLet() ||\n      this.isAsyncFunction()\n  };\n\n\n  pp$1.parseExportSpecifiers = function(exports) {\n    var nodes = [], first = true;\n    this.expect(types.braceL);\n    while (!this.eat(types.braceR)) {\n      if (!first) {\n        this.expect(types.comma);\n        if (this.afterTrailingComma(types.braceR)) { break }\n      } else { first = false; }\n\n      var node = this.startNode();\n      node.local = this.parseIdent(true);\n      node.exported = this.eatContextual(\"as\") ? this.parseIdent(true) : node.local;\n      this.checkExport(exports, node.exported.name, node.exported.start);\n      nodes.push(this.finishNode(node, \"ExportSpecifier\"));\n    }\n    return nodes\n  };\n\n\n  pp$1.parseImport = function(node) {\n    this.next();\n    if (this.type === types.string) {\n      node.specifiers = empty;\n      node.source = this.parseExprAtom();\n    } else {\n      node.specifiers = this.parseImportSpecifiers();\n      this.expectContextual(\"from\");\n      node.source = this.type === types.string ? this.parseExprAtom() : this.unexpected();\n    }\n    this.semicolon();\n    return this.finishNode(node, \"ImportDeclaration\")\n  };\n\n\n  pp$1.parseImportSpecifiers = function() {\n    var nodes = [], first = true;\n    if (this.type === types.name) {\n      var node = this.startNode();\n      node.local = this.parseIdent();\n      this.checkLVal(node.local, BIND_LEXICAL);\n      nodes.push(this.finishNode(node, \"ImportDefaultSpecifier\"));\n      if (!this.eat(types.comma)) { return nodes }\n    }\n    if (this.type === types.star) {\n      var node$1 = this.startNode();\n      this.next();\n      this.expectContextual(\"as\");\n      node$1.local = this.parseIdent();\n      this.checkLVal(node$1.local, BIND_LEXICAL);\n      nodes.push(this.finishNode(node$1, \"ImportNamespaceSpecifier\"));\n      return nodes\n    }\n    this.expect(types.braceL);\n    while (!this.eat(types.braceR)) {\n      if (!first) {\n        this.expect(types.comma);\n        if (this.afterTrailingComma(types.braceR)) { break }\n      } else { first = false; }\n\n      var node$2 = this.startNode();\n      node$2.imported = this.parseIdent(true);\n      if (this.eatContextual(\"as\")) {\n        node$2.local = this.parseIdent();\n      } else {\n        this.checkUnreserved(node$2.imported);\n        node$2.local = node$2.imported;\n      }\n      this.checkLVal(node$2.local, BIND_LEXICAL);\n      nodes.push(this.finishNode(node$2, \"ImportSpecifier\"));\n    }\n    return nodes\n  };\n\n  pp$1.adaptDirectivePrologue = function(statements) {\n    for (var i = 0; i < statements.length && this.isDirectiveCandidate(statements[i]); ++i) {\n      statements[i].directive = statements[i].expression.raw.slice(1, -1);\n    }\n  };\n  pp$1.isDirectiveCandidate = function(statement) {\n    return (\n      statement.type === \"ExpressionStatement\" &&\n      statement.expression.type === \"Literal\" &&\n      typeof statement.expression.value === \"string\" &&\n      (this.input[statement.start] === \"\\\"\" || this.input[statement.start] === \"'\")\n    )\n  };\n\n  var pp$2 = Parser.prototype;\n\n\n  pp$2.toAssignable = function(node, isBinding, refDestructuringErrors) {\n    if (this.options.ecmaVersion >= 6 && node) {\n      switch (node.type) {\n      case \"Identifier\":\n        if (this.inAsync && node.name === \"await\")\n          { this.raise(node.start, \"Cannot use 'await' as identifier inside an async function\"); }\n        break\n\n      case \"ObjectPattern\":\n      case \"ArrayPattern\":\n      case \"RestElement\":\n        break\n\n      case \"ObjectExpression\":\n        node.type = \"ObjectPattern\";\n        if (refDestructuringErrors) { this.checkPatternErrors(refDestructuringErrors, true); }\n        for (var i = 0, list = node.properties; i < list.length; i += 1) {\n          var prop = list[i];\n\n        this.toAssignable(prop, isBinding);\n          if (\n            prop.type === \"RestElement\" &&\n            (prop.argument.type === \"ArrayPattern\" || prop.argument.type === \"ObjectPattern\")\n          ) {\n            this.raise(prop.argument.start, \"Unexpected token\");\n          }\n        }\n        break\n\n      case \"Property\":\n        if (node.kind !== \"init\") { this.raise(node.key.start, \"Object pattern can't contain getter or setter\"); }\n        this.toAssignable(node.value, isBinding);\n        break\n\n      case \"ArrayExpression\":\n        node.type = \"ArrayPattern\";\n        if (refDestructuringErrors) { this.checkPatternErrors(refDestructuringErrors, true); }\n        this.toAssignableList(node.elements, isBinding);\n        break\n\n      case \"SpreadElement\":\n        node.type = \"RestElement\";\n        this.toAssignable(node.argument, isBinding);\n        if (node.argument.type === \"AssignmentPattern\")\n          { this.raise(node.argument.start, \"Rest elements cannot have a default value\"); }\n        break\n\n      case \"AssignmentExpression\":\n        if (node.operator !== \"=\") { this.raise(node.left.end, \"Only '=' operator can be used for specifying default value.\"); }\n        node.type = \"AssignmentPattern\";\n        delete node.operator;\n        this.toAssignable(node.left, isBinding);\n\n      case \"AssignmentPattern\":\n        break\n\n      case \"ParenthesizedExpression\":\n        this.toAssignable(node.expression, isBinding, refDestructuringErrors);\n        break\n\n      case \"MemberExpression\":\n        if (!isBinding) { break }\n\n      default:\n        this.raise(node.start, \"Assigning to rvalue\");\n      }\n    } else if (refDestructuringErrors) { this.checkPatternErrors(refDestructuringErrors, true); }\n    return node\n  };\n\n\n  pp$2.toAssignableList = function(exprList, isBinding) {\n    var end = exprList.length;\n    for (var i = 0; i < end; i++) {\n      var elt = exprList[i];\n      if (elt) { this.toAssignable(elt, isBinding); }\n    }\n    if (end) {\n      var last = exprList[end - 1];\n      if (this.options.ecmaVersion === 6 && isBinding && last && last.type === \"RestElement\" && last.argument.type !== \"Identifier\")\n        { this.unexpected(last.argument.start); }\n    }\n    return exprList\n  };\n\n\n  pp$2.parseSpread = function(refDestructuringErrors) {\n    var node = this.startNode();\n    this.next();\n    node.argument = this.parseMaybeAssign(false, refDestructuringErrors);\n    return this.finishNode(node, \"SpreadElement\")\n  };\n\n  pp$2.parseRestBinding = function() {\n    var node = this.startNode();\n    this.next();\n\n    if (this.options.ecmaVersion === 6 && this.type !== types.name)\n      { this.unexpected(); }\n\n    node.argument = this.parseBindingAtom();\n\n    return this.finishNode(node, \"RestElement\")\n  };\n\n\n  pp$2.parseBindingAtom = function() {\n    if (this.options.ecmaVersion >= 6) {\n      switch (this.type) {\n      case types.bracketL:\n        var node = this.startNode();\n        this.next();\n        node.elements = this.parseBindingList(types.bracketR, true, true);\n        return this.finishNode(node, \"ArrayPattern\")\n\n      case types.braceL:\n        return this.parseObj(true)\n      }\n    }\n    return this.parseIdent()\n  };\n\n  pp$2.parseBindingList = function(close, allowEmpty, allowTrailingComma) {\n    var elts = [], first = true;\n    while (!this.eat(close)) {\n      if (first) { first = false; }\n      else { this.expect(types.comma); }\n      if (allowEmpty && this.type === types.comma) {\n        elts.push(null);\n      } else if (allowTrailingComma && this.afterTrailingComma(close)) {\n        break\n      } else if (this.type === types.ellipsis) {\n        var rest = this.parseRestBinding();\n        this.parseBindingListItem(rest);\n        elts.push(rest);\n        if (this.type === types.comma) { this.raise(this.start, \"Comma is not permitted after the rest element\"); }\n        this.expect(close);\n        break\n      } else {\n        var elem = this.parseMaybeDefault(this.start, this.startLoc);\n        this.parseBindingListItem(elem);\n        elts.push(elem);\n      }\n    }\n    return elts\n  };\n\n  pp$2.parseBindingListItem = function(param) {\n    return param\n  };\n\n\n  pp$2.parseMaybeDefault = function(startPos, startLoc, left) {\n    left = left || this.parseBindingAtom();\n    if (this.options.ecmaVersion < 6 || !this.eat(types.eq)) { return left }\n    var node = this.startNodeAt(startPos, startLoc);\n    node.left = left;\n    node.right = this.parseMaybeAssign();\n    return this.finishNode(node, \"AssignmentPattern\")\n  };\n\n\n  pp$2.checkLVal = function(expr, bindingType, checkClashes) {\n    if ( bindingType === void 0 ) bindingType = BIND_NONE;\n\n    switch (expr.type) {\n    case \"Identifier\":\n      if (bindingType === BIND_LEXICAL && expr.name === \"let\")\n        { this.raiseRecoverable(expr.start, \"let is disallowed as a lexically bound name\"); }\n      if (this.strict && this.reservedWordsStrictBind.test(expr.name))\n        { this.raiseRecoverable(expr.start, (bindingType ? \"Binding \" : \"Assigning to \") + expr.name + \" in strict mode\"); }\n      if (checkClashes) {\n        if (has(checkClashes, expr.name))\n          { this.raiseRecoverable(expr.start, \"Argument name clash\"); }\n        checkClashes[expr.name] = true;\n      }\n      if (bindingType !== BIND_NONE && bindingType !== BIND_OUTSIDE) { this.declareName(expr.name, bindingType, expr.start); }\n      break\n\n    case \"MemberExpression\":\n      if (bindingType) { this.raiseRecoverable(expr.start, \"Binding member expression\"); }\n      break\n\n    case \"ObjectPattern\":\n      for (var i = 0, list = expr.properties; i < list.length; i += 1)\n        {\n      var prop = list[i];\n\n      this.checkLVal(prop, bindingType, checkClashes);\n    }\n      break\n\n    case \"Property\":\n      this.checkLVal(expr.value, bindingType, checkClashes);\n      break\n\n    case \"ArrayPattern\":\n      for (var i$1 = 0, list$1 = expr.elements; i$1 < list$1.length; i$1 += 1) {\n        var elem = list$1[i$1];\n\n      if (elem) { this.checkLVal(elem, bindingType, checkClashes); }\n      }\n      break\n\n    case \"AssignmentPattern\":\n      this.checkLVal(expr.left, bindingType, checkClashes);\n      break\n\n    case \"RestElement\":\n      this.checkLVal(expr.argument, bindingType, checkClashes);\n      break\n\n    case \"ParenthesizedExpression\":\n      this.checkLVal(expr.expression, bindingType, checkClashes);\n      break\n\n    default:\n      this.raise(expr.start, (bindingType ? \"Binding\" : \"Assigning to\") + \" rvalue\");\n    }\n  };\n\n\n  var pp$3 = Parser.prototype;\n\n\n  pp$3.checkPropClash = function(prop, propHash, refDestructuringErrors) {\n    if (this.options.ecmaVersion >= 9 && prop.type === \"SpreadElement\")\n      { return }\n    if (this.options.ecmaVersion >= 6 && (prop.computed || prop.method || prop.shorthand))\n      { return }\n    var key = prop.key;\n    var name;\n    switch (key.type) {\n    case \"Identifier\": name = key.name; break\n    case \"Literal\": name = String(key.value); break\n    default: return\n    }\n    var kind = prop.kind;\n    if (this.options.ecmaVersion >= 6) {\n      if (name === \"__proto__\" && kind === \"init\") {\n        if (propHash.proto) {\n          if (refDestructuringErrors) {\n            if (refDestructuringErrors.doubleProto < 0)\n              { refDestructuringErrors.doubleProto = key.start; }\n          } else { this.raiseRecoverable(key.start, \"Redefinition of __proto__ property\"); }\n        }\n        propHash.proto = true;\n      }\n      return\n    }\n    name = \"$\" + name;\n    var other = propHash[name];\n    if (other) {\n      var redefinition;\n      if (kind === \"init\") {\n        redefinition = this.strict && other.init || other.get || other.set;\n      } else {\n        redefinition = other.init || other[kind];\n      }\n      if (redefinition)\n        { this.raiseRecoverable(key.start, \"Redefinition of property\"); }\n    } else {\n      other = propHash[name] = {\n        init: false,\n        get: false,\n        set: false\n      };\n    }\n    other[kind] = true;\n  };\n\n\n\n\n  pp$3.parseExpression = function(noIn, refDestructuringErrors) {\n    var startPos = this.start, startLoc = this.startLoc;\n    var expr = this.parseMaybeAssign(noIn, refDestructuringErrors);\n    if (this.type === types.comma) {\n      var node = this.startNodeAt(startPos, startLoc);\n      node.expressions = [expr];\n      while (this.eat(types.comma)) { node.expressions.push(this.parseMaybeAssign(noIn, refDestructuringErrors)); }\n      return this.finishNode(node, \"SequenceExpression\")\n    }\n    return expr\n  };\n\n\n  pp$3.parseMaybeAssign = function(noIn, refDestructuringErrors, afterLeftParse) {\n    if (this.isContextual(\"yield\")) {\n      if (this.inGenerator) { return this.parseYield(noIn) }\n      else { this.exprAllowed = false; }\n    }\n\n    var ownDestructuringErrors = false, oldParenAssign = -1, oldTrailingComma = -1;\n    if (refDestructuringErrors) {\n      oldParenAssign = refDestructuringErrors.parenthesizedAssign;\n      oldTrailingComma = refDestructuringErrors.trailingComma;\n      refDestructuringErrors.parenthesizedAssign = refDestructuringErrors.trailingComma = -1;\n    } else {\n      refDestructuringErrors = new DestructuringErrors;\n      ownDestructuringErrors = true;\n    }\n\n    var startPos = this.start, startLoc = this.startLoc;\n    if (this.type === types.parenL || this.type === types.name)\n      { this.potentialArrowAt = this.start; }\n    var left = this.parseMaybeConditional(noIn, refDestructuringErrors);\n    if (afterLeftParse) { left = afterLeftParse.call(this, left, startPos, startLoc); }\n    if (this.type.isAssign) {\n      var node = this.startNodeAt(startPos, startLoc);\n      node.operator = this.value;\n      node.left = this.type === types.eq ? this.toAssignable(left, false, refDestructuringErrors) : left;\n      if (!ownDestructuringErrors) {\n        refDestructuringErrors.parenthesizedAssign = refDestructuringErrors.trailingComma = refDestructuringErrors.doubleProto = -1;\n      }\n      if (refDestructuringErrors.shorthandAssign >= node.left.start)\n        { refDestructuringErrors.shorthandAssign = -1; } \n      this.checkLVal(left);\n      this.next();\n      node.right = this.parseMaybeAssign(noIn);\n      return this.finishNode(node, \"AssignmentExpression\")\n    } else {\n      if (ownDestructuringErrors) { this.checkExpressionErrors(refDestructuringErrors, true); }\n    }\n    if (oldParenAssign > -1) { refDestructuringErrors.parenthesizedAssign = oldParenAssign; }\n    if (oldTrailingComma > -1) { refDestructuringErrors.trailingComma = oldTrailingComma; }\n    return left\n  };\n\n\n  pp$3.parseMaybeConditional = function(noIn, refDestructuringErrors) {\n    var startPos = this.start, startLoc = this.startLoc;\n    var expr = this.parseExprOps(noIn, refDestructuringErrors);\n    if (this.checkExpressionErrors(refDestructuringErrors)) { return expr }\n    if (this.eat(types.question)) {\n      var node = this.startNodeAt(startPos, startLoc);\n      node.test = expr;\n      node.consequent = this.parseMaybeAssign();\n      this.expect(types.colon);\n      node.alternate = this.parseMaybeAssign(noIn);\n      return this.finishNode(node, \"ConditionalExpression\")\n    }\n    return expr\n  };\n\n\n  pp$3.parseExprOps = function(noIn, refDestructuringErrors) {\n    var startPos = this.start, startLoc = this.startLoc;\n    var expr = this.parseMaybeUnary(refDestructuringErrors, false);\n    if (this.checkExpressionErrors(refDestructuringErrors)) { return expr }\n    return expr.start === startPos && expr.type === \"ArrowFunctionExpression\" ? expr : this.parseExprOp(expr, startPos, startLoc, -1, noIn)\n  };\n\n\n  pp$3.parseExprOp = function(left, leftStartPos, leftStartLoc, minPrec, noIn) {\n    var prec = this.type.binop;\n    if (prec != null && (!noIn || this.type !== types._in)) {\n      if (prec > minPrec) {\n        var logical = this.type === types.logicalOR || this.type === types.logicalAND;\n        var op = this.value;\n        this.next();\n        var startPos = this.start, startLoc = this.startLoc;\n        var right = this.parseExprOp(this.parseMaybeUnary(null, false), startPos, startLoc, prec, noIn);\n        var node = this.buildBinary(leftStartPos, leftStartLoc, left, right, op, logical);\n        return this.parseExprOp(node, leftStartPos, leftStartLoc, minPrec, noIn)\n      }\n    }\n    return left\n  };\n\n  pp$3.buildBinary = function(startPos, startLoc, left, right, op, logical) {\n    var node = this.startNodeAt(startPos, startLoc);\n    node.left = left;\n    node.operator = op;\n    node.right = right;\n    return this.finishNode(node, logical ? \"LogicalExpression\" : \"BinaryExpression\")\n  };\n\n\n  pp$3.parseMaybeUnary = function(refDestructuringErrors, sawUnary) {\n    var startPos = this.start, startLoc = this.startLoc, expr;\n    if (this.isContextual(\"await\") && (this.inAsync || (!this.inFunction && this.options.allowAwaitOutsideFunction))) {\n      expr = this.parseAwait();\n      sawUnary = true;\n    } else if (this.type.prefix) {\n      var node = this.startNode(), update = this.type === types.incDec;\n      node.operator = this.value;\n      node.prefix = true;\n      this.next();\n      node.argument = this.parseMaybeUnary(null, true);\n      this.checkExpressionErrors(refDestructuringErrors, true);\n      if (update) { this.checkLVal(node.argument); }\n      else if (this.strict && node.operator === \"delete\" &&\n               node.argument.type === \"Identifier\")\n        { this.raiseRecoverable(node.start, \"Deleting local variable in strict mode\"); }\n      else { sawUnary = true; }\n      expr = this.finishNode(node, update ? \"UpdateExpression\" : \"UnaryExpression\");\n    } else {\n      expr = this.parseExprSubscripts(refDestructuringErrors);\n      if (this.checkExpressionErrors(refDestructuringErrors)) { return expr }\n      while (this.type.postfix && !this.canInsertSemicolon()) {\n        var node$1 = this.startNodeAt(startPos, startLoc);\n        node$1.operator = this.value;\n        node$1.prefix = false;\n        node$1.argument = expr;\n        this.checkLVal(expr);\n        this.next();\n        expr = this.finishNode(node$1, \"UpdateExpression\");\n      }\n    }\n\n    if (!sawUnary && this.eat(types.starstar))\n      { return this.buildBinary(startPos, startLoc, expr, this.parseMaybeUnary(null, false), \"**\", false) }\n    else\n      { return expr }\n  };\n\n\n  pp$3.parseExprSubscripts = function(refDestructuringErrors) {\n    var startPos = this.start, startLoc = this.startLoc;\n    var expr = this.parseExprAtom(refDestructuringErrors);\n    if (expr.type === \"ArrowFunctionExpression\" && this.input.slice(this.lastTokStart, this.lastTokEnd) !== \")\")\n      { return expr }\n    var result = this.parseSubscripts(expr, startPos, startLoc);\n    if (refDestructuringErrors && result.type === \"MemberExpression\") {\n      if (refDestructuringErrors.parenthesizedAssign >= result.start) { refDestructuringErrors.parenthesizedAssign = -1; }\n      if (refDestructuringErrors.parenthesizedBind >= result.start) { refDestructuringErrors.parenthesizedBind = -1; }\n    }\n    return result\n  };\n\n  pp$3.parseSubscripts = function(base, startPos, startLoc, noCalls) {\n    var maybeAsyncArrow = this.options.ecmaVersion >= 8 && base.type === \"Identifier\" && base.name === \"async\" &&\n        this.lastTokEnd === base.end && !this.canInsertSemicolon() && this.input.slice(base.start, base.end) === \"async\";\n    while (true) {\n      var element = this.parseSubscript(base, startPos, startLoc, noCalls, maybeAsyncArrow);\n      if (element === base || element.type === \"ArrowFunctionExpression\") { return element }\n      base = element;\n    }\n  };\n\n  pp$3.parseSubscript = function(base, startPos, startLoc, noCalls, maybeAsyncArrow) {\n    var computed = this.eat(types.bracketL);\n    if (computed || this.eat(types.dot)) {\n      var node = this.startNodeAt(startPos, startLoc);\n      node.object = base;\n      node.property = computed ? this.parseExpression() : this.parseIdent(this.options.allowReserved !== \"never\");\n      node.computed = !!computed;\n      if (computed) { this.expect(types.bracketR); }\n      base = this.finishNode(node, \"MemberExpression\");\n    } else if (!noCalls && this.eat(types.parenL)) {\n      var refDestructuringErrors = new DestructuringErrors, oldYieldPos = this.yieldPos, oldAwaitPos = this.awaitPos, oldAwaitIdentPos = this.awaitIdentPos;\n      this.yieldPos = 0;\n      this.awaitPos = 0;\n      this.awaitIdentPos = 0;\n      var exprList = this.parseExprList(types.parenR, this.options.ecmaVersion >= 8, false, refDestructuringErrors);\n      if (maybeAsyncArrow && !this.canInsertSemicolon() && this.eat(types.arrow)) {\n        this.checkPatternErrors(refDestructuringErrors, false);\n        this.checkYieldAwaitInDefaultParams();\n        if (this.awaitIdentPos > 0)\n          { this.raise(this.awaitIdentPos, \"Cannot use 'await' as identifier inside an async function\"); }\n        this.yieldPos = oldYieldPos;\n        this.awaitPos = oldAwaitPos;\n        this.awaitIdentPos = oldAwaitIdentPos;\n        return this.parseArrowExpression(this.startNodeAt(startPos, startLoc), exprList, true)\n      }\n      this.checkExpressionErrors(refDestructuringErrors, true);\n      this.yieldPos = oldYieldPos || this.yieldPos;\n      this.awaitPos = oldAwaitPos || this.awaitPos;\n      this.awaitIdentPos = oldAwaitIdentPos || this.awaitIdentPos;\n      var node$1 = this.startNodeAt(startPos, startLoc);\n      node$1.callee = base;\n      node$1.arguments = exprList;\n      base = this.finishNode(node$1, \"CallExpression\");\n    } else if (this.type === types.backQuote) {\n      var node$2 = this.startNodeAt(startPos, startLoc);\n      node$2.tag = base;\n      node$2.quasi = this.parseTemplate({isTagged: true});\n      base = this.finishNode(node$2, \"TaggedTemplateExpression\");\n    }\n    return base\n  };\n\n\n  pp$3.parseExprAtom = function(refDestructuringErrors) {\n    if (this.type === types.slash) { this.readRegexp(); }\n\n    var node, canBeArrow = this.potentialArrowAt === this.start;\n    switch (this.type) {\n    case types._super:\n      if (!this.allowSuper)\n        { this.raise(this.start, \"'super' keyword outside a method\"); }\n      node = this.startNode();\n      this.next();\n      if (this.type === types.parenL && !this.allowDirectSuper)\n        { this.raise(node.start, \"super() call outside constructor of a subclass\"); }\n      if (this.type !== types.dot && this.type !== types.bracketL && this.type !== types.parenL)\n        { this.unexpected(); }\n      return this.finishNode(node, \"Super\")\n\n    case types._this:\n      node = this.startNode();\n      this.next();\n      return this.finishNode(node, \"ThisExpression\")\n\n    case types.name:\n      var startPos = this.start, startLoc = this.startLoc, containsEsc = this.containsEsc;\n      var id = this.parseIdent(false);\n      if (this.options.ecmaVersion >= 8 && !containsEsc && id.name === \"async\" && !this.canInsertSemicolon() && this.eat(types._function))\n        { return this.parseFunction(this.startNodeAt(startPos, startLoc), 0, false, true) }\n      if (canBeArrow && !this.canInsertSemicolon()) {\n        if (this.eat(types.arrow))\n          { return this.parseArrowExpression(this.startNodeAt(startPos, startLoc), [id], false) }\n        if (this.options.ecmaVersion >= 8 && id.name === \"async\" && this.type === types.name && !containsEsc) {\n          id = this.parseIdent(false);\n          if (this.canInsertSemicolon() || !this.eat(types.arrow))\n            { this.unexpected(); }\n          return this.parseArrowExpression(this.startNodeAt(startPos, startLoc), [id], true)\n        }\n      }\n      return id\n\n    case types.regexp:\n      var value = this.value;\n      node = this.parseLiteral(value.value);\n      node.regex = {pattern: value.pattern, flags: value.flags};\n      return node\n\n    case types.num: case types.string:\n      return this.parseLiteral(this.value)\n\n    case types._null: case types._true: case types._false:\n      node = this.startNode();\n      node.value = this.type === types._null ? null : this.type === types._true;\n      node.raw = this.type.keyword;\n      this.next();\n      return this.finishNode(node, \"Literal\")\n\n    case types.parenL:\n      var start = this.start, expr = this.parseParenAndDistinguishExpression(canBeArrow);\n      if (refDestructuringErrors) {\n        if (refDestructuringErrors.parenthesizedAssign < 0 && !this.isSimpleAssignTarget(expr))\n          { refDestructuringErrors.parenthesizedAssign = start; }\n        if (refDestructuringErrors.parenthesizedBind < 0)\n          { refDestructuringErrors.parenthesizedBind = start; }\n      }\n      return expr\n\n    case types.bracketL:\n      node = this.startNode();\n      this.next();\n      node.elements = this.parseExprList(types.bracketR, true, true, refDestructuringErrors);\n      return this.finishNode(node, \"ArrayExpression\")\n\n    case types.braceL:\n      return this.parseObj(false, refDestructuringErrors)\n\n    case types._function:\n      node = this.startNode();\n      this.next();\n      return this.parseFunction(node, 0)\n\n    case types._class:\n      return this.parseClass(this.startNode(), false)\n\n    case types._new:\n      return this.parseNew()\n\n    case types.backQuote:\n      return this.parseTemplate()\n\n    case types._import:\n      if (this.options.ecmaVersion >= 11) {\n        return this.parseExprImport()\n      } else {\n        return this.unexpected()\n      }\n\n    default:\n      this.unexpected();\n    }\n  };\n\n  pp$3.parseExprImport = function() {\n    var node = this.startNode();\n    this.next(); \n    switch (this.type) {\n    case types.parenL:\n      return this.parseDynamicImport(node)\n    default:\n      this.unexpected();\n    }\n  };\n\n  pp$3.parseDynamicImport = function(node) {\n    this.next(); \n\n    node.source = this.parseMaybeAssign();\n\n    if (!this.eat(types.parenR)) {\n      var errorPos = this.start;\n      if (this.eat(types.comma) && this.eat(types.parenR)) {\n        this.raiseRecoverable(errorPos, \"Trailing comma is not allowed in import()\");\n      } else {\n        this.unexpected(errorPos);\n      }\n    }\n\n    return this.finishNode(node, \"ImportExpression\")\n  };\n\n  pp$3.parseLiteral = function(value) {\n    var node = this.startNode();\n    node.value = value;\n    node.raw = this.input.slice(this.start, this.end);\n    if (node.raw.charCodeAt(node.raw.length - 1) === 110) { node.bigint = node.raw.slice(0, -1); }\n    this.next();\n    return this.finishNode(node, \"Literal\")\n  };\n\n  pp$3.parseParenExpression = function() {\n    this.expect(types.parenL);\n    var val = this.parseExpression();\n    this.expect(types.parenR);\n    return val\n  };\n\n  pp$3.parseParenAndDistinguishExpression = function(canBeArrow) {\n    var startPos = this.start, startLoc = this.startLoc, val, allowTrailingComma = this.options.ecmaVersion >= 8;\n    if (this.options.ecmaVersion >= 6) {\n      this.next();\n\n      var innerStartPos = this.start, innerStartLoc = this.startLoc;\n      var exprList = [], first = true, lastIsComma = false;\n      var refDestructuringErrors = new DestructuringErrors, oldYieldPos = this.yieldPos, oldAwaitPos = this.awaitPos, spreadStart;\n      this.yieldPos = 0;\n      this.awaitPos = 0;\n      while (this.type !== types.parenR) {\n        first ? first = false : this.expect(types.comma);\n        if (allowTrailingComma && this.afterTrailingComma(types.parenR, true)) {\n          lastIsComma = true;\n          break\n        } else if (this.type === types.ellipsis) {\n          spreadStart = this.start;\n          exprList.push(this.parseParenItem(this.parseRestBinding()));\n          if (this.type === types.comma) { this.raise(this.start, \"Comma is not permitted after the rest element\"); }\n          break\n        } else {\n          exprList.push(this.parseMaybeAssign(false, refDestructuringErrors, this.parseParenItem));\n        }\n      }\n      var innerEndPos = this.start, innerEndLoc = this.startLoc;\n      this.expect(types.parenR);\n\n      if (canBeArrow && !this.canInsertSemicolon() && this.eat(types.arrow)) {\n        this.checkPatternErrors(refDestructuringErrors, false);\n        this.checkYieldAwaitInDefaultParams();\n        this.yieldPos = oldYieldPos;\n        this.awaitPos = oldAwaitPos;\n        return this.parseParenArrowList(startPos, startLoc, exprList)\n      }\n\n      if (!exprList.length || lastIsComma) { this.unexpected(this.lastTokStart); }\n      if (spreadStart) { this.unexpected(spreadStart); }\n      this.checkExpressionErrors(refDestructuringErrors, true);\n      this.yieldPos = oldYieldPos || this.yieldPos;\n      this.awaitPos = oldAwaitPos || this.awaitPos;\n\n      if (exprList.length > 1) {\n        val = this.startNodeAt(innerStartPos, innerStartLoc);\n        val.expressions = exprList;\n        this.finishNodeAt(val, \"SequenceExpression\", innerEndPos, innerEndLoc);\n      } else {\n        val = exprList[0];\n      }\n    } else {\n      val = this.parseParenExpression();\n    }\n\n    if (this.options.preserveParens) {\n      var par = this.startNodeAt(startPos, startLoc);\n      par.expression = val;\n      return this.finishNode(par, \"ParenthesizedExpression\")\n    } else {\n      return val\n    }\n  };\n\n  pp$3.parseParenItem = function(item) {\n    return item\n  };\n\n  pp$3.parseParenArrowList = function(startPos, startLoc, exprList) {\n    return this.parseArrowExpression(this.startNodeAt(startPos, startLoc), exprList)\n  };\n\n\n  var empty$1 = [];\n\n  pp$3.parseNew = function() {\n    if (this.containsEsc) { this.raiseRecoverable(this.start, \"Escape sequence in keyword new\"); }\n    var node = this.startNode();\n    var meta = this.parseIdent(true);\n    if (this.options.ecmaVersion >= 6 && this.eat(types.dot)) {\n      node.meta = meta;\n      var containsEsc = this.containsEsc;\n      node.property = this.parseIdent(true);\n      if (node.property.name !== \"target\" || containsEsc)\n        { this.raiseRecoverable(node.property.start, \"The only valid meta property for new is new.target\"); }\n      if (!this.inNonArrowFunction())\n        { this.raiseRecoverable(node.start, \"new.target can only be used in functions\"); }\n      return this.finishNode(node, \"MetaProperty\")\n    }\n    var startPos = this.start, startLoc = this.startLoc, isImport = this.type === types._import;\n    node.callee = this.parseSubscripts(this.parseExprAtom(), startPos, startLoc, true);\n    if (isImport && node.callee.type === \"ImportExpression\") {\n      this.raise(startPos, \"Cannot use new with import()\");\n    }\n    if (this.eat(types.parenL)) { node.arguments = this.parseExprList(types.parenR, this.options.ecmaVersion >= 8, false); }\n    else { node.arguments = empty$1; }\n    return this.finishNode(node, \"NewExpression\")\n  };\n\n\n  pp$3.parseTemplateElement = function(ref) {\n    var isTagged = ref.isTagged;\n\n    var elem = this.startNode();\n    if (this.type === types.invalidTemplate) {\n      if (!isTagged) {\n        this.raiseRecoverable(this.start, \"Bad escape sequence in untagged template literal\");\n      }\n      elem.value = {\n        raw: this.value,\n        cooked: null\n      };\n    } else {\n      elem.value = {\n        raw: this.input.slice(this.start, this.end).replace(/\\r\\n?/g, \"\\n\"),\n        cooked: this.value\n      };\n    }\n    this.next();\n    elem.tail = this.type === types.backQuote;\n    return this.finishNode(elem, \"TemplateElement\")\n  };\n\n  pp$3.parseTemplate = function(ref) {\n    if ( ref === void 0 ) ref = {};\n    var isTagged = ref.isTagged; if ( isTagged === void 0 ) isTagged = false;\n\n    var node = this.startNode();\n    this.next();\n    node.expressions = [];\n    var curElt = this.parseTemplateElement({isTagged: isTagged});\n    node.quasis = [curElt];\n    while (!curElt.tail) {\n      if (this.type === types.eof) { this.raise(this.pos, \"Unterminated template literal\"); }\n      this.expect(types.dollarBraceL);\n      node.expressions.push(this.parseExpression());\n      this.expect(types.braceR);\n      node.quasis.push(curElt = this.parseTemplateElement({isTagged: isTagged}));\n    }\n    this.next();\n    return this.finishNode(node, \"TemplateLiteral\")\n  };\n\n  pp$3.isAsyncProp = function(prop) {\n    return !prop.computed && prop.key.type === \"Identifier\" && prop.key.name === \"async\" &&\n      (this.type === types.name || this.type === types.num || this.type === types.string || this.type === types.bracketL || this.type.keyword || (this.options.ecmaVersion >= 9 && this.type === types.star)) &&\n      !lineBreak.test(this.input.slice(this.lastTokEnd, this.start))\n  };\n\n\n  pp$3.parseObj = function(isPattern, refDestructuringErrors) {\n    var node = this.startNode(), first = true, propHash = {};\n    node.properties = [];\n    this.next();\n    while (!this.eat(types.braceR)) {\n      if (!first) {\n        this.expect(types.comma);\n        if (this.options.ecmaVersion >= 5 && this.afterTrailingComma(types.braceR)) { break }\n      } else { first = false; }\n\n      var prop = this.parseProperty(isPattern, refDestructuringErrors);\n      if (!isPattern) { this.checkPropClash(prop, propHash, refDestructuringErrors); }\n      node.properties.push(prop);\n    }\n    return this.finishNode(node, isPattern ? \"ObjectPattern\" : \"ObjectExpression\")\n  };\n\n  pp$3.parseProperty = function(isPattern, refDestructuringErrors) {\n    var prop = this.startNode(), isGenerator, isAsync, startPos, startLoc;\n    if (this.options.ecmaVersion >= 9 && this.eat(types.ellipsis)) {\n      if (isPattern) {\n        prop.argument = this.parseIdent(false);\n        if (this.type === types.comma) {\n          this.raise(this.start, \"Comma is not permitted after the rest element\");\n        }\n        return this.finishNode(prop, \"RestElement\")\n      }\n      if (this.type === types.parenL && refDestructuringErrors) {\n        if (refDestructuringErrors.parenthesizedAssign < 0) {\n          refDestructuringErrors.parenthesizedAssign = this.start;\n        }\n        if (refDestructuringErrors.parenthesizedBind < 0) {\n          refDestructuringErrors.parenthesizedBind = this.start;\n        }\n      }\n      prop.argument = this.parseMaybeAssign(false, refDestructuringErrors);\n      if (this.type === types.comma && refDestructuringErrors && refDestructuringErrors.trailingComma < 0) {\n        refDestructuringErrors.trailingComma = this.start;\n      }\n      return this.finishNode(prop, \"SpreadElement\")\n    }\n    if (this.options.ecmaVersion >= 6) {\n      prop.method = false;\n      prop.shorthand = false;\n      if (isPattern || refDestructuringErrors) {\n        startPos = this.start;\n        startLoc = this.startLoc;\n      }\n      if (!isPattern)\n        { isGenerator = this.eat(types.star); }\n    }\n    var containsEsc = this.containsEsc;\n    this.parsePropertyName(prop);\n    if (!isPattern && !containsEsc && this.options.ecmaVersion >= 8 && !isGenerator && this.isAsyncProp(prop)) {\n      isAsync = true;\n      isGenerator = this.options.ecmaVersion >= 9 && this.eat(types.star);\n      this.parsePropertyName(prop, refDestructuringErrors);\n    } else {\n      isAsync = false;\n    }\n    this.parsePropertyValue(prop, isPattern, isGenerator, isAsync, startPos, startLoc, refDestructuringErrors, containsEsc);\n    return this.finishNode(prop, \"Property\")\n  };\n\n  pp$3.parsePropertyValue = function(prop, isPattern, isGenerator, isAsync, startPos, startLoc, refDestructuringErrors, containsEsc) {\n    if ((isGenerator || isAsync) && this.type === types.colon)\n      { this.unexpected(); }\n\n    if (this.eat(types.colon)) {\n      prop.value = isPattern ? this.parseMaybeDefault(this.start, this.startLoc) : this.parseMaybeAssign(false, refDestructuringErrors);\n      prop.kind = \"init\";\n    } else if (this.options.ecmaVersion >= 6 && this.type === types.parenL) {\n      if (isPattern) { this.unexpected(); }\n      prop.kind = \"init\";\n      prop.method = true;\n      prop.value = this.parseMethod(isGenerator, isAsync);\n    } else if (!isPattern && !containsEsc &&\n               this.options.ecmaVersion >= 5 && !prop.computed && prop.key.type === \"Identifier\" &&\n               (prop.key.name === \"get\" || prop.key.name === \"set\") &&\n               (this.type !== types.comma && this.type !== types.braceR)) {\n      if (isGenerator || isAsync) { this.unexpected(); }\n      prop.kind = prop.key.name;\n      this.parsePropertyName(prop);\n      prop.value = this.parseMethod(false);\n      var paramCount = prop.kind === \"get\" ? 0 : 1;\n      if (prop.value.params.length !== paramCount) {\n        var start = prop.value.start;\n        if (prop.kind === \"get\")\n          { this.raiseRecoverable(start, \"getter should have no params\"); }\n        else\n          { this.raiseRecoverable(start, \"setter should have exactly one param\"); }\n      } else {\n        if (prop.kind === \"set\" && prop.value.params[0].type === \"RestElement\")\n          { this.raiseRecoverable(prop.value.params[0].start, \"Setter cannot use rest params\"); }\n      }\n    } else if (this.options.ecmaVersion >= 6 && !prop.computed && prop.key.type === \"Identifier\") {\n      if (isGenerator || isAsync) { this.unexpected(); }\n      this.checkUnreserved(prop.key);\n      if (prop.key.name === \"await\" && !this.awaitIdentPos)\n        { this.awaitIdentPos = startPos; }\n      prop.kind = \"init\";\n      if (isPattern) {\n        prop.value = this.parseMaybeDefault(startPos, startLoc, prop.key);\n      } else if (this.type === types.eq && refDestructuringErrors) {\n        if (refDestructuringErrors.shorthandAssign < 0)\n          { refDestructuringErrors.shorthandAssign = this.start; }\n        prop.value = this.parseMaybeDefault(startPos, startLoc, prop.key);\n      } else {\n        prop.value = prop.key;\n      }\n      prop.shorthand = true;\n    } else { this.unexpected(); }\n  };\n\n  pp$3.parsePropertyName = function(prop) {\n    if (this.options.ecmaVersion >= 6) {\n      if (this.eat(types.bracketL)) {\n        prop.computed = true;\n        prop.key = this.parseMaybeAssign();\n        this.expect(types.bracketR);\n        return prop.key\n      } else {\n        prop.computed = false;\n      }\n    }\n    return prop.key = this.type === types.num || this.type === types.string ? this.parseExprAtom() : this.parseIdent(this.options.allowReserved !== \"never\")\n  };\n\n\n  pp$3.initFunction = function(node) {\n    node.id = null;\n    if (this.options.ecmaVersion >= 6) { node.generator = node.expression = false; }\n    if (this.options.ecmaVersion >= 8) { node.async = false; }\n  };\n\n\n  pp$3.parseMethod = function(isGenerator, isAsync, allowDirectSuper) {\n    var node = this.startNode(), oldYieldPos = this.yieldPos, oldAwaitPos = this.awaitPos, oldAwaitIdentPos = this.awaitIdentPos;\n\n    this.initFunction(node);\n    if (this.options.ecmaVersion >= 6)\n      { node.generator = isGenerator; }\n    if (this.options.ecmaVersion >= 8)\n      { node.async = !!isAsync; }\n\n    this.yieldPos = 0;\n    this.awaitPos = 0;\n    this.awaitIdentPos = 0;\n    this.enterScope(functionFlags(isAsync, node.generator) | SCOPE_SUPER | (allowDirectSuper ? SCOPE_DIRECT_SUPER : 0));\n\n    this.expect(types.parenL);\n    node.params = this.parseBindingList(types.parenR, false, this.options.ecmaVersion >= 8);\n    this.checkYieldAwaitInDefaultParams();\n    this.parseFunctionBody(node, false, true);\n\n    this.yieldPos = oldYieldPos;\n    this.awaitPos = oldAwaitPos;\n    this.awaitIdentPos = oldAwaitIdentPos;\n    return this.finishNode(node, \"FunctionExpression\")\n  };\n\n\n  pp$3.parseArrowExpression = function(node, params, isAsync) {\n    var oldYieldPos = this.yieldPos, oldAwaitPos = this.awaitPos, oldAwaitIdentPos = this.awaitIdentPos;\n\n    this.enterScope(functionFlags(isAsync, false) | SCOPE_ARROW);\n    this.initFunction(node);\n    if (this.options.ecmaVersion >= 8) { node.async = !!isAsync; }\n\n    this.yieldPos = 0;\n    this.awaitPos = 0;\n    this.awaitIdentPos = 0;\n\n    node.params = this.toAssignableList(params, true);\n    this.parseFunctionBody(node, true, false);\n\n    this.yieldPos = oldYieldPos;\n    this.awaitPos = oldAwaitPos;\n    this.awaitIdentPos = oldAwaitIdentPos;\n    return this.finishNode(node, \"ArrowFunctionExpression\")\n  };\n\n\n  pp$3.parseFunctionBody = function(node, isArrowFunction, isMethod) {\n    var isExpression = isArrowFunction && this.type !== types.braceL;\n    var oldStrict = this.strict, useStrict = false;\n\n    if (isExpression) {\n      node.body = this.parseMaybeAssign();\n      node.expression = true;\n      this.checkParams(node, false);\n    } else {\n      var nonSimple = this.options.ecmaVersion >= 7 && !this.isSimpleParamList(node.params);\n      if (!oldStrict || nonSimple) {\n        useStrict = this.strictDirective(this.end);\n        if (useStrict && nonSimple)\n          { this.raiseRecoverable(node.start, \"Illegal 'use strict' directive in function with non-simple parameter list\"); }\n      }\n      var oldLabels = this.labels;\n      this.labels = [];\n      if (useStrict) { this.strict = true; }\n\n      this.checkParams(node, !oldStrict && !useStrict && !isArrowFunction && !isMethod && this.isSimpleParamList(node.params));\n      node.body = this.parseBlock(false);\n      node.expression = false;\n      this.adaptDirectivePrologue(node.body.body);\n      this.labels = oldLabels;\n    }\n    this.exitScope();\n\n    if (this.strict && node.id) { this.checkLVal(node.id, BIND_OUTSIDE); }\n    this.strict = oldStrict;\n  };\n\n  pp$3.isSimpleParamList = function(params) {\n    for (var i = 0, list = params; i < list.length; i += 1)\n      {\n      var param = list[i];\n\n      if (param.type !== \"Identifier\") { return false\n    } }\n    return true\n  };\n\n\n  pp$3.checkParams = function(node, allowDuplicates) {\n    var nameHash = {};\n    for (var i = 0, list = node.params; i < list.length; i += 1)\n      {\n      var param = list[i];\n\n      this.checkLVal(param, BIND_VAR, allowDuplicates ? null : nameHash);\n    }\n  };\n\n\n  pp$3.parseExprList = function(close, allowTrailingComma, allowEmpty, refDestructuringErrors) {\n    var elts = [], first = true;\n    while (!this.eat(close)) {\n      if (!first) {\n        this.expect(types.comma);\n        if (allowTrailingComma && this.afterTrailingComma(close)) { break }\n      } else { first = false; }\n\n      var elt = (void 0);\n      if (allowEmpty && this.type === types.comma)\n        { elt = null; }\n      else if (this.type === types.ellipsis) {\n        elt = this.parseSpread(refDestructuringErrors);\n        if (refDestructuringErrors && this.type === types.comma && refDestructuringErrors.trailingComma < 0)\n          { refDestructuringErrors.trailingComma = this.start; }\n      } else {\n        elt = this.parseMaybeAssign(false, refDestructuringErrors);\n      }\n      elts.push(elt);\n    }\n    return elts\n  };\n\n  pp$3.checkUnreserved = function(ref) {\n    var start = ref.start;\n    var end = ref.end;\n    var name = ref.name;\n\n    if (this.inGenerator && name === \"yield\")\n      { this.raiseRecoverable(start, \"Cannot use 'yield' as identifier inside a generator\"); }\n    if (this.inAsync && name === \"await\")\n      { this.raiseRecoverable(start, \"Cannot use 'await' as identifier inside an async function\"); }\n    if (this.keywords.test(name))\n      { this.raise(start, (\"Unexpected keyword '\" + name + \"'\")); }\n    if (this.options.ecmaVersion < 6 &&\n      this.input.slice(start, end).indexOf(\"\\\\\") !== -1) { return }\n    var re = this.strict ? this.reservedWordsStrict : this.reservedWords;\n    if (re.test(name)) {\n      if (!this.inAsync && name === \"await\")\n        { this.raiseRecoverable(start, \"Cannot use keyword 'await' outside an async function\"); }\n      this.raiseRecoverable(start, (\"The keyword '\" + name + \"' is reserved\"));\n    }\n  };\n\n\n  pp$3.parseIdent = function(liberal, isBinding) {\n    var node = this.startNode();\n    if (this.type === types.name) {\n      node.name = this.value;\n    } else if (this.type.keyword) {\n      node.name = this.type.keyword;\n\n      if ((node.name === \"class\" || node.name === \"function\") &&\n          (this.lastTokEnd !== this.lastTokStart + 1 || this.input.charCodeAt(this.lastTokStart) !== 46)) {\n        this.context.pop();\n      }\n    } else {\n      this.unexpected();\n    }\n    this.next(!!liberal);\n    this.finishNode(node, \"Identifier\");\n    if (!liberal) {\n      this.checkUnreserved(node);\n      if (node.name === \"await\" && !this.awaitIdentPos)\n        { this.awaitIdentPos = node.start; }\n    }\n    return node\n  };\n\n\n  pp$3.parseYield = function(noIn) {\n    if (!this.yieldPos) { this.yieldPos = this.start; }\n\n    var node = this.startNode();\n    this.next();\n    if (this.type === types.semi || this.canInsertSemicolon() || (this.type !== types.star && !this.type.startsExpr)) {\n      node.delegate = false;\n      node.argument = null;\n    } else {\n      node.delegate = this.eat(types.star);\n      node.argument = this.parseMaybeAssign(noIn);\n    }\n    return this.finishNode(node, \"YieldExpression\")\n  };\n\n  pp$3.parseAwait = function() {\n    if (!this.awaitPos) { this.awaitPos = this.start; }\n\n    var node = this.startNode();\n    this.next();\n    node.argument = this.parseMaybeUnary(null, false);\n    return this.finishNode(node, \"AwaitExpression\")\n  };\n\n  var pp$4 = Parser.prototype;\n\n\n  pp$4.raise = function(pos, message) {\n    var loc = getLineInfo(this.input, pos);\n    message += \" (\" + loc.line + \":\" + loc.column + \")\";\n    var err = new SyntaxError(message);\n    err.pos = pos; err.loc = loc; err.raisedAt = this.pos;\n    throw err\n  };\n\n  pp$4.raiseRecoverable = pp$4.raise;\n\n  pp$4.curPosition = function() {\n    if (this.options.locations) {\n      return new Position(this.curLine, this.pos - this.lineStart)\n    }\n  };\n\n  var pp$5 = Parser.prototype;\n\n  var Scope = function Scope(flags) {\n    this.flags = flags;\n    this.var = [];\n    this.lexical = [];\n    this.functions = [];\n  };\n\n\n  pp$5.enterScope = function(flags) {\n    this.scopeStack.push(new Scope(flags));\n  };\n\n  pp$5.exitScope = function() {\n    this.scopeStack.pop();\n  };\n\n  pp$5.treatFunctionsAsVarInScope = function(scope) {\n    return (scope.flags & SCOPE_FUNCTION) || !this.inModule && (scope.flags & SCOPE_TOP)\n  };\n\n  pp$5.declareName = function(name, bindingType, pos) {\n    var redeclared = false;\n    if (bindingType === BIND_LEXICAL) {\n      var scope = this.currentScope();\n      redeclared = scope.lexical.indexOf(name) > -1 || scope.functions.indexOf(name) > -1 || scope.var.indexOf(name) > -1;\n      scope.lexical.push(name);\n      if (this.inModule && (scope.flags & SCOPE_TOP))\n        { delete this.undefinedExports[name]; }\n    } else if (bindingType === BIND_SIMPLE_CATCH) {\n      var scope$1 = this.currentScope();\n      scope$1.lexical.push(name);\n    } else if (bindingType === BIND_FUNCTION) {\n      var scope$2 = this.currentScope();\n      if (this.treatFunctionsAsVar)\n        { redeclared = scope$2.lexical.indexOf(name) > -1; }\n      else\n        { redeclared = scope$2.lexical.indexOf(name) > -1 || scope$2.var.indexOf(name) > -1; }\n      scope$2.functions.push(name);\n    } else {\n      for (var i = this.scopeStack.length - 1; i >= 0; --i) {\n        var scope$3 = this.scopeStack[i];\n        if (scope$3.lexical.indexOf(name) > -1 && !((scope$3.flags & SCOPE_SIMPLE_CATCH) && scope$3.lexical[0] === name) ||\n            !this.treatFunctionsAsVarInScope(scope$3) && scope$3.functions.indexOf(name) > -1) {\n          redeclared = true;\n          break\n        }\n        scope$3.var.push(name);\n        if (this.inModule && (scope$3.flags & SCOPE_TOP))\n          { delete this.undefinedExports[name]; }\n        if (scope$3.flags & SCOPE_VAR) { break }\n      }\n    }\n    if (redeclared) { this.raiseRecoverable(pos, (\"Identifier '\" + name + \"' has already been declared\")); }\n  };\n\n  pp$5.checkLocalExport = function(id) {\n    if (this.scopeStack[0].lexical.indexOf(id.name) === -1 &&\n        this.scopeStack[0].var.indexOf(id.name) === -1) {\n      this.undefinedExports[id.name] = id;\n    }\n  };\n\n  pp$5.currentScope = function() {\n    return this.scopeStack[this.scopeStack.length - 1]\n  };\n\n  pp$5.currentVarScope = function() {\n    for (var i = this.scopeStack.length - 1;; i--) {\n      var scope = this.scopeStack[i];\n      if (scope.flags & SCOPE_VAR) { return scope }\n    }\n  };\n\n  pp$5.currentThisScope = function() {\n    for (var i = this.scopeStack.length - 1;; i--) {\n      var scope = this.scopeStack[i];\n      if (scope.flags & SCOPE_VAR && !(scope.flags & SCOPE_ARROW)) { return scope }\n    }\n  };\n\n  var Node = function Node(parser, pos, loc) {\n    this.type = \"\";\n    this.start = pos;\n    this.end = 0;\n    if (parser.options.locations)\n      { this.loc = new SourceLocation(parser, loc); }\n    if (parser.options.directSourceFile)\n      { this.sourceFile = parser.options.directSourceFile; }\n    if (parser.options.ranges)\n      { this.range = [pos, 0]; }\n  };\n\n\n  var pp$6 = Parser.prototype;\n\n  pp$6.startNode = function() {\n    return new Node(this, this.start, this.startLoc)\n  };\n\n  pp$6.startNodeAt = function(pos, loc) {\n    return new Node(this, pos, loc)\n  };\n\n\n  function finishNodeAt(node, type, pos, loc) {\n    node.type = type;\n    node.end = pos;\n    if (this.options.locations)\n      { node.loc.end = loc; }\n    if (this.options.ranges)\n      { node.range[1] = pos; }\n    return node\n  }\n\n  pp$6.finishNode = function(node, type) {\n    return finishNodeAt.call(this, node, type, this.lastTokEnd, this.lastTokEndLoc)\n  };\n\n\n  pp$6.finishNodeAt = function(node, type, pos, loc) {\n    return finishNodeAt.call(this, node, type, pos, loc)\n  };\n\n\n  var TokContext = function TokContext(token, isExpr, preserveSpace, override, generator) {\n    this.token = token;\n    this.isExpr = !!isExpr;\n    this.preserveSpace = !!preserveSpace;\n    this.override = override;\n    this.generator = !!generator;\n  };\n\n  var types$1 = {\n    b_stat: new TokContext(\"{\", false),\n    b_expr: new TokContext(\"{\", true),\n    b_tmpl: new TokContext(\"${\", false),\n    p_stat: new TokContext(\"(\", false),\n    p_expr: new TokContext(\"(\", true),\n    q_tmpl: new TokContext(\"`\", true, true, function (p) { return p.tryReadTemplateToken(); }),\n    f_stat: new TokContext(\"function\", false),\n    f_expr: new TokContext(\"function\", true),\n    f_expr_gen: new TokContext(\"function\", true, false, null, true),\n    f_gen: new TokContext(\"function\", false, false, null, true)\n  };\n\n  var pp$7 = Parser.prototype;\n\n  pp$7.initialContext = function() {\n    return [types$1.b_stat]\n  };\n\n  pp$7.braceIsBlock = function(prevType) {\n    var parent = this.curContext();\n    if (parent === types$1.f_expr || parent === types$1.f_stat)\n      { return true }\n    if (prevType === types.colon && (parent === types$1.b_stat || parent === types$1.b_expr))\n      { return !parent.isExpr }\n\n    if (prevType === types._return || prevType === types.name && this.exprAllowed)\n      { return lineBreak.test(this.input.slice(this.lastTokEnd, this.start)) }\n    if (prevType === types._else || prevType === types.semi || prevType === types.eof || prevType === types.parenR || prevType === types.arrow)\n      { return true }\n    if (prevType === types.braceL)\n      { return parent === types$1.b_stat }\n    if (prevType === types._var || prevType === types._const || prevType === types.name)\n      { return false }\n    return !this.exprAllowed\n  };\n\n  pp$7.inGeneratorContext = function() {\n    for (var i = this.context.length - 1; i >= 1; i--) {\n      var context = this.context[i];\n      if (context.token === \"function\")\n        { return context.generator }\n    }\n    return false\n  };\n\n  pp$7.updateContext = function(prevType) {\n    var update, type = this.type;\n    if (type.keyword && prevType === types.dot)\n      { this.exprAllowed = false; }\n    else if (update = type.updateContext)\n      { update.call(this, prevType); }\n    else\n      { this.exprAllowed = type.beforeExpr; }\n  };\n\n\n  types.parenR.updateContext = types.braceR.updateContext = function() {\n    if (this.context.length === 1) {\n      this.exprAllowed = true;\n      return\n    }\n    var out = this.context.pop();\n    if (out === types$1.b_stat && this.curContext().token === \"function\") {\n      out = this.context.pop();\n    }\n    this.exprAllowed = !out.isExpr;\n  };\n\n  types.braceL.updateContext = function(prevType) {\n    this.context.push(this.braceIsBlock(prevType) ? types$1.b_stat : types$1.b_expr);\n    this.exprAllowed = true;\n  };\n\n  types.dollarBraceL.updateContext = function() {\n    this.context.push(types$1.b_tmpl);\n    this.exprAllowed = true;\n  };\n\n  types.parenL.updateContext = function(prevType) {\n    var statementParens = prevType === types._if || prevType === types._for || prevType === types._with || prevType === types._while;\n    this.context.push(statementParens ? types$1.p_stat : types$1.p_expr);\n    this.exprAllowed = true;\n  };\n\n  types.incDec.updateContext = function() {\n  };\n\n  types._function.updateContext = types._class.updateContext = function(prevType) {\n    if (prevType.beforeExpr && prevType !== types.semi && prevType !== types._else &&\n        !(prevType === types._return && lineBreak.test(this.input.slice(this.lastTokEnd, this.start))) &&\n        !((prevType === types.colon || prevType === types.braceL) && this.curContext() === types$1.b_stat))\n      { this.context.push(types$1.f_expr); }\n    else\n      { this.context.push(types$1.f_stat); }\n    this.exprAllowed = false;\n  };\n\n  types.backQuote.updateContext = function() {\n    if (this.curContext() === types$1.q_tmpl)\n      { this.context.pop(); }\n    else\n      { this.context.push(types$1.q_tmpl); }\n    this.exprAllowed = false;\n  };\n\n  types.star.updateContext = function(prevType) {\n    if (prevType === types._function) {\n      var index = this.context.length - 1;\n      if (this.context[index] === types$1.f_expr)\n        { this.context[index] = types$1.f_expr_gen; }\n      else\n        { this.context[index] = types$1.f_gen; }\n    }\n    this.exprAllowed = true;\n  };\n\n  types.name.updateContext = function(prevType) {\n    var allowed = false;\n    if (this.options.ecmaVersion >= 6 && prevType !== types.dot) {\n      if (this.value === \"of\" && !this.exprAllowed ||\n          this.value === \"yield\" && this.inGeneratorContext())\n        { allowed = true; }\n    }\n    this.exprAllowed = allowed;\n  };\n\n\n  var ecma9BinaryProperties = \"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS\";\n  var ecma10BinaryProperties = ecma9BinaryProperties + \" Extended_Pictographic\";\n  var ecma11BinaryProperties = ecma10BinaryProperties;\n  var unicodeBinaryProperties = {\n    9: ecma9BinaryProperties,\n    10: ecma10BinaryProperties,\n    11: ecma11BinaryProperties\n  };\n\n  var unicodeGeneralCategoryValues = \"Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu\";\n\n  var ecma9ScriptValues = \"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb\";\n  var ecma10ScriptValues = ecma9ScriptValues + \" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd\";\n  var ecma11ScriptValues = ecma10ScriptValues + \" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho\";\n  var unicodeScriptValues = {\n    9: ecma9ScriptValues,\n    10: ecma10ScriptValues,\n    11: ecma11ScriptValues\n  };\n\n  var data = {};\n  function buildUnicodeData(ecmaVersion) {\n    var d = data[ecmaVersion] = {\n      binary: wordsRegexp(unicodeBinaryProperties[ecmaVersion] + \" \" + unicodeGeneralCategoryValues),\n      nonBinary: {\n        General_Category: wordsRegexp(unicodeGeneralCategoryValues),\n        Script: wordsRegexp(unicodeScriptValues[ecmaVersion])\n      }\n    };\n    d.nonBinary.Script_Extensions = d.nonBinary.Script;\n\n    d.nonBinary.gc = d.nonBinary.General_Category;\n    d.nonBinary.sc = d.nonBinary.Script;\n    d.nonBinary.scx = d.nonBinary.Script_Extensions;\n  }\n  buildUnicodeData(9);\n  buildUnicodeData(10);\n  buildUnicodeData(11);\n\n  var pp$8 = Parser.prototype;\n\n  var RegExpValidationState = function RegExpValidationState(parser) {\n    this.parser = parser;\n    this.validFlags = \"gim\" + (parser.options.ecmaVersion >= 6 ? \"uy\" : \"\") + (parser.options.ecmaVersion >= 9 ? \"s\" : \"\");\n    this.unicodeProperties = data[parser.options.ecmaVersion >= 11 ? 11 : parser.options.ecmaVersion];\n    this.source = \"\";\n    this.flags = \"\";\n    this.start = 0;\n    this.switchU = false;\n    this.switchN = false;\n    this.pos = 0;\n    this.lastIntValue = 0;\n    this.lastStringValue = \"\";\n    this.lastAssertionIsQuantifiable = false;\n    this.numCapturingParens = 0;\n    this.maxBackReference = 0;\n    this.groupNames = [];\n    this.backReferenceNames = [];\n  };\n\n  RegExpValidationState.prototype.reset = function reset (start, pattern, flags) {\n    var unicode = flags.indexOf(\"u\") !== -1;\n    this.start = start | 0;\n    this.source = pattern + \"\";\n    this.flags = flags;\n    this.switchU = unicode && this.parser.options.ecmaVersion >= 6;\n    this.switchN = unicode && this.parser.options.ecmaVersion >= 9;\n  };\n\n  RegExpValidationState.prototype.raise = function raise (message) {\n    this.parser.raiseRecoverable(this.start, (\"Invalid regular expression: /\" + (this.source) + \"/: \" + message));\n  };\n\n  RegExpValidationState.prototype.at = function at (i) {\n    var s = this.source;\n    var l = s.length;\n    if (i >= l) {\n      return -1\n    }\n    var c = s.charCodeAt(i);\n    if (!this.switchU || c <= 0xD7FF || c >= 0xE000 || i + 1 >= l) {\n      return c\n    }\n    var next = s.charCodeAt(i + 1);\n    return next >= 0xDC00 && next <= 0xDFFF ? (c << 10) + next - 0x35FDC00 : c\n  };\n\n  RegExpValidationState.prototype.nextIndex = function nextIndex (i) {\n    var s = this.source;\n    var l = s.length;\n    if (i >= l) {\n      return l\n    }\n    var c = s.charCodeAt(i), next;\n    if (!this.switchU || c <= 0xD7FF || c >= 0xE000 || i + 1 >= l ||\n        (next = s.charCodeAt(i + 1)) < 0xDC00 || next > 0xDFFF) {\n      return i + 1\n    }\n    return i + 2\n  };\n\n  RegExpValidationState.prototype.current = function current () {\n    return this.at(this.pos)\n  };\n\n  RegExpValidationState.prototype.lookahead = function lookahead () {\n    return this.at(this.nextIndex(this.pos))\n  };\n\n  RegExpValidationState.prototype.advance = function advance () {\n    this.pos = this.nextIndex(this.pos);\n  };\n\n  RegExpValidationState.prototype.eat = function eat (ch) {\n    if (this.current() === ch) {\n      this.advance();\n      return true\n    }\n    return false\n  };\n\n  function codePointToString(ch) {\n    if (ch <= 0xFFFF) { return String.fromCharCode(ch) }\n    ch -= 0x10000;\n    return String.fromCharCode((ch >> 10) + 0xD800, (ch & 0x03FF) + 0xDC00)\n  }\n\n  pp$8.validateRegExpFlags = function(state) {\n    var validFlags = state.validFlags;\n    var flags = state.flags;\n\n    for (var i = 0; i < flags.length; i++) {\n      var flag = flags.charAt(i);\n      if (validFlags.indexOf(flag) === -1) {\n        this.raise(state.start, \"Invalid regular expression flag\");\n      }\n      if (flags.indexOf(flag, i + 1) > -1) {\n        this.raise(state.start, \"Duplicate regular expression flag\");\n      }\n    }\n  };\n\n  pp$8.validateRegExpPattern = function(state) {\n    this.regexp_pattern(state);\n\n    if (!state.switchN && this.options.ecmaVersion >= 9 && state.groupNames.length > 0) {\n      state.switchN = true;\n      this.regexp_pattern(state);\n    }\n  };\n\n  pp$8.regexp_pattern = function(state) {\n    state.pos = 0;\n    state.lastIntValue = 0;\n    state.lastStringValue = \"\";\n    state.lastAssertionIsQuantifiable = false;\n    state.numCapturingParens = 0;\n    state.maxBackReference = 0;\n    state.groupNames.length = 0;\n    state.backReferenceNames.length = 0;\n\n    this.regexp_disjunction(state);\n\n    if (state.pos !== state.source.length) {\n      if (state.eat(0x29 )) {\n        state.raise(\"Unmatched ')'\");\n      }\n      if (state.eat(0x5D ) || state.eat(0x7D )) {\n        state.raise(\"Lone quantifier brackets\");\n      }\n    }\n    if (state.maxBackReference > state.numCapturingParens) {\n      state.raise(\"Invalid escape\");\n    }\n    for (var i = 0, list = state.backReferenceNames; i < list.length; i += 1) {\n      var name = list[i];\n\n      if (state.groupNames.indexOf(name) === -1) {\n        state.raise(\"Invalid named capture referenced\");\n      }\n    }\n  };\n\n  pp$8.regexp_disjunction = function(state) {\n    this.regexp_alternative(state);\n    while (state.eat(0x7C )) {\n      this.regexp_alternative(state);\n    }\n\n    if (this.regexp_eatQuantifier(state, true)) {\n      state.raise(\"Nothing to repeat\");\n    }\n    if (state.eat(0x7B )) {\n      state.raise(\"Lone quantifier brackets\");\n    }\n  };\n\n  pp$8.regexp_alternative = function(state) {\n    while (state.pos < state.source.length && this.regexp_eatTerm(state))\n      { }\n  };\n\n  pp$8.regexp_eatTerm = function(state) {\n    if (this.regexp_eatAssertion(state)) {\n      if (state.lastAssertionIsQuantifiable && this.regexp_eatQuantifier(state)) {\n        if (state.switchU) {\n          state.raise(\"Invalid quantifier\");\n        }\n      }\n      return true\n    }\n\n    if (state.switchU ? this.regexp_eatAtom(state) : this.regexp_eatExtendedAtom(state)) {\n      this.regexp_eatQuantifier(state);\n      return true\n    }\n\n    return false\n  };\n\n  pp$8.regexp_eatAssertion = function(state) {\n    var start = state.pos;\n    state.lastAssertionIsQuantifiable = false;\n\n    if (state.eat(0x5E ) || state.eat(0x24 )) {\n      return true\n    }\n\n    if (state.eat(0x5C )) {\n      if (state.eat(0x42 ) || state.eat(0x62 )) {\n        return true\n      }\n      state.pos = start;\n    }\n\n    if (state.eat(0x28 ) && state.eat(0x3F )) {\n      var lookbehind = false;\n      if (this.options.ecmaVersion >= 9) {\n        lookbehind = state.eat(0x3C );\n      }\n      if (state.eat(0x3D ) || state.eat(0x21 )) {\n        this.regexp_disjunction(state);\n        if (!state.eat(0x29 )) {\n          state.raise(\"Unterminated group\");\n        }\n        state.lastAssertionIsQuantifiable = !lookbehind;\n        return true\n      }\n    }\n\n    state.pos = start;\n    return false\n  };\n\n  pp$8.regexp_eatQuantifier = function(state, noError) {\n    if ( noError === void 0 ) noError = false;\n\n    if (this.regexp_eatQuantifierPrefix(state, noError)) {\n      state.eat(0x3F );\n      return true\n    }\n    return false\n  };\n\n  pp$8.regexp_eatQuantifierPrefix = function(state, noError) {\n    return (\n      state.eat(0x2A ) ||\n      state.eat(0x2B ) ||\n      state.eat(0x3F ) ||\n      this.regexp_eatBracedQuantifier(state, noError)\n    )\n  };\n  pp$8.regexp_eatBracedQuantifier = function(state, noError) {\n    var start = state.pos;\n    if (state.eat(0x7B )) {\n      var min = 0, max = -1;\n      if (this.regexp_eatDecimalDigits(state)) {\n        min = state.lastIntValue;\n        if (state.eat(0x2C ) && this.regexp_eatDecimalDigits(state)) {\n          max = state.lastIntValue;\n        }\n        if (state.eat(0x7D )) {\n          if (max !== -1 && max < min && !noError) {\n            state.raise(\"numbers out of order in {} quantifier\");\n          }\n          return true\n        }\n      }\n      if (state.switchU && !noError) {\n        state.raise(\"Incomplete quantifier\");\n      }\n      state.pos = start;\n    }\n    return false\n  };\n\n  pp$8.regexp_eatAtom = function(state) {\n    return (\n      this.regexp_eatPatternCharacters(state) ||\n      state.eat(0x2E ) ||\n      this.regexp_eatReverseSolidusAtomEscape(state) ||\n      this.regexp_eatCharacterClass(state) ||\n      this.regexp_eatUncapturingGroup(state) ||\n      this.regexp_eatCapturingGroup(state)\n    )\n  };\n  pp$8.regexp_eatReverseSolidusAtomEscape = function(state) {\n    var start = state.pos;\n    if (state.eat(0x5C )) {\n      if (this.regexp_eatAtomEscape(state)) {\n        return true\n      }\n      state.pos = start;\n    }\n    return false\n  };\n  pp$8.regexp_eatUncapturingGroup = function(state) {\n    var start = state.pos;\n    if (state.eat(0x28 )) {\n      if (state.eat(0x3F ) && state.eat(0x3A )) {\n        this.regexp_disjunction(state);\n        if (state.eat(0x29 )) {\n          return true\n        }\n        state.raise(\"Unterminated group\");\n      }\n      state.pos = start;\n    }\n    return false\n  };\n  pp$8.regexp_eatCapturingGroup = function(state) {\n    if (state.eat(0x28 )) {\n      if (this.options.ecmaVersion >= 9) {\n        this.regexp_groupSpecifier(state);\n      } else if (state.current() === 0x3F ) {\n        state.raise(\"Invalid group\");\n      }\n      this.regexp_disjunction(state);\n      if (state.eat(0x29 )) {\n        state.numCapturingParens += 1;\n        return true\n      }\n      state.raise(\"Unterminated group\");\n    }\n    return false\n  };\n\n  pp$8.regexp_eatExtendedAtom = function(state) {\n    return (\n      state.eat(0x2E ) ||\n      this.regexp_eatReverseSolidusAtomEscape(state) ||\n      this.regexp_eatCharacterClass(state) ||\n      this.regexp_eatUncapturingGroup(state) ||\n      this.regexp_eatCapturingGroup(state) ||\n      this.regexp_eatInvalidBracedQuantifier(state) ||\n      this.regexp_eatExtendedPatternCharacter(state)\n    )\n  };\n\n  pp$8.regexp_eatInvalidBracedQuantifier = function(state) {\n    if (this.regexp_eatBracedQuantifier(state, true)) {\n      state.raise(\"Nothing to repeat\");\n    }\n    return false\n  };\n\n  pp$8.regexp_eatSyntaxCharacter = function(state) {\n    var ch = state.current();\n    if (isSyntaxCharacter(ch)) {\n      state.lastIntValue = ch;\n      state.advance();\n      return true\n    }\n    return false\n  };\n  function isSyntaxCharacter(ch) {\n    return (\n      ch === 0x24  ||\n      ch >= 0x28  && ch <= 0x2B  ||\n      ch === 0x2E  ||\n      ch === 0x3F  ||\n      ch >= 0x5B  && ch <= 0x5E  ||\n      ch >= 0x7B  && ch <= 0x7D \n    )\n  }\n\n  pp$8.regexp_eatPatternCharacters = function(state) {\n    var start = state.pos;\n    var ch = 0;\n    while ((ch = state.current()) !== -1 && !isSyntaxCharacter(ch)) {\n      state.advance();\n    }\n    return state.pos !== start\n  };\n\n  pp$8.regexp_eatExtendedPatternCharacter = function(state) {\n    var ch = state.current();\n    if (\n      ch !== -1 &&\n      ch !== 0x24  &&\n      !(ch >= 0x28  && ch <= 0x2B ) &&\n      ch !== 0x2E  &&\n      ch !== 0x3F  &&\n      ch !== 0x5B  &&\n      ch !== 0x5E  &&\n      ch !== 0x7C \n    ) {\n      state.advance();\n      return true\n    }\n    return false\n  };\n\n  pp$8.regexp_groupSpecifier = function(state) {\n    if (state.eat(0x3F )) {\n      if (this.regexp_eatGroupName(state)) {\n        if (state.groupNames.indexOf(state.lastStringValue) !== -1) {\n          state.raise(\"Duplicate capture group name\");\n        }\n        state.groupNames.push(state.lastStringValue);\n        return\n      }\n      state.raise(\"Invalid group\");\n    }\n  };\n\n  pp$8.regexp_eatGroupName = function(state) {\n    state.lastStringValue = \"\";\n    if (state.eat(0x3C )) {\n      if (this.regexp_eatRegExpIdentifierName(state) && state.eat(0x3E )) {\n        return true\n      }\n      state.raise(\"Invalid capture group name\");\n    }\n    return false\n  };\n\n  pp$8.regexp_eatRegExpIdentifierName = function(state) {\n    state.lastStringValue = \"\";\n    if (this.regexp_eatRegExpIdentifierStart(state)) {\n      state.lastStringValue += codePointToString(state.lastIntValue);\n      while (this.regexp_eatRegExpIdentifierPart(state)) {\n        state.lastStringValue += codePointToString(state.lastIntValue);\n      }\n      return true\n    }\n    return false\n  };\n\n  pp$8.regexp_eatRegExpIdentifierStart = function(state) {\n    var start = state.pos;\n    var ch = state.current();\n    state.advance();\n\n    if (ch === 0x5C  && this.regexp_eatRegExpUnicodeEscapeSequence(state)) {\n      ch = state.lastIntValue;\n    }\n    if (isRegExpIdentifierStart(ch)) {\n      state.lastIntValue = ch;\n      return true\n    }\n\n    state.pos = start;\n    return false\n  };\n  function isRegExpIdentifierStart(ch) {\n    return isIdentifierStart(ch, true) || ch === 0x24  || ch === 0x5F \n  }\n\n  pp$8.regexp_eatRegExpIdentifierPart = function(state) {\n    var start = state.pos;\n    var ch = state.current();\n    state.advance();\n\n    if (ch === 0x5C  && this.regexp_eatRegExpUnicodeEscapeSequence(state)) {\n      ch = state.lastIntValue;\n    }\n    if (isRegExpIdentifierPart(ch)) {\n      state.lastIntValue = ch;\n      return true\n    }\n\n    state.pos = start;\n    return false\n  };\n  function isRegExpIdentifierPart(ch) {\n    return isIdentifierChar(ch, true) || ch === 0x24  || ch === 0x5F  || ch === 0x200C  || ch === 0x200D \n  }\n\n  pp$8.regexp_eatAtomEscape = function(state) {\n    if (\n      this.regexp_eatBackReference(state) ||\n      this.regexp_eatCharacterClassEscape(state) ||\n      this.regexp_eatCharacterEscape(state) ||\n      (state.switchN && this.regexp_eatKGroupName(state))\n    ) {\n      return true\n    }\n    if (state.switchU) {\n      if (state.current() === 0x63 ) {\n        state.raise(\"Invalid unicode escape\");\n      }\n      state.raise(\"Invalid escape\");\n    }\n    return false\n  };\n  pp$8.regexp_eatBackReference = function(state) {\n    var start = state.pos;\n    if (this.regexp_eatDecimalEscape(state)) {\n      var n = state.lastIntValue;\n      if (state.switchU) {\n        if (n > state.maxBackReference) {\n          state.maxBackReference = n;\n        }\n        return true\n      }\n      if (n <= state.numCapturingParens) {\n        return true\n      }\n      state.pos = start;\n    }\n    return false\n  };\n  pp$8.regexp_eatKGroupName = function(state) {\n    if (state.eat(0x6B )) {\n      if (this.regexp_eatGroupName(state)) {\n        state.backReferenceNames.push(state.lastStringValue);\n        return true\n      }\n      state.raise(\"Invalid named reference\");\n    }\n    return false\n  };\n\n  pp$8.regexp_eatCharacterEscape = function(state) {\n    return (\n      this.regexp_eatControlEscape(state) ||\n      this.regexp_eatCControlLetter(state) ||\n      this.regexp_eatZero(state) ||\n      this.regexp_eatHexEscapeSequence(state) ||\n      this.regexp_eatRegExpUnicodeEscapeSequence(state) ||\n      (!state.switchU && this.regexp_eatLegacyOctalEscapeSequence(state)) ||\n      this.regexp_eatIdentityEscape(state)\n    )\n  };\n  pp$8.regexp_eatCControlLetter = function(state) {\n    var start = state.pos;\n    if (state.eat(0x63 )) {\n      if (this.regexp_eatControlLetter(state)) {\n        return true\n      }\n      state.pos = start;\n    }\n    return false\n  };\n  pp$8.regexp_eatZero = function(state) {\n    if (state.current() === 0x30  && !isDecimalDigit(state.lookahead())) {\n      state.lastIntValue = 0;\n      state.advance();\n      return true\n    }\n    return false\n  };\n\n  pp$8.regexp_eatControlEscape = function(state) {\n    var ch = state.current();\n    if (ch === 0x74 ) {\n      state.lastIntValue = 0x09; \n      state.advance();\n      return true\n    }\n    if (ch === 0x6E ) {\n      state.lastIntValue = 0x0A; \n      state.advance();\n      return true\n    }\n    if (ch === 0x76 ) {\n      state.lastIntValue = 0x0B; \n      state.advance();\n      return true\n    }\n    if (ch === 0x66 ) {\n      state.lastIntValue = 0x0C; \n      state.advance();\n      return true\n    }\n    if (ch === 0x72 ) {\n      state.lastIntValue = 0x0D; \n      state.advance();\n      return true\n    }\n    return false\n  };\n\n  pp$8.regexp_eatControlLetter = function(state) {\n    var ch = state.current();\n    if (isControlLetter(ch)) {\n      state.lastIntValue = ch % 0x20;\n      state.advance();\n      return true\n    }\n    return false\n  };\n  function isControlLetter(ch) {\n    return (\n      (ch >= 0x41  && ch <= 0x5A ) ||\n      (ch >= 0x61  && ch <= 0x7A )\n    )\n  }\n\n  pp$8.regexp_eatRegExpUnicodeEscapeSequence = function(state) {\n    var start = state.pos;\n\n    if (state.eat(0x75 )) {\n      if (this.regexp_eatFixedHexDigits(state, 4)) {\n        var lead = state.lastIntValue;\n        if (state.switchU && lead >= 0xD800 && lead <= 0xDBFF) {\n          var leadSurrogateEnd = state.pos;\n          if (state.eat(0x5C ) && state.eat(0x75 ) && this.regexp_eatFixedHexDigits(state, 4)) {\n            var trail = state.lastIntValue;\n            if (trail >= 0xDC00 && trail <= 0xDFFF) {\n              state.lastIntValue = (lead - 0xD800) * 0x400 + (trail - 0xDC00) + 0x10000;\n              return true\n            }\n          }\n          state.pos = leadSurrogateEnd;\n          state.lastIntValue = lead;\n        }\n        return true\n      }\n      if (\n        state.switchU &&\n        state.eat(0x7B ) &&\n        this.regexp_eatHexDigits(state) &&\n        state.eat(0x7D ) &&\n        isValidUnicode(state.lastIntValue)\n      ) {\n        return true\n      }\n      if (state.switchU) {\n        state.raise(\"Invalid unicode escape\");\n      }\n      state.pos = start;\n    }\n\n    return false\n  };\n  function isValidUnicode(ch) {\n    return ch >= 0 && ch <= 0x10FFFF\n  }\n\n  pp$8.regexp_eatIdentityEscape = function(state) {\n    if (state.switchU) {\n      if (this.regexp_eatSyntaxCharacter(state)) {\n        return true\n      }\n      if (state.eat(0x2F )) {\n        state.lastIntValue = 0x2F; \n        return true\n      }\n      return false\n    }\n\n    var ch = state.current();\n    if (ch !== 0x63  && (!state.switchN || ch !== 0x6B )) {\n      state.lastIntValue = ch;\n      state.advance();\n      return true\n    }\n\n    return false\n  };\n\n  pp$8.regexp_eatDecimalEscape = function(state) {\n    state.lastIntValue = 0;\n    var ch = state.current();\n    if (ch >= 0x31  && ch <= 0x39 ) {\n      do {\n        state.lastIntValue = 10 * state.lastIntValue + (ch - 0x30 );\n        state.advance();\n      } while ((ch = state.current()) >= 0x30  && ch <= 0x39 )\n      return true\n    }\n    return false\n  };\n\n  pp$8.regexp_eatCharacterClassEscape = function(state) {\n    var ch = state.current();\n\n    if (isCharacterClassEscape(ch)) {\n      state.lastIntValue = -1;\n      state.advance();\n      return true\n    }\n\n    if (\n      state.switchU &&\n      this.options.ecmaVersion >= 9 &&\n      (ch === 0x50  || ch === 0x70 )\n    ) {\n      state.lastIntValue = -1;\n      state.advance();\n      if (\n        state.eat(0x7B ) &&\n        this.regexp_eatUnicodePropertyValueExpression(state) &&\n        state.eat(0x7D )\n      ) {\n        return true\n      }\n      state.raise(\"Invalid property name\");\n    }\n\n    return false\n  };\n  function isCharacterClassEscape(ch) {\n    return (\n      ch === 0x64  ||\n      ch === 0x44  ||\n      ch === 0x73  ||\n      ch === 0x53  ||\n      ch === 0x77  ||\n      ch === 0x57 \n    )\n  }\n\n  pp$8.regexp_eatUnicodePropertyValueExpression = function(state) {\n    var start = state.pos;\n\n    if (this.regexp_eatUnicodePropertyName(state) && state.eat(0x3D )) {\n      var name = state.lastStringValue;\n      if (this.regexp_eatUnicodePropertyValue(state)) {\n        var value = state.lastStringValue;\n        this.regexp_validateUnicodePropertyNameAndValue(state, name, value);\n        return true\n      }\n    }\n    state.pos = start;\n\n    if (this.regexp_eatLoneUnicodePropertyNameOrValue(state)) {\n      var nameOrValue = state.lastStringValue;\n      this.regexp_validateUnicodePropertyNameOrValue(state, nameOrValue);\n      return true\n    }\n    return false\n  };\n  pp$8.regexp_validateUnicodePropertyNameAndValue = function(state, name, value) {\n    if (!has(state.unicodeProperties.nonBinary, name))\n      { state.raise(\"Invalid property name\"); }\n    if (!state.unicodeProperties.nonBinary[name].test(value))\n      { state.raise(\"Invalid property value\"); }\n  };\n  pp$8.regexp_validateUnicodePropertyNameOrValue = function(state, nameOrValue) {\n    if (!state.unicodeProperties.binary.test(nameOrValue))\n      { state.raise(\"Invalid property name\"); }\n  };\n\n  pp$8.regexp_eatUnicodePropertyName = function(state) {\n    var ch = 0;\n    state.lastStringValue = \"\";\n    while (isUnicodePropertyNameCharacter(ch = state.current())) {\n      state.lastStringValue += codePointToString(ch);\n      state.advance();\n    }\n    return state.lastStringValue !== \"\"\n  };\n  function isUnicodePropertyNameCharacter(ch) {\n    return isControlLetter(ch) || ch === 0x5F \n  }\n\n  pp$8.regexp_eatUnicodePropertyValue = function(state) {\n    var ch = 0;\n    state.lastStringValue = \"\";\n    while (isUnicodePropertyValueCharacter(ch = state.current())) {\n      state.lastStringValue += codePointToString(ch);\n      state.advance();\n    }\n    return state.lastStringValue !== \"\"\n  };\n  function isUnicodePropertyValueCharacter(ch) {\n    return isUnicodePropertyNameCharacter(ch) || isDecimalDigit(ch)\n  }\n\n  pp$8.regexp_eatLoneUnicodePropertyNameOrValue = function(state) {\n    return this.regexp_eatUnicodePropertyValue(state)\n  };\n\n  pp$8.regexp_eatCharacterClass = function(state) {\n    if (state.eat(0x5B )) {\n      state.eat(0x5E );\n      this.regexp_classRanges(state);\n      if (state.eat(0x5D )) {\n        return true\n      }\n      state.raise(\"Unterminated character class\");\n    }\n    return false\n  };\n\n  pp$8.regexp_classRanges = function(state) {\n    while (this.regexp_eatClassAtom(state)) {\n      var left = state.lastIntValue;\n      if (state.eat(0x2D ) && this.regexp_eatClassAtom(state)) {\n        var right = state.lastIntValue;\n        if (state.switchU && (left === -1 || right === -1)) {\n          state.raise(\"Invalid character class\");\n        }\n        if (left !== -1 && right !== -1 && left > right) {\n          state.raise(\"Range out of order in character class\");\n        }\n      }\n    }\n  };\n\n  pp$8.regexp_eatClassAtom = function(state) {\n    var start = state.pos;\n\n    if (state.eat(0x5C )) {\n      if (this.regexp_eatClassEscape(state)) {\n        return true\n      }\n      if (state.switchU) {\n        var ch$1 = state.current();\n        if (ch$1 === 0x63  || isOctalDigit(ch$1)) {\n          state.raise(\"Invalid class escape\");\n        }\n        state.raise(\"Invalid escape\");\n      }\n      state.pos = start;\n    }\n\n    var ch = state.current();\n    if (ch !== 0x5D ) {\n      state.lastIntValue = ch;\n      state.advance();\n      return true\n    }\n\n    return false\n  };\n\n  pp$8.regexp_eatClassEscape = function(state) {\n    var start = state.pos;\n\n    if (state.eat(0x62 )) {\n      state.lastIntValue = 0x08; \n      return true\n    }\n\n    if (state.switchU && state.eat(0x2D )) {\n      state.lastIntValue = 0x2D; \n      return true\n    }\n\n    if (!state.switchU && state.eat(0x63 )) {\n      if (this.regexp_eatClassControlLetter(state)) {\n        return true\n      }\n      state.pos = start;\n    }\n\n    return (\n      this.regexp_eatCharacterClassEscape(state) ||\n      this.regexp_eatCharacterEscape(state)\n    )\n  };\n\n  pp$8.regexp_eatClassControlLetter = function(state) {\n    var ch = state.current();\n    if (isDecimalDigit(ch) || ch === 0x5F ) {\n      state.lastIntValue = ch % 0x20;\n      state.advance();\n      return true\n    }\n    return false\n  };\n\n  pp$8.regexp_eatHexEscapeSequence = function(state) {\n    var start = state.pos;\n    if (state.eat(0x78 )) {\n      if (this.regexp_eatFixedHexDigits(state, 2)) {\n        return true\n      }\n      if (state.switchU) {\n        state.raise(\"Invalid escape\");\n      }\n      state.pos = start;\n    }\n    return false\n  };\n\n  pp$8.regexp_eatDecimalDigits = function(state) {\n    var start = state.pos;\n    var ch = 0;\n    state.lastIntValue = 0;\n    while (isDecimalDigit(ch = state.current())) {\n      state.lastIntValue = 10 * state.lastIntValue + (ch - 0x30 );\n      state.advance();\n    }\n    return state.pos !== start\n  };\n  function isDecimalDigit(ch) {\n    return ch >= 0x30  && ch <= 0x39 \n  }\n\n  pp$8.regexp_eatHexDigits = function(state) {\n    var start = state.pos;\n    var ch = 0;\n    state.lastIntValue = 0;\n    while (isHexDigit(ch = state.current())) {\n      state.lastIntValue = 16 * state.lastIntValue + hexToInt(ch);\n      state.advance();\n    }\n    return state.pos !== start\n  };\n  function isHexDigit(ch) {\n    return (\n      (ch >= 0x30  && ch <= 0x39 ) ||\n      (ch >= 0x41  && ch <= 0x46 ) ||\n      (ch >= 0x61  && ch <= 0x66 )\n    )\n  }\n  function hexToInt(ch) {\n    if (ch >= 0x41  && ch <= 0x46 ) {\n      return 10 + (ch - 0x41 )\n    }\n    if (ch >= 0x61  && ch <= 0x66 ) {\n      return 10 + (ch - 0x61 )\n    }\n    return ch - 0x30 \n  }\n\n  pp$8.regexp_eatLegacyOctalEscapeSequence = function(state) {\n    if (this.regexp_eatOctalDigit(state)) {\n      var n1 = state.lastIntValue;\n      if (this.regexp_eatOctalDigit(state)) {\n        var n2 = state.lastIntValue;\n        if (n1 <= 3 && this.regexp_eatOctalDigit(state)) {\n          state.lastIntValue = n1 * 64 + n2 * 8 + state.lastIntValue;\n        } else {\n          state.lastIntValue = n1 * 8 + n2;\n        }\n      } else {\n        state.lastIntValue = n1;\n      }\n      return true\n    }\n    return false\n  };\n\n  pp$8.regexp_eatOctalDigit = function(state) {\n    var ch = state.current();\n    if (isOctalDigit(ch)) {\n      state.lastIntValue = ch - 0x30; \n      state.advance();\n      return true\n    }\n    state.lastIntValue = 0;\n    return false\n  };\n  function isOctalDigit(ch) {\n    return ch >= 0x30  && ch <= 0x37 \n  }\n\n  pp$8.regexp_eatFixedHexDigits = function(state, length) {\n    var start = state.pos;\n    state.lastIntValue = 0;\n    for (var i = 0; i < length; ++i) {\n      var ch = state.current();\n      if (!isHexDigit(ch)) {\n        state.pos = start;\n        return false\n      }\n      state.lastIntValue = 16 * state.lastIntValue + hexToInt(ch);\n      state.advance();\n    }\n    return true\n  };\n\n\n  var Token = function Token(p) {\n    this.type = p.type;\n    this.value = p.value;\n    this.start = p.start;\n    this.end = p.end;\n    if (p.options.locations)\n      { this.loc = new SourceLocation(p, p.startLoc, p.endLoc); }\n    if (p.options.ranges)\n      { this.range = [p.start, p.end]; }\n  };\n\n\n  var pp$9 = Parser.prototype;\n\n\n  pp$9.next = function(ignoreEscapeSequenceInKeyword) {\n    if (!ignoreEscapeSequenceInKeyword && this.type.keyword && this.containsEsc)\n      { this.raiseRecoverable(this.start, \"Escape sequence in keyword \" + this.type.keyword); }\n    if (this.options.onToken)\n      { this.options.onToken(new Token(this)); }\n\n    this.lastTokEnd = this.end;\n    this.lastTokStart = this.start;\n    this.lastTokEndLoc = this.endLoc;\n    this.lastTokStartLoc = this.startLoc;\n    this.nextToken();\n  };\n\n  pp$9.getToken = function() {\n    this.next();\n    return new Token(this)\n  };\n\n  if (typeof Symbol !== \"undefined\")\n    { pp$9[Symbol.iterator] = function() {\n      var this$1 = this;\n\n      return {\n        next: function () {\n          var token = this$1.getToken();\n          return {\n            done: token.type === types.eof,\n            value: token\n          }\n        }\n      }\n    }; }\n\n\n  pp$9.curContext = function() {\n    return this.context[this.context.length - 1]\n  };\n\n\n  pp$9.nextToken = function() {\n    var curContext = this.curContext();\n    if (!curContext || !curContext.preserveSpace) { this.skipSpace(); }\n\n    this.start = this.pos;\n    if (this.options.locations) { this.startLoc = this.curPosition(); }\n    if (this.pos >= this.input.length) { return this.finishToken(types.eof) }\n\n    if (curContext.override) { return curContext.override(this) }\n    else { this.readToken(this.fullCharCodeAtPos()); }\n  };\n\n  pp$9.readToken = function(code) {\n    if (isIdentifierStart(code, this.options.ecmaVersion >= 6) || code === 92 )\n      { return this.readWord() }\n\n    return this.getTokenFromCode(code)\n  };\n\n  pp$9.fullCharCodeAtPos = function() {\n    var code = this.input.charCodeAt(this.pos);\n    if (code <= 0xd7ff || code >= 0xe000) { return code }\n    var next = this.input.charCodeAt(this.pos + 1);\n    return (code << 10) + next - 0x35fdc00\n  };\n\n  pp$9.skipBlockComment = function() {\n    var startLoc = this.options.onComment && this.curPosition();\n    var start = this.pos, end = this.input.indexOf(\"*/\", this.pos += 2);\n    if (end === -1) { this.raise(this.pos - 2, \"Unterminated comment\"); }\n    this.pos = end + 2;\n    if (this.options.locations) {\n      lineBreakG.lastIndex = start;\n      var match;\n      while ((match = lineBreakG.exec(this.input)) && match.index < this.pos) {\n        ++this.curLine;\n        this.lineStart = match.index + match[0].length;\n      }\n    }\n    if (this.options.onComment)\n      { this.options.onComment(true, this.input.slice(start + 2, end), start, this.pos,\n                             startLoc, this.curPosition()); }\n  };\n\n  pp$9.skipLineComment = function(startSkip) {\n    var start = this.pos;\n    var startLoc = this.options.onComment && this.curPosition();\n    var ch = this.input.charCodeAt(this.pos += startSkip);\n    while (this.pos < this.input.length && !isNewLine(ch)) {\n      ch = this.input.charCodeAt(++this.pos);\n    }\n    if (this.options.onComment)\n      { this.options.onComment(false, this.input.slice(start + startSkip, this.pos), start, this.pos,\n                             startLoc, this.curPosition()); }\n  };\n\n\n  pp$9.skipSpace = function() {\n    loop: while (this.pos < this.input.length) {\n      var ch = this.input.charCodeAt(this.pos);\n      switch (ch) {\n      case 32: case 160: \n        ++this.pos;\n        break\n      case 13:\n        if (this.input.charCodeAt(this.pos + 1) === 10) {\n          ++this.pos;\n        }\n      case 10: case 8232: case 8233:\n        ++this.pos;\n        if (this.options.locations) {\n          ++this.curLine;\n          this.lineStart = this.pos;\n        }\n        break\n      case 47: \n        switch (this.input.charCodeAt(this.pos + 1)) {\n        case 42: \n          this.skipBlockComment();\n          break\n        case 47:\n          this.skipLineComment(2);\n          break\n        default:\n          break loop\n        }\n        break\n      default:\n        if (ch > 8 && ch < 14 || ch >= 5760 && nonASCIIwhitespace.test(String.fromCharCode(ch))) {\n          ++this.pos;\n        } else {\n          break loop\n        }\n      }\n    }\n  };\n\n\n  pp$9.finishToken = function(type, val) {\n    this.end = this.pos;\n    if (this.options.locations) { this.endLoc = this.curPosition(); }\n    var prevType = this.type;\n    this.type = type;\n    this.value = val;\n\n    this.updateContext(prevType);\n  };\n\n\n  pp$9.readToken_dot = function() {\n    var next = this.input.charCodeAt(this.pos + 1);\n    if (next >= 48 && next <= 57) { return this.readNumber(true) }\n    var next2 = this.input.charCodeAt(this.pos + 2);\n    if (this.options.ecmaVersion >= 6 && next === 46 && next2 === 46) { \n      this.pos += 3;\n      return this.finishToken(types.ellipsis)\n    } else {\n      ++this.pos;\n      return this.finishToken(types.dot)\n    }\n  };\n\n  pp$9.readToken_slash = function() { \n    var next = this.input.charCodeAt(this.pos + 1);\n    if (this.exprAllowed) { ++this.pos; return this.readRegexp() }\n    if (next === 61) { return this.finishOp(types.assign, 2) }\n    return this.finishOp(types.slash, 1)\n  };\n\n  pp$9.readToken_mult_modulo_exp = function(code) { \n    var next = this.input.charCodeAt(this.pos + 1);\n    var size = 1;\n    var tokentype = code === 42 ? types.star : types.modulo;\n\n    if (this.options.ecmaVersion >= 7 && code === 42 && next === 42) {\n      ++size;\n      tokentype = types.starstar;\n      next = this.input.charCodeAt(this.pos + 2);\n    }\n\n    if (next === 61) { return this.finishOp(types.assign, size + 1) }\n    return this.finishOp(tokentype, size)\n  };\n\n  pp$9.readToken_pipe_amp = function(code) { \n    var next = this.input.charCodeAt(this.pos + 1);\n    if (next === code) { return this.finishOp(code === 124 ? types.logicalOR : types.logicalAND, 2) }\n    if (next === 61) { return this.finishOp(types.assign, 2) }\n    return this.finishOp(code === 124 ? types.bitwiseOR : types.bitwiseAND, 1)\n  };\n\n  pp$9.readToken_caret = function() { \n    var next = this.input.charCodeAt(this.pos + 1);\n    if (next === 61) { return this.finishOp(types.assign, 2) }\n    return this.finishOp(types.bitwiseXOR, 1)\n  };\n\n  pp$9.readToken_plus_min = function(code) { \n    var next = this.input.charCodeAt(this.pos + 1);\n    if (next === code) {\n      if (next === 45 && !this.inModule && this.input.charCodeAt(this.pos + 2) === 62 &&\n          (this.lastTokEnd === 0 || lineBreak.test(this.input.slice(this.lastTokEnd, this.pos)))) {\n        this.skipLineComment(3);\n        this.skipSpace();\n        return this.nextToken()\n      }\n      return this.finishOp(types.incDec, 2)\n    }\n    if (next === 61) { return this.finishOp(types.assign, 2) }\n    return this.finishOp(types.plusMin, 1)\n  };\n\n  pp$9.readToken_lt_gt = function(code) { \n    var next = this.input.charCodeAt(this.pos + 1);\n    var size = 1;\n    if (next === code) {\n      size = code === 62 && this.input.charCodeAt(this.pos + 2) === 62 ? 3 : 2;\n      if (this.input.charCodeAt(this.pos + size) === 61) { return this.finishOp(types.assign, size + 1) }\n      return this.finishOp(types.bitShift, size)\n    }\n    if (next === 33 && code === 60 && !this.inModule && this.input.charCodeAt(this.pos + 2) === 45 &&\n        this.input.charCodeAt(this.pos + 3) === 45) {\n      this.skipLineComment(4);\n      this.skipSpace();\n      return this.nextToken()\n    }\n    if (next === 61) { size = 2; }\n    return this.finishOp(types.relational, size)\n  };\n\n  pp$9.readToken_eq_excl = function(code) { \n    var next = this.input.charCodeAt(this.pos + 1);\n    if (next === 61) { return this.finishOp(types.equality, this.input.charCodeAt(this.pos + 2) === 61 ? 3 : 2) }\n    if (code === 61 && next === 62 && this.options.ecmaVersion >= 6) { \n      this.pos += 2;\n      return this.finishToken(types.arrow)\n    }\n    return this.finishOp(code === 61 ? types.eq : types.prefix, 1)\n  };\n\n  pp$9.getTokenFromCode = function(code) {\n    switch (code) {\n    case 46: \n      return this.readToken_dot()\n\n    case 40: ++this.pos; return this.finishToken(types.parenL)\n    case 41: ++this.pos; return this.finishToken(types.parenR)\n    case 59: ++this.pos; return this.finishToken(types.semi)\n    case 44: ++this.pos; return this.finishToken(types.comma)\n    case 91: ++this.pos; return this.finishToken(types.bracketL)\n    case 93: ++this.pos; return this.finishToken(types.bracketR)\n    case 123: ++this.pos; return this.finishToken(types.braceL)\n    case 125: ++this.pos; return this.finishToken(types.braceR)\n    case 58: ++this.pos; return this.finishToken(types.colon)\n    case 63: ++this.pos; return this.finishToken(types.question)\n\n    case 96: \n      if (this.options.ecmaVersion < 6) { break }\n      ++this.pos;\n      return this.finishToken(types.backQuote)\n\n    case 48: \n      var next = this.input.charCodeAt(this.pos + 1);\n      if (next === 120 || next === 88) { return this.readRadixNumber(16) } \n      if (this.options.ecmaVersion >= 6) {\n        if (next === 111 || next === 79) { return this.readRadixNumber(8) } \n        if (next === 98 || next === 66) { return this.readRadixNumber(2) } \n      }\n\n    case 49: case 50: case 51: case 52: case 53: case 54: case 55: case 56: case 57: \n      return this.readNumber(false)\n\n    case 34: case 39: \n      return this.readString(code)\n\n\n    case 47: \n      return this.readToken_slash()\n\n    case 37: case 42: \n      return this.readToken_mult_modulo_exp(code)\n\n    case 124: case 38: \n      return this.readToken_pipe_amp(code)\n\n    case 94: \n      return this.readToken_caret()\n\n    case 43: case 45: \n      return this.readToken_plus_min(code)\n\n    case 60: case 62: \n      return this.readToken_lt_gt(code)\n\n    case 61: case 33: \n      return this.readToken_eq_excl(code)\n\n    case 126: \n      return this.finishOp(types.prefix, 1)\n    }\n\n    this.raise(this.pos, \"Unexpected character '\" + codePointToString$1(code) + \"'\");\n  };\n\n  pp$9.finishOp = function(type, size) {\n    var str = this.input.slice(this.pos, this.pos + size);\n    this.pos += size;\n    return this.finishToken(type, str)\n  };\n\n  pp$9.readRegexp = function() {\n    var escaped, inClass, start = this.pos;\n    for (;;) {\n      if (this.pos >= this.input.length) { this.raise(start, \"Unterminated regular expression\"); }\n      var ch = this.input.charAt(this.pos);\n      if (lineBreak.test(ch)) { this.raise(start, \"Unterminated regular expression\"); }\n      if (!escaped) {\n        if (ch === \"[\") { inClass = true; }\n        else if (ch === \"]\" && inClass) { inClass = false; }\n        else if (ch === \"/\" && !inClass) { break }\n        escaped = ch === \"\\\\\";\n      } else { escaped = false; }\n      ++this.pos;\n    }\n    var pattern = this.input.slice(start, this.pos);\n    ++this.pos;\n    var flagsStart = this.pos;\n    var flags = this.readWord1();\n    if (this.containsEsc) { this.unexpected(flagsStart); }\n\n    var state = this.regexpState || (this.regexpState = new RegExpValidationState(this));\n    state.reset(start, pattern, flags);\n    this.validateRegExpFlags(state);\n    this.validateRegExpPattern(state);\n\n    var value = null;\n    try {\n      value = new RegExp(pattern, flags);\n    } catch (e) {\n    }\n\n    return this.finishToken(types.regexp, {pattern: pattern, flags: flags, value: value})\n  };\n\n\n  pp$9.readInt = function(radix, len) {\n    var start = this.pos, total = 0;\n    for (var i = 0, e = len == null ? Infinity : len; i < e; ++i) {\n      var code = this.input.charCodeAt(this.pos), val = (void 0);\n      if (code >= 97) { val = code - 97 + 10; } \n      else if (code >= 65) { val = code - 65 + 10; } \n      else if (code >= 48 && code <= 57) { val = code - 48; } \n      else { val = Infinity; }\n      if (val >= radix) { break }\n      ++this.pos;\n      total = total * radix + val;\n    }\n    if (this.pos === start || len != null && this.pos - start !== len) { return null }\n\n    return total\n  };\n\n  pp$9.readRadixNumber = function(radix) {\n    var start = this.pos;\n    this.pos += 2; \n    var val = this.readInt(radix);\n    if (val == null) { this.raise(this.start + 2, \"Expected number in radix \" + radix); }\n    if (this.options.ecmaVersion >= 11 && this.input.charCodeAt(this.pos) === 110) {\n      val = typeof BigInt !== \"undefined\" ? BigInt(this.input.slice(start, this.pos)) : null;\n      ++this.pos;\n    } else if (isIdentifierStart(this.fullCharCodeAtPos())) { this.raise(this.pos, \"Identifier directly after number\"); }\n    return this.finishToken(types.num, val)\n  };\n\n\n  pp$9.readNumber = function(startsWithDot) {\n    var start = this.pos;\n    if (!startsWithDot && this.readInt(10) === null) { this.raise(start, \"Invalid number\"); }\n    var octal = this.pos - start >= 2 && this.input.charCodeAt(start) === 48;\n    if (octal && this.strict) { this.raise(start, \"Invalid number\"); }\n    var next = this.input.charCodeAt(this.pos);\n    if (!octal && !startsWithDot && this.options.ecmaVersion >= 11 && next === 110) {\n      var str$1 = this.input.slice(start, this.pos);\n      var val$1 = typeof BigInt !== \"undefined\" ? BigInt(str$1) : null;\n      ++this.pos;\n      if (isIdentifierStart(this.fullCharCodeAtPos())) { this.raise(this.pos, \"Identifier directly after number\"); }\n      return this.finishToken(types.num, val$1)\n    }\n    if (octal && /[89]/.test(this.input.slice(start, this.pos))) { octal = false; }\n    if (next === 46 && !octal) { \n      ++this.pos;\n      this.readInt(10);\n      next = this.input.charCodeAt(this.pos);\n    }\n    if ((next === 69 || next === 101) && !octal) { \n      next = this.input.charCodeAt(++this.pos);\n      if (next === 43 || next === 45) { ++this.pos; } \n      if (this.readInt(10) === null) { this.raise(start, \"Invalid number\"); }\n    }\n    if (isIdentifierStart(this.fullCharCodeAtPos())) { this.raise(this.pos, \"Identifier directly after number\"); }\n\n    var str = this.input.slice(start, this.pos);\n    var val = octal ? parseInt(str, 8) : parseFloat(str);\n    return this.finishToken(types.num, val)\n  };\n\n\n  pp$9.readCodePoint = function() {\n    var ch = this.input.charCodeAt(this.pos), code;\n\n    if (ch === 123) { \n      if (this.options.ecmaVersion < 6) { this.unexpected(); }\n      var codePos = ++this.pos;\n      code = this.readHexChar(this.input.indexOf(\"}\", this.pos) - this.pos);\n      ++this.pos;\n      if (code > 0x10FFFF) { this.invalidStringToken(codePos, \"Code point out of bounds\"); }\n    } else {\n      code = this.readHexChar(4);\n    }\n    return code\n  };\n\n  function codePointToString$1(code) {\n    if (code <= 0xFFFF) { return String.fromCharCode(code) }\n    code -= 0x10000;\n    return String.fromCharCode((code >> 10) + 0xD800, (code & 1023) + 0xDC00)\n  }\n\n  pp$9.readString = function(quote) {\n    var out = \"\", chunkStart = ++this.pos;\n    for (;;) {\n      if (this.pos >= this.input.length) { this.raise(this.start, \"Unterminated string constant\"); }\n      var ch = this.input.charCodeAt(this.pos);\n      if (ch === quote) { break }\n      if (ch === 92) { \n        out += this.input.slice(chunkStart, this.pos);\n        out += this.readEscapedChar(false);\n        chunkStart = this.pos;\n      } else {\n        if (isNewLine(ch, this.options.ecmaVersion >= 10)) { this.raise(this.start, \"Unterminated string constant\"); }\n        ++this.pos;\n      }\n    }\n    out += this.input.slice(chunkStart, this.pos++);\n    return this.finishToken(types.string, out)\n  };\n\n\n  var INVALID_TEMPLATE_ESCAPE_ERROR = {};\n\n  pp$9.tryReadTemplateToken = function() {\n    this.inTemplateElement = true;\n    try {\n      this.readTmplToken();\n    } catch (err) {\n      if (err === INVALID_TEMPLATE_ESCAPE_ERROR) {\n        this.readInvalidTemplateToken();\n      } else {\n        throw err\n      }\n    }\n\n    this.inTemplateElement = false;\n  };\n\n  pp$9.invalidStringToken = function(position, message) {\n    if (this.inTemplateElement && this.options.ecmaVersion >= 9) {\n      throw INVALID_TEMPLATE_ESCAPE_ERROR\n    } else {\n      this.raise(position, message);\n    }\n  };\n\n  pp$9.readTmplToken = function() {\n    var out = \"\", chunkStart = this.pos;\n    for (;;) {\n      if (this.pos >= this.input.length) { this.raise(this.start, \"Unterminated template\"); }\n      var ch = this.input.charCodeAt(this.pos);\n      if (ch === 96 || ch === 36 && this.input.charCodeAt(this.pos + 1) === 123) { \n        if (this.pos === this.start && (this.type === types.template || this.type === types.invalidTemplate)) {\n          if (ch === 36) {\n            this.pos += 2;\n            return this.finishToken(types.dollarBraceL)\n          } else {\n            ++this.pos;\n            return this.finishToken(types.backQuote)\n          }\n        }\n        out += this.input.slice(chunkStart, this.pos);\n        return this.finishToken(types.template, out)\n      }\n      if (ch === 92) { \n        out += this.input.slice(chunkStart, this.pos);\n        out += this.readEscapedChar(true);\n        chunkStart = this.pos;\n      } else if (isNewLine(ch)) {\n        out += this.input.slice(chunkStart, this.pos);\n        ++this.pos;\n        switch (ch) {\n        case 13:\n          if (this.input.charCodeAt(this.pos) === 10) { ++this.pos; }\n        case 10:\n          out += \"\\n\";\n          break\n        default:\n          out += String.fromCharCode(ch);\n          break\n        }\n        if (this.options.locations) {\n          ++this.curLine;\n          this.lineStart = this.pos;\n        }\n        chunkStart = this.pos;\n      } else {\n        ++this.pos;\n      }\n    }\n  };\n\n  pp$9.readInvalidTemplateToken = function() {\n    for (; this.pos < this.input.length; this.pos++) {\n      switch (this.input[this.pos]) {\n      case \"\\\\\":\n        ++this.pos;\n        break\n\n      case \"$\":\n        if (this.input[this.pos + 1] !== \"{\") {\n          break\n        }\n\n      case \"`\":\n        return this.finishToken(types.invalidTemplate, this.input.slice(this.start, this.pos))\n\n      }\n    }\n    this.raise(this.start, \"Unterminated template\");\n  };\n\n\n  pp$9.readEscapedChar = function(inTemplate) {\n    var ch = this.input.charCodeAt(++this.pos);\n    ++this.pos;\n    switch (ch) {\n    case 110: return \"\\n\" \n    case 114: return \"\\r\" \n    case 120: return String.fromCharCode(this.readHexChar(2)) \n    case 117: return codePointToString$1(this.readCodePoint()) \n    case 116: return \"\\t\" \n    case 98: return \"\\b\" \n    case 118: return \"\\u000b\" \n    case 102: return \"\\f\" \n    case 13: if (this.input.charCodeAt(this.pos) === 10) { ++this.pos; } \n    case 10: \n      if (this.options.locations) { this.lineStart = this.pos; ++this.curLine; }\n      return \"\"\n    case 56:\n    case 57:\n      if (inTemplate) {\n        var codePos = this.pos - 1;\n\n        this.invalidStringToken(\n          codePos,\n          \"Invalid escape sequence in template string\"\n        );\n\n        return null\n      }\n    default:\n      if (ch >= 48 && ch <= 55) {\n        var octalStr = this.input.substr(this.pos - 1, 3).match(/^[0-7]+/)[0];\n        var octal = parseInt(octalStr, 8);\n        if (octal > 255) {\n          octalStr = octalStr.slice(0, -1);\n          octal = parseInt(octalStr, 8);\n        }\n        this.pos += octalStr.length - 1;\n        ch = this.input.charCodeAt(this.pos);\n        if ((octalStr !== \"0\" || ch === 56 || ch === 57) && (this.strict || inTemplate)) {\n          this.invalidStringToken(\n            this.pos - 1 - octalStr.length,\n            inTemplate\n              ? \"Octal literal in template string\"\n              : \"Octal literal in strict mode\"\n          );\n        }\n        return String.fromCharCode(octal)\n      }\n      if (isNewLine(ch)) {\n        return \"\"\n      }\n      return String.fromCharCode(ch)\n    }\n  };\n\n\n  pp$9.readHexChar = function(len) {\n    var codePos = this.pos;\n    var n = this.readInt(16, len);\n    if (n === null) { this.invalidStringToken(codePos, \"Bad character escape sequence\"); }\n    return n\n  };\n\n\n  pp$9.readWord1 = function() {\n    this.containsEsc = false;\n    var word = \"\", first = true, chunkStart = this.pos;\n    var astral = this.options.ecmaVersion >= 6;\n    while (this.pos < this.input.length) {\n      var ch = this.fullCharCodeAtPos();\n      if (isIdentifierChar(ch, astral)) {\n        this.pos += ch <= 0xffff ? 1 : 2;\n      } else if (ch === 92) { \n        this.containsEsc = true;\n        word += this.input.slice(chunkStart, this.pos);\n        var escStart = this.pos;\n        if (this.input.charCodeAt(++this.pos) !== 117) \n          { this.invalidStringToken(this.pos, \"Expecting Unicode escape sequence \\\\uXXXX\"); }\n        ++this.pos;\n        var esc = this.readCodePoint();\n        if (!(first ? isIdentifierStart : isIdentifierChar)(esc, astral))\n          { this.invalidStringToken(escStart, \"Invalid Unicode escape\"); }\n        word += codePointToString$1(esc);\n        chunkStart = this.pos;\n      } else {\n        break\n      }\n      first = false;\n    }\n    return word + this.input.slice(chunkStart, this.pos)\n  };\n\n\n  pp$9.readWord = function() {\n    var word = this.readWord1();\n    var type = types.name;\n    if (this.keywords.test(word)) {\n      type = keywords$1[word];\n    }\n    return this.finishToken(type, word)\n  };\n\n\n  var version = \"7.1.0\";\n\n  Parser.acorn = {\n    Parser: Parser,\n    version: version,\n    defaultOptions: defaultOptions,\n    Position: Position,\n    SourceLocation: SourceLocation,\n    getLineInfo: getLineInfo,\n    Node: Node,\n    TokenType: TokenType,\n    tokTypes: types,\n    keywordTypes: keywords$1,\n    TokContext: TokContext,\n    tokContexts: types$1,\n    isIdentifierChar: isIdentifierChar,\n    isIdentifierStart: isIdentifierStart,\n    Token: Token,\n    isNewLine: isNewLine,\n    lineBreak: lineBreak,\n    lineBreakG: lineBreakG,\n    nonASCIIwhitespace: nonASCIIwhitespace\n  };\n\n\n  function parse(input, options) {\n    return Parser.parse(input, options)\n  }\n\n\n  function parseExpressionAt(input, pos, options) {\n    return Parser.parseExpressionAt(input, pos, options)\n  }\n\n\n  function tokenizer(input, options) {\n    return Parser.tokenizer(input, options)\n  }\n\n  exports.Node = Node;\n  exports.Parser = Parser;\n  exports.Position = Position;\n  exports.SourceLocation = SourceLocation;\n  exports.TokContext = TokContext;\n  exports.Token = Token;\n  exports.TokenType = TokenType;\n  exports.defaultOptions = defaultOptions;\n  exports.getLineInfo = getLineInfo;\n  exports.isIdentifierChar = isIdentifierChar;\n  exports.isIdentifierStart = isIdentifierStart;\n  exports.isNewLine = isNewLine;\n  exports.keywordTypes = keywords$1;\n  exports.lineBreak = lineBreak;\n  exports.lineBreakG = lineBreakG;\n  exports.nonASCIIwhitespace = nonASCIIwhitespace;\n  exports.parse = parse;\n  exports.parseExpressionAt = parseExpressionAt;\n  exports.tokContexts = types$1;\n  exports.tokTypes = types;\n  exports.tokenizer = tokenizer;\n  exports.version = version;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n\n},{}],2:[function(require,module,exports){\n\n},{}],3:[function(require,module,exports){\nfunction glWiretap(gl, options = {}) {\n  const {\n    contextName = 'gl',\n    throwGetError,\n    useTrackablePrimitives,\n    readPixelsFile,\n    recording = [],\n    variables = {},\n    onReadPixels,\n    onUnrecognizedArgumentLookup,\n  } = options;\n  const proxy = new Proxy(gl, { get: listen });\n  const contextVariables = [];\n  const entityNames = {};\n  let imageCount = 0;\n  let indent = '';\n  let readPixelsVariableName;\n  return proxy;\n  function listen(obj, property) {\n    switch (property) {\n      case 'addComment': return addComment;\n      case 'checkThrowError': return checkThrowError;\n      case 'getReadPixelsVariableName': return readPixelsVariableName;\n      case 'insertVariable': return insertVariable;\n      case 'reset': return reset;\n      case 'setIndent': return setIndent;\n      case 'toString': return toString;\n      case 'getContextVariableName': return getContextVariableName;\n    }\n    if (typeof gl[property] === 'function') {\n      return function() { \n        switch (property) {\n          case 'getError':\n            if (throwGetError) {\n              recording.push(`${indent}if (${contextName}.getError() !== ${contextName}.NONE) throw new Error('error');`);\n            } else {\n              recording.push(`${indent}${contextName}.getError();`); \n            }\n            return gl.getError();\n          case 'getExtension': {\n            const variableName = `${contextName}Variables${contextVariables.length}`;\n            recording.push(`${indent}const ${variableName} = ${contextName}.getExtension('${arguments[0]}');`);\n            const extension = gl.getExtension(arguments[0]);\n            if (extension && typeof extension === 'object') {\n              const tappedExtension = glExtensionWiretap(extension, {\n                getEntity,\n                useTrackablePrimitives,\n                recording,\n                contextName: variableName,\n                contextVariables,\n                variables,\n                indent,\n                onUnrecognizedArgumentLookup,\n              });\n              contextVariables.push(tappedExtension);\n              return tappedExtension;\n            } else {\n              contextVariables.push(null);\n            }\n            return extension;\n          }\n          case 'readPixels':\n            const i = contextVariables.indexOf(arguments[6]);\n            let targetVariableName;\n            if (i === -1) {\n              const variableName = getVariableName(arguments[6]);\n              if (variableName) {\n                targetVariableName = variableName;\n                recording.push(`${indent}${variableName}`);\n              } else {\n                targetVariableName = `${contextName}Variable${contextVariables.length}`;\n                contextVariables.push(arguments[6]);\n                recording.push(`${indent}const ${targetVariableName} = new ${arguments[6].constructor.name}(${arguments[6].length});`);\n              }\n            } else {\n              targetVariableName = `${contextName}Variable${i}`;\n            }\n            readPixelsVariableName = targetVariableName;\n            const argumentAsStrings = [\n              arguments[0],\n              arguments[1],\n              arguments[2],\n              arguments[3],\n              getEntity(arguments[4]),\n              getEntity(arguments[5]),\n              targetVariableName\n            ];\n            recording.push(`${indent}${contextName}.readPixels(${argumentAsStrings.join(', ')});`);\n            if (readPixelsFile) {\n              writePPM(arguments[2], arguments[3]);\n            }\n            if (onReadPixels) {\n              onReadPixels(targetVariableName, argumentAsStrings);\n            }\n            return gl.readPixels.apply(gl, arguments);\n          case 'drawBuffers':\n            recording.push(`${indent}${contextName}.drawBuffers([${argumentsToString(arguments[0], { contextName, contextVariables, getEntity, addVariable, variables, onUnrecognizedArgumentLookup } )}]);`);\n            return gl.drawBuffers(arguments[0]);\n        }\n        let result = gl[property].apply(gl, arguments);\n        switch (typeof result) {\n          case 'undefined':\n            recording.push(`${indent}${methodCallToString(property, arguments)};`);\n            return;\n          case 'number':\n          case 'boolean':\n            if (useTrackablePrimitives && contextVariables.indexOf(trackablePrimitive(result)) === -1) {\n              recording.push(`${indent}const ${contextName}Variable${contextVariables.length} = ${methodCallToString(property, arguments)};`);\n              contextVariables.push(result = trackablePrimitive(result));\n              break;\n            }\n          default:\n            if (result === null) {\n              recording.push(`${methodCallToString(property, arguments)};`);\n            } else {\n              recording.push(`${indent}const ${contextName}Variable${contextVariables.length} = ${methodCallToString(property, arguments)};`);\n            }\n\n            contextVariables.push(result);\n        }\n        return result;\n      }\n    }\n    entityNames[gl[property]] = property;\n    return gl[property];\n  }\n  function toString() {\n    return recording.join('\\n');\n  }\n  function reset() {\n    while (recording.length > 0) {\n      recording.pop();\n    }\n  }\n  function insertVariable(name, value) {\n    variables[name] = value;\n  }\n  function getEntity(value) {\n    const name = entityNames[value];\n    if (name) {\n      return contextName + '.' + name;\n    }\n    return value;\n  }\n  function setIndent(spaces) {\n    indent = ' '.repeat(spaces);\n  }\n  function addVariable(value, source) {\n    const variableName = `${contextName}Variable${contextVariables.length}`;\n    recording.push(`${indent}const ${variableName} = ${source};`);\n    contextVariables.push(value);\n    return variableName;\n  }\n  function writePPM(width, height) {\n    const sourceVariable = `${contextName}Variable${contextVariables.length}`;\n    const imageVariable = `imageDatum${imageCount}`;\n    recording.push(`${indent}let ${imageVariable} = [\"P3\\\\n# ${readPixelsFile}.ppm\\\\n\", ${width}, ' ', ${height}, \"\\\\n255\\\\n\"].join(\"\");`);\n    recording.push(`${indent}for (let i = 0; i < ${imageVariable}.length; i += 4) {`);\n    recording.push(`${indent}  ${imageVariable} += ${sourceVariable}[i] + ' ' + ${sourceVariable}[i + 1] + ' ' + ${sourceVariable}[i + 2] + ' ';`);\n    recording.push(`${indent}}`);\n    recording.push(`${indent}if (typeof require !== \"undefined\") {`);\n    recording.push(`${indent}  require('fs').writeFileSync('./${readPixelsFile}.ppm', ${imageVariable});`);\n    recording.push(`${indent}}`);\n    imageCount++;\n  }\n  function addComment(value) {\n    recording.push(`${indent}// ${value}`);\n  }\n  function checkThrowError() {\n    recording.push(`${indent}(() => {\n${indent}const error = ${contextName}.getError();\n${indent}if (error !== ${contextName}.NONE) {\n${indent}  const names = Object.getOwnPropertyNames(gl);\n${indent}  for (let i = 0; i < names.length; i++) {\n${indent}    const name = names[i];\n${indent}    if (${contextName}[name] === error) {\n${indent}      throw new Error('${contextName} threw ' + name);\n${indent}    }\n${indent}  }\n${indent}}\n${indent}})();`);\n  }\n  function methodCallToString(method, args) {\n    return `${contextName}.${method}(${argumentsToString(args, { contextName, contextVariables, getEntity, addVariable, variables, onUnrecognizedArgumentLookup })})`;\n  }\n\n  function getVariableName(value) {\n    if (variables) {\n      for (const name in variables) {\n        if (variables[name] === value) {\n          return name;\n        }\n      }\n    }\n    return null;\n  }\n\n  function getContextVariableName(value) {\n    const i = contextVariables.indexOf(value);\n    if (i !== -1) {\n      return `${contextName}Variable${i}`;\n    }\n    return null;\n  }\n}\n\nfunction glExtensionWiretap(extension, options) {\n  const proxy = new Proxy(extension, { get: listen });\n  const extensionEntityNames = {};\n  const {\n    contextName,\n    contextVariables,\n    getEntity,\n    useTrackablePrimitives,\n    recording,\n    variables,\n    indent,\n    onUnrecognizedArgumentLookup,\n  } = options;\n  return proxy;\n  function listen(obj, property) {\n    if (typeof obj[property] === 'function') {\n      return function() {\n        switch (property) {\n          case 'drawBuffersWEBGL':\n            recording.push(`${indent}${contextName}.drawBuffersWEBGL([${argumentsToString(arguments[0], { contextName, contextVariables, getEntity: getExtensionEntity, addVariable, variables, onUnrecognizedArgumentLookup })}]);`);\n            return extension.drawBuffersWEBGL(arguments[0]);\n        }\n        let result = extension[property].apply(extension, arguments);\n        switch (typeof result) {\n          case 'undefined':\n            recording.push(`${indent}${methodCallToString(property, arguments)};`);\n            return;\n          case 'number':\n          case 'boolean':\n            if (useTrackablePrimitives && contextVariables.indexOf(trackablePrimitive(result)) === -1) {\n              recording.push(`${indent}const ${contextName}Variable${contextVariables.length} = ${methodCallToString(property, arguments)};`);\n              contextVariables.push(result = trackablePrimitive(result));\n            } else {\n              recording.push(`${indent}const ${contextName}Variable${contextVariables.length} = ${methodCallToString(property, arguments)};`);\n              contextVariables.push(result);\n            }\n            break;\n          default:\n            if (result === null) {\n              recording.push(`${methodCallToString(property, arguments)};`);\n            } else {\n              recording.push(`${indent}const ${contextName}Variable${contextVariables.length} = ${methodCallToString(property, arguments)};`);\n            }\n            contextVariables.push(result);\n        }\n        return result;\n      };\n    }\n    extensionEntityNames[extension[property]] = property;\n    return extension[property];\n  }\n\n  function getExtensionEntity(value) {\n    if (extensionEntityNames.hasOwnProperty(value)) {\n      return `${contextName}.${extensionEntityNames[value]}`;\n    }\n    return getEntity(value);\n  }\n\n  function methodCallToString(method, args) {\n    return `${contextName}.${method}(${argumentsToString(args, { contextName, contextVariables, getEntity: getExtensionEntity, addVariable, variables, onUnrecognizedArgumentLookup })})`;\n  }\n\n  function addVariable(value, source) {\n    const variableName = `${contextName}Variable${contextVariables.length}`;\n    contextVariables.push(value);\n    recording.push(`${indent}const ${variableName} = ${source};`);\n    return variableName;\n  }\n}\n\nfunction argumentsToString(args, options) {\n  const { variables, onUnrecognizedArgumentLookup } = options;\n  return (Array.from(args).map((arg) => {\n    const variableName = getVariableName(arg);\n    if (variableName) {\n      return variableName;\n    }\n    return argumentToString(arg, options);\n  }).join(', '));\n\n  function getVariableName(value) {\n    if (variables) {\n      for (const name in variables) {\n        if (!variables.hasOwnProperty(name)) continue;\n        if (variables[name] === value) {\n          return name;\n        }\n      }\n    }\n    if (onUnrecognizedArgumentLookup) {\n      return onUnrecognizedArgumentLookup(value);\n    }\n    return null;\n  }\n}\n\nfunction argumentToString(arg, options) {\n  const { contextName, contextVariables, getEntity, addVariable, onUnrecognizedArgumentLookup } = options;\n  if (typeof arg === 'undefined') {\n    return 'undefined';\n  }\n  if (arg === null) {\n    return 'null';\n  }\n  const i = contextVariables.indexOf(arg);\n  if (i > -1) {\n    return `${contextName}Variable${i}`;\n  }\n  switch (arg.constructor.name) {\n    case 'String':\n      const hasLines = /\\n/.test(arg);\n      const hasSingleQuotes = /'/.test(arg);\n      const hasDoubleQuotes = /\"/.test(arg);\n      if (hasLines) {\n        return '`' + arg + '`';\n      } else if (hasSingleQuotes && !hasDoubleQuotes) {\n        return '\"' + arg + '\"';\n      } else if (!hasSingleQuotes && hasDoubleQuotes) {\n        return \"'\" + arg + \"'\";\n      } else {\n        return '\\'' + arg + '\\'';\n      }\n    case 'Number': return getEntity(arg);\n    case 'Boolean': return getEntity(arg);\n    case 'Array':\n      return addVariable(arg, `new ${arg.constructor.name}([${Array.from(arg).join(',')}])`);\n    case 'Float32Array':\n    case 'Uint8Array':\n    case 'Uint16Array':\n    case 'Int32Array':\n      return addVariable(arg, `new ${arg.constructor.name}(${JSON.stringify(Array.from(arg))})`);\n    default:\n      if (onUnrecognizedArgumentLookup) {\n        const instantiationString = onUnrecognizedArgumentLookup(arg);\n        if (instantiationString) {\n          return instantiationString;\n        }\n      }\n      throw new Error(`unrecognized argument type ${arg.constructor.name}`);\n  }\n}\n\nfunction trackablePrimitive(value) {\n  return new value.constructor(value);\n}\n\nif (typeof module !== 'undefined') {\n  module.exports = { glWiretap, glExtensionWiretap };\n}\n\nif (typeof window !== 'undefined') {\n  glWiretap.glExtensionWiretap = glExtensionWiretap;\n  window.glWiretap = glWiretap;\n}\n\n},{}],4:[function(require,module,exports){\nfunction setupArguments(args) {\n  const newArguments = new Array(args.length);\n  for (let i = 0; i < args.length; i++) {\n    const arg = args[i];\n    if (arg.toArray) {\n      newArguments[i] = arg.toArray();\n    } else {\n      newArguments[i] = arg;\n    }\n  }\n  return newArguments;\n}\n\nfunction mock1D() {\n  const args = setupArguments(arguments);\n  const row = new Float32Array(this.output.x);\n  for (let x = 0; x < this.output.x; x++) {\n    this.thread.x = x;\n    this.thread.y = 0;\n    this.thread.z = 0;\n    row[x] = this._fn.apply(this, args);\n  }\n  return row;\n}\n\nfunction mock2D() {\n  const args = setupArguments(arguments);\n  const matrix = new Array(this.output.y);\n  for (let y = 0; y < this.output.y; y++) {\n    const row = new Float32Array(this.output.x);\n    for (let x = 0; x < this.output.x; x++) {\n      this.thread.x = x;\n      this.thread.y = y;\n      this.thread.z = 0;\n      row[x] = this._fn.apply(this, args);\n    }\n    matrix[y] = row;\n  }\n  return matrix;\n}\n\nfunction mock2DGraphical() {\n  const args = setupArguments(arguments);\n  for (let y = 0; y < this.output.y; y++) {\n    for (let x = 0; x < this.output.x; x++) {\n      this.thread.x = x;\n      this.thread.y = y;\n      this.thread.z = 0;\n      this._fn.apply(this, args);\n    }\n  }\n}\n\nfunction mock3D() {\n  const args = setupArguments(arguments);\n  const cube = new Array(this.output.z);\n  for (let z = 0; z < this.output.z; z++) {\n    const matrix = new Array(this.output.y);\n    for (let y = 0; y < this.output.y; y++) {\n      const row = new Float32Array(this.output.x);\n      for (let x = 0; x < this.output.x; x++) {\n        this.thread.x = x;\n        this.thread.y = y;\n        this.thread.z = z;\n        row[x] = this._fn.apply(this, args);\n      }\n      matrix[y] = row;\n    }\n    cube[z] = matrix;\n  }\n  return cube;\n}\n\nfunction apiDecorate(kernel) {\n  kernel.setOutput = (output) => {\n    kernel.output = setupOutput(output);\n    if (kernel.graphical) {\n      setupGraphical(kernel);\n    }\n  };\n  kernel.toJSON = () => {\n    throw new Error('Not usable with gpuMock');\n  };\n  kernel.setConstants = (flag) => {\n    kernel.constants = flag;\n    return kernel;\n  };\n  kernel.setGraphical = (flag) => {\n    kernel.graphical = flag;\n    return kernel;\n  };\n  kernel.setCanvas = (flag) => {\n    kernel.canvas = flag;\n    return kernel;\n  };\n  kernel.setContext = (flag) => {\n    kernel.context = flag;\n    return kernel;\n  };\n  kernel.destroy = () => {};\n  kernel.validateSettings = () => {};\n  if (kernel.graphical && kernel.output) {\n    setupGraphical(kernel);\n  }\n  kernel.exec = function() {\n    return new Promise((resolve, reject) => {\n      try {\n        resolve(kernel.apply(kernel, arguments));\n      } catch(e) {\n        reject(e);\n      }\n    });\n  };\n  kernel.getPixels = (flip) => {\n    const {x, y} = kernel.output;\n    return flip ? flipPixels(kernel._imageData.data, x, y) : kernel._imageData.data.slice(0);\n  };\n  kernel.color = function(r, g, b, a) {\n    if (typeof a === 'undefined') {\n      a = 1;\n    }\n\n    r = Math.floor(r * 255);\n    g = Math.floor(g * 255);\n    b = Math.floor(b * 255);\n    a = Math.floor(a * 255);\n\n    const width = kernel.output.x;\n    const height = kernel.output.y;\n\n    const x = kernel.thread.x;\n    const y = height - kernel.thread.y - 1;\n\n    const index = x + y * width;\n\n    kernel._colorData[index * 4 + 0] = r;\n    kernel._colorData[index * 4 + 1] = g;\n    kernel._colorData[index * 4 + 2] = b;\n    kernel._colorData[index * 4 + 3] = a;\n  };\n\n  const mockMethod = () => kernel;\n  const methods = [\n    'setWarnVarUsage',\n    'setArgumentTypes',\n    'setTactic',\n    'setOptimizeFloatMemory',\n    'setDebug',\n    'setLoopMaxIterations',\n    'setConstantTypes',\n    'setFunctions',\n    'setNativeFunctions',\n    'setInjectedNative',\n    'setPipeline',\n    'setPrecision',\n    'setOutputToTexture',\n    'setImmutable',\n    'setStrictIntegers',\n    'setDynamicOutput',\n    'setHardcodeConstants',\n    'setDynamicArguments',\n    'setUseLegacyEncoder',\n    'setWarnVarUsage',\n    'addSubKernel',\n  ];\n  for (let i = 0; i < methods.length; i++) {\n    kernel[methods[i]] = mockMethod;\n  }\n  return kernel;\n}\n\nfunction setupGraphical(kernel) {\n  const {x, y} = kernel.output;\n  if (kernel.context && kernel.context.createImageData) {\n    const data = new Uint8ClampedArray(x * y * 4);\n    kernel._imageData = kernel.context.createImageData(x, y);\n    kernel._colorData = data;\n  } else {\n    const data = new Uint8ClampedArray(x * y * 4);\n    kernel._imageData = { data };\n    kernel._colorData = data;\n  }\n}\n\nfunction setupOutput(output) {\n  let result = null;\n  if (output.length) {\n    if (output.length === 3) {\n      const [x,y,z] = output;\n      result = { x, y, z };\n    } else if (output.length === 2) {\n      const [x,y] = output;\n      result = { x, y };\n    } else {\n      const [x] = output;\n      result = { x };\n    }\n  } else {\n    result = output;\n  }\n  return result;\n}\n\nfunction gpuMock(fn, settings = {}) {\n  const output = settings.output ? setupOutput(settings.output) : null;\n  function kernel() {\n    if (kernel.output.z) {\n      return mock3D.apply(kernel, arguments);\n    } else if (kernel.output.y) {\n      if (kernel.graphical) {\n        return mock2DGraphical.apply(kernel, arguments);\n      }\n      return mock2D.apply(kernel, arguments);\n    } else {\n      return mock1D.apply(kernel, arguments);\n    }\n  }\n  kernel._fn = fn;\n  kernel.constants = settings.constants || null;\n  kernel.context = settings.context || null;\n  kernel.canvas = settings.canvas || null;\n  kernel.graphical = settings.graphical || false;\n  kernel._imageData = null;\n  kernel._colorData = null;\n  kernel.output = output;\n  kernel.thread = {\n    x: 0,\n    y: 0,\n    z: 0\n  };\n  return apiDecorate(kernel);\n}\n\nfunction flipPixels(pixels, width, height) {\n  const halfHeight = height / 2 | 0; \n  const bytesPerRow = width * 4;\n  const temp = new Uint8ClampedArray(width * 4);\n  const result = pixels.slice(0);\n  for (let y = 0; y < halfHeight; ++y) {\n    const topOffset = y * bytesPerRow;\n    const bottomOffset = (height - y - 1) * bytesPerRow;\n\n    temp.set(result.subarray(topOffset, topOffset + bytesPerRow));\n\n    result.copyWithin(topOffset, bottomOffset, bottomOffset + bytesPerRow);\n\n    result.set(temp, bottomOffset);\n  }\n  return result;\n}\n\nmodule.exports = {\n  gpuMock\n};\n\n},{}],5:[function(require,module,exports){\nconst { utils } = require('./utils');\n\nfunction alias(name, source) {\n  const fnString = source.toString();\n  return new Function(`return function ${ name } (${ utils.getArgumentNamesFromString(fnString).join(', ') }) {\n  ${ utils.getFunctionBodyFromString(fnString) }\n}`)();\n}\n\nmodule.exports = {\n  alias\n};\n},{\"./utils\":114}],6:[function(require,module,exports){\nconst { FunctionNode } = require('../function-node');\n\nclass CPUFunctionNode extends FunctionNode {\n  astFunction(ast, retArr) {\n\n    if (!this.isRootKernel) {\n      retArr.push('function');\n      retArr.push(' ');\n      retArr.push(this.name);\n      retArr.push('(');\n\n      for (let i = 0; i < this.argumentNames.length; ++i) {\n        const argumentName = this.argumentNames[i];\n\n        if (i > 0) {\n          retArr.push(', ');\n        }\n        retArr.push('user_');\n        retArr.push(argumentName);\n      }\n\n      retArr.push(') {\\n');\n    }\n\n    for (let i = 0; i < ast.body.body.length; ++i) {\n      this.astGeneric(ast.body.body[i], retArr);\n      retArr.push('\\n');\n    }\n\n    if (!this.isRootKernel) {\n      retArr.push('}\\n');\n    }\n    return retArr;\n  }\n\n  astReturnStatement(ast, retArr) {\n    const type = this.returnType || this.getType(ast.argument);\n\n    if (!this.returnType) {\n      this.returnType = type;\n    }\n\n    if (this.isRootKernel) {\n      retArr.push(this.leadingReturnStatement);\n      this.astGeneric(ast.argument, retArr);\n      retArr.push(';\\n');\n      retArr.push(this.followingReturnStatement);\n      retArr.push('continue;\\n');\n    } else if (this.isSubKernel) {\n      retArr.push(`subKernelResult_${ this.name } = `);\n      this.astGeneric(ast.argument, retArr);\n      retArr.push(';');\n      retArr.push(`return subKernelResult_${ this.name };`);\n    } else {\n      retArr.push('return ');\n      this.astGeneric(ast.argument, retArr);\n      retArr.push(';');\n    }\n    return retArr;\n  }\n\n  astLiteral(ast, retArr) {\n\n    if (isNaN(ast.value)) {\n      throw this.astErrorOutput(\n        'Non-numeric literal not supported : ' + ast.value,\n        ast\n      );\n    }\n\n    retArr.push(ast.value);\n\n    return retArr;\n  }\n\n  astBinaryExpression(ast, retArr) {\n    retArr.push('(');\n    this.astGeneric(ast.left, retArr);\n    retArr.push(ast.operator);\n    this.astGeneric(ast.right, retArr);\n    retArr.push(')');\n    return retArr;\n  }\n\n  astIdentifierExpression(idtNode, retArr) {\n    if (idtNode.type !== 'Identifier') {\n      throw this.astErrorOutput(\n        'IdentifierExpression - not an Identifier',\n        idtNode\n      );\n    }\n\n    switch (idtNode.name) {\n      case 'Infinity':\n        retArr.push('Infinity');\n        break;\n      default:\n        if (this.constants && this.constants.hasOwnProperty(idtNode.name)) {\n          retArr.push('constants_' + idtNode.name);\n        } else {\n          retArr.push('user_' + idtNode.name);\n        }\n    }\n\n    return retArr;\n  }\n\n  astForStatement(forNode, retArr) {\n    if (forNode.type !== 'ForStatement') {\n      throw this.astErrorOutput('Invalid for statement', forNode);\n    }\n\n    const initArr = [];\n    const testArr = [];\n    const updateArr = [];\n    const bodyArr = [];\n    let isSafe = null;\n\n    if (forNode.init) {\n      this.pushState('in-for-loop-init');\n      this.astGeneric(forNode.init, initArr);\n      for (let i = 0; i < initArr.length; i++) {\n        if (initArr[i].includes && initArr[i].includes(',')) {\n          isSafe = false;\n        }\n      }\n      this.popState('in-for-loop-init');\n    } else {\n      isSafe = false;\n    }\n\n    if (forNode.test) {\n      this.astGeneric(forNode.test, testArr);\n    } else {\n      isSafe = false;\n    }\n\n    if (forNode.update) {\n      this.astGeneric(forNode.update, updateArr);\n    } else {\n      isSafe = false;\n    }\n\n    if (forNode.body) {\n      this.pushState('loop-body');\n      this.astGeneric(forNode.body, bodyArr);\n      this.popState('loop-body');\n    }\n\n    if (isSafe === null) {\n      isSafe = this.isSafe(forNode.init) && this.isSafe(forNode.test);\n    }\n\n    if (isSafe) {\n      retArr.push(`for (${initArr.join('')};${testArr.join('')};${updateArr.join('')}){\\n`);\n      retArr.push(bodyArr.join(''));\n      retArr.push('}\\n');\n    } else {\n      const iVariableName = this.getInternalVariableName('safeI');\n      if (initArr.length > 0) {\n        retArr.push(initArr.join(''), ';\\n');\n      }\n      retArr.push(`for (let ${iVariableName}=0;${iVariableName}<LOOP_MAX;${iVariableName}++){\\n`);\n      if (testArr.length > 0) {\n        retArr.push(`if (!${testArr.join('')}) break;\\n`);\n      }\n      retArr.push(bodyArr.join(''));\n      retArr.push(`\\n${updateArr.join('')};`);\n      retArr.push('}\\n');\n    }\n    return retArr;\n  }\n\n  astWhileStatement(whileNode, retArr) {\n    if (whileNode.type !== 'WhileStatement') {\n      throw this.astErrorOutput(\n        'Invalid while statement',\n        whileNode\n      );\n    }\n\n    retArr.push('for (let i = 0; i < LOOP_MAX; i++) {');\n    retArr.push('if (');\n    this.astGeneric(whileNode.test, retArr);\n    retArr.push(') {\\n');\n    this.astGeneric(whileNode.body, retArr);\n    retArr.push('} else {\\n');\n    retArr.push('break;\\n');\n    retArr.push('}\\n');\n    retArr.push('}\\n');\n\n    return retArr;\n  }\n\n  astDoWhileStatement(doWhileNode, retArr) {\n    if (doWhileNode.type !== 'DoWhileStatement') {\n      throw this.astErrorOutput(\n        'Invalid while statement',\n        doWhileNode\n      );\n    }\n\n    retArr.push('for (let i = 0; i < LOOP_MAX; i++) {');\n    this.astGeneric(doWhileNode.body, retArr);\n    retArr.push('if (!');\n    this.astGeneric(doWhileNode.test, retArr);\n    retArr.push(') {\\n');\n    retArr.push('break;\\n');\n    retArr.push('}\\n');\n    retArr.push('}\\n');\n\n    return retArr;\n\n  }\n\n  astAssignmentExpression(assNode, retArr) {\n    const declaration = this.getDeclaration(assNode.left);\n    if (declaration && !declaration.assignable) {\n      throw this.astErrorOutput(`Variable ${assNode.left.name} is not assignable here`, assNode);\n    }\n    this.astGeneric(assNode.left, retArr);\n    retArr.push(assNode.operator);\n    this.astGeneric(assNode.right, retArr);\n    return retArr;\n  }\n\n  astBlockStatement(bNode, retArr) {\n    if (this.isState('loop-body')) {\n      this.pushState('block-body'); \n      for (let i = 0; i < bNode.body.length; i++) {\n        this.astGeneric(bNode.body[i], retArr);\n      }\n      this.popState('block-body');\n    } else {\n      retArr.push('{\\n');\n      for (let i = 0; i < bNode.body.length; i++) {\n        this.astGeneric(bNode.body[i], retArr);\n      }\n      retArr.push('}\\n');\n    }\n    return retArr;\n  }\n\n  astVariableDeclaration(varDecNode, retArr) {\n    retArr.push(`${varDecNode.kind} `);\n    const { declarations } = varDecNode;\n    for (let i = 0; i < declarations.length; i++) {\n      if (i > 0) {\n        retArr.push(',');\n      }\n      const declaration = declarations[i];\n      const info = this.getDeclaration(declaration.id);\n      if (!info.valueType) {\n        info.valueType = this.getType(declaration.init);\n      }\n      this.astGeneric(declaration, retArr);\n    }\n    if (!this.isState('in-for-loop-init')) {\n      retArr.push(';');\n    }\n    return retArr;\n  }\n\n  astIfStatement(ifNode, retArr) {\n    retArr.push('if (');\n    this.astGeneric(ifNode.test, retArr);\n    retArr.push(')');\n    if (ifNode.consequent.type === 'BlockStatement') {\n      this.astGeneric(ifNode.consequent, retArr);\n    } else {\n      retArr.push(' {\\n');\n      this.astGeneric(ifNode.consequent, retArr);\n      retArr.push('\\n}\\n');\n    }\n\n    if (ifNode.alternate) {\n      retArr.push('else ');\n      if (ifNode.alternate.type === 'BlockStatement' || ifNode.alternate.type === 'IfStatement') {\n        this.astGeneric(ifNode.alternate, retArr);\n      } else {\n        retArr.push(' {\\n');\n        this.astGeneric(ifNode.alternate, retArr);\n        retArr.push('\\n}\\n');\n      }\n    }\n    return retArr;\n\n  }\n\n  astSwitchStatement(ast, retArr) {\n    const { discriminant, cases } = ast;\n    retArr.push('switch (');\n    this.astGeneric(discriminant, retArr);\n    retArr.push(') {\\n');\n    for (let i = 0; i < cases.length; i++) {\n      if (cases[i].test === null) {\n        retArr.push('default:\\n');\n        this.astGeneric(cases[i].consequent, retArr);\n        if (cases[i].consequent && cases[i].consequent.length > 0) {\n          retArr.push('break;\\n');\n        }\n        continue;\n      }\n      retArr.push('case ');\n      this.astGeneric(cases[i].test, retArr);\n      retArr.push(':\\n');\n      if (cases[i].consequent && cases[i].consequent.length > 0) {\n        this.astGeneric(cases[i].consequent, retArr);\n        retArr.push('break;\\n');\n      }\n    }\n    retArr.push('\\n}');\n  }\n\n  astThisExpression(tNode, retArr) {\n    retArr.push('_this');\n    return retArr;\n  }\n\n  astMemberExpression(mNode, retArr) {\n    const {\n      signature,\n      type,\n      property,\n      xProperty,\n      yProperty,\n      zProperty,\n      name,\n      origin\n    } = this.getMemberExpressionDetails(mNode);\n    switch (signature) {\n      case 'this.thread.value':\n        retArr.push(`_this.thread.${ name }`);\n        return retArr;\n      case 'this.output.value':\n        switch (name) {\n          case 'x':\n            retArr.push('outputX');\n            break;\n          case 'y':\n            retArr.push('outputY');\n            break;\n          case 'z':\n            retArr.push('outputZ');\n            break;\n          default:\n            throw this.astErrorOutput('Unexpected expression', mNode);\n        }\n        return retArr;\n      case 'value':\n        throw this.astErrorOutput('Unexpected expression', mNode);\n      case 'value[]':\n      case 'value[][]':\n      case 'value[][][]':\n      case 'value.value':\n        if (origin === 'Math') {\n          retArr.push(Math[name]);\n          return retArr;\n        }\n        switch (property) {\n          case 'r':\n            retArr.push(`user_${ name }[0]`);\n            return retArr;\n          case 'g':\n            retArr.push(`user_${ name }[1]`);\n            return retArr;\n          case 'b':\n            retArr.push(`user_${ name }[2]`);\n            return retArr;\n          case 'a':\n            retArr.push(`user_${ name }[3]`);\n            return retArr;\n        }\n        break;\n      case 'this.constants.value':\n      case 'this.constants.value[]':\n      case 'this.constants.value[][]':\n      case 'this.constants.value[][][]':\n        break;\n      case 'fn()[]':\n        this.astGeneric(mNode.object, retArr);\n        retArr.push('[');\n        this.astGeneric(mNode.property, retArr);\n        retArr.push(']');\n        return retArr;\n      case 'fn()[][]':\n        this.astGeneric(mNode.object.object, retArr);\n        retArr.push('[');\n        this.astGeneric(mNode.object.property, retArr);\n        retArr.push(']');\n        retArr.push('[');\n        this.astGeneric(mNode.property, retArr);\n        retArr.push(']');\n        return retArr;\n      default:\n        throw this.astErrorOutput('Unexpected expression', mNode);\n    }\n\n    if (!mNode.computed) {\n      switch (type) {\n        case 'Number':\n        case 'Integer':\n        case 'Float':\n        case 'Boolean':\n          retArr.push(`${origin}_${name}`);\n          return retArr;\n      }\n    }\n\n    const markupName = `${origin}_${name}`;\n\n    switch (type) {\n      case 'Array(2)':\n      case 'Array(3)':\n      case 'Array(4)':\n      case 'Matrix(2)':\n      case 'Matrix(3)':\n      case 'Matrix(4)':\n      case 'HTMLImageArray':\n      case 'ArrayTexture(1)':\n      case 'ArrayTexture(2)':\n      case 'ArrayTexture(3)':\n      case 'ArrayTexture(4)':\n      case 'HTMLImage':\n      default:\n        let size;\n        let isInput;\n        if (origin === 'constants') {\n          const constant = this.constants[name];\n          isInput = this.constantTypes[name] === 'Input';\n          size = isInput ? constant.size : null;\n        } else {\n          isInput = this.isInput(name);\n          size = isInput ? this.argumentSizes[this.argumentNames.indexOf(name)] : null;\n        }\n        retArr.push(`${ markupName }`);\n        if (zProperty && yProperty) {\n          if (isInput) {\n            retArr.push('[(');\n            this.astGeneric(zProperty, retArr);\n            retArr.push(`*${ this.dynamicArguments ? '(outputY * outputX)' : size[1] * size[0] })+(`);\n            this.astGeneric(yProperty, retArr);\n            retArr.push(`*${ this.dynamicArguments ? 'outputX' : size[0] })+`);\n            this.astGeneric(xProperty, retArr);\n            retArr.push(']');\n          } else {\n            retArr.push('[');\n            this.astGeneric(zProperty, retArr);\n            retArr.push(']');\n            retArr.push('[');\n            this.astGeneric(yProperty, retArr);\n            retArr.push(']');\n            retArr.push('[');\n            this.astGeneric(xProperty, retArr);\n            retArr.push(']');\n          }\n        } else if (yProperty) {\n          if (isInput) {\n            retArr.push('[(');\n            this.astGeneric(yProperty, retArr);\n            retArr.push(`*${ this.dynamicArguments ? 'outputX' : size[0] })+`);\n            this.astGeneric(xProperty, retArr);\n            retArr.push(']');\n          } else {\n            retArr.push('[');\n            this.astGeneric(yProperty, retArr);\n            retArr.push(']');\n            retArr.push('[');\n            this.astGeneric(xProperty, retArr);\n            retArr.push(']');\n          }\n        } else if (typeof xProperty !== 'undefined') {\n          retArr.push('[');\n          this.astGeneric(xProperty, retArr);\n          retArr.push(']');\n        }\n    }\n    return retArr;\n  }\n\n  astCallExpression(ast, retArr) {\n    if (ast.type !== 'CallExpression') {\n      throw this.astErrorOutput('Unknown CallExpression', ast);\n    }\n    let functionName = this.astMemberExpressionUnroll(ast.callee);\n\n    if (this.calledFunctions.indexOf(functionName) < 0) {\n      this.calledFunctions.push(functionName);\n    }\n\n    const isMathFunction = this.isAstMathFunction(ast);\n\n    if (this.onFunctionCall) {\n      this.onFunctionCall(this.name, functionName, ast.arguments);\n    }\n\n    retArr.push(functionName);\n\n    retArr.push('(');\n    const targetTypes = this.lookupFunctionArgumentTypes(functionName) || [];\n    for (let i = 0; i < ast.arguments.length; ++i) {\n      const argument = ast.arguments[i];\n\n      let argumentType = this.getType(argument);\n      if (!targetTypes[i]) {\n        this.triggerImplyArgumentType(functionName, i, argumentType, this);\n      }\n\n      if (i > 0) {\n        retArr.push(', ');\n      }\n      this.astGeneric(argument, retArr);\n    }\n    retArr.push(')');\n\n    return retArr;\n  }\n\n  astArrayExpression(arrNode, retArr) {\n    const returnType = this.getType(arrNode);\n    const arrLen = arrNode.elements.length;\n    const elements = [];\n    for (let i = 0; i < arrLen; ++i) {\n      const element = [];\n      this.astGeneric(arrNode.elements[i], element);\n      elements.push(element.join(''));\n    }\n    switch (returnType) {\n      case 'Matrix(2)':\n      case 'Matrix(3)':\n      case 'Matrix(4)':\n        retArr.push(`[${elements.join(', ')}]`);\n        break;\n      default:\n        retArr.push(`new Float32Array([${elements.join(', ')}])`);\n    }\n    return retArr;\n  }\n\n  astDebuggerStatement(arrNode, retArr) {\n    retArr.push('debugger;');\n    return retArr;\n  }\n}\n\nmodule.exports = {\n  CPUFunctionNode\n};\n},{\"../function-node\":10}],7:[function(require,module,exports){\nconst { utils } = require('../../utils');\n\nfunction constantsToString(constants, types) {\n  const results = [];\n  for (const name in types) {\n    if (!types.hasOwnProperty(name)) continue;\n    const type = types[name];\n    const constant = constants[name];\n    switch (type) {\n      case 'Number':\n      case 'Integer':\n      case 'Float':\n      case 'Boolean':\n        results.push(`${name}:${constant}`);\n        break;\n      case 'Array(2)':\n      case 'Array(3)':\n      case 'Array(4)':\n      case 'Matrix(2)':\n      case 'Matrix(3)':\n      case 'Matrix(4)':\n        results.push(`${name}:new ${constant.constructor.name}(${JSON.stringify(Array.from(constant))})`);\n        break;\n    }\n  }\n  return `{ ${ results.join() } }`;\n}\n\nfunction cpuKernelString(cpuKernel, name) {\n  const header = [];\n  const thisProperties = [];\n  const beforeReturn = [];\n\n  const useFunctionKeyword = !/^function/.test(cpuKernel.color.toString());\n\n  header.push(\n    '  const { context, canvas, constants: incomingConstants } = settings;',\n    `  const output = new Int32Array(${JSON.stringify(Array.from(cpuKernel.output))});`,\n    `  const _constantTypes = ${JSON.stringify(cpuKernel.constantTypes)};`,\n    `  const _constants = ${constantsToString(cpuKernel.constants, cpuKernel.constantTypes)};`\n  );\n\n  thisProperties.push(\n    '    constants: _constants,',\n    '    context,',\n    '    output,',\n    '    thread: {x: 0, y: 0, z: 0},'\n  );\n\n  if (cpuKernel.graphical) {\n    header.push(`  const _imageData = context.createImageData(${cpuKernel.output[0]}, ${cpuKernel.output[1]});`);\n    header.push(`  const _colorData = new Uint8ClampedArray(${cpuKernel.output[0]} * ${cpuKernel.output[1]} * 4);`);\n\n    const colorFn = utils.flattenFunctionToString((useFunctionKeyword ? 'function ' : '') + cpuKernel.color.toString(), {\n      thisLookup: (propertyName) => {\n        switch (propertyName) {\n          case '_colorData':\n            return '_colorData';\n          case '_imageData':\n            return '_imageData';\n          case 'output':\n            return 'output';\n          case 'thread':\n            return 'this.thread';\n        }\n        return JSON.stringify(cpuKernel[propertyName]);\n      },\n      findDependency: (object, name) => {\n        return null;\n      }\n    });\n\n    const getPixelsFn = utils.flattenFunctionToString((useFunctionKeyword ? 'function ' : '') + cpuKernel.getPixels.toString(), {\n      thisLookup: (propertyName) => {\n        switch (propertyName) {\n          case '_colorData':\n            return '_colorData';\n          case '_imageData':\n            return '_imageData';\n          case 'output':\n            return 'output';\n          case 'thread':\n            return 'this.thread';\n        }\n        return JSON.stringify(cpuKernel[propertyName]);\n      },\n      findDependency: () => {\n        return null;\n      }\n    });\n\n    thisProperties.push(\n      '    _imageData,',\n      '    _colorData,',\n      `    color: ${colorFn},`\n    );\n\n    beforeReturn.push(\n      `  kernel.getPixels = ${getPixelsFn};`\n    );\n  }\n\n  const constantTypes = [];\n  const constantKeys = Object.keys(cpuKernel.constantTypes);\n  for (let i = 0; i < constantKeys.length; i++) {\n    constantTypes.push(cpuKernel.constantTypes[constantKeys]);\n  }\n  if (cpuKernel.argumentTypes.indexOf('HTMLImageArray') !== -1 || constantTypes.indexOf('HTMLImageArray') !== -1) {\n    const flattenedImageTo3DArray = utils.flattenFunctionToString((useFunctionKeyword ? 'function ' : '') + cpuKernel._imageTo3DArray.toString(), {\n      doNotDefine: ['canvas'],\n      findDependency: (object, name) => {\n        if (object === 'this') {\n          return (useFunctionKeyword ? 'function ' : '') + cpuKernel[name].toString();\n        }\n        return null;\n      },\n      thisLookup: (propertyName) => {\n        switch (propertyName) {\n          case 'canvas':\n            return;\n          case 'context':\n            return 'context';\n        }\n      }\n    });\n    beforeReturn.push(flattenedImageTo3DArray);\n    thisProperties.push(`    _mediaTo2DArray,`);\n    thisProperties.push(`    _imageTo3DArray,`);\n  } else if (cpuKernel.argumentTypes.indexOf('HTMLImage') !== -1 || constantTypes.indexOf('HTMLImage') !== -1) {\n    const flattenedImageTo2DArray = utils.flattenFunctionToString((useFunctionKeyword ? 'function ' : '') + cpuKernel._mediaTo2DArray.toString(), {\n      findDependency: (object, name) => {\n        return null;\n      },\n      thisLookup: (propertyName) => {\n        switch (propertyName) {\n          case 'canvas':\n            return 'settings.canvas';\n          case 'context':\n            return 'settings.context';\n        }\n        throw new Error('unhandled thisLookup');\n      }\n    });\n    beforeReturn.push(flattenedImageTo2DArray);\n    thisProperties.push(`    _mediaTo2DArray,`);\n  }\n\n  return `function(settings) {\n${ header.join('\\n') }\n  for (const p in _constantTypes) {\n    if (!_constantTypes.hasOwnProperty(p)) continue;\n    const type = _constantTypes[p];\n    switch (type) {\n      case 'Number':\n      case 'Integer':\n      case 'Float':\n      case 'Boolean':\n      case 'Array(2)':\n      case 'Array(3)':\n      case 'Array(4)':\n      case 'Matrix(2)':\n      case 'Matrix(3)':\n      case 'Matrix(4)':\n        if (incomingConstants.hasOwnProperty(p)) {\n          console.warn('constant ' + p + ' of type ' + type + ' cannot be resigned');\n        }\n        continue;\n    }\n    if (!incomingConstants.hasOwnProperty(p)) {\n      throw new Error('constant ' + p + ' not found');\n    }\n    _constants[p] = incomingConstants[p];\n  }\n  const kernel = (function() {\n${cpuKernel._kernelString}\n  })\n    .apply({ ${thisProperties.join('\\n')} });\n  ${ beforeReturn.join('\\n') }\n  return kernel;\n}`;\n}\n\nmodule.exports = {\n  cpuKernelString\n};\n},{\"../../utils\":114}],8:[function(require,module,exports){\nconst { Kernel } = require('../kernel');\nconst { FunctionBuilder } = require('../function-builder');\nconst { CPUFunctionNode } = require('./function-node');\nconst { utils } = require('../../utils');\nconst { cpuKernelString } = require('./kernel-string');\n\nclass CPUKernel extends Kernel {\n  static getFeatures() {\n    return this.features;\n  }\n  static get features() {\n    return Object.freeze({\n      kernelMap: true,\n      isIntegerDivisionAccurate: true\n    });\n  }\n  static get isSupported() {\n    return true;\n  }\n  static isContextMatch(context) {\n    return false;\n  }\n  static get mode() {\n    return 'cpu';\n  }\n\n  static nativeFunctionArguments() {\n    return null;\n  }\n\n  static nativeFunctionReturnType() {\n    throw new Error(`Looking up native function return type not supported on ${this.name}`);\n  }\n\n  static combineKernels(combinedKernel) {\n    return combinedKernel;\n  }\n\n  static getSignature(kernel, argumentTypes) {\n    return 'cpu' + (argumentTypes.length > 0 ? ':' + argumentTypes.join(',') : '');\n  }\n\n  constructor(source, settings) {\n    super(source, settings);\n    this.mergeSettings(source.settings || settings);\n\n    this._imageData = null;\n    this._colorData = null;\n    this._kernelString = null;\n    this._prependedString = [];\n    this.thread = {\n      x: 0,\n      y: 0,\n      z: 0\n    };\n    this.translatedSources = null;\n  }\n\n  initCanvas() {\n    if (typeof document !== 'undefined') {\n      return document.createElement('canvas');\n    } else if (typeof OffscreenCanvas !== 'undefined') {\n      return new OffscreenCanvas(0, 0);\n    }\n  }\n\n  initContext() {\n    if (!this.canvas) return null;\n    return this.canvas.getContext('2d');\n  }\n\n  initPlugins(settings) {\n    return [];\n  }\n\n  validateSettings(args) {\n    if (!this.output || this.output.length === 0) {\n      if (args.length !== 1) {\n        throw new Error('Auto output only supported for kernels with only one input');\n      }\n\n      const argType = utils.getVariableType(args[0], this.strictIntegers);\n      if (argType === 'Array') {\n        this.output = utils.getDimensions(argType);\n      } else if (argType === 'NumberTexture' || argType === 'ArrayTexture(4)') {\n        this.output = args[0].output;\n      } else {\n        throw new Error('Auto output not supported for input type: ' + argType);\n      }\n    }\n\n    if (this.graphical) {\n      if (this.output.length !== 2) {\n        throw new Error('Output must have 2 dimensions on graphical mode');\n      }\n    }\n\n    this.checkOutput();\n  }\n\n  translateSource() {\n    this.leadingReturnStatement = this.output.length > 1 ? 'resultX[x] = ' : 'result[x] = ';\n    if (this.subKernels) {\n      const followingReturnStatement = [];\n      for (let i = 0; i < this.subKernels.length; i++) {\n        const {\n          name\n        } = this.subKernels[i];\n        followingReturnStatement.push(this.output.length > 1 ? `resultX_${ name }[x] = subKernelResult_${ name };\\n` : `result_${ name }[x] = subKernelResult_${ name };\\n`);\n      }\n      this.followingReturnStatement = followingReturnStatement.join('');\n    }\n    const functionBuilder = FunctionBuilder.fromKernel(this, CPUFunctionNode);\n    this.translatedSources = functionBuilder.getPrototypes('kernel');\n    if (!this.graphical && !this.returnType) {\n      this.returnType = functionBuilder.getKernelResultType();\n    }\n  }\n\n  build() {\n    if (this.built) return;\n    this.setupConstants();\n    this.setupArguments(arguments);\n    this.validateSettings(arguments);\n    this.translateSource();\n\n    if (this.graphical) {\n      const {\n        canvas,\n        output\n      } = this;\n      if (!canvas) {\n        throw new Error('no canvas available for using graphical output');\n      }\n      const width = output[0];\n      const height = output[1] || 1;\n      canvas.width = width;\n      canvas.height = height;\n      this._imageData = this.context.createImageData(width, height);\n      this._colorData = new Uint8ClampedArray(width * height * 4);\n    }\n\n    const kernelString = this.getKernelString();\n    this.kernelString = kernelString;\n\n    if (this.debug) {\n      console.log('Function output:');\n      console.log(kernelString);\n    }\n\n    try {\n      this.run = new Function([], kernelString).bind(this)();\n    } catch (e) {\n      console.error('An error occurred compiling the javascript: ', e);\n    }\n    this.buildSignature(arguments);\n    this.built = true;\n  }\n\n  color(r, g, b, a) {\n    if (typeof a === 'undefined') {\n      a = 1;\n    }\n\n    r = Math.floor(r * 255);\n    g = Math.floor(g * 255);\n    b = Math.floor(b * 255);\n    a = Math.floor(a * 255);\n\n    const width = this.output[0];\n    const height = this.output[1];\n\n    const x = this.thread.x;\n    const y = height - this.thread.y - 1;\n\n    const index = x + y * width;\n\n    this._colorData[index * 4 + 0] = r;\n    this._colorData[index * 4 + 1] = g;\n    this._colorData[index * 4 + 2] = b;\n    this._colorData[index * 4 + 3] = a;\n  }\n\n  getKernelString() {\n    if (this._kernelString !== null) return this._kernelString;\n\n    let kernelThreadString = null;\n    let {\n      translatedSources\n    } = this;\n    if (translatedSources.length > 1) {\n      translatedSources = translatedSources.filter(fn => {\n        if (/^function/.test(fn)) return fn;\n        kernelThreadString = fn;\n        return false;\n      });\n    } else {\n      kernelThreadString = translatedSources.shift();\n    }\n    return this._kernelString = `  const LOOP_MAX = ${ this._getLoopMaxString() };\n  ${ this.injectedNative || '' }\n  const _this = this;\n  ${ this._resultKernelHeader() }\n  ${ this._processConstants() }\n  return (${ this.argumentNames.map(argumentName => 'user_' + argumentName).join(', ') }) => {\n    ${ this._prependedString.join('') }\n    ${ this._earlyThrows() }\n    ${ this._processArguments() }\n    ${ this.graphical ? this._graphicalKernelBody(kernelThreadString) : this._resultKernelBody(kernelThreadString) }\n    ${ translatedSources.length > 0 ? translatedSources.join('\\n') : '' }\n  };`;\n  }\n\n  toString() {\n    return cpuKernelString(this);\n  }\n\n  _getLoopMaxString() {\n    return (\n      this.loopMaxIterations ?\n      ` ${ parseInt(this.loopMaxIterations) };` :\n      ' 1000;'\n    );\n  }\n\n  _processConstants() {\n    if (!this.constants) return '';\n\n    const result = [];\n    for (let p in this.constants) {\n      const type = this.constantTypes[p];\n      switch (type) {\n        case 'HTMLCanvas':\n        case 'OffscreenCanvas':\n        case 'HTMLImage':\n        case 'ImageBitmap':\n        case 'ImageData':\n        case 'HTMLVideo':\n          result.push(`    const constants_${p} = this._mediaTo2DArray(this.constants.${p});\\n`);\n          break;\n        case 'HTMLImageArray':\n          result.push(`    const constants_${p} = this._imageTo3DArray(this.constants.${p});\\n`);\n          break;\n        case 'Input':\n          result.push(`    const constants_${p} = this.constants.${p}.value;\\n`);\n          break;\n        default:\n          result.push(`    const constants_${p} = this.constants.${p};\\n`);\n      }\n    }\n    return result.join('');\n  }\n\n  _earlyThrows() {\n    if (this.graphical) return '';\n    if (this.immutable) return '';\n    if (!this.pipeline) return '';\n    const arrayArguments = [];\n    for (let i = 0; i < this.argumentTypes.length; i++) {\n      if (this.argumentTypes[i] === 'Array') {\n        arrayArguments.push(this.argumentNames[i]);\n      }\n    }\n    if (arrayArguments.length === 0) return '';\n    const checks = [];\n    for (let i = 0; i < arrayArguments.length; i++) {\n      const argumentName = arrayArguments[i];\n      const checkSubKernels = this._mapSubKernels(subKernel => `user_${argumentName} === result_${subKernel.name}`).join(' || ');\n      checks.push(`user_${argumentName} === result${checkSubKernels ? ` || ${checkSubKernels}` : ''}`);\n    }\n    return `if (${checks.join(' || ')}) throw new Error('Source and destination arrays are the same.  Use immutable = true');`;\n  }\n\n  _processArguments() {\n    const result = [];\n    for (let i = 0; i < this.argumentTypes.length; i++) {\n      const variableName = `user_${this.argumentNames[i]}`;\n      switch (this.argumentTypes[i]) {\n        case 'HTMLCanvas':\n        case 'OffscreenCanvas':\n        case 'HTMLImage':\n        case 'ImageBitmap':\n        case 'ImageData':\n        case 'HTMLVideo':\n          result.push(`    ${variableName} = this._mediaTo2DArray(${variableName});\\n`);\n          break;\n        case 'HTMLImageArray':\n          result.push(`    ${variableName} = this._imageTo3DArray(${variableName});\\n`);\n          break;\n        case 'Input':\n          result.push(`    ${variableName} = ${variableName}.value;\\n`);\n          break;\n        case 'ArrayTexture(1)':\n        case 'ArrayTexture(2)':\n        case 'ArrayTexture(3)':\n        case 'ArrayTexture(4)':\n        case 'NumberTexture':\n        case 'MemoryOptimizedNumberTexture':\n          result.push(`\n    if (${variableName}.toArray) {\n      if (!_this.textureCache) {\n        _this.textureCache = [];\n        _this.arrayCache = [];\n      }\n      const textureIndex = _this.textureCache.indexOf(${variableName});\n      if (textureIndex !== -1) {\n        ${variableName} = _this.arrayCache[textureIndex];\n      } else {\n        _this.textureCache.push(${variableName});\n        ${variableName} = ${variableName}.toArray();\n        _this.arrayCache.push(${variableName});\n      }\n    }`);\n          break;\n      }\n    }\n    return result.join('');\n  }\n\n  _mediaTo2DArray(media) {\n    const canvas = this.canvas;\n    const width = media.width > 0 ? media.width : media.videoWidth;\n    const height = media.height > 0 ? media.height : media.videoHeight;\n    if (canvas.width < width) {\n      canvas.width = width;\n    }\n    if (canvas.height < height) {\n      canvas.height = height;\n    }\n    const ctx = this.context;\n    let pixelsData;\n    if (media.constructor === ImageData) {\n      pixelsData = media.data;\n    } else {\n      ctx.drawImage(media, 0, 0, width, height);\n      pixelsData = ctx.getImageData(0, 0, width, height).data;\n    }\n    const imageArray = new Array(height);\n    let index = 0;\n    for (let y = height - 1; y >= 0; y--) {\n      const row = imageArray[y] = new Array(width);\n      for (let x = 0; x < width; x++) {\n        const pixel = new Float32Array(4);\n        pixel[0] = pixelsData[index++] / 255; \n        pixel[1] = pixelsData[index++] / 255; \n        pixel[2] = pixelsData[index++] / 255; \n        pixel[3] = pixelsData[index++] / 255; \n        row[x] = pixel;\n      }\n    }\n    return imageArray;\n  }\n\n  getPixels(flip) {\n    const [width, height] = this.output;\n    return flip ? utils.flipPixels(this._imageData.data, width, height) : this._imageData.data.slice(0);\n  }\n\n  _imageTo3DArray(images) {\n    const imagesArray = new Array(images.length);\n    for (let i = 0; i < images.length; i++) {\n      imagesArray[i] = this._mediaTo2DArray(images[i]);\n    }\n    return imagesArray;\n  }\n\n  _resultKernelHeader() {\n    if (this.graphical) return '';\n    if (this.immutable) return '';\n    if (!this.pipeline) return '';\n    switch (this.output.length) {\n      case 1:\n        return this._mutableKernel1DResults();\n      case 2:\n        return this._mutableKernel2DResults();\n      case 3:\n        return this._mutableKernel3DResults();\n    }\n  }\n\n  _resultKernelBody(kernelString) {\n    switch (this.output.length) {\n      case 1:\n        return (!this.immutable && this.pipeline ? this._resultMutableKernel1DLoop(kernelString) : this._resultImmutableKernel1DLoop(kernelString)) + this._kernelOutput();\n      case 2:\n        return (!this.immutable && this.pipeline ? this._resultMutableKernel2DLoop(kernelString) : this._resultImmutableKernel2DLoop(kernelString)) + this._kernelOutput();\n      case 3:\n        return (!this.immutable && this.pipeline ? this._resultMutableKernel3DLoop(kernelString) : this._resultImmutableKernel3DLoop(kernelString)) + this._kernelOutput();\n      default:\n        throw new Error('unsupported size kernel');\n    }\n  }\n\n  _graphicalKernelBody(kernelThreadString) {\n    switch (this.output.length) {\n      case 2:\n        return this._graphicalKernel2DLoop(kernelThreadString) + this._graphicalOutput();\n      default:\n        throw new Error('unsupported size kernel');\n    }\n  }\n\n  _graphicalOutput() {\n    return `\n    this._imageData.data.set(this._colorData);\n    this.context.putImageData(this._imageData, 0, 0);\n    return;`\n  }\n\n  _getKernelResultTypeConstructorString() {\n    switch (this.returnType) {\n      case 'LiteralInteger':\n      case 'Number':\n      case 'Integer':\n      case 'Float':\n        return 'Float32Array';\n      case 'Array(2)':\n      case 'Array(3)':\n      case 'Array(4)':\n        return 'Array';\n      default:\n        if (this.graphical) {\n          return 'Float32Array';\n        }\n        throw new Error(`unhandled returnType ${ this.returnType }`);\n    }\n  }\n\n  _resultImmutableKernel1DLoop(kernelString) {\n    const constructorString = this._getKernelResultTypeConstructorString();\n    return `  const outputX = _this.output[0];\n    const result = new ${constructorString}(outputX);\n    ${ this._mapSubKernels(subKernel => `const result_${ subKernel.name } = new ${constructorString}(outputX);\\n`).join('    ') }\n    ${ this._mapSubKernels(subKernel => `let subKernelResult_${ subKernel.name };\\n`).join('    ') }\n    for (let x = 0; x < outputX; x++) {\n      this.thread.x = x;\n      this.thread.y = 0;\n      this.thread.z = 0;\n      ${ kernelString }\n    }`;\n  }\n\n  _mutableKernel1DResults() {\n    const constructorString = this._getKernelResultTypeConstructorString();\n    return `  const outputX = _this.output[0];\n    const result = new ${constructorString}(outputX);\n    ${ this._mapSubKernels(subKernel => `const result_${ subKernel.name } = new ${constructorString}(outputX);\\n`).join('    ') }\n    ${ this._mapSubKernels(subKernel => `let subKernelResult_${ subKernel.name };\\n`).join('    ') }`;\n  }\n\n  _resultMutableKernel1DLoop(kernelString) {\n    return `  const outputX = _this.output[0];\n    for (let x = 0; x < outputX; x++) {\n      this.thread.x = x;\n      this.thread.y = 0;\n      this.thread.z = 0;\n      ${ kernelString }\n    }`;\n  }\n\n  _resultImmutableKernel2DLoop(kernelString) {\n    const constructorString = this._getKernelResultTypeConstructorString();\n    return `  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const result = new Array(outputY);\n    ${ this._mapSubKernels(subKernel => `const result_${ subKernel.name } = new Array(outputY);\\n`).join('    ') }\n    ${ this._mapSubKernels(subKernel => `let subKernelResult_${ subKernel.name };\\n`).join('    ') }\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      const resultX = result[y] = new ${constructorString}(outputX);\n      ${ this._mapSubKernels(subKernel => `const resultX_${ subKernel.name } = result_${subKernel.name}[y] = new ${constructorString}(outputX);\\n`).join('') }\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ${ kernelString }\n      }\n    }`;\n  }\n\n  _mutableKernel2DResults() {\n    const constructorString = this._getKernelResultTypeConstructorString();\n    return `  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const result = new Array(outputY);\n    ${ this._mapSubKernels(subKernel => `const result_${ subKernel.name } = new Array(outputY);\\n`).join('    ') }\n    ${ this._mapSubKernels(subKernel => `let subKernelResult_${ subKernel.name };\\n`).join('    ') }\n    for (let y = 0; y < outputY; y++) {\n      const resultX = result[y] = new ${constructorString}(outputX);\n      ${ this._mapSubKernels(subKernel => `const resultX_${ subKernel.name } = result_${subKernel.name}[y] = new ${constructorString}(outputX);\\n`).join('') }\n    }`;\n  }\n\n  _resultMutableKernel2DLoop(kernelString) {\n    const constructorString = this._getKernelResultTypeConstructorString();\n    return `  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      const resultX = result[y];\n      ${ this._mapSubKernels(subKernel => `const resultX_${ subKernel.name } = result_${subKernel.name}[y] = new ${constructorString}(outputX);\\n`).join('') }\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ${ kernelString }\n      }\n    }`;\n  }\n\n  _graphicalKernel2DLoop(kernelString) {\n    return `  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ${ kernelString }\n      }\n    }`;\n  }\n\n  _resultImmutableKernel3DLoop(kernelString) {\n    const constructorString = this._getKernelResultTypeConstructorString();\n    return `  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    const result = new Array(outputZ);\n    ${ this._mapSubKernels(subKernel => `const result_${ subKernel.name } = new Array(outputZ);\\n`).join('    ') }\n    ${ this._mapSubKernels(subKernel => `let subKernelResult_${ subKernel.name };\\n`).join('    ') }\n    for (let z = 0; z < outputZ; z++) {\n      this.thread.z = z;\n      const resultY = result[z] = new Array(outputY);\n      ${ this._mapSubKernels(subKernel => `const resultY_${ subKernel.name } = result_${subKernel.name}[z] = new Array(outputY);\\n`).join('      ') }\n      for (let y = 0; y < outputY; y++) {\n        this.thread.y = y;\n        const resultX = resultY[y] = new ${constructorString}(outputX);\n        ${ this._mapSubKernels(subKernel => `const resultX_${ subKernel.name } = resultY_${subKernel.name}[y] = new ${constructorString}(outputX);\\n`).join('        ') }\n        for (let x = 0; x < outputX; x++) {\n          this.thread.x = x;\n          ${ kernelString }\n        }\n      }\n    }`;\n  }\n\n  _mutableKernel3DResults() {\n    const constructorString = this._getKernelResultTypeConstructorString();\n    return `  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    const result = new Array(outputZ);\n    ${ this._mapSubKernels(subKernel => `const result_${ subKernel.name } = new Array(outputZ);\\n`).join('    ') }\n    ${ this._mapSubKernels(subKernel => `let subKernelResult_${ subKernel.name };\\n`).join('    ') }\n    for (let z = 0; z < outputZ; z++) {\n      const resultY = result[z] = new Array(outputY);\n      ${ this._mapSubKernels(subKernel => `const resultY_${ subKernel.name } = result_${subKernel.name}[z] = new Array(outputY);\\n`).join('      ') }\n      for (let y = 0; y < outputY; y++) {\n        const resultX = resultY[y] = new ${constructorString}(outputX);\n        ${ this._mapSubKernels(subKernel => `const resultX_${ subKernel.name } = resultY_${subKernel.name}[y] = new ${constructorString}(outputX);\\n`).join('        ') }\n      }\n    }`;\n  }\n\n  _resultMutableKernel3DLoop(kernelString) {\n    return `  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    for (let z = 0; z < outputZ; z++) {\n      this.thread.z = z;\n      const resultY = result[z];\n      for (let y = 0; y < outputY; y++) {\n        this.thread.y = y;\n        const resultX = resultY[y];\n        for (let x = 0; x < outputX; x++) {\n          this.thread.x = x;\n          ${ kernelString }\n        }\n      }\n    }`;\n  }\n\n  _kernelOutput() {\n    if (!this.subKernels) {\n      return '\\n    return result;';\n    }\n    return `\\n    return {\n      result: result,\n      ${ this.subKernels.map(subKernel => `${ subKernel.property }: result_${ subKernel.name }`).join(',\\n      ') }\n    };`;\n  }\n\n  _mapSubKernels(fn) {\n    return this.subKernels === null ? [''] :\n      this.subKernels.map(fn);\n  }\n\n  destroy(removeCanvasReference) {\n    if (removeCanvasReference) {\n      delete this.canvas;\n    }\n  }\n\n  static destroyContext(context) {}\n\n  toJSON() {\n    const json = super.toJSON();\n    json.functionNodes = FunctionBuilder.fromKernel(this, CPUFunctionNode).toJSON();\n    return json;\n  }\n\n  setOutput(output) {\n    super.setOutput(output);\n    const [width, height] = this.output;\n    if (this.graphical) {\n      this._imageData = this.context.createImageData(width, height);\n      this._colorData = new Uint8ClampedArray(width * height * 4);\n    }\n  }\n\n  prependString(value) {\n    if (this._kernelString) throw new Error('Kernel already built');\n    this._prependedString.push(value);\n  }\n\n  hasPrependString(value) {\n    return this._prependedString.indexOf(value) > -1;\n  }\n}\n\nmodule.exports = {\n  CPUKernel\n};\n},{\"../../utils\":114,\"../function-builder\":9,\"../kernel\":36,\"./function-node\":6,\"./kernel-string\":7}],9:[function(require,module,exports){\nclass FunctionBuilder {\n  static fromKernel(kernel, FunctionNode, extraNodeOptions) {\n    const {\n      kernelArguments,\n      kernelConstants,\n      argumentNames,\n      argumentSizes,\n      argumentBitRatios,\n      constants,\n      constantBitRatios,\n      debug,\n      loopMaxIterations,\n      nativeFunctions,\n      output,\n      optimizeFloatMemory,\n      precision,\n      plugins,\n      source,\n      subKernels,\n      functions,\n      leadingReturnStatement,\n      followingReturnStatement,\n      dynamicArguments,\n      dynamicOutput,\n    } = kernel;\n\n    const argumentTypes = new Array(kernelArguments.length);\n    const constantTypes = {};\n\n    for (let i = 0; i < kernelArguments.length; i++) {\n      argumentTypes[i] = kernelArguments[i].type;\n    }\n\n    for (let i = 0; i < kernelConstants.length; i++) {\n      const kernelConstant = kernelConstants[i];\n      constantTypes[kernelConstant.name] = kernelConstant.type;\n    }\n\n    const needsArgumentType = (functionName, index) => {\n      return functionBuilder.needsArgumentType(functionName, index);\n    };\n\n    const assignArgumentType = (functionName, index, type) => {\n      functionBuilder.assignArgumentType(functionName, index, type);\n    };\n\n    const lookupReturnType = (functionName, ast, requestingNode) => {\n      return functionBuilder.lookupReturnType(functionName, ast, requestingNode);\n    };\n\n    const lookupFunctionArgumentTypes = (functionName) => {\n      return functionBuilder.lookupFunctionArgumentTypes(functionName);\n    };\n\n    const lookupFunctionArgumentName = (functionName, argumentIndex) => {\n      return functionBuilder.lookupFunctionArgumentName(functionName, argumentIndex);\n    };\n\n    const lookupFunctionArgumentBitRatio = (functionName, argumentName) => {\n      return functionBuilder.lookupFunctionArgumentBitRatio(functionName, argumentName);\n    };\n\n    const triggerImplyArgumentType = (functionName, i, argumentType, requestingNode) => {\n      functionBuilder.assignArgumentType(functionName, i, argumentType, requestingNode);\n    };\n\n    const triggerImplyArgumentBitRatio = (functionName, argumentName, calleeFunctionName, argumentIndex) => {\n      functionBuilder.assignArgumentBitRatio(functionName, argumentName, calleeFunctionName, argumentIndex);\n    };\n\n    const onFunctionCall = (functionName, calleeFunctionName, args) => {\n      functionBuilder.trackFunctionCall(functionName, calleeFunctionName, args);\n    };\n\n    const onNestedFunction = (ast, source) => {\n      const argumentNames = [];\n      for (let i = 0; i < ast.params.length; i++) {\n        argumentNames.push(ast.params[i].name);\n      }\n      const nestedFunction = new FunctionNode(source, Object.assign({}, nodeOptions, {\n        returnType: null,\n        ast,\n        name: ast.id.name,\n        argumentNames,\n        lookupReturnType,\n        lookupFunctionArgumentTypes,\n        lookupFunctionArgumentName,\n        lookupFunctionArgumentBitRatio,\n        needsArgumentType,\n        assignArgumentType,\n        triggerImplyArgumentType,\n        triggerImplyArgumentBitRatio,\n        onFunctionCall,\n      }));\n      nestedFunction.traceFunctionAST(ast);\n      functionBuilder.addFunctionNode(nestedFunction);\n    };\n\n    const nodeOptions = Object.assign({\n      isRootKernel: false,\n      onNestedFunction,\n      lookupReturnType,\n      lookupFunctionArgumentTypes,\n      lookupFunctionArgumentName,\n      lookupFunctionArgumentBitRatio,\n      needsArgumentType,\n      assignArgumentType,\n      triggerImplyArgumentType,\n      triggerImplyArgumentBitRatio,\n      onFunctionCall,\n      optimizeFloatMemory,\n      precision,\n      constants,\n      constantTypes,\n      constantBitRatios,\n      debug,\n      loopMaxIterations,\n      output,\n      plugins,\n      dynamicArguments,\n      dynamicOutput,\n    }, extraNodeOptions || {});\n\n    const rootNodeOptions = Object.assign({}, nodeOptions, {\n      isRootKernel: true,\n      name: 'kernel',\n      argumentNames,\n      argumentTypes,\n      argumentSizes,\n      argumentBitRatios,\n      leadingReturnStatement,\n      followingReturnStatement,\n    });\n\n    if (typeof source === 'object' && source.functionNodes) {\n      return new FunctionBuilder().fromJSON(source.functionNodes, FunctionNode);\n    }\n\n    const rootNode = new FunctionNode(source, rootNodeOptions);\n\n    let functionNodes = null;\n    if (functions) {\n      functionNodes = functions.map((fn) => new FunctionNode(fn.source, {\n        returnType: fn.returnType,\n        argumentTypes: fn.argumentTypes,\n        output,\n        plugins,\n        constants,\n        constantTypes,\n        constantBitRatios,\n        optimizeFloatMemory,\n        precision,\n        lookupReturnType,\n        lookupFunctionArgumentTypes,\n        lookupFunctionArgumentName,\n        lookupFunctionArgumentBitRatio,\n        needsArgumentType,\n        assignArgumentType,\n        triggerImplyArgumentType,\n        triggerImplyArgumentBitRatio,\n        onFunctionCall,\n        onNestedFunction,\n      }));\n    }\n\n    let subKernelNodes = null;\n    if (subKernels) {\n      subKernelNodes = subKernels.map((subKernel) => {\n        const { name, source } = subKernel;\n        return new FunctionNode(source, Object.assign({}, nodeOptions, {\n          name,\n          isSubKernel: true,\n          isRootKernel: false,\n        }));\n      });\n    }\n\n    const functionBuilder = new FunctionBuilder({\n      kernel,\n      rootNode,\n      functionNodes,\n      nativeFunctions,\n      subKernelNodes\n    });\n\n    return functionBuilder;\n  }\n\n  constructor(settings) {\n    settings = settings || {};\n    this.kernel = settings.kernel;\n    this.rootNode = settings.rootNode;\n    this.functionNodes = settings.functionNodes || [];\n    this.subKernelNodes = settings.subKernelNodes || [];\n    this.nativeFunctions = settings.nativeFunctions || [];\n    this.functionMap = {};\n    this.nativeFunctionNames = [];\n    this.lookupChain = [];\n    this.functionNodeDependencies = {};\n    this.functionCalls = {};\n\n    if (this.rootNode) {\n      this.functionMap['kernel'] = this.rootNode;\n    }\n\n    if (this.functionNodes) {\n      for (let i = 0; i < this.functionNodes.length; i++) {\n        this.functionMap[this.functionNodes[i].name] = this.functionNodes[i];\n      }\n    }\n\n    if (this.subKernelNodes) {\n      for (let i = 0; i < this.subKernelNodes.length; i++) {\n        this.functionMap[this.subKernelNodes[i].name] = this.subKernelNodes[i];\n      }\n    }\n\n    if (this.nativeFunctions) {\n      for (let i = 0; i < this.nativeFunctions.length; i++) {\n        const nativeFunction = this.nativeFunctions[i];\n        this.nativeFunctionNames.push(nativeFunction.name);\n      }\n    }\n  }\n\n  addFunctionNode(functionNode) {\n    if (!functionNode.name) throw new Error('functionNode.name needs set');\n    this.functionMap[functionNode.name] = functionNode;\n    if (functionNode.isRootKernel) {\n      this.rootNode = functionNode;\n    }\n  }\n\n  traceFunctionCalls(functionName, retList) {\n    functionName = functionName || 'kernel';\n    retList = retList || [];\n\n    if (this.nativeFunctionNames.indexOf(functionName) > -1) {\n      const nativeFunctionIndex = retList.indexOf(functionName);\n      if (nativeFunctionIndex === -1) {\n        retList.push(functionName);\n      } else {\n        const dependantNativeFunctionName = retList.splice(nativeFunctionIndex, 1)[0];\n        retList.push(dependantNativeFunctionName);\n      }\n      return retList;\n    }\n\n    const functionNode = this.functionMap[functionName];\n    if (functionNode) {\n      const functionIndex = retList.indexOf(functionName);\n      if (functionIndex === -1) {\n        retList.push(functionName);\n        functionNode.toString(); \n        for (let i = 0; i < functionNode.calledFunctions.length; ++i) {\n          this.traceFunctionCalls(functionNode.calledFunctions[i], retList);\n        }\n      } else {\n        const dependantFunctionName = retList.splice(functionIndex, 1)[0];\n        retList.push(dependantFunctionName);\n      }\n    }\n\n    return retList;\n  }\n\n  getPrototypeString(functionName) {\n    return this.getPrototypes(functionName).join('\\n');\n  }\n\n  getPrototypes(functionName) {\n    if (this.rootNode) {\n      this.rootNode.toString();\n    }\n    if (functionName) {\n      return this.getPrototypesFromFunctionNames(this.traceFunctionCalls(functionName, []).reverse());\n    }\n    return this.getPrototypesFromFunctionNames(Object.keys(this.functionMap));\n  }\n\n  getStringFromFunctionNames(functionList) {\n    const ret = [];\n    for (let i = 0; i < functionList.length; ++i) {\n      const node = this.functionMap[functionList[i]];\n      if (node) {\n        ret.push(this.functionMap[functionList[i]].toString());\n      }\n    }\n    return ret.join('\\n');\n  }\n\n  getPrototypesFromFunctionNames(functionList) {\n    const ret = [];\n    for (let i = 0; i < functionList.length; ++i) {\n      const functionName = functionList[i];\n      const functionIndex = this.nativeFunctionNames.indexOf(functionName);\n      if (functionIndex > -1) {\n        ret.push(this.nativeFunctions[functionIndex].source);\n        continue;\n      }\n      const node = this.functionMap[functionName];\n      if (node) {\n        ret.push(node.toString());\n      }\n    }\n    return ret;\n  }\n\n  toJSON() {\n    return this.traceFunctionCalls(this.rootNode.name).reverse().map(name => {\n      const nativeIndex = this.nativeFunctions.indexOf(name);\n      if (nativeIndex > -1) {\n        return {\n          name,\n          source: this.nativeFunctions[nativeIndex].source\n        };\n      } else if (this.functionMap[name]) {\n        return this.functionMap[name].toJSON();\n      } else {\n        throw new Error(`function ${ name } not found`);\n      }\n    });\n  }\n\n  fromJSON(jsonFunctionNodes, FunctionNode) {\n    this.functionMap = {};\n    for (let i = 0; i < jsonFunctionNodes.length; i++) {\n      const jsonFunctionNode = jsonFunctionNodes[i];\n      this.functionMap[jsonFunctionNode.settings.name] = new FunctionNode(jsonFunctionNode.ast, jsonFunctionNode.settings);\n    }\n    return this;\n  }\n\n  getString(functionName) {\n    if (functionName) {\n      return this.getStringFromFunctionNames(this.traceFunctionCalls(functionName).reverse());\n    }\n    return this.getStringFromFunctionNames(Object.keys(this.functionMap));\n  }\n\n  lookupReturnType(functionName, ast, requestingNode) {\n    if (ast.type !== 'CallExpression') {\n      throw new Error(`expected ast type of \"CallExpression\", but is ${ ast.type }`);\n    }\n    if (this._isNativeFunction(functionName)) {\n      return this._lookupNativeFunctionReturnType(functionName);\n    } else if (this._isFunction(functionName)) {\n      const node = this._getFunction(functionName);\n      if (node.returnType) {\n        return node.returnType;\n      } else {\n        for (let i = 0; i < this.lookupChain.length; i++) {\n          if (this.lookupChain[i].ast === ast) {\n            if (node.argumentTypes.length === 0 && ast.arguments.length > 0) {\n              const args = ast.arguments;\n              for (let j = 0; j < args.length; j++) {\n                this.lookupChain.push({\n                  name: requestingNode.name,\n                  ast: args[i],\n                  requestingNode\n                });\n                node.argumentTypes[j] = requestingNode.getType(args[j]);\n                this.lookupChain.pop();\n              }\n              return node.returnType = node.getType(node.getJsAST());\n            }\n\n            throw new Error('circlical logic detected!');\n          }\n        }\n        this.lookupChain.push({\n          name: requestingNode.name,\n          ast,\n          requestingNode\n        });\n        const type = node.getType(node.getJsAST());\n        this.lookupChain.pop();\n        return node.returnType = type;\n      }\n    }\n\n    return null;\n  }\n\n  _getFunction(functionName) {\n    if (!this._isFunction(functionName)) {\n      new Error(`Function ${functionName} not found`);\n    }\n    return this.functionMap[functionName];\n  }\n\n  _isFunction(functionName) {\n    return Boolean(this.functionMap[functionName]);\n  }\n\n  _getNativeFunction(functionName) {\n    for (let i = 0; i < this.nativeFunctions.length; i++) {\n      if (this.nativeFunctions[i].name === functionName) return this.nativeFunctions[i];\n    }\n    return null;\n  }\n\n  _isNativeFunction(functionName) {\n    return Boolean(this._getNativeFunction(functionName));\n  }\n\n  _lookupNativeFunctionReturnType(functionName) {\n    let nativeFunction = this._getNativeFunction(functionName);\n    if (nativeFunction) {\n      return nativeFunction.returnType;\n    }\n    throw new Error(`Native function ${ functionName } not found`);\n  }\n\n  lookupFunctionArgumentTypes(functionName) {\n    if (this._isNativeFunction(functionName)) {\n      return this._getNativeFunction(functionName).argumentTypes;\n    } else if (this._isFunction(functionName)) {\n      return this._getFunction(functionName).argumentTypes;\n    }\n    return null;\n  }\n\n  lookupFunctionArgumentName(functionName, argumentIndex) {\n    return this._getFunction(functionName).argumentNames[argumentIndex];\n  }\n\n  lookupFunctionArgumentBitRatio(functionName, argumentName) {\n    if (!this._isFunction(functionName)) {\n      throw new Error('function not found');\n    }\n    if (this.rootNode.name === functionName) {\n      const i = this.rootNode.argumentNames.indexOf(argumentName);\n      if (i !== -1) {\n        return this.rootNode.argumentBitRatios[i];\n      }\n    }\n    const node = this._getFunction(functionName);\n    const i = node.argumentNames.indexOf(argumentName);\n    if (i === -1) {\n      throw new Error('argument not found');\n    }\n    const bitRatio = node.argumentBitRatios[i];\n    if (typeof bitRatio !== 'number') {\n      throw new Error('argument bit ratio not found');\n    }\n    return bitRatio;\n  }\n\n  needsArgumentType(functionName, i) {\n    if (!this._isFunction(functionName)) return false;\n    const fnNode = this._getFunction(functionName);\n    return !fnNode.argumentTypes[i];\n  }\n\n  assignArgumentType(functionName, i, argumentType, requestingNode) {\n    if (!this._isFunction(functionName)) return;\n    const fnNode = this._getFunction(functionName);\n    if (!fnNode.argumentTypes[i]) {\n      fnNode.argumentTypes[i] = argumentType;\n    }\n  }\n\n  assignArgumentBitRatio(functionName, argumentName, calleeFunctionName, argumentIndex) {\n    const node = this._getFunction(functionName);\n    if (this._isNativeFunction(calleeFunctionName)) return null;\n    const calleeNode = this._getFunction(calleeFunctionName);\n    const i = node.argumentNames.indexOf(argumentName);\n    if (i === -1) {\n      throw new Error(`Argument ${argumentName} not found in arguments from function ${functionName}`);\n    }\n    const bitRatio = node.argumentBitRatios[i];\n    if (typeof bitRatio !== 'number') {\n      throw new Error(`Bit ratio for argument ${argumentName} not found in function ${functionName}`);\n    }\n    if (!calleeNode.argumentBitRatios) {\n      calleeNode.argumentBitRatios = new Array(calleeNode.argumentNames.length);\n    }\n    const calleeBitRatio = calleeNode.argumentBitRatios[i];\n    if (typeof calleeBitRatio === 'number') {\n      if (calleeBitRatio !== bitRatio) {\n        throw new Error(`Incompatible bit ratio found at function ${functionName} at argument ${argumentName}`);\n      }\n      return calleeBitRatio;\n    }\n    calleeNode.argumentBitRatios[i] = bitRatio;\n    return bitRatio;\n  }\n\n  trackFunctionCall(functionName, calleeFunctionName, args) {\n    if (!this.functionNodeDependencies[functionName]) {\n      this.functionNodeDependencies[functionName] = new Set();\n      this.functionCalls[functionName] = [];\n    }\n    this.functionNodeDependencies[functionName].add(calleeFunctionName);\n    this.functionCalls[functionName].push(args);\n  }\n\n  getKernelResultType() {\n    return this.rootNode.returnType || this.rootNode.getType(this.rootNode.ast);\n  }\n\n  getSubKernelResultType(index) {\n    const subKernelNode = this.subKernelNodes[index];\n    let called = false;\n    for (let functionCallIndex = 0; functionCallIndex < this.rootNode.functionCalls.length; functionCallIndex++) {\n      const functionCall = this.rootNode.functionCalls[functionCallIndex];\n      if (functionCall.ast.callee.name === subKernelNode.name) {\n        called = true;\n      }\n    }\n    if (!called) {\n      throw new Error(`SubKernel ${ subKernelNode.name } never called by kernel`);\n    }\n    return subKernelNode.returnType || subKernelNode.getType(subKernelNode.getJsAST());\n  }\n\n  getReturnTypes() {\n    const result = {\n      [this.rootNode.name]: this.rootNode.getType(this.rootNode.ast),\n    };\n    const list = this.traceFunctionCalls(this.rootNode.name);\n    for (let i = 0; i < list.length; i++) {\n      const functionName = list[i];\n      const functionNode = this.functionMap[functionName];\n      result[functionName] = functionNode.getType(functionNode.ast);\n    }\n    return result;\n  }\n}\n\nmodule.exports = {\n  FunctionBuilder\n};\n},{}],10:[function(require,module,exports){\nconst acorn = require('acorn');\nconst { utils } = require('../utils');\nconst { FunctionTracer } = require('./function-tracer');\n\nclass FunctionNode {\n  constructor(source, settings) {\n    if (!source && !settings.ast) {\n      throw new Error('source parameter is missing');\n    }\n    settings = settings || {};\n    this.source = source;\n    this.ast = null;\n    this.name = typeof source === 'string' ? settings.isRootKernel ?\n      'kernel' :\n      (settings.name || utils.getFunctionNameFromString(source)) : null;\n    this.calledFunctions = [];\n    this.constants = {};\n    this.constantTypes = {};\n    this.constantBitRatios = {};\n    this.isRootKernel = false;\n    this.isSubKernel = false;\n    this.debug = null;\n    this.functions = null;\n    this.identifiers = null;\n    this.contexts = null;\n    this.functionCalls = null;\n    this.states = [];\n    this.needsArgumentType = null;\n    this.assignArgumentType = null;\n    this.lookupReturnType = null;\n    this.lookupFunctionArgumentTypes = null;\n    this.lookupFunctionArgumentBitRatio = null;\n    this.triggerImplyArgumentType = null;\n    this.triggerImplyArgumentBitRatio = null;\n    this.onNestedFunction = null;\n    this.onFunctionCall = null;\n    this.optimizeFloatMemory = null;\n    this.precision = null;\n    this.loopMaxIterations = null;\n    this.argumentNames = (typeof this.source === 'string' ? utils.getArgumentNamesFromString(this.source) : null);\n    this.argumentTypes = [];\n    this.argumentSizes = [];\n    this.argumentBitRatios = null;\n    this.returnType = null;\n    this.output = [];\n    this.plugins = null;\n    this.leadingReturnStatement = null;\n    this.followingReturnStatement = null;\n    this.dynamicOutput = null;\n    this.dynamicArguments = null;\n    this.strictTypingChecking = false;\n    this.fixIntegerDivisionAccuracy = null;\n\n    if (settings) {\n      for (const p in settings) {\n        if (!settings.hasOwnProperty(p)) continue;\n        if (!this.hasOwnProperty(p)) continue;\n        this[p] = settings[p];\n      }\n    }\n\n    this.literalTypes = {};\n\n    this.validate();\n    this._string = null;\n    this._internalVariableNames = {};\n  }\n\n  validate() {\n    if (typeof this.source !== 'string' && !this.ast) {\n      throw new Error('this.source not a string');\n    }\n\n    if (!this.ast && !utils.isFunctionString(this.source)) {\n      throw new Error('this.source not a function string');\n    }\n\n    if (!this.name) {\n      throw new Error('this.name could not be set');\n    }\n\n    if (this.argumentTypes.length > 0 && this.argumentTypes.length !== this.argumentNames.length) {\n      throw new Error(`argumentTypes count of ${ this.argumentTypes.length } exceeds ${ this.argumentNames.length }`);\n    }\n\n    if (this.output.length < 1) {\n      throw new Error('this.output is not big enough');\n    }\n  }\n\n  isIdentifierConstant(name) {\n    if (!this.constants) return false;\n    return this.constants.hasOwnProperty(name);\n  }\n\n  isInput(argumentName) {\n    return this.argumentTypes[this.argumentNames.indexOf(argumentName)] === 'Input';\n  }\n\n  pushState(state) {\n    this.states.push(state);\n  }\n\n  popState(state) {\n    if (this.state !== state) {\n      throw new Error(`Cannot popState ${ state } when in ${ this.state }`);\n    }\n    this.states.pop();\n  }\n\n  isState(state) {\n    return this.state === state;\n  }\n\n  get state() {\n    return this.states[this.states.length - 1];\n  }\n\n  astMemberExpressionUnroll(ast) {\n    if (ast.type === 'Identifier') {\n      return ast.name;\n    } else if (ast.type === 'ThisExpression') {\n      return 'this';\n    }\n\n    if (ast.type === 'MemberExpression') {\n      if (ast.object && ast.property) {\n        if (ast.object.hasOwnProperty('name') && ast.object.name !== 'Math') {\n          return this.astMemberExpressionUnroll(ast.property);\n        }\n\n        return (\n          this.astMemberExpressionUnroll(ast.object) +\n          '.' +\n          this.astMemberExpressionUnroll(ast.property)\n        );\n      }\n    }\n\n    if (ast.hasOwnProperty('expressions')) {\n      const firstExpression = ast.expressions[0];\n      if (firstExpression.type === 'Literal' && firstExpression.value === 0 && ast.expressions.length === 2) {\n        return this.astMemberExpressionUnroll(ast.expressions[1]);\n      }\n    }\n\n    throw this.astErrorOutput('Unknown astMemberExpressionUnroll', ast);\n  }\n\n  getJsAST(inParser) {\n    if (this.ast) {\n      return this.ast;\n    }\n    if (typeof this.source === 'object') {\n      this.traceFunctionAST(this.source);\n      return this.ast = this.source;\n    }\n\n    inParser = inParser || acorn;\n    if (inParser === null) {\n      throw new Error('Missing JS to AST parser');\n    }\n\n    const ast = Object.freeze(inParser.parse(`const parser_${ this.name } = ${ this.source };`, {\n      locations: true\n    }));\n    const functionAST = ast.body[0].declarations[0].init;\n    this.traceFunctionAST(functionAST);\n\n    if (!ast) {\n      throw new Error('Failed to parse JS code');\n    }\n\n    return this.ast = functionAST;\n  }\n\n  traceFunctionAST(ast) {\n    const { contexts, declarations, functions, identifiers, functionCalls } = new FunctionTracer(ast);\n    this.contexts = contexts;\n    this.identifiers = identifiers;\n    this.functionCalls = functionCalls;\n    this.functions = functions;\n    for (let i = 0; i < declarations.length; i++) {\n      const declaration = declarations[i];\n      const { ast, inForLoopInit, inForLoopTest } = declaration;\n      const { init } = ast;\n      const dependencies = this.getDependencies(init);\n      let valueType = null;\n\n      if (inForLoopInit && inForLoopTest) {\n        valueType = 'Integer';\n      } else {\n        if (init) {\n          const realType = this.getType(init);\n          switch (realType) {\n            case 'Integer':\n            case 'Float':\n            case 'Number':\n              if (init.type === 'MemberExpression') {\n                valueType = realType;\n              } else {\n                valueType = 'Number';\n              }\n              break;\n            case 'LiteralInteger':\n              valueType = 'Number';\n              break;\n            default:\n              valueType = realType;\n          }\n        }\n      }\n      declaration.valueType = valueType;\n      declaration.dependencies = dependencies;\n      declaration.isSafe = this.isSafeDependencies(dependencies);\n    }\n\n    for (let i = 0; i < functions.length; i++) {\n      this.onNestedFunction(functions[i], this.source);\n    }\n  }\n\n  getDeclaration(ast) {\n    for (let i = 0; i < this.identifiers.length; i++) {\n      const identifier = this.identifiers[i];\n      if (ast === identifier.ast) {\n        return identifier.declaration;\n      }\n    }\n    return null;\n  }\n\n  getVariableType(ast) {\n    if (ast.type !== 'Identifier') {\n      throw new Error(`ast of ${ast.type} not \"Identifier\"`);\n    }\n    let type = null;\n    const argumentIndex = this.argumentNames.indexOf(ast.name);\n    if (argumentIndex === -1) {\n      const declaration = this.getDeclaration(ast);\n      if (declaration) {\n        return declaration.valueType;\n      }\n    } else {\n      const argumentType = this.argumentTypes[argumentIndex];\n      if (argumentType) {\n        type = argumentType;\n      }\n    }\n    if (!type && this.strictTypingChecking) {\n      throw new Error(`Declaration of ${name} not found`);\n    }\n    return type;\n  }\n\n  getLookupType(type) {\n    if (!typeLookupMap.hasOwnProperty(type)) {\n      throw new Error(`unknown typeLookupMap ${ type }`);\n    }\n    return typeLookupMap[type];\n  }\n\n  getConstantType(constantName) {\n    if (this.constantTypes[constantName]) {\n      const type = this.constantTypes[constantName];\n      if (type === 'Float') {\n        return 'Number';\n      } else {\n        return type;\n      }\n    }\n    throw new Error(`Type for constant \"${ constantName }\" not declared`);\n  }\n\n  toString() {\n    if (this._string) return this._string;\n    return this._string = this.astGeneric(this.getJsAST(), []).join('').trim();\n  }\n\n  toJSON() {\n    const settings = {\n      source: this.source,\n      name: this.name,\n      constants: this.constants,\n      constantTypes: this.constantTypes,\n      isRootKernel: this.isRootKernel,\n      isSubKernel: this.isSubKernel,\n      debug: this.debug,\n      output: this.output,\n      loopMaxIterations: this.loopMaxIterations,\n      argumentNames: this.argumentNames,\n      argumentTypes: this.argumentTypes,\n      argumentSizes: this.argumentSizes,\n      returnType: this.returnType,\n      leadingReturnStatement: this.leadingReturnStatement,\n      followingReturnStatement: this.followingReturnStatement,\n    };\n\n    return {\n      ast: this.ast,\n      settings\n    };\n  }\n\n  getType(ast) {\n    if (Array.isArray(ast)) {\n      return this.getType(ast[ast.length - 1]);\n    }\n    switch (ast.type) {\n      case 'BlockStatement':\n        return this.getType(ast.body);\n      case 'ArrayExpression':\n        const childType = this.getType(ast.elements[0]);\n        switch (childType) {\n          case 'Array(2)':\n          case 'Array(3)':\n          case 'Array(4)':\n            return `Matrix(${ast.elements.length})`;\n        }\n        return `Array(${ ast.elements.length })`;\n      case 'Literal':\n        const literalKey = this.astKey(ast);\n        if (this.literalTypes[literalKey]) {\n          return this.literalTypes[literalKey];\n        }\n        if (Number.isInteger(ast.value)) {\n          return 'LiteralInteger';\n        } else if (ast.value === true || ast.value === false) {\n          return 'Boolean';\n        } else {\n          return 'Number';\n        }\n        case 'AssignmentExpression':\n          return this.getType(ast.left);\n        case 'CallExpression':\n          if (this.isAstMathFunction(ast)) {\n            return 'Number';\n          }\n          if (!ast.callee || !ast.callee.name) {\n            if (ast.callee.type === 'SequenceExpression' && ast.callee.expressions[ast.callee.expressions.length - 1].property.name) {\n              const functionName = ast.callee.expressions[ast.callee.expressions.length - 1].property.name;\n              this.inferArgumentTypesIfNeeded(functionName, ast.arguments);\n              return this.lookupReturnType(functionName, ast, this);\n            }\n            if (this.getVariableSignature(ast.callee, true) === 'this.color') {\n              return null;\n            }\n            if (ast.callee.type === 'MemberExpression' && ast.callee.object && ast.callee.property && ast.callee.property.name && ast.arguments) {\n              const functionName = ast.callee.property.name;\n              this.inferArgumentTypesIfNeeded(functionName, ast.arguments);\n              return this.lookupReturnType(functionName, ast, this);\n            }\n            throw this.astErrorOutput('Unknown call expression', ast);\n          }\n          if (ast.callee && ast.callee.name) {\n            const functionName = ast.callee.name;\n            this.inferArgumentTypesIfNeeded(functionName, ast.arguments);\n            return this.lookupReturnType(functionName, ast, this);\n          }\n          throw this.astErrorOutput(`Unhandled getType Type \"${ ast.type }\"`, ast);\n        case 'LogicalExpression':\n          return 'Boolean';\n        case 'BinaryExpression':\n          switch (ast.operator) {\n            case '%':\n            case '/':\n              if (this.fixIntegerDivisionAccuracy) {\n                return 'Number';\n              } else {\n                break;\n              }\n              case '>':\n              case '<':\n                return 'Boolean';\n              case '&':\n              case '|':\n              case '^':\n              case '<<':\n              case '>>':\n              case '>>>':\n                return 'Integer';\n          }\n          const type = this.getType(ast.left);\n          if (this.isState('skip-literal-correction')) return type;\n          if (type === 'LiteralInteger') {\n            const rightType = this.getType(ast.right);\n            if (rightType === 'LiteralInteger') {\n              if (ast.left.value % 1 === 0) {\n                return 'Integer';\n              } else {\n                return 'Float';\n              }\n            }\n            return rightType;\n          }\n          return typeLookupMap[type] || type;\n        case 'UpdateExpression':\n          return this.getType(ast.argument);\n        case 'UnaryExpression':\n          if (ast.operator === '~') {\n            return 'Integer';\n          }\n          return this.getType(ast.argument);\n        case 'VariableDeclaration': {\n          const declarations = ast.declarations;\n          let lastType;\n          for (let i = 0; i < declarations.length; i++) {\n            const declaration = declarations[i];\n            lastType = this.getType(declaration);\n          }\n          if (!lastType) {\n            throw this.astErrorOutput(`Unable to find type for declaration`, ast);\n          }\n          return lastType;\n        }\n        case 'VariableDeclarator':\n          const declaration = this.getDeclaration(ast.id);\n          if (!declaration) {\n            throw this.astErrorOutput(`Unable to find declarator`, ast);\n          }\n\n          if (!declaration.valueType) {\n            throw this.astErrorOutput(`Unable to find declarator valueType`, ast);\n          }\n\n          return declaration.valueType;\n        case 'Identifier':\n          if (ast.name === 'Infinity') {\n            return 'Number';\n          }\n          if (this.isAstVariable(ast)) {\n            const signature = this.getVariableSignature(ast);\n            if (signature === 'value') {\n              return this.getCheckVariableType(ast);\n            }\n          }\n          const origin = this.findIdentifierOrigin(ast);\n          if (origin && origin.init) {\n            return this.getType(origin.init);\n          }\n          return null;\n        case 'ReturnStatement':\n          return this.getType(ast.argument);\n        case 'MemberExpression':\n          if (this.isAstMathFunction(ast)) {\n            switch (ast.property.name) {\n              case 'ceil':\n                return 'Integer';\n              case 'floor':\n                return 'Integer';\n              case 'round':\n                return 'Integer';\n            }\n            return 'Number';\n          }\n          if (this.isAstVariable(ast)) {\n            const variableSignature = this.getVariableSignature(ast);\n            switch (variableSignature) {\n              case 'value[]':\n                return this.getLookupType(this.getCheckVariableType(ast.object));\n              case 'value[][]':\n                return this.getLookupType(this.getCheckVariableType(ast.object.object));\n              case 'value[][][]':\n                return this.getLookupType(this.getCheckVariableType(ast.object.object.object));\n              case 'value[][][][]':\n                return this.getLookupType(this.getCheckVariableType(ast.object.object.object.object));\n              case 'value.thread.value':\n              case 'this.thread.value':\n                return 'Integer';\n              case 'this.output.value':\n                return this.dynamicOutput ? 'Integer' : 'LiteralInteger';\n              case 'this.constants.value':\n                return this.getConstantType(ast.property.name);\n              case 'this.constants.value[]':\n                return this.getLookupType(this.getConstantType(ast.object.property.name));\n              case 'this.constants.value[][]':\n                return this.getLookupType(this.getConstantType(ast.object.object.property.name));\n              case 'this.constants.value[][][]':\n                return this.getLookupType(this.getConstantType(ast.object.object.object.property.name));\n              case 'this.constants.value[][][][]':\n                return this.getLookupType(this.getConstantType(ast.object.object.object.object.property.name));\n              case 'fn()[]':\n              case 'fn()[][]':\n              case 'fn()[][][]':\n                return this.getLookupType(this.getType(ast.object));\n              case 'value.value':\n                if (this.isAstMathVariable(ast)) {\n                  return 'Number';\n                }\n                switch (ast.property.name) {\n                  case 'r':\n                  case 'g':\n                  case 'b':\n                  case 'a':\n                    return this.getLookupType(this.getCheckVariableType(ast.object));\n                }\n                case '[][]':\n                  return 'Number';\n            }\n            throw this.astErrorOutput('Unhandled getType MemberExpression', ast);\n          }\n          throw this.astErrorOutput('Unhandled getType MemberExpression', ast);\n        case 'ConditionalExpression':\n          return this.getType(ast.consequent);\n        case 'FunctionDeclaration':\n        case 'FunctionExpression':\n          const lastReturn = this.findLastReturn(ast.body);\n          if (lastReturn) {\n            return this.getType(lastReturn);\n          }\n          return null;\n        case 'IfStatement':\n          return this.getType(ast.consequent);\n        case 'SequenceExpression':\n          return this.getType(ast.expressions[ast.expressions.length - 1]);\n        default:\n          throw this.astErrorOutput(`Unhandled getType Type \"${ ast.type }\"`, ast);\n    }\n  }\n\n  getCheckVariableType(ast) {\n    const type = this.getVariableType(ast);\n    if (!type) {\n      throw this.astErrorOutput(`${ast.type} is not defined`, ast);\n    }\n    return type;\n  }\n\n  inferArgumentTypesIfNeeded(functionName, args) {\n    for (let i = 0; i < args.length; i++) {\n      if (!this.needsArgumentType(functionName, i)) continue;\n      const type = this.getType(args[i]);\n      if (!type) {\n        throw this.astErrorOutput(`Unable to infer argument ${i}`, args[i]);\n      }\n      this.assignArgumentType(functionName, i, type);\n    }\n  }\n\n  isAstMathVariable(ast) {\n    const mathProperties = [\n      'E',\n      'PI',\n      'SQRT2',\n      'SQRT1_2',\n      'LN2',\n      'LN10',\n      'LOG2E',\n      'LOG10E',\n    ];\n    return ast.type === 'MemberExpression' &&\n      ast.object && ast.object.type === 'Identifier' &&\n      ast.object.name === 'Math' &&\n      ast.property &&\n      ast.property.type === 'Identifier' &&\n      mathProperties.indexOf(ast.property.name) > -1;\n  }\n\n  isAstMathFunction(ast) {\n    const mathFunctions = [\n      'abs',\n      'acos',\n      'acosh',\n      'asin',\n      'asinh',\n      'atan',\n      'atan2',\n      'atanh',\n      'cbrt',\n      'ceil',\n      'clz32',\n      'cos',\n      'cosh',\n      'expm1',\n      'exp',\n      'floor',\n      'fround',\n      'imul',\n      'log',\n      'log2',\n      'log10',\n      'log1p',\n      'max',\n      'min',\n      'pow',\n      'random',\n      'round',\n      'sign',\n      'sin',\n      'sinh',\n      'sqrt',\n      'tan',\n      'tanh',\n      'trunc',\n    ];\n    return ast.type === 'CallExpression' &&\n      ast.callee &&\n      ast.callee.type === 'MemberExpression' &&\n      ast.callee.object &&\n      ast.callee.object.type === 'Identifier' &&\n      ast.callee.object.name === 'Math' &&\n      ast.callee.property &&\n      ast.callee.property.type === 'Identifier' &&\n      mathFunctions.indexOf(ast.callee.property.name) > -1;\n  }\n\n  isAstVariable(ast) {\n    return ast.type === 'Identifier' || ast.type === 'MemberExpression';\n  }\n\n  isSafe(ast) {\n    return this.isSafeDependencies(this.getDependencies(ast));\n  }\n\n  isSafeDependencies(dependencies) {\n    return dependencies && dependencies.every ? dependencies.every(dependency => dependency.isSafe) : true;\n  }\n\n  getDependencies(ast, dependencies, isNotSafe) {\n    if (!dependencies) {\n      dependencies = [];\n    }\n    if (!ast) return null;\n    if (Array.isArray(ast)) {\n      for (let i = 0; i < ast.length; i++) {\n        this.getDependencies(ast[i], dependencies, isNotSafe);\n      }\n      return dependencies;\n    }\n    switch (ast.type) {\n      case 'AssignmentExpression':\n        this.getDependencies(ast.left, dependencies, isNotSafe);\n        this.getDependencies(ast.right, dependencies, isNotSafe);\n        return dependencies;\n      case 'ConditionalExpression':\n        this.getDependencies(ast.test, dependencies, isNotSafe);\n        this.getDependencies(ast.alternate, dependencies, isNotSafe);\n        this.getDependencies(ast.consequent, dependencies, isNotSafe);\n        return dependencies;\n      case 'Literal':\n        dependencies.push({\n          origin: 'literal',\n          value: ast.value,\n          isSafe: isNotSafe === true ? false : ast.value > -Infinity && ast.value < Infinity && !isNaN(ast.value)\n        });\n        break;\n      case 'VariableDeclarator':\n        return this.getDependencies(ast.init, dependencies, isNotSafe);\n      case 'Identifier':\n        const declaration = this.getDeclaration(ast);\n        if (declaration) {\n          dependencies.push({\n            name: ast.name,\n            origin: 'declaration',\n            isSafe: isNotSafe ? false : this.isSafeDependencies(declaration.dependencies),\n          });\n        } else if (this.argumentNames.indexOf(ast.name) > -1) {\n          dependencies.push({\n            name: ast.name,\n            origin: 'argument',\n            isSafe: false,\n          });\n        } else if (this.strictTypingChecking) {\n          throw new Error(`Cannot find identifier origin \"${ast.name}\"`);\n        }\n        break;\n      case 'FunctionDeclaration':\n        return this.getDependencies(ast.body.body[ast.body.body.length - 1], dependencies, isNotSafe);\n      case 'ReturnStatement':\n        return this.getDependencies(ast.argument, dependencies);\n      case 'BinaryExpression':\n      case 'LogicalExpression':\n        isNotSafe = (ast.operator === '/' || ast.operator === '*');\n        this.getDependencies(ast.left, dependencies, isNotSafe);\n        this.getDependencies(ast.right, dependencies, isNotSafe);\n        return dependencies;\n      case 'UnaryExpression':\n      case 'UpdateExpression':\n        return this.getDependencies(ast.argument, dependencies, isNotSafe);\n      case 'VariableDeclaration':\n        return this.getDependencies(ast.declarations, dependencies, isNotSafe);\n      case 'ArrayExpression':\n        dependencies.push({\n          origin: 'declaration',\n          isSafe: true,\n        });\n        return dependencies;\n      case 'CallExpression':\n        dependencies.push({\n          origin: 'function',\n          isSafe: true,\n        });\n        return dependencies;\n      case 'MemberExpression':\n        const details = this.getMemberExpressionDetails(ast);\n        switch (details.signature) {\n          case 'value[]':\n            this.getDependencies(ast.object, dependencies, isNotSafe);\n            break;\n          case 'value[][]':\n            this.getDependencies(ast.object.object, dependencies, isNotSafe);\n            break;\n          case 'value[][][]':\n            this.getDependencies(ast.object.object.object, dependencies, isNotSafe);\n            break;\n          case 'this.output.value':\n            if (this.dynamicOutput) {\n              dependencies.push({\n                name: details.name,\n                origin: 'output',\n                isSafe: false,\n              });\n            }\n            break;\n        }\n        if (details) {\n          if (details.property) {\n            this.getDependencies(details.property, dependencies, isNotSafe);\n          }\n          if (details.xProperty) {\n            this.getDependencies(details.xProperty, dependencies, isNotSafe);\n          }\n          if (details.yProperty) {\n            this.getDependencies(details.yProperty, dependencies, isNotSafe);\n          }\n          if (details.zProperty) {\n            this.getDependencies(details.zProperty, dependencies, isNotSafe);\n          }\n          return dependencies;\n        }\n        case 'SequenceExpression':\n          return this.getDependencies(ast.expressions, dependencies, isNotSafe);\n        default:\n          throw this.astErrorOutput(`Unhandled type ${ ast.type } in getDependencies`, ast);\n    }\n    return dependencies;\n  }\n\n  getVariableSignature(ast, returnRawValue) {\n    if (!this.isAstVariable(ast)) {\n      throw new Error(`ast of type \"${ ast.type }\" is not a variable signature`);\n    }\n    if (ast.type === 'Identifier') {\n      return 'value';\n    }\n    const signature = [];\n    while (true) {\n      if (!ast) break;\n      if (ast.computed) {\n        signature.push('[]');\n      } else if (ast.type === 'ThisExpression') {\n        signature.unshift('this');\n      } else if (ast.property && ast.property.name) {\n        if (\n          ast.property.name === 'x' ||\n          ast.property.name === 'y' ||\n          ast.property.name === 'z'\n        ) {\n          signature.unshift(returnRawValue ? '.' + ast.property.name : '.value');\n        } else if (\n          ast.property.name === 'constants' ||\n          ast.property.name === 'thread' ||\n          ast.property.name === 'output'\n        ) {\n          signature.unshift('.' + ast.property.name);\n        } else {\n          signature.unshift(returnRawValue ? '.' + ast.property.name : '.value');\n        }\n      } else if (ast.name) {\n        signature.unshift(returnRawValue ? ast.name : 'value');\n      } else if (ast.callee && ast.callee.name) {\n        signature.unshift(returnRawValue ? ast.callee.name + '()' : 'fn()');\n      } else if (ast.elements) {\n        signature.unshift('[]');\n      } else {\n        signature.unshift('unknown');\n      }\n      ast = ast.object;\n    }\n\n    const signatureString = signature.join('');\n    if (returnRawValue) {\n      return signatureString;\n    }\n\n    const allowedExpressions = [\n      'value',\n      'value[]',\n      'value[][]',\n      'value[][][]',\n      'value[][][][]',\n      'value.value',\n      'value.thread.value',\n      'this.thread.value',\n      'this.output.value',\n      'this.constants.value',\n      'this.constants.value[]',\n      'this.constants.value[][]',\n      'this.constants.value[][][]',\n      'this.constants.value[][][][]',\n      'fn()[]',\n      'fn()[][]',\n      'fn()[][][]',\n      '[][]',\n    ];\n    if (allowedExpressions.indexOf(signatureString) > -1) {\n      return signatureString;\n    }\n    return null;\n  }\n\n  build() {\n    return this.toString().length > 0;\n  }\n\n  astGeneric(ast, retArr) {\n    if (ast === null) {\n      throw this.astErrorOutput('NULL ast', ast);\n    } else {\n      if (Array.isArray(ast)) {\n        for (let i = 0; i < ast.length; i++) {\n          this.astGeneric(ast[i], retArr);\n        }\n        return retArr;\n      }\n\n      switch (ast.type) {\n        case 'FunctionDeclaration':\n          return this.astFunctionDeclaration(ast, retArr);\n        case 'FunctionExpression':\n          return this.astFunctionExpression(ast, retArr);\n        case 'ReturnStatement':\n          return this.astReturnStatement(ast, retArr);\n        case 'Literal':\n          return this.astLiteral(ast, retArr);\n        case 'BinaryExpression':\n          return this.astBinaryExpression(ast, retArr);\n        case 'Identifier':\n          return this.astIdentifierExpression(ast, retArr);\n        case 'AssignmentExpression':\n          return this.astAssignmentExpression(ast, retArr);\n        case 'ExpressionStatement':\n          return this.astExpressionStatement(ast, retArr);\n        case 'EmptyStatement':\n          return this.astEmptyStatement(ast, retArr);\n        case 'BlockStatement':\n          return this.astBlockStatement(ast, retArr);\n        case 'IfStatement':\n          return this.astIfStatement(ast, retArr);\n        case 'SwitchStatement':\n          return this.astSwitchStatement(ast, retArr);\n        case 'BreakStatement':\n          return this.astBreakStatement(ast, retArr);\n        case 'ContinueStatement':\n          return this.astContinueStatement(ast, retArr);\n        case 'ForStatement':\n          return this.astForStatement(ast, retArr);\n        case 'WhileStatement':\n          return this.astWhileStatement(ast, retArr);\n        case 'DoWhileStatement':\n          return this.astDoWhileStatement(ast, retArr);\n        case 'VariableDeclaration':\n          return this.astVariableDeclaration(ast, retArr);\n        case 'VariableDeclarator':\n          return this.astVariableDeclarator(ast, retArr);\n        case 'ThisExpression':\n          return this.astThisExpression(ast, retArr);\n        case 'SequenceExpression':\n          return this.astSequenceExpression(ast, retArr);\n        case 'UnaryExpression':\n          return this.astUnaryExpression(ast, retArr);\n        case 'UpdateExpression':\n          return this.astUpdateExpression(ast, retArr);\n        case 'LogicalExpression':\n          return this.astLogicalExpression(ast, retArr);\n        case 'MemberExpression':\n          return this.astMemberExpression(ast, retArr);\n        case 'CallExpression':\n          return this.astCallExpression(ast, retArr);\n        case 'ArrayExpression':\n          return this.astArrayExpression(ast, retArr);\n        case 'DebuggerStatement':\n          return this.astDebuggerStatement(ast, retArr);\n        case 'ConditionalExpression':\n          return this.astConditionalExpression(ast, retArr);\n      }\n\n      throw this.astErrorOutput('Unknown ast type : ' + ast.type, ast);\n    }\n  }\n  astErrorOutput(error, ast) {\n    if (typeof this.source !== 'string') {\n      return new Error(error);\n    }\n\n    const debugString = utils.getAstString(this.source, ast);\n    const leadingSource = this.source.substr(ast.start);\n    const splitLines = leadingSource.split(/\\n/);\n    const lineBefore = splitLines.length > 0 ? splitLines[splitLines.length - 1] : 0;\n    return new Error(`${error} on line ${ splitLines.length }, position ${ lineBefore.length }:\\n ${ debugString }`);\n  }\n\n  astDebuggerStatement(arrNode, retArr) {\n    return retArr;\n  }\n\n  astConditionalExpression(ast, retArr) {\n    if (ast.type !== 'ConditionalExpression') {\n      throw this.astErrorOutput('Not a conditional expression', ast);\n    }\n    retArr.push('(');\n    this.astGeneric(ast.test, retArr);\n    retArr.push('?');\n    this.astGeneric(ast.consequent, retArr);\n    retArr.push(':');\n    this.astGeneric(ast.alternate, retArr);\n    retArr.push(')');\n    return retArr;\n  }\n\n  astFunction(ast, retArr) {\n    throw new Error(`\"astFunction\" not defined on ${ this.constructor.name }`);\n  }\n\n  astFunctionDeclaration(ast, retArr) {\n    if (this.isChildFunction(ast)) {\n      return retArr;\n    }\n    return this.astFunction(ast, retArr);\n  }\n  astFunctionExpression(ast, retArr) {\n    if (this.isChildFunction(ast)) {\n      return retArr;\n    }\n    return this.astFunction(ast, retArr);\n  }\n  isChildFunction(ast) {\n    for (let i = 0; i < this.functions.length; i++) {\n      if (this.functions[i] === ast) {\n        return true;\n      }\n    }\n    return false;\n  }\n  astReturnStatement(ast, retArr) {\n    return retArr;\n  }\n  astLiteral(ast, retArr) {\n    this.literalTypes[this.astKey(ast)] = 'Number';\n    return retArr;\n  }\n  astBinaryExpression(ast, retArr) {\n    return retArr;\n  }\n  astIdentifierExpression(ast, retArr) {\n    return retArr;\n  }\n  astAssignmentExpression(ast, retArr) {\n    return retArr;\n  }\n  astExpressionStatement(esNode, retArr) {\n    this.astGeneric(esNode.expression, retArr);\n    retArr.push(';');\n    return retArr;\n  }\n  astEmptyStatement(eNode, retArr) {\n    return retArr;\n  }\n  astBlockStatement(ast, retArr) {\n    return retArr;\n  }\n  astIfStatement(ast, retArr) {\n    return retArr;\n  }\n  astSwitchStatement(ast, retArr) {\n    return retArr;\n  }\n  astBreakStatement(brNode, retArr) {\n    retArr.push('break;');\n    return retArr;\n  }\n  astContinueStatement(crNode, retArr) {\n    retArr.push('continue;\\n');\n    return retArr;\n  }\n  astForStatement(ast, retArr) {\n    return retArr;\n  }\n  astWhileStatement(ast, retArr) {\n    return retArr;\n  }\n  astDoWhileStatement(ast, retArr) {\n    return retArr;\n  }\n  astVariableDeclarator(iVarDecNode, retArr) {\n    this.astGeneric(iVarDecNode.id, retArr);\n    if (iVarDecNode.init !== null) {\n      retArr.push('=');\n      this.astGeneric(iVarDecNode.init, retArr);\n    }\n    return retArr;\n  }\n  astThisExpression(ast, retArr) {\n    return retArr;\n  }\n  astSequenceExpression(sNode, retArr) {\n    const { expressions } = sNode;\n    const sequenceResult = [];\n    for (let i = 0; i < expressions.length; i++) {\n      const expression = expressions[i];\n      const expressionResult = [];\n      this.astGeneric(expression, expressionResult);\n      sequenceResult.push(expressionResult.join(''));\n    }\n    if (sequenceResult.length > 1) {\n      retArr.push('(', sequenceResult.join(','), ')');\n    } else {\n      retArr.push(sequenceResult[0]);\n    }\n    return retArr;\n  }\n  astUnaryExpression(uNode, retArr) {\n    const unaryResult = this.checkAndUpconvertBitwiseUnary(uNode, retArr);\n    if (unaryResult) {\n      return retArr;\n    }\n\n    if (uNode.prefix) {\n      retArr.push(uNode.operator);\n      this.astGeneric(uNode.argument, retArr);\n    } else {\n      this.astGeneric(uNode.argument, retArr);\n      retArr.push(uNode.operator);\n    }\n\n    return retArr;\n  }\n\n  checkAndUpconvertBitwiseUnary(uNode, retArr) {}\n\n  astUpdateExpression(uNode, retArr) {\n    if (uNode.prefix) {\n      retArr.push(uNode.operator);\n      this.astGeneric(uNode.argument, retArr);\n    } else {\n      this.astGeneric(uNode.argument, retArr);\n      retArr.push(uNode.operator);\n    }\n\n    return retArr;\n  }\n  astLogicalExpression(logNode, retArr) {\n    retArr.push('(');\n    this.astGeneric(logNode.left, retArr);\n    retArr.push(logNode.operator);\n    this.astGeneric(logNode.right, retArr);\n    retArr.push(')');\n    return retArr;\n  }\n  astMemberExpression(ast, retArr) {\n    return retArr;\n  }\n  astCallExpression(ast, retArr) {\n    return retArr;\n  }\n  astArrayExpression(ast, retArr) {\n    return retArr;\n  }\n\n  getMemberExpressionDetails(ast) {\n    if (ast.type !== 'MemberExpression') {\n      throw this.astErrorOutput(`Expression ${ ast.type } not a MemberExpression`, ast);\n    }\n    let name = null;\n    let type = null;\n    const variableSignature = this.getVariableSignature(ast);\n    switch (variableSignature) {\n      case 'value':\n        return null;\n      case 'value.thread.value':\n      case 'this.thread.value':\n      case 'this.output.value':\n        return {\n          signature: variableSignature,\n            type: 'Integer',\n            name: ast.property.name\n        };\n      case 'value[]':\n        if (typeof ast.object.name !== 'string') {\n          throw this.astErrorOutput('Unexpected expression', ast);\n        }\n        name = ast.object.name;\n        return {\n          name,\n          origin: 'user',\n            signature: variableSignature,\n            type: this.getVariableType(ast.object),\n            xProperty: ast.property\n        };\n      case 'value[][]':\n        if (typeof ast.object.object.name !== 'string') {\n          throw this.astErrorOutput('Unexpected expression', ast);\n        }\n        name = ast.object.object.name;\n        return {\n          name,\n          origin: 'user',\n            signature: variableSignature,\n            type: this.getVariableType(ast.object.object),\n            yProperty: ast.object.property,\n            xProperty: ast.property,\n        };\n      case 'value[][][]':\n        if (typeof ast.object.object.object.name !== 'string') {\n          throw this.astErrorOutput('Unexpected expression', ast);\n        }\n        name = ast.object.object.object.name;\n        return {\n          name,\n          origin: 'user',\n            signature: variableSignature,\n            type: this.getVariableType(ast.object.object.object),\n            zProperty: ast.object.object.property,\n            yProperty: ast.object.property,\n            xProperty: ast.property,\n        };\n      case 'value[][][][]':\n        if (typeof ast.object.object.object.object.name !== 'string') {\n          throw this.astErrorOutput('Unexpected expression', ast);\n        }\n        name = ast.object.object.object.object.name;\n        return {\n          name,\n          origin: 'user',\n            signature: variableSignature,\n            type: this.getVariableType(ast.object.object.object.object),\n            zProperty: ast.object.object.property,\n            yProperty: ast.object.property,\n            xProperty: ast.property,\n        };\n      case 'value.value':\n        if (typeof ast.property.name !== 'string') {\n          throw this.astErrorOutput('Unexpected expression', ast);\n        }\n        if (this.isAstMathVariable(ast)) {\n          name = ast.property.name;\n          return {\n            name,\n            origin: 'Math',\n            type: 'Number',\n            signature: variableSignature,\n          };\n        }\n        switch (ast.property.name) {\n          case 'r':\n          case 'g':\n          case 'b':\n          case 'a':\n            name = ast.object.name;\n            return {\n              name,\n              property: ast.property.name,\n                origin: 'user',\n                signature: variableSignature,\n                type: 'Number'\n            };\n          default:\n            throw this.astErrorOutput('Unexpected expression', ast);\n        }\n        case 'this.constants.value':\n          if (typeof ast.property.name !== 'string') {\n            throw this.astErrorOutput('Unexpected expression', ast);\n          }\n          name = ast.property.name;\n          type = this.getConstantType(name);\n          if (!type) {\n            throw this.astErrorOutput('Constant has no type', ast);\n          }\n          return {\n            name,\n            type,\n            origin: 'constants',\n              signature: variableSignature,\n          };\n        case 'this.constants.value[]':\n          if (typeof ast.object.property.name !== 'string') {\n            throw this.astErrorOutput('Unexpected expression', ast);\n          }\n          name = ast.object.property.name;\n          type = this.getConstantType(name);\n          if (!type) {\n            throw this.astErrorOutput('Constant has no type', ast);\n          }\n          return {\n            name,\n            type,\n            origin: 'constants',\n              signature: variableSignature,\n              xProperty: ast.property,\n          };\n        case 'this.constants.value[][]': {\n          if (typeof ast.object.object.property.name !== 'string') {\n            throw this.astErrorOutput('Unexpected expression', ast);\n          }\n          name = ast.object.object.property.name;\n          type = this.getConstantType(name);\n          if (!type) {\n            throw this.astErrorOutput('Constant has no type', ast);\n          }\n          return {\n            name,\n            type,\n            origin: 'constants',\n            signature: variableSignature,\n            yProperty: ast.object.property,\n            xProperty: ast.property,\n          };\n        }\n        case 'this.constants.value[][][]': {\n          if (typeof ast.object.object.object.property.name !== 'string') {\n            throw this.astErrorOutput('Unexpected expression', ast);\n          }\n          name = ast.object.object.object.property.name;\n          type = this.getConstantType(name);\n          if (!type) {\n            throw this.astErrorOutput('Constant has no type', ast);\n          }\n          return {\n            name,\n            type,\n            origin: 'constants',\n            signature: variableSignature,\n            zProperty: ast.object.object.property,\n            yProperty: ast.object.property,\n            xProperty: ast.property,\n          };\n        }\n        case 'fn()[]':\n        case 'fn()[][]':\n        case '[][]':\n          return {\n            signature: variableSignature,\n              property: ast.property,\n          };\n        default:\n          throw this.astErrorOutput('Unexpected expression', ast);\n    }\n  }\n\n  findIdentifierOrigin(astToFind) {\n    const stack = [this.ast];\n\n    while (stack.length > 0) {\n      const atNode = stack[0];\n      if (atNode.type === 'VariableDeclarator' && atNode.id && atNode.id.name && atNode.id.name === astToFind.name) {\n        return atNode;\n      }\n      stack.shift();\n      if (atNode.argument) {\n        stack.push(atNode.argument);\n      } else if (atNode.body) {\n        stack.push(atNode.body);\n      } else if (atNode.declarations) {\n        stack.push(atNode.declarations);\n      } else if (Array.isArray(atNode)) {\n        for (let i = 0; i < atNode.length; i++) {\n          stack.push(atNode[i]);\n        }\n      }\n    }\n    return null;\n  }\n\n  findLastReturn(ast) {\n    const stack = [ast || this.ast];\n\n    while (stack.length > 0) {\n      const atNode = stack.pop();\n      if (atNode.type === 'ReturnStatement') {\n        return atNode;\n      }\n      if (atNode.type === 'FunctionDeclaration') {\n        continue;\n      }\n      if (atNode.argument) {\n        stack.push(atNode.argument);\n      } else if (atNode.body) {\n        stack.push(atNode.body);\n      } else if (atNode.declarations) {\n        stack.push(atNode.declarations);\n      } else if (Array.isArray(atNode)) {\n        for (let i = 0; i < atNode.length; i++) {\n          stack.push(atNode[i]);\n        }\n      } else if (atNode.consequent) {\n        stack.push(atNode.consequent);\n      } else if (atNode.cases) {\n        stack.push(atNode.cases);\n      }\n    }\n    return null;\n  }\n\n  getInternalVariableName(name) {\n    if (!this._internalVariableNames.hasOwnProperty(name)) {\n      this._internalVariableNames[name] = 0;\n    }\n    this._internalVariableNames[name]++;\n    if (this._internalVariableNames[name] === 1) {\n      return name;\n    }\n    return name + this._internalVariableNames[name];\n  }\n\n  astKey(ast, separator = ',') {\n    if (!ast.start || !ast.end) throw new Error('AST start and end needed');\n    return `${ast.start}${separator}${ast.end}`;\n  }\n}\n\nconst typeLookupMap = {\n  'Number': 'Number',\n  'Float': 'Float',\n  'Integer': 'Integer',\n  'Array': 'Number',\n  'Array(2)': 'Number',\n  'Array(3)': 'Number',\n  'Array(4)': 'Number',\n  'Matrix(2)': 'Number',\n  'Matrix(3)': 'Number',\n  'Matrix(4)': 'Number',\n  'Array2D': 'Number',\n  'Array3D': 'Number',\n  'Input': 'Number',\n  'HTMLCanvas': 'Array(4)',\n  'OffscreenCanvas': 'Array(4)',\n  'HTMLImage': 'Array(4)',\n  'ImageBitmap': 'Array(4)',\n  'ImageData': 'Array(4)',\n  'HTMLVideo': 'Array(4)',\n  'HTMLImageArray': 'Array(4)',\n  'NumberTexture': 'Number',\n  'MemoryOptimizedNumberTexture': 'Number',\n  'Array1D(2)': 'Array(2)',\n  'Array1D(3)': 'Array(3)',\n  'Array1D(4)': 'Array(4)',\n  'Array2D(2)': 'Array(2)',\n  'Array2D(3)': 'Array(3)',\n  'Array2D(4)': 'Array(4)',\n  'Array3D(2)': 'Array(2)',\n  'Array3D(3)': 'Array(3)',\n  'Array3D(4)': 'Array(4)',\n  'ArrayTexture(1)': 'Number',\n  'ArrayTexture(2)': 'Array(2)',\n  'ArrayTexture(3)': 'Array(3)',\n  'ArrayTexture(4)': 'Array(4)',\n};\n\nmodule.exports = {\n  FunctionNode\n};\n},{\"../utils\":114,\"./function-tracer\":11,\"acorn\":1}],11:[function(require,module,exports){\nconst { utils } = require('../utils');\n\nfunction last(array) {\n  return array.length > 0 ? array[array.length - 1] : null;\n}\n\nconst states = {\n  trackIdentifiers: 'trackIdentifiers',\n  memberExpression: 'memberExpression',\n  inForLoopInit: 'inForLoopInit'\n};\n\nclass FunctionTracer {\n  constructor(ast) {\n    this.runningContexts = [];\n    this.functionContexts = [];\n    this.contexts = [];\n    this.functionCalls = [];\n    this.declarations = [];\n    this.identifiers = [];\n    this.functions = [];\n    this.returnStatements = [];\n    this.trackedIdentifiers = null;\n    this.states = [];\n    this.newFunctionContext();\n    this.scan(ast);\n  }\n\n  isState(state) {\n    return this.states[this.states.length - 1] === state;\n  }\n\n  hasState(state) {\n    return this.states.indexOf(state) > -1;\n  }\n\n  pushState(state) {\n    this.states.push(state);\n  }\n\n  popState(state) {\n    if (this.isState(state)) {\n      this.states.pop();\n    } else {\n      throw new Error(`Cannot pop the non-active state \"${state}\"`);\n    }\n  }\n\n  get currentFunctionContext() {\n    return last(this.functionContexts);\n  }\n\n  get currentContext() {\n    return last(this.runningContexts);\n  }\n\n  newFunctionContext() {\n    const newContext = { '@contextType': 'function' };\n    this.contexts.push(newContext);\n    this.functionContexts.push(newContext);\n  }\n\n  newContext(run) {\n    const newContext = Object.assign({ '@contextType': 'const/let' }, this.currentContext);\n    this.contexts.push(newContext);\n    this.runningContexts.push(newContext);\n    run();\n    const { currentFunctionContext } = this;\n    for (const p in currentFunctionContext) {\n      if (!currentFunctionContext.hasOwnProperty(p) || newContext.hasOwnProperty(p)) continue;\n      newContext[p] = currentFunctionContext[p];\n    }\n    this.runningContexts.pop();\n    return newContext;\n  }\n\n  useFunctionContext(run) {\n    const functionContext = last(this.functionContexts);\n    this.runningContexts.push(functionContext);\n    run();\n    this.runningContexts.pop();\n  }\n\n  getIdentifiers(run) {\n    const trackedIdentifiers = this.trackedIdentifiers = [];\n    this.pushState(states.trackIdentifiers);\n    run();\n    this.trackedIdentifiers = null;\n    this.popState(states.trackIdentifiers);\n    return trackedIdentifiers;\n  }\n\n  getDeclaration(name) {\n    const { currentContext, currentFunctionContext, runningContexts } = this;\n    const declaration = currentContext[name] || currentFunctionContext[name] || null;\n\n    if (\n      !declaration &&\n      currentContext === currentFunctionContext &&\n      runningContexts.length > 0\n    ) {\n      const previousRunningContext = runningContexts[runningContexts.length - 2];\n      if (previousRunningContext[name]) {\n        return previousRunningContext[name];\n      }\n    }\n\n    return declaration;\n  }\n\n  scan(ast) {\n    if (!ast) return;\n    if (Array.isArray(ast)) {\n      for (let i = 0; i < ast.length; i++) {\n        this.scan(ast[i]);\n      }\n      return;\n    }\n    switch (ast.type) {\n      case 'Program':\n        this.useFunctionContext(() => {\n          this.scan(ast.body);\n        });\n        break;\n      case 'BlockStatement':\n        this.newContext(() => {\n          this.scan(ast.body);\n        });\n        break;\n      case 'AssignmentExpression':\n      case 'LogicalExpression':\n        this.scan(ast.left);\n        this.scan(ast.right);\n        break;\n      case 'BinaryExpression':\n        this.scan(ast.left);\n        this.scan(ast.right);\n        break;\n      case 'UpdateExpression':\n        if (ast.operator === '++') {\n          const declaration = this.getDeclaration(ast.argument.name);\n          if (declaration) {\n            declaration.suggestedType = 'Integer';\n          }\n        }\n        this.scan(ast.argument);\n        break;\n      case 'UnaryExpression':\n        this.scan(ast.argument);\n        break;\n      case 'VariableDeclaration':\n        if (ast.kind === 'var') {\n          this.useFunctionContext(() => {\n            ast.declarations = utils.normalizeDeclarations(ast);\n            this.scan(ast.declarations);\n          });\n        } else {\n          ast.declarations = utils.normalizeDeclarations(ast);\n          this.scan(ast.declarations);\n        }\n        break;\n      case 'VariableDeclarator': {\n        const { currentContext } = this;\n        const inForLoopInit = this.hasState(states.inForLoopInit);\n        const declaration = {\n          ast: ast,\n          context: currentContext,\n          name: ast.id.name,\n          origin: 'declaration',\n          inForLoopInit,\n          inForLoopTest: null,\n          assignable: currentContext === this.currentFunctionContext || (!inForLoopInit && !currentContext.hasOwnProperty(ast.id.name)),\n          suggestedType: null,\n          valueType: null,\n          dependencies: null,\n          isSafe: null,\n        };\n        if (!currentContext[ast.id.name]) {\n          currentContext[ast.id.name] = declaration;\n        }\n        this.declarations.push(declaration);\n        this.scan(ast.id);\n        this.scan(ast.init);\n        break;\n      }\n      case 'FunctionExpression':\n      case 'FunctionDeclaration':\n        if (this.runningContexts.length === 0) {\n          this.scan(ast.body);\n        } else {\n          this.functions.push(ast);\n        }\n        break;\n      case 'IfStatement':\n        this.scan(ast.test);\n        this.scan(ast.consequent);\n        if (ast.alternate) this.scan(ast.alternate);\n        break;\n      case 'ForStatement': {\n        let testIdentifiers;\n        const context = this.newContext(() => {\n          this.pushState(states.inForLoopInit);\n          this.scan(ast.init);\n          this.popState(states.inForLoopInit);\n\n          testIdentifiers = this.getIdentifiers(() => {\n            this.scan(ast.test);\n          });\n\n          this.scan(ast.update);\n          this.newContext(() => {\n            this.scan(ast.body);\n          });\n        });\n\n        if (testIdentifiers) {\n          for (const p in context) {\n            if (p === '@contextType') continue;\n            if (testIdentifiers.indexOf(p) > -1) {\n              context[p].inForLoopTest = true;\n            }\n          }\n        }\n        break;\n      }\n      case 'DoWhileStatement':\n      case 'WhileStatement':\n        this.newContext(() => {\n          this.scan(ast.body);\n          this.scan(ast.test);\n        });\n        break;\n      case 'Identifier': {\n        if (this.isState(states.trackIdentifiers)) {\n          this.trackedIdentifiers.push(ast.name);\n        }\n        this.identifiers.push({\n          context: this.currentContext,\n          declaration: this.getDeclaration(ast.name),\n          ast,\n        });\n        break;\n      }\n      case 'ReturnStatement':\n        this.returnStatements.push(ast);\n        this.scan(ast.argument);\n        break;\n      case 'MemberExpression':\n        this.pushState(states.memberExpression);\n        this.scan(ast.object);\n        this.scan(ast.property);\n        this.popState(states.memberExpression);\n        break;\n      case 'ExpressionStatement':\n        this.scan(ast.expression);\n        break;\n      case 'SequenceExpression':\n        this.scan(ast.expressions);\n        break;\n      case 'CallExpression':\n        this.functionCalls.push({\n          context: this.currentContext,\n          ast,\n        });\n        this.scan(ast.arguments);\n        break;\n      case 'ArrayExpression':\n        this.scan(ast.elements);\n        break;\n      case 'ConditionalExpression':\n        this.scan(ast.test);\n        this.scan(ast.alternate);\n        this.scan(ast.consequent);\n        break;\n      case 'SwitchStatement':\n        this.scan(ast.discriminant);\n        this.scan(ast.cases);\n        break;\n      case 'SwitchCase':\n        this.scan(ast.test);\n        this.scan(ast.consequent);\n        break;\n\n      case 'ThisExpression':\n      case 'Literal':\n      case 'DebuggerStatement':\n      case 'EmptyStatement':\n      case 'BreakStatement':\n      case 'ContinueStatement':\n        break;\n      default:\n        throw new Error(`unhandled type \"${ast.type}\"`);\n    }\n  }\n}\n\nmodule.exports = {\n  FunctionTracer,\n};\n},{\"../utils\":114}],12:[function(require,module,exports){\nconst { glWiretap } = require('gl-wiretap');\nconst { utils } = require('../../utils');\n\nfunction toStringWithoutUtils(fn) {\n  return fn.toString()\n    .replace('=>', '')\n    .replace(/^function /, '')\n    .replace(/utils[.]/g, '/*utils.*/');\n}\n\nfunction glKernelString(Kernel, args, originKernel, setupContextString, destroyContextString) {\n  if (!originKernel.built) {\n    originKernel.build.apply(originKernel, args);\n  }\n  args = args ? Array.from(args).map(arg => {\n    switch (typeof arg) {\n      case 'boolean':\n        return new Boolean(arg);\n      case 'number':\n        return new Number(arg);\n      default:\n        return arg;\n    }\n  }) : null;\n  const uploadedValues = [];\n  const postResult = [];\n  const context = glWiretap(originKernel.context, {\n    useTrackablePrimitives: true,\n    onReadPixels: (targetName) => {\n      if (kernel.subKernels) {\n        if (!subKernelsResultVariableSetup) {\n          postResult.push(`    const result = { result: ${getRenderString(targetName, kernel)} };`);\n          subKernelsResultVariableSetup = true;\n        } else {\n          const property = kernel.subKernels[subKernelsResultIndex++].property;\n          postResult.push(`    result${isNaN(property) ? '.' + property : `[${property}]`} = ${getRenderString(targetName, kernel)};`);\n        }\n        if (subKernelsResultIndex === kernel.subKernels.length) {\n          postResult.push('    return result;');\n        }\n        return;\n      }\n      if (targetName) {\n        postResult.push(`    return ${getRenderString(targetName, kernel)};`);\n      } else {\n        postResult.push(`    return null;`);\n      }\n    },\n    onUnrecognizedArgumentLookup: (argument) => {\n      const argumentName = findKernelValue(argument, kernel.kernelArguments, [], context, uploadedValues);\n      if (argumentName) {\n        return argumentName;\n      }\n      const constantName = findKernelValue(argument, kernel.kernelConstants, constants ? Object.keys(constants).map(key => constants[key]) : [], context, uploadedValues);\n      if (constantName) {\n        return constantName;\n      }\n      return null;\n    }\n  });\n  let subKernelsResultVariableSetup = false;\n  let subKernelsResultIndex = 0;\n  const {\n    source,\n    canvas,\n    output,\n    pipeline,\n    graphical,\n    loopMaxIterations,\n    constants,\n    optimizeFloatMemory,\n    precision,\n    fixIntegerDivisionAccuracy,\n    functions,\n    nativeFunctions,\n    subKernels,\n    immutable,\n    argumentTypes,\n    constantTypes,\n    kernelArguments,\n    kernelConstants,\n    tactic,\n  } = originKernel;\n  const kernel = new Kernel(source, {\n    canvas,\n    context,\n    checkContext: false,\n    output,\n    pipeline,\n    graphical,\n    loopMaxIterations,\n    constants,\n    optimizeFloatMemory,\n    precision,\n    fixIntegerDivisionAccuracy,\n    functions,\n    nativeFunctions,\n    subKernels,\n    immutable,\n    argumentTypes,\n    constantTypes,\n    tactic,\n  });\n  let result = [];\n  context.setIndent(2);\n  kernel.build.apply(kernel, args);\n  result.push(context.toString());\n  context.reset();\n\n  kernel.kernelArguments.forEach((kernelArgument, i) => {\n    switch (kernelArgument.type) {\n      case 'Integer':\n      case 'Boolean':\n      case 'Number':\n      case 'Float':\n      case 'Array':\n      case 'Array(2)':\n      case 'Array(3)':\n      case 'Array(4)':\n      case 'HTMLCanvas':\n      case 'HTMLImage':\n      case 'HTMLVideo':\n        context.insertVariable(`uploadValue_${kernelArgument.name}`, kernelArgument.uploadValue);\n        break;\n      case 'HTMLImageArray':\n        for (let imageIndex = 0; imageIndex < args[i].length; imageIndex++) {\n          const arg = args[i];\n          context.insertVariable(`uploadValue_${kernelArgument.name}[${imageIndex}]`, arg[imageIndex]);\n        }\n        break;\n      case 'Input':\n        context.insertVariable(`uploadValue_${kernelArgument.name}`, kernelArgument.uploadValue);\n        break;\n      case 'MemoryOptimizedNumberTexture':\n      case 'NumberTexture':\n      case 'Array1D(2)':\n      case 'Array1D(3)':\n      case 'Array1D(4)':\n      case 'Array2D(2)':\n      case 'Array2D(3)':\n      case 'Array2D(4)':\n      case 'Array3D(2)':\n      case 'Array3D(3)':\n      case 'Array3D(4)':\n      case 'ArrayTexture(1)':\n      case 'ArrayTexture(2)':\n      case 'ArrayTexture(3)':\n      case 'ArrayTexture(4)':\n        context.insertVariable(`uploadValue_${kernelArgument.name}`, args[i].texture);\n        break;\n      default:\n        throw new Error(`unhandled kernelArgumentType insertion for glWiretap of type ${kernelArgument.type}`);\n    }\n  });\n  result.push('/** start of injected functions **/');\n  result.push(`function ${toStringWithoutUtils(utils.flattenTo)}`);\n  result.push(`function ${toStringWithoutUtils(utils.flatten2dArrayTo)}`);\n  result.push(`function ${toStringWithoutUtils(utils.flatten3dArrayTo)}`);\n  result.push(`function ${toStringWithoutUtils(utils.flatten4dArrayTo)}`);\n  result.push(`function ${toStringWithoutUtils(utils.isArray)}`);\n  if (kernel.renderOutput !== kernel.renderTexture && kernel.formatValues) {\n    result.push(\n      `  const renderOutput = function ${toStringWithoutUtils(kernel.formatValues)};`\n    );\n  }\n  result.push('/** end of injected functions **/');\n  result.push(`  const innerKernel = function (${kernel.kernelArguments.map(kernelArgument => kernelArgument.varName).join(', ')}) {`);\n  context.setIndent(4);\n  kernel.run.apply(kernel, args);\n  if (kernel.renderKernels) {\n    kernel.renderKernels();\n  } else if (kernel.renderOutput) {\n    kernel.renderOutput();\n  }\n  result.push('    /** start setup uploads for kernel values **/');\n  kernel.kernelArguments.forEach(kernelArgument => {\n    result.push('    ' + kernelArgument.getStringValueHandler().split('\\n').join('\\n    '));\n  });\n  result.push('    /** end setup uploads for kernel values **/');\n  result.push(context.toString());\n  if (kernel.renderOutput === kernel.renderTexture) {\n    context.reset();\n    const framebufferName = context.getContextVariableName(kernel.framebuffer);\n    if (kernel.renderKernels) {\n      const results = kernel.renderKernels();\n      const textureName = context.getContextVariableName(kernel.texture.texture);\n      result.push(`    return {\n      result: {\n        texture: ${ textureName },\n        type: '${ results.result.type }',\n        toArray: ${ getToArrayString(results.result, textureName, framebufferName) }\n      },`);\n      const { subKernels, mappedTextures } = kernel;\n      for (let i = 0; i < subKernels.length; i++) {\n        const texture = mappedTextures[i];\n        const subKernel = subKernels[i];\n        const subKernelResult = results[subKernel.property];\n        const subKernelTextureName = context.getContextVariableName(texture.texture);\n        result.push(`\n      ${subKernel.property}: {\n        texture: ${ subKernelTextureName },\n        type: '${ subKernelResult.type }',\n        toArray: ${ getToArrayString(subKernelResult, subKernelTextureName, framebufferName) }\n      },`);\n      }\n      result.push(`    };`);\n    } else {\n      const rendered = kernel.renderOutput();\n      const textureName = context.getContextVariableName(kernel.texture.texture);\n      result.push(`    return {\n        texture: ${ textureName },\n        type: '${ rendered.type }',\n        toArray: ${ getToArrayString(rendered, textureName, framebufferName) }\n      };`);\n    }\n  }\n  result.push(`    ${destroyContextString ? '\\n' + destroyContextString + '    ': ''}`);\n  result.push(postResult.join('\\n'));\n  result.push('  };');\n  if (kernel.graphical) {\n    result.push(getGetPixelsString(kernel));\n    result.push(`  innerKernel.getPixels = getPixels;`);\n  }\n  result.push('  return innerKernel;');\n\n  let constantsUpload = [];\n  kernelConstants.forEach((kernelConstant) => {\n    constantsUpload.push(`${kernelConstant.getStringValueHandler()}`);\n  });\n  return `function kernel(settings) {\n  const { context, constants } = settings;\n  ${constantsUpload.join('')}\n  ${setupContextString ? setupContextString : ''}\n${result.join('\\n')}\n}`;\n}\n\nfunction getRenderString(targetName, kernel) {\n  const readBackValue = kernel.precision === 'single' ? targetName : `new Float32Array(${targetName}.buffer)`;\n  if (kernel.output[2]) {\n    return `renderOutput(${readBackValue}, ${kernel.output[0]}, ${kernel.output[1]}, ${kernel.output[2]})`;\n  }\n  if (kernel.output[1]) {\n    return `renderOutput(${readBackValue}, ${kernel.output[0]}, ${kernel.output[1]})`;\n  }\n\n  return `renderOutput(${readBackValue}, ${kernel.output[0]})`;\n}\n\nfunction getGetPixelsString(kernel) {\n  const getPixels = kernel.getPixels.toString();\n  const useFunctionKeyword = !/^function/.test(getPixels);\n  return utils.flattenFunctionToString(`${useFunctionKeyword ? 'function ' : ''}${ getPixels }`, {\n    findDependency: (object, name) => {\n      if (object === 'utils') {\n        return `const ${name} = ${utils[name].toString()};`;\n      }\n      return null;\n    },\n    thisLookup: (property) => {\n      if (property === 'context') {\n        return null;\n      }\n      if (kernel.hasOwnProperty(property)) {\n        return JSON.stringify(kernel[property]);\n      }\n      throw new Error(`unhandled thisLookup ${ property }`);\n    }\n  });\n}\n\nfunction getToArrayString(kernelResult, textureName, framebufferName) {\n  const toArray = kernelResult.toArray.toString();\n  const useFunctionKeyword = !/^function/.test(toArray);\n  const flattenedFunctions = utils.flattenFunctionToString(`${useFunctionKeyword ? 'function ' : ''}${ toArray }`, {\n    findDependency: (object, name) => {\n      if (object === 'utils') {\n        return `const ${name} = ${utils[name].toString()};`;\n      } else if (object === 'this') {\n        if (name === 'framebuffer') {\n          return '';\n        }\n        return `${useFunctionKeyword ? 'function ' : ''}${kernelResult[name].toString()}`;\n      } else {\n        throw new Error('unhandled fromObject');\n      }\n    },\n    thisLookup: (property, isDeclaration) => {\n      if (property === 'texture') {\n        return textureName;\n      }\n      if (property === 'context') {\n        if (isDeclaration) return null;\n        return 'gl';\n      }\n      if (kernelResult.hasOwnProperty(property)) {\n        return JSON.stringify(kernelResult[property]);\n      }\n      throw new Error(`unhandled thisLookup ${ property }`);\n    }\n  });\n  return `() => {\n  function framebuffer() { return ${framebufferName}; };\n  ${flattenedFunctions}\n  return toArray();\n  }`;\n}\n\nfunction findKernelValue(argument, kernelValues, values, context, uploadedValues) {\n  if (argument === null) return null;\n  if (kernelValues === null) return null;\n  switch (typeof argument) {\n    case 'boolean':\n    case 'number':\n      return null;\n  }\n  if (\n    typeof HTMLImageElement !== 'undefined' &&\n    argument instanceof HTMLImageElement\n  ) {\n    for (let i = 0; i < kernelValues.length; i++) {\n      const kernelValue = kernelValues[i];\n      if (kernelValue.type !== 'HTMLImageArray' && kernelValue) continue;\n      if (kernelValue.uploadValue !== argument) continue;\n      const variableIndex = values[i].indexOf(argument);\n      if (variableIndex === -1) continue;\n      const variableName = `uploadValue_${kernelValue.name}[${variableIndex}]`;\n      context.insertVariable(variableName, argument);\n      return variableName;\n    }\n  }\n\n  for (let i = 0; i < kernelValues.length; i++) {\n    const kernelValue = kernelValues[i];\n    if (argument !== kernelValue.uploadValue) continue;\n    const variable = `uploadValue_${kernelValue.name}`;\n    context.insertVariable(variable, kernelValue);\n    return variable;\n  }\n  return null;\n}\n\nmodule.exports = {\n  glKernelString\n};\n},{\"../../utils\":114,\"gl-wiretap\":3}],13:[function(require,module,exports){\nconst { Kernel } = require('../kernel');\nconst { utils } = require('../../utils');\nconst { GLTextureArray2Float } = require('./texture/array-2-float');\nconst { GLTextureArray2Float2D } = require('./texture/array-2-float-2d');\nconst { GLTextureArray2Float3D } = require('./texture/array-2-float-3d');\nconst { GLTextureArray3Float } = require('./texture/array-3-float');\nconst { GLTextureArray3Float2D } = require('./texture/array-3-float-2d');\nconst { GLTextureArray3Float3D } = require('./texture/array-3-float-3d');\nconst { GLTextureArray4Float } = require('./texture/array-4-float');\nconst { GLTextureArray4Float2D } = require('./texture/array-4-float-2d');\nconst { GLTextureArray4Float3D } = require('./texture/array-4-float-3d');\nconst { GLTextureFloat } = require('./texture/float');\nconst { GLTextureFloat2D } = require('./texture/float-2d');\nconst { GLTextureFloat3D } = require('./texture/float-3d');\nconst { GLTextureMemoryOptimized } = require('./texture/memory-optimized');\nconst { GLTextureMemoryOptimized2D } = require('./texture/memory-optimized-2d');\nconst { GLTextureMemoryOptimized3D } = require('./texture/memory-optimized-3d');\nconst { GLTextureUnsigned } = require('./texture/unsigned');\nconst { GLTextureUnsigned2D } = require('./texture/unsigned-2d');\nconst { GLTextureUnsigned3D } = require('./texture/unsigned-3d');\nconst { GLTextureGraphical } = require('./texture/graphical');\n\nclass GLKernel extends Kernel {\n  static get mode() {\n    return 'gpu';\n  }\n\n  static getIsFloatRead() {\n    const kernelString = `function kernelFunction() {\n      return 1;\n    }`;\n    const kernel = new this(kernelString, {\n      context: this.testContext,\n      canvas: this.testCanvas,\n      validate: false,\n      output: [1],\n      precision: 'single',\n      returnType: 'Number',\n      tactic: 'speed',\n    });\n    kernel.build();\n    kernel.run();\n    const result = kernel.renderOutput();\n    kernel.destroy(true);\n    return result[0] === 1;\n  }\n\n  static getIsIntegerDivisionAccurate() {\n    function kernelFunction(v1, v2) {\n      return v1[this.thread.x] / v2[this.thread.x];\n    }\n    const kernel = new this(kernelFunction.toString(), {\n      context: this.testContext,\n      canvas: this.testCanvas,\n      validate: false,\n      output: [2],\n      returnType: 'Number',\n      precision: 'unsigned',\n      tactic: 'speed',\n    });\n    const args = [\n      [6, 6030401],\n      [3, 3991]\n    ];\n    kernel.build.apply(kernel, args);\n    kernel.run.apply(kernel, args);\n    const result = kernel.renderOutput();\n    kernel.destroy(true);\n    return result[0] === 2 && result[1] === 1511;\n  }\n\n  static getIsSpeedTacticSupported() {\n    function kernelFunction(value) {\n      return value[this.thread.x];\n    }\n    const kernel = new this(kernelFunction.toString(), {\n      context: this.testContext,\n      canvas: this.testCanvas,\n      validate: false,\n      output: [4],\n      returnType: 'Number',\n      precision: 'unsigned',\n      tactic: 'speed',\n    });\n    const args = [\n      [0, 1, 2, 3]\n    ];\n    kernel.build.apply(kernel, args);\n    kernel.run.apply(kernel, args);\n    const result = kernel.renderOutput();\n    kernel.destroy(true);\n    return Math.round(result[0]) === 0 && Math.round(result[1]) === 1 && Math.round(result[2]) === 2 && Math.round(result[3]) === 3;\n  }\n\n  static get testCanvas() {\n    throw new Error(`\"testCanvas\" not defined on ${ this.name }`);\n  }\n\n  static get testContext() {\n    throw new Error(`\"testContext\" not defined on ${ this.name }`);\n  }\n\n  static getFeatures() {\n    const gl = this.testContext;\n    const isDrawBuffers = this.getIsDrawBuffers();\n    return Object.freeze({\n      isFloatRead: this.getIsFloatRead(),\n      isIntegerDivisionAccurate: this.getIsIntegerDivisionAccurate(),\n      isSpeedTacticSupported: this.getIsSpeedTacticSupported(),\n      isTextureFloat: this.getIsTextureFloat(),\n      isDrawBuffers,\n      kernelMap: isDrawBuffers,\n      channelCount: this.getChannelCount(),\n      maxTextureSize: this.getMaxTextureSize(),\n      lowIntPrecision: gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_INT),\n      lowFloatPrecision: gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_FLOAT),\n      mediumIntPrecision: gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_INT),\n      mediumFloatPrecision: gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT),\n      highIntPrecision: gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_INT),\n      highFloatPrecision: gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT),\n    });\n  }\n\n  static setupFeatureChecks() {\n    throw new Error(`\"setupFeatureChecks\" not defined on ${ this.name }`);\n  }\n\n  static getSignature(kernel, argumentTypes) {\n    return kernel.getVariablePrecisionString() + (argumentTypes.length > 0 ? ':' + argumentTypes.join(',') : '');\n  }\n\n  setFixIntegerDivisionAccuracy(fix) {\n    this.fixIntegerDivisionAccuracy = fix;\n    return this;\n  }\n\n  setPrecision(flag) {\n    this.precision = flag;\n    return this;\n  }\n\n  setFloatTextures(flag) {\n    utils.warnDeprecated('method', 'setFloatTextures', 'setOptimizeFloatMemory');\n    this.floatTextures = flag;\n    return this;\n  }\n\n  static nativeFunctionArguments(source) {\n    const argumentTypes = [];\n    const argumentNames = [];\n    const states = [];\n    const isStartingVariableName = /^[a-zA-Z_]/;\n    const isVariableChar = /[a-zA-Z_0-9]/;\n    let i = 0;\n    let argumentName = null;\n    let argumentType = null;\n    while (i < source.length) {\n      const char = source[i];\n      const nextChar = source[i + 1];\n      const state = states.length > 0 ? states[states.length - 1] : null;\n\n      if (state === 'FUNCTION_ARGUMENTS' && char === '/' && nextChar === '*') {\n        states.push('MULTI_LINE_COMMENT');\n        i += 2;\n        continue;\n      } else if (state === 'MULTI_LINE_COMMENT' && char === '*' && nextChar === '/') {\n        states.pop();\n        i += 2;\n        continue;\n      }\n\n      else if (state === 'FUNCTION_ARGUMENTS' && char === '/' && nextChar === '/') {\n        states.push('COMMENT');\n        i += 2;\n        continue;\n      } else if (state === 'COMMENT' && char === '\\n') {\n        states.pop();\n        i++;\n        continue;\n      }\n\n      else if (state === null && char === '(') {\n        states.push('FUNCTION_ARGUMENTS');\n        i++;\n        continue;\n      } else if (state === 'FUNCTION_ARGUMENTS') {\n        if (char === ')') {\n          states.pop();\n          break;\n        }\n        if (char === 'f' && nextChar === 'l' && source[i + 2] === 'o' && source[i + 3] === 'a' && source[i + 4] === 't' && source[i + 5] === ' ') {\n          states.push('DECLARE_VARIABLE');\n          argumentType = 'float';\n          argumentName = '';\n          i += 6;\n          continue;\n        } else if (char === 'i' && nextChar === 'n' && source[i + 2] === 't' && source[i + 3] === ' ') {\n          states.push('DECLARE_VARIABLE');\n          argumentType = 'int';\n          argumentName = '';\n          i += 4;\n          continue;\n        } else if (char === 'v' && nextChar === 'e' && source[i + 2] === 'c' && source[i + 3] === '2' && source[i + 4] === ' ') {\n          states.push('DECLARE_VARIABLE');\n          argumentType = 'vec2';\n          argumentName = '';\n          i += 5;\n          continue;\n        } else if (char === 'v' && nextChar === 'e' && source[i + 2] === 'c' && source[i + 3] === '3' && source[i + 4] === ' ') {\n          states.push('DECLARE_VARIABLE');\n          argumentType = 'vec3';\n          argumentName = '';\n          i += 5;\n          continue;\n        } else if (char === 'v' && nextChar === 'e' && source[i + 2] === 'c' && source[i + 3] === '4' && source[i + 4] === ' ') {\n          states.push('DECLARE_VARIABLE');\n          argumentType = 'vec4';\n          argumentName = '';\n          i += 5;\n          continue;\n        }\n      }\n\n      else if (state === 'DECLARE_VARIABLE') {\n        if (argumentName === '') {\n          if (char === ' ') {\n            i++;\n            continue;\n          }\n          if (!isStartingVariableName.test(char)) {\n            throw new Error('variable name is not expected string');\n          }\n        }\n        argumentName += char;\n        if (!isVariableChar.test(nextChar)) {\n          states.pop();\n          argumentNames.push(argumentName);\n          argumentTypes.push(typeMap[argumentType]);\n        }\n      }\n\n      i++;\n    }\n    if (states.length > 0) {\n      throw new Error('GLSL function was not parsable');\n    }\n    return {\n      argumentNames,\n      argumentTypes,\n    };\n  }\n\n  static nativeFunctionReturnType(source) {\n    return typeMap[source.match(/int|float|vec[2-4]/)[0]];\n  }\n\n  static combineKernels(combinedKernel, lastKernel) {\n    combinedKernel.apply(null, arguments);\n    const {\n      texSize,\n      context,\n      threadDim\n    } = lastKernel.texSize;\n    let result;\n    if (lastKernel.precision === 'single') {\n      const w = texSize[0];\n      const h = Math.ceil(texSize[1] / 4);\n      result = new Float32Array(w * h * 4 * 4);\n      context.readPixels(0, 0, w, h * 4, context.RGBA, context.FLOAT, result);\n    } else {\n      const bytes = new Uint8Array(texSize[0] * texSize[1] * 4);\n      context.readPixels(0, 0, texSize[0], texSize[1], context.RGBA, context.UNSIGNED_BYTE, bytes);\n      result = new Float32Array(bytes.buffer);\n    }\n\n    result = result.subarray(0, threadDim[0] * threadDim[1] * threadDim[2]);\n\n    if (lastKernel.output.length === 1) {\n      return result;\n    } else if (lastKernel.output.length === 2) {\n      return utils.splitArray(result, lastKernel.output[0]);\n    } else if (lastKernel.output.length === 3) {\n      const cube = utils.splitArray(result, lastKernel.output[0] * lastKernel.output[1]);\n      return cube.map(function(x) {\n        return utils.splitArray(x, lastKernel.output[0]);\n      });\n    }\n  }\n\n  constructor(source, settings) {\n    super(source, settings);\n    this.transferValues = null;\n    this.formatValues = null;\n    this.TextureConstructor = null;\n    this.renderOutput = null;\n    this.renderRawOutput = null;\n    this.texSize = null;\n    this.translatedSource = null;\n    this.compiledFragmentShader = null;\n    this.compiledVertexShader = null;\n    this.switchingKernels = null;\n    this._textureSwitched = null;\n    this._mappedTextureSwitched = null;\n  }\n\n  checkTextureSize() {\n    const { features } = this.constructor;\n    if (this.texSize[0] > features.maxTextureSize || this.texSize[1] > features.maxTextureSize) {\n      throw new Error(`Texture size [${this.texSize[0]},${this.texSize[1]}] generated by kernel is larger than supported size [${features.maxTextureSize},${features.maxTextureSize}]`);\n    }\n  }\n\n  translateSource() {\n    throw new Error(`\"translateSource\" not defined on ${this.constructor.name}`);\n  }\n\n  pickRenderStrategy(args) {\n    if (this.graphical) {\n      this.renderRawOutput = this.readPackedPixelsToUint8Array;\n      this.transferValues = (pixels) => pixels;\n      this.TextureConstructor = GLTextureGraphical;\n      return null;\n    }\n    if (this.precision === 'unsigned') {\n      this.renderRawOutput = this.readPackedPixelsToUint8Array;\n      this.transferValues = this.readPackedPixelsToFloat32Array;\n      if (this.pipeline) {\n        this.renderOutput = this.renderTexture;\n        if (this.subKernels !== null) {\n          this.renderKernels = this.renderKernelsToTextures;\n        }\n        switch (this.returnType) {\n          case 'LiteralInteger':\n          case 'Float':\n          case 'Number':\n          case 'Integer':\n            if (this.output[2] > 0) {\n              this.TextureConstructor = GLTextureUnsigned3D;\n              return null;\n            } else if (this.output[1] > 0) {\n              this.TextureConstructor = GLTextureUnsigned2D;\n              return null;\n            } else {\n              this.TextureConstructor = GLTextureUnsigned;\n              return null;\n            }\n            case 'Array(2)':\n            case 'Array(3)':\n            case 'Array(4)':\n              return this.requestFallback(args);\n        }\n      } else {\n        if (this.subKernels !== null) {\n          this.renderKernels = this.renderKernelsToArrays;\n        }\n        switch (this.returnType) {\n          case 'LiteralInteger':\n          case 'Float':\n          case 'Number':\n          case 'Integer':\n            this.renderOutput = this.renderValues;\n            if (this.output[2] > 0) {\n              this.TextureConstructor = GLTextureUnsigned3D;\n              this.formatValues = utils.erect3DPackedFloat;\n              return null;\n            } else if (this.output[1] > 0) {\n              this.TextureConstructor = GLTextureUnsigned2D;\n              this.formatValues = utils.erect2DPackedFloat;\n              return null;\n            } else {\n              this.TextureConstructor = GLTextureUnsigned;\n              this.formatValues = utils.erectPackedFloat;\n              return null;\n            }\n            case 'Array(2)':\n            case 'Array(3)':\n            case 'Array(4)':\n              return this.requestFallback(args);\n        }\n      }\n    } else if (this.precision === 'single') {\n      this.renderRawOutput = this.readFloatPixelsToFloat32Array;\n      this.transferValues = this.readFloatPixelsToFloat32Array;\n      if (this.pipeline) {\n        this.renderOutput = this.renderTexture;\n        if (this.subKernels !== null) {\n          this.renderKernels = this.renderKernelsToTextures;\n        }\n        switch (this.returnType) {\n          case 'LiteralInteger':\n          case 'Float':\n          case 'Number':\n          case 'Integer': {\n            if (this.optimizeFloatMemory) {\n              if (this.output[2] > 0) {\n                this.TextureConstructor = GLTextureMemoryOptimized3D;\n                return null;\n              } else if (this.output[1] > 0) {\n                this.TextureConstructor = GLTextureMemoryOptimized2D;\n                return null;\n              } else {\n                this.TextureConstructor = GLTextureMemoryOptimized;\n                return null;\n              }\n            } else {\n              if (this.output[2] > 0) {\n                this.TextureConstructor = GLTextureFloat3D;\n                return null;\n              } else if (this.output[1] > 0) {\n                this.TextureConstructor = GLTextureFloat2D;\n                return null;\n              } else {\n                this.TextureConstructor = GLTextureFloat;\n                return null;\n              }\n            }\n          }\n          case 'Array(2)': {\n            if (this.output[2] > 0) {\n              this.TextureConstructor = GLTextureArray2Float3D;\n              return null;\n            } else if (this.output[1] > 0) {\n              this.TextureConstructor = GLTextureArray2Float2D;\n              return null;\n            } else {\n              this.TextureConstructor = GLTextureArray2Float;\n              return null;\n            }\n          }\n          case 'Array(3)': {\n            if (this.output[2] > 0) {\n              this.TextureConstructor = GLTextureArray3Float3D;\n              return null;\n            } else if (this.output[1] > 0) {\n              this.TextureConstructor = GLTextureArray3Float2D;\n              return null;\n            } else {\n              this.TextureConstructor = GLTextureArray3Float;\n              return null;\n            }\n          }\n          case 'Array(4)': {\n            if (this.output[2] > 0) {\n              this.TextureConstructor = GLTextureArray4Float3D;\n              return null;\n            } else if (this.output[1] > 0) {\n              this.TextureConstructor = GLTextureArray4Float2D;\n              return null;\n            } else {\n              this.TextureConstructor = GLTextureArray4Float;\n              return null;\n            }\n          }\n        }\n      }\n      this.renderOutput = this.renderValues;\n      if (this.subKernels !== null) {\n        this.renderKernels = this.renderKernelsToArrays;\n      }\n      if (this.optimizeFloatMemory) {\n        switch (this.returnType) {\n          case 'LiteralInteger':\n          case 'Float':\n          case 'Number':\n          case 'Integer': {\n            if (this.output[2] > 0) {\n              this.TextureConstructor = GLTextureMemoryOptimized3D;\n              this.formatValues = utils.erectMemoryOptimized3DFloat;\n              return null;\n            } else if (this.output[1] > 0) {\n              this.TextureConstructor = GLTextureMemoryOptimized2D;\n              this.formatValues = utils.erectMemoryOptimized2DFloat;\n              return null;\n            } else {\n              this.TextureConstructor = GLTextureMemoryOptimized;\n              this.formatValues = utils.erectMemoryOptimizedFloat;\n              return null;\n            }\n          }\n          case 'Array(2)': {\n            if (this.output[2] > 0) {\n              this.TextureConstructor = GLTextureArray2Float3D;\n              this.formatValues = utils.erect3DArray2;\n              return null;\n            } else if (this.output[1] > 0) {\n              this.TextureConstructor = GLTextureArray2Float2D;\n              this.formatValues = utils.erect2DArray2;\n              return null;\n            } else {\n              this.TextureConstructor = GLTextureArray2Float;\n              this.formatValues = utils.erectArray2;\n              return null;\n            }\n          }\n          case 'Array(3)': {\n            if (this.output[2] > 0) {\n              this.TextureConstructor = GLTextureArray3Float3D;\n              this.formatValues = utils.erect3DArray3;\n              return null;\n            } else if (this.output[1] > 0) {\n              this.TextureConstructor = GLTextureArray3Float2D;\n              this.formatValues = utils.erect2DArray3;\n              return null;\n            } else {\n              this.TextureConstructor = GLTextureArray3Float;\n              this.formatValues = utils.erectArray3;\n              return null;\n            }\n          }\n          case 'Array(4)': {\n            if (this.output[2] > 0) {\n              this.TextureConstructor = GLTextureArray4Float3D;\n              this.formatValues = utils.erect3DArray4;\n              return null;\n            } else if (this.output[1] > 0) {\n              this.TextureConstructor = GLTextureArray4Float2D;\n              this.formatValues = utils.erect2DArray4;\n              return null;\n            } else {\n              this.TextureConstructor = GLTextureArray4Float;\n              this.formatValues = utils.erectArray4;\n              return null;\n            }\n          }\n        }\n      } else {\n        switch (this.returnType) {\n          case 'LiteralInteger':\n          case 'Float':\n          case 'Number':\n          case 'Integer': {\n            if (this.output[2] > 0) {\n              this.TextureConstructor = GLTextureFloat3D;\n              this.formatValues = utils.erect3DFloat;\n              return null;\n            } else if (this.output[1] > 0) {\n              this.TextureConstructor = GLTextureFloat2D;\n              this.formatValues = utils.erect2DFloat;\n              return null;\n            } else {\n              this.TextureConstructor = GLTextureFloat;\n              this.formatValues = utils.erectFloat;\n              return null;\n            }\n          }\n          case 'Array(2)': {\n            if (this.output[2] > 0) {\n              this.TextureConstructor = GLTextureArray2Float3D;\n              this.formatValues = utils.erect3DArray2;\n              return null;\n            } else if (this.output[1] > 0) {\n              this.TextureConstructor = GLTextureArray2Float2D;\n              this.formatValues = utils.erect2DArray2;\n              return null;\n            } else {\n              this.TextureConstructor = GLTextureArray2Float;\n              this.formatValues = utils.erectArray2;\n              return null;\n            }\n          }\n          case 'Array(3)': {\n            if (this.output[2] > 0) {\n              this.TextureConstructor = GLTextureArray3Float3D;\n              this.formatValues = utils.erect3DArray3;\n              return null;\n            } else if (this.output[1] > 0) {\n              this.TextureConstructor = GLTextureArray3Float2D;\n              this.formatValues = utils.erect2DArray3;\n              return null;\n            } else {\n              this.TextureConstructor = GLTextureArray3Float;\n              this.formatValues = utils.erectArray3;\n              return null;\n            }\n          }\n          case 'Array(4)': {\n            if (this.output[2] > 0) {\n              this.TextureConstructor = GLTextureArray4Float3D;\n              this.formatValues = utils.erect3DArray4;\n              return null;\n            } else if (this.output[1] > 0) {\n              this.TextureConstructor = GLTextureArray4Float2D;\n              this.formatValues = utils.erect2DArray4;\n              return null;\n            } else {\n              this.TextureConstructor = GLTextureArray4Float;\n              this.formatValues = utils.erectArray4;\n              return null;\n            }\n          }\n        }\n      }\n    } else {\n      throw new Error(`unhandled precision of \"${this.precision}\"`);\n    }\n\n    throw new Error(`unhandled return type \"${this.returnType}\"`);\n  }\n\n  getKernelString() {\n    throw new Error(`abstract method call`);\n  }\n\n  getMainResultTexture() {\n    switch (this.returnType) {\n      case 'LiteralInteger':\n      case 'Float':\n      case 'Integer':\n      case 'Number':\n        return this.getMainResultNumberTexture();\n      case 'Array(2)':\n        return this.getMainResultArray2Texture();\n      case 'Array(3)':\n        return this.getMainResultArray3Texture();\n      case 'Array(4)':\n        return this.getMainResultArray4Texture();\n      default:\n        throw new Error(`unhandled returnType type ${ this.returnType }`);\n    }\n  }\n\n  getMainResultKernelNumberTexture() {\n    throw new Error(`abstract method call`);\n  }\n  getMainResultSubKernelNumberTexture() {\n    throw new Error(`abstract method call`);\n  }\n  getMainResultKernelArray2Texture() {\n    throw new Error(`abstract method call`);\n  }\n  getMainResultSubKernelArray2Texture() {\n    throw new Error(`abstract method call`);\n  }\n  getMainResultKernelArray3Texture() {\n    throw new Error(`abstract method call`);\n  }\n  getMainResultSubKernelArray3Texture() {\n    throw new Error(`abstract method call`);\n  }\n  getMainResultKernelArray4Texture() {\n    throw new Error(`abstract method call`);\n  }\n  getMainResultSubKernelArray4Texture() {\n    throw new Error(`abstract method call`);\n  }\n  getMainResultGraphical() {\n    throw new Error(`abstract method call`);\n  }\n  getMainResultMemoryOptimizedFloats() {\n    throw new Error(`abstract method call`);\n  }\n  getMainResultPackedPixels() {\n    throw new Error(`abstract method call`);\n  }\n\n  getMainResultString() {\n    if (this.graphical) {\n      return this.getMainResultGraphical();\n    } else if (this.precision === 'single') {\n      if (this.optimizeFloatMemory) {\n        return this.getMainResultMemoryOptimizedFloats();\n      }\n      return this.getMainResultTexture();\n    } else {\n      return this.getMainResultPackedPixels();\n    }\n  }\n\n  getMainResultNumberTexture() {\n    return utils.linesToString(this.getMainResultKernelNumberTexture()) +\n      utils.linesToString(this.getMainResultSubKernelNumberTexture());\n  }\n\n  getMainResultArray2Texture() {\n    return utils.linesToString(this.getMainResultKernelArray2Texture()) +\n      utils.linesToString(this.getMainResultSubKernelArray2Texture());\n  }\n\n  getMainResultArray3Texture() {\n    return utils.linesToString(this.getMainResultKernelArray3Texture()) +\n      utils.linesToString(this.getMainResultSubKernelArray3Texture());\n  }\n\n  getMainResultArray4Texture() {\n    return utils.linesToString(this.getMainResultKernelArray4Texture()) +\n      utils.linesToString(this.getMainResultSubKernelArray4Texture());\n  }\n\n  getFloatTacticDeclaration() {\n    const variablePrecision = this.getVariablePrecisionString(this.texSize, this.tactic);\n    return `precision ${variablePrecision} float;\\n`;\n  }\n\n  getIntTacticDeclaration() {\n    return `precision ${this.getVariablePrecisionString(this.texSize, this.tactic, true)} int;\\n`;\n  }\n\n  getSampler2DTacticDeclaration() {\n    return `precision ${this.getVariablePrecisionString(this.texSize, this.tactic)} sampler2D;\\n`;\n  }\n\n  getSampler2DArrayTacticDeclaration() {\n    return `precision ${this.getVariablePrecisionString(this.texSize, this.tactic)} sampler2DArray;\\n`;\n  }\n\n  renderTexture() {\n    return this.immutable ? this.texture.clone() : this.texture;\n  }\n  readPackedPixelsToUint8Array() {\n    if (this.precision !== 'unsigned') throw new Error('Requires this.precision to be \"unsigned\"');\n    const {\n      texSize,\n      context: gl\n    } = this;\n    const result = new Uint8Array(texSize[0] * texSize[1] * 4);\n    gl.readPixels(0, 0, texSize[0], texSize[1], gl.RGBA, gl.UNSIGNED_BYTE, result);\n    return result;\n  }\n\n  readPackedPixelsToFloat32Array() {\n    return new Float32Array(this.readPackedPixelsToUint8Array().buffer);\n  }\n\n  readFloatPixelsToFloat32Array() {\n    if (this.precision !== 'single') throw new Error('Requires this.precision to be \"single\"');\n    const {\n      texSize,\n      context: gl\n    } = this;\n    const w = texSize[0];\n    const h = texSize[1];\n    const result = new Float32Array(w * h * 4);\n    gl.readPixels(0, 0, w, h, gl.RGBA, gl.FLOAT, result);\n    return result;\n  }\n\n  getPixels(flip) {\n    const {\n      context: gl,\n      output\n    } = this;\n    const [width, height] = output;\n    const pixels = new Uint8Array(width * height * 4);\n    gl.readPixels(0, 0, width, height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n    return new Uint8ClampedArray((flip ? pixels : utils.flipPixels(pixels, width, height)).buffer);\n  }\n\n  renderKernelsToArrays() {\n    const result = {\n      result: this.renderOutput(),\n    };\n    for (let i = 0; i < this.subKernels.length; i++) {\n      result[this.subKernels[i].property] = this.mappedTextures[i].toArray();\n    }\n    return result;\n  }\n\n  renderKernelsToTextures() {\n    const result = {\n      result: this.renderOutput(),\n    };\n    if (this.immutable) {\n      for (let i = 0; i < this.subKernels.length; i++) {\n        result[this.subKernels[i].property] = this.mappedTextures[i].clone();\n      }\n    } else {\n      for (let i = 0; i < this.subKernels.length; i++) {\n        result[this.subKernels[i].property] = this.mappedTextures[i];\n      }\n    }\n    return result;\n  }\n\n  resetSwitchingKernels() {\n    const existingValue = this.switchingKernels;\n    this.switchingKernels = null;\n    return existingValue;\n  }\n\n  setOutput(output) {\n    const newOutput = this.toKernelOutput(output);\n    if (this.program) {\n      if (!this.dynamicOutput) {\n        throw new Error('Resizing a kernel with dynamicOutput: false is not possible');\n      }\n      const newThreadDim = [newOutput[0], newOutput[1] || 1, newOutput[2] || 1];\n      const newTexSize = utils.getKernelTextureSize({\n        optimizeFloatMemory: this.optimizeFloatMemory,\n        precision: this.precision,\n      }, newThreadDim);\n      const oldTexSize = this.texSize;\n      if (oldTexSize) {\n        const oldPrecision = this.getVariablePrecisionString(oldTexSize, this.tactic);\n        const newPrecision = this.getVariablePrecisionString(newTexSize, this.tactic);\n        if (oldPrecision !== newPrecision) {\n          if (this.debug) {\n            console.warn('Precision requirement changed, asking GPU instance to recompile');\n          }\n          this.switchKernels({\n            type: 'outputPrecisionMismatch',\n            precision: newPrecision,\n            needed: output\n          });\n          return;\n        }\n      }\n      this.output = newOutput;\n      this.threadDim = newThreadDim;\n      this.texSize = newTexSize;\n      const { context: gl } = this;\n      gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n      this.updateMaxTexSize();\n      this.framebuffer.width = this.texSize[0];\n      this.framebuffer.height = this.texSize[1];\n      gl.viewport(0, 0, this.maxTexSize[0], this.maxTexSize[1]);\n      this.canvas.width = this.maxTexSize[0];\n      this.canvas.height = this.maxTexSize[1];\n      if (this.texture) {\n        this.texture.delete();\n      }\n      this.texture = null;\n      this._setupOutputTexture();\n      if (this.mappedTextures && this.mappedTextures.length > 0) {\n        for (let i = 0; i < this.mappedTextures.length; i++) {\n          this.mappedTextures[i].delete();\n        }\n        this.mappedTextures = null;\n        this._setupSubOutputTextures();\n      }\n    } else {\n      this.output = newOutput;\n    }\n    return this;\n  }\n  renderValues() {\n    return this.formatValues(\n      this.transferValues(),\n      this.output[0],\n      this.output[1],\n      this.output[2]\n    );\n  }\n  switchKernels(reason) {\n    if (this.switchingKernels) {\n      this.switchingKernels.push(reason);\n    } else {\n      this.switchingKernels = [reason];\n    }\n  }\n  getVariablePrecisionString(textureSize = this.texSize, tactic = this.tactic, isInt = false) {\n    if (!tactic) {\n      if (!this.constructor.features.isSpeedTacticSupported) return 'highp';\n      const low = this.constructor.features[isInt ? 'lowIntPrecision' : 'lowFloatPrecision'];\n      const medium = this.constructor.features[isInt ? 'mediumIntPrecision' : 'mediumFloatPrecision'];\n      const high = this.constructor.features[isInt ? 'highIntPrecision' : 'highFloatPrecision'];\n      const requiredSize = Math.log2(textureSize[0] * textureSize[1]);\n      if (requiredSize <= low.rangeMax) {\n        return 'lowp';\n      } else if (requiredSize <= medium.rangeMax) {\n        return 'mediump';\n      } else if (requiredSize <= high.rangeMax) {\n        return 'highp';\n      } else {\n        throw new Error(`The required size exceeds that of the ability of your system`);\n      }\n    }\n    switch (tactic) {\n      case 'speed':\n        return 'lowp';\n      case 'balanced':\n        return 'mediump';\n      case 'precision':\n        return 'highp';\n      default:\n        throw new Error(`Unknown tactic \"${tactic}\" use \"speed\", \"balanced\", \"precision\", or empty for auto`);\n    }\n  }\n\n  updateTextureArgumentRefs(kernelValue, arg) {\n    if (!this.immutable) return;\n    if (this.texture.texture === arg.texture) {\n      const { prevArg } = kernelValue;\n      if (prevArg) {\n        if (prevArg.texture._refs === 1) {\n          this.texture.delete();\n          this.texture = prevArg.clone();\n          this._textureSwitched = true;\n        }\n        prevArg.delete();\n      }\n      kernelValue.prevArg = arg.clone();\n    } else if (this.mappedTextures && this.mappedTextures.length > 0) {\n      const { mappedTextures } = this;\n      for (let i = 0; i < mappedTextures.length; i++) {\n        const mappedTexture = mappedTextures[i];\n        if (mappedTexture.texture === arg.texture) {\n          const { prevArg } = kernelValue;\n          if (prevArg) {\n            if (prevArg.texture._refs === 1) {\n              mappedTexture.delete();\n              mappedTextures[i] = prevArg.clone();\n              this._mappedTextureSwitched[i] = true;\n            }\n            prevArg.delete();\n          }\n          kernelValue.prevArg = arg.clone();\n          return;\n        }\n      }\n    }\n  }\n\n  onActivate(previousKernel) {\n    this._textureSwitched = true;\n    this.texture = previousKernel.texture;\n    if (this.mappedTextures) {\n      for (let i = 0; i < this.mappedTextures.length; i++) {\n        this._mappedTextureSwitched[i] = true;\n      }\n      this.mappedTextures = previousKernel.mappedTextures;\n    }\n  }\n\n  initCanvas() {}\n}\n\nconst typeMap = {\n  int: 'Integer',\n  float: 'Number',\n  vec2: 'Array(2)',\n  vec3: 'Array(3)',\n  vec4: 'Array(4)',\n};\n\nmodule.exports = {\n  GLKernel\n};\n},{\"../../utils\":114,\"../kernel\":36,\"./texture/array-2-float\":16,\"./texture/array-2-float-2d\":14,\"./texture/array-2-float-3d\":15,\"./texture/array-3-float\":19,\"./texture/array-3-float-2d\":17,\"./texture/array-3-float-3d\":18,\"./texture/array-4-float\":22,\"./texture/array-4-float-2d\":20,\"./texture/array-4-float-3d\":21,\"./texture/float\":25,\"./texture/float-2d\":23,\"./texture/float-3d\":24,\"./texture/graphical\":26,\"./texture/memory-optimized\":30,\"./texture/memory-optimized-2d\":28,\"./texture/memory-optimized-3d\":29,\"./texture/unsigned\":33,\"./texture/unsigned-2d\":31,\"./texture/unsigned-3d\":32}],14:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTextureFloat } = require('./float');\n\nclass GLTextureArray2Float2D extends GLTextureFloat {\n  constructor(settings) {\n    super(settings);\n    this.type = 'ArrayTexture(2)';\n  }\n  toArray() {\n    return utils.erect2DArray2(this.renderValues(), this.output[0], this.output[1]);\n  }\n}\n\nmodule.exports = {\n  GLTextureArray2Float2D\n};\n},{\"../../../utils\":114,\"./float\":25}],15:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTextureFloat } = require('./float');\n\nclass GLTextureArray2Float3D extends GLTextureFloat {\n  constructor(settings) {\n    super(settings);\n    this.type = 'ArrayTexture(2)';\n  }\n  toArray() {\n    return utils.erect3DArray2(this.renderValues(), this.output[0], this.output[1], this.output[2]);\n  }\n}\n\nmodule.exports = {\n  GLTextureArray2Float3D\n};\n},{\"../../../utils\":114,\"./float\":25}],16:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTextureFloat } = require('./float');\n\nclass GLTextureArray2Float extends GLTextureFloat {\n  constructor(settings) {\n    super(settings);\n    this.type = 'ArrayTexture(2)';\n  }\n  toArray() {\n    return utils.erectArray2(this.renderValues(), this.output[0], this.output[1]);\n  }\n}\n\nmodule.exports = {\n  GLTextureArray2Float\n};\n},{\"../../../utils\":114,\"./float\":25}],17:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTextureFloat } = require('./float');\n\nclass GLTextureArray3Float2D extends GLTextureFloat {\n  constructor(settings) {\n    super(settings);\n    this.type = 'ArrayTexture(3)';\n  }\n  toArray() {\n    return utils.erect2DArray3(this.renderValues(), this.output[0], this.output[1]);\n  }\n}\n\nmodule.exports = {\n  GLTextureArray3Float2D\n};\n},{\"../../../utils\":114,\"./float\":25}],18:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTextureFloat } = require('./float');\n\nclass GLTextureArray3Float3D extends GLTextureFloat {\n  constructor(settings) {\n    super(settings);\n    this.type = 'ArrayTexture(3)';\n  }\n  toArray() {\n    return utils.erect3DArray3(this.renderValues(), this.output[0], this.output[1], this.output[2]);\n  }\n}\n\nmodule.exports = {\n  GLTextureArray3Float3D\n};\n},{\"../../../utils\":114,\"./float\":25}],19:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTextureFloat } = require('./float');\n\nclass GLTextureArray3Float extends GLTextureFloat {\n  constructor(settings) {\n    super(settings);\n    this.type = 'ArrayTexture(3)';\n  }\n  toArray() {\n    return utils.erectArray3(this.renderValues(), this.output[0]);\n  }\n}\n\nmodule.exports = {\n  GLTextureArray3Float\n};\n},{\"../../../utils\":114,\"./float\":25}],20:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTextureFloat } = require('./float');\n\nclass GLTextureArray4Float2D extends GLTextureFloat {\n  constructor(settings) {\n    super(settings);\n    this.type = 'ArrayTexture(4)';\n  }\n  toArray() {\n    return utils.erect2DArray4(this.renderValues(), this.output[0], this.output[1]);\n  }\n}\n\nmodule.exports = {\n  GLTextureArray4Float2D\n};\n},{\"../../../utils\":114,\"./float\":25}],21:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTextureFloat } = require('./float');\n\nclass GLTextureArray4Float3D extends GLTextureFloat {\n  constructor(settings) {\n    super(settings);\n    this.type = 'ArrayTexture(4)';\n  }\n  toArray() {\n    return utils.erect3DArray4(this.renderValues(), this.output[0], this.output[1], this.output[2]);\n  }\n}\n\nmodule.exports = {\n  GLTextureArray4Float3D\n};\n},{\"../../../utils\":114,\"./float\":25}],22:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTextureFloat } = require('./float');\n\nclass GLTextureArray4Float extends GLTextureFloat {\n  constructor(settings) {\n    super(settings);\n    this.type = 'ArrayTexture(4)';\n  }\n  toArray() {\n    return utils.erectArray4(this.renderValues(), this.output[0]);\n  }\n}\n\nmodule.exports = {\n  GLTextureArray4Float\n};\n},{\"../../../utils\":114,\"./float\":25}],23:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTextureFloat } = require('./float');\n\nclass GLTextureFloat2D extends GLTextureFloat {\n  constructor(settings) {\n    super(settings);\n    this.type = 'ArrayTexture(1)';\n  }\n  toArray() {\n    return utils.erect2DFloat(this.renderValues(), this.output[0], this.output[1]);\n  }\n}\n\nmodule.exports = {\n  GLTextureFloat2D\n};\n},{\"../../../utils\":114,\"./float\":25}],24:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTextureFloat } = require('./float');\n\nclass GLTextureFloat3D extends GLTextureFloat {\n  constructor(settings) {\n    super(settings);\n    this.type = 'ArrayTexture(1)';\n  }\n  toArray() {\n    return utils.erect3DFloat(this.renderValues(), this.output[0], this.output[1], this.output[2]);\n  }\n}\n\nmodule.exports = {\n  GLTextureFloat3D\n};\n},{\"../../../utils\":114,\"./float\":25}],25:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTexture } = require('./index');\n\nclass GLTextureFloat extends GLTexture {\n  get textureType() {\n    return this.context.FLOAT;\n  }\n  constructor(settings) {\n    super(settings);\n    this.type = 'ArrayTexture(1)';\n  }\n  renderRawOutput() {\n    const gl = this.context;\n    const size = this.size;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer());\n    gl.framebufferTexture2D(\n      gl.FRAMEBUFFER,\n      gl.COLOR_ATTACHMENT0,\n      gl.TEXTURE_2D,\n      this.texture,\n      0\n    );\n    const result = new Float32Array(size[0] * size[1] * 4);\n    gl.readPixels(0, 0, size[0], size[1], gl.RGBA, gl.FLOAT, result);\n    return result;\n  }\n  renderValues() {\n    if (this._deleted) return null;\n    return this.renderRawOutput();\n  }\n  toArray() {\n    return utils.erectFloat(this.renderValues(), this.output[0]);\n  }\n}\n\nmodule.exports = {\n  GLTextureFloat\n};\n},{\"../../../utils\":114,\"./index\":27}],26:[function(require,module,exports){\nconst { GLTextureUnsigned } = require('./unsigned');\n\nclass GLTextureGraphical extends GLTextureUnsigned {\n  constructor(settings) {\n    super(settings);\n    this.type = 'ArrayTexture(4)';\n  }\n  toArray() {\n    return this.renderValues();\n  }\n}\n\nmodule.exports = {\n  GLTextureGraphical\n};\n},{\"./unsigned\":33}],27:[function(require,module,exports){\nconst { Texture } = require('../../../texture');\n\nclass GLTexture extends Texture {\n  get textureType() {\n    throw new Error(`\"textureType\" not implemented on ${ this.name }`);\n  }\n\n  clone() {\n    return new this.constructor(this);\n  }\n\n  beforeMutate() {\n    if (this.texture._refs > 1) {\n      this.newTexture();\n      return true;\n    }\n    return false;\n  }\n\n  cloneTexture() {\n    this.texture._refs--;\n    const { context: gl, size, texture, kernel } = this;\n    if (kernel.debug) {\n      console.warn('cloning internal texture');\n    }\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer());\n    selectTexture(gl, texture);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n    const target = gl.createTexture();\n    selectTexture(gl, target);\n    gl.texImage2D(gl.TEXTURE_2D, 0, this.internalFormat, size[0], size[1], 0, this.textureFormat, this.textureType, null);\n    gl.copyTexSubImage2D(gl.TEXTURE_2D, 0, 0, 0, 0, 0, size[0], size[1]);\n    target._refs = 1;\n    this.texture = target;\n  }\n\n  newTexture() {\n    this.texture._refs--;\n    const gl = this.context;\n    const size = this.size;\n    const kernel = this.kernel;\n    if (kernel.debug) {\n      console.warn('new internal texture');\n    }\n    const target = gl.createTexture();\n    selectTexture(gl, target);\n    gl.texImage2D(gl.TEXTURE_2D, 0, this.internalFormat, size[0], size[1], 0, this.textureFormat, this.textureType, null);\n    target._refs = 1;\n    this.texture = target;\n  }\n\n  clear() {\n    if (this.texture._refs) {\n      this.texture._refs--;\n      const gl = this.context;\n      const target = this.texture = gl.createTexture();\n      selectTexture(gl, target);\n      const size = this.size;\n      target._refs = 1;\n      gl.texImage2D(gl.TEXTURE_2D, 0, this.internalFormat, size[0], size[1], 0, this.textureFormat, this.textureType, null);\n    }\n    const { context: gl, texture } = this;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer());\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    selectTexture(gl, texture);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n    gl.clearColor(0, 0, 0, 0);\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n  }\n\n  delete() {\n    if (this._deleted) return;\n    this._deleted = true;\n    if (this.texture._refs) {\n      this.texture._refs--;\n      if (this.texture._refs) return;\n    }\n    this.context.deleteTexture(this.texture);\n  }\n\n  framebuffer() {\n    if (!this._framebuffer) {\n      this._framebuffer = this.kernel.getRawValueFramebuffer(this.size[0], this.size[1]);\n    }\n    return this._framebuffer;\n  }\n}\n\nfunction selectTexture(gl, texture) {\n  gl.activeTexture(gl.TEXTURE15);\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n}\n\nmodule.exports = { GLTexture };\n},{\"../../../texture\":113}],28:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTextureFloat } = require('./float');\n\nclass GLTextureMemoryOptimized2D extends GLTextureFloat {\n  constructor(settings) {\n    super(settings);\n    this.type = 'MemoryOptimizedNumberTexture';\n  }\n  toArray() {\n    return utils.erectMemoryOptimized2DFloat(this.renderValues(), this.output[0], this.output[1]);\n  }\n}\n\nmodule.exports = {\n  GLTextureMemoryOptimized2D\n};\n},{\"../../../utils\":114,\"./float\":25}],29:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTextureFloat } = require('./float');\n\nclass GLTextureMemoryOptimized3D extends GLTextureFloat {\n  constructor(settings) {\n    super(settings);\n    this.type = 'MemoryOptimizedNumberTexture';\n  }\n  toArray() {\n    return utils.erectMemoryOptimized3DFloat(this.renderValues(), this.output[0], this.output[1], this.output[2]);\n  }\n}\n\nmodule.exports = {\n  GLTextureMemoryOptimized3D\n};\n},{\"../../../utils\":114,\"./float\":25}],30:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTextureFloat } = require('./float');\n\nclass GLTextureMemoryOptimized extends GLTextureFloat {\n  constructor(settings) {\n    super(settings);\n    this.type = 'MemoryOptimizedNumberTexture';\n  }\n  toArray() {\n    return utils.erectMemoryOptimizedFloat(this.renderValues(), this.output[0]);\n  }\n}\n\nmodule.exports = {\n  GLTextureMemoryOptimized\n};\n},{\"../../../utils\":114,\"./float\":25}],31:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTextureUnsigned } = require('./unsigned');\n\nclass GLTextureUnsigned2D extends GLTextureUnsigned {\n  constructor(settings) {\n    super(settings);\n    this.type = 'NumberTexture';\n  }\n  toArray() {\n    return utils.erect2DPackedFloat(this.renderValues(), this.output[0], this.output[1]);\n  }\n}\n\nmodule.exports = {\n  GLTextureUnsigned2D\n};\n},{\"../../../utils\":114,\"./unsigned\":33}],32:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTextureUnsigned } = require('./unsigned');\n\nclass GLTextureUnsigned3D extends GLTextureUnsigned {\n  constructor(settings) {\n    super(settings);\n    this.type = 'NumberTexture';\n  }\n  toArray() {\n    return utils.erect3DPackedFloat(this.renderValues(), this.output[0], this.output[1], this.output[2]);\n  }\n}\n\nmodule.exports = {\n  GLTextureUnsigned3D\n};\n},{\"../../../utils\":114,\"./unsigned\":33}],33:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { GLTexture } = require('./index');\n\nclass GLTextureUnsigned extends GLTexture {\n  get textureType() {\n    return this.context.UNSIGNED_BYTE;\n  }\n  constructor(settings) {\n    super(settings);\n    this.type = 'NumberTexture';\n  }\n  renderRawOutput() {\n    const { context: gl } = this;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer());\n    gl.framebufferTexture2D(\n      gl.FRAMEBUFFER,\n      gl.COLOR_ATTACHMENT0,\n      gl.TEXTURE_2D,\n      this.texture,\n      0\n    );\n    const result = new Uint8Array(this.size[0] * this.size[1] * 4);\n    gl.readPixels(0, 0, this.size[0], this.size[1], gl.RGBA, gl.UNSIGNED_BYTE, result);\n    return result;\n  }\n  renderValues() {\n    if (this._deleted) return null;\n    return new Float32Array(this.renderRawOutput().buffer);\n  }\n  toArray() {\n    return utils.erectPackedFloat(this.renderValues(), this.output[0]);\n  }\n}\n\nmodule.exports = {\n  GLTextureUnsigned\n};\n},{\"../../../utils\":114,\"./index\":27}],34:[function(require,module,exports){\nconst getContext = require('gl');\nconst { WebGLKernel } = require('../web-gl/kernel');\nconst { glKernelString } = require('../gl/kernel-string');\n\nlet isSupported = null;\nlet testCanvas = null;\nlet testContext = null;\nlet testExtensions = null;\nlet features = null;\n\nclass HeadlessGLKernel extends WebGLKernel {\n  static get isSupported() {\n    if (isSupported !== null) return isSupported;\n    this.setupFeatureChecks();\n    isSupported = testContext !== null;\n    return isSupported;\n  }\n\n  static setupFeatureChecks() {\n    testCanvas = null;\n    testExtensions = null;\n    if (typeof getContext !== 'function') return;\n    try { \n      testContext = getContext(2, 2, {\n        preserveDrawingBuffer: true\n      });\n      if (!testContext || !testContext.getExtension) return;\n      testExtensions = {\n        STACKGL_resize_drawingbuffer: testContext.getExtension('STACKGL_resize_drawingbuffer'),\n        STACKGL_destroy_context: testContext.getExtension('STACKGL_destroy_context'),\n        OES_texture_float: testContext.getExtension('OES_texture_float'),\n        OES_texture_float_linear: testContext.getExtension('OES_texture_float_linear'),\n        OES_element_index_uint: testContext.getExtension('OES_element_index_uint'),\n        WEBGL_draw_buffers: testContext.getExtension('WEBGL_draw_buffers'),\n        WEBGL_color_buffer_float: testContext.getExtension('WEBGL_color_buffer_float'),\n      };\n      features = this.getFeatures();\n    } catch (e) {\n      console.warn(e);\n    }\n  }\n\n  static isContextMatch(context) {\n    try {\n      return context.getParameter(context.RENDERER) === 'ANGLE';\n    } catch (e) {\n      return false;\n    }\n  }\n\n  static getIsTextureFloat() {\n    return Boolean(testExtensions.OES_texture_float);\n  }\n\n  static getIsDrawBuffers() {\n    return Boolean(testExtensions.WEBGL_draw_buffers);\n  }\n\n  static getChannelCount() {\n    return testExtensions.WEBGL_draw_buffers ?\n      testContext.getParameter(testExtensions.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL) :\n      1;\n  }\n\n  static getMaxTextureSize() {\n    return testContext.getParameter(testContext.MAX_TEXTURE_SIZE);\n  }\n\n  static get testCanvas() {\n    return testCanvas;\n  }\n\n  static get testContext() {\n    return testContext;\n  }\n\n  static get features() {\n    return features;\n  }\n\n  initCanvas() {\n    return {};\n  }\n\n  initContext() {\n    return getContext(2, 2, {\n      preserveDrawingBuffer: true\n    });\n  }\n\n  initExtensions() {\n    this.extensions = {\n      STACKGL_resize_drawingbuffer: this.context.getExtension('STACKGL_resize_drawingbuffer'),\n      STACKGL_destroy_context: this.context.getExtension('STACKGL_destroy_context'),\n      OES_texture_float: this.context.getExtension('OES_texture_float'),\n      OES_texture_float_linear: this.context.getExtension('OES_texture_float_linear'),\n      OES_element_index_uint: this.context.getExtension('OES_element_index_uint'),\n      WEBGL_draw_buffers: this.context.getExtension('WEBGL_draw_buffers'),\n    };\n  }\n\n  build() {\n    super.build.apply(this, arguments);\n    if (!this.fallbackRequested) {\n      this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0], this.maxTexSize[1]);\n    }\n  }\n\n  destroyExtensions() {\n    this.extensions.STACKGL_resize_drawingbuffer = null;\n    this.extensions.STACKGL_destroy_context = null;\n    this.extensions.OES_texture_float = null;\n    this.extensions.OES_texture_float_linear = null;\n    this.extensions.OES_element_index_uint = null;\n    this.extensions.WEBGL_draw_buffers = null;\n  }\n\n  static destroyContext(context) {\n    const extension = context.getExtension('STACKGL_destroy_context');\n    if (extension && extension.destroy) {\n      extension.destroy();\n    }\n  }\n\n  toString() {\n    const setupContextString = `const gl = context || require('gl')(1, 1);\\n`;\n    const destroyContextString = `    if (!context) { gl.getExtension('STACKGL_destroy_context').destroy(); }\\n`;\n    return glKernelString(this.constructor, arguments, this, setupContextString, destroyContextString);\n  }\n\n  setOutput(output) {\n    super.setOutput(output);\n    if (this.graphical && this.extensions.STACKGL_resize_drawingbuffer) {\n      this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0], this.maxTexSize[1]);\n    }\n    return this;\n  }\n}\n\nmodule.exports = {\n  HeadlessGLKernel\n};\n},{\"../gl/kernel-string\":12,\"../web-gl/kernel\":70,\"gl\":2}],35:[function(require,module,exports){\nclass KernelValue {\n  constructor(value, settings) {\n    const {\n      name,\n      kernel,\n      context,\n      checkContext,\n      onRequestContextHandle,\n      onUpdateValueMismatch,\n      origin,\n      strictIntegers,\n      type,\n      tactic,\n    } = settings;\n    if (!name) {\n      throw new Error('name not set');\n    }\n    if (!type) {\n      throw new Error('type not set');\n    }\n    if (!origin) {\n      throw new Error('origin not set');\n    }\n    if (origin !== 'user' && origin !== 'constants') {\n      throw new Error(`origin must be \"user\" or \"constants\" value is \"${ origin }\"`);\n    }\n    if (!onRequestContextHandle) {\n      throw new Error('onRequestContextHandle is not set');\n    }\n    this.name = name;\n    this.origin = origin;\n    this.tactic = tactic;\n    this.varName = origin === 'constants' ? `constants.${name}` : name;\n    this.kernel = kernel;\n    this.strictIntegers = strictIntegers;\n    this.type = value.type || type;\n    this.size = value.size || null;\n    this.index = null;\n    this.context = context;\n    this.checkContext = checkContext !== null && checkContext !== undefined ? checkContext : true;\n    this.contextHandle = null;\n    this.onRequestContextHandle = onRequestContextHandle;\n    this.onUpdateValueMismatch = onUpdateValueMismatch;\n    this.forceUploadEachRun = null;\n  }\n\n  get id() {\n    return `${this.origin}_${name}`;\n  }\n\n  getSource() {\n    throw new Error(`\"getSource\" not defined on ${ this.constructor.name }`);\n  }\n\n  updateValue(value) {\n    throw new Error(`\"updateValue\" not defined on ${ this.constructor.name }`);\n  }\n}\n\nmodule.exports = {\n  KernelValue\n};\n},{}],36:[function(require,module,exports){\nconst { utils } = require('../utils');\nconst { Input } = require('../input');\n\nclass Kernel {\n  static get isSupported() {\n    throw new Error(`\"isSupported\" not implemented on ${ this.name }`);\n  }\n\n  static isContextMatch(context) {\n    throw new Error(`\"isContextMatch\" not implemented on ${ this.name }`);\n  }\n\n  static getFeatures() {\n    throw new Error(`\"getFeatures\" not implemented on ${ this.name }`);\n  }\n\n  static destroyContext(context) {\n    throw new Error(`\"destroyContext\" called on ${ this.name }`);\n  }\n\n  static nativeFunctionArguments() {\n    throw new Error(`\"nativeFunctionArguments\" called on ${ this.name }`);\n  }\n\n  static nativeFunctionReturnType() {\n    throw new Error(`\"nativeFunctionReturnType\" called on ${ this.name }`);\n  }\n\n  static combineKernels() {\n    throw new Error(`\"combineKernels\" called on ${ this.name }`);\n  }\n\n  constructor(source, settings) {\n    if (typeof source !== 'object') {\n      if (typeof source !== 'string') {\n        throw new Error('source not a string');\n      }\n      if (!utils.isFunctionString(source)) {\n        throw new Error('source not a function string');\n      }\n    }\n    this.useLegacyEncoder = false;\n    this.fallbackRequested = false;\n    this.onRequestFallback = null;\n\n    this.argumentNames = typeof source === 'string' ? utils.getArgumentNamesFromString(source) : null;\n    this.argumentTypes = null;\n    this.argumentSizes = null;\n    this.argumentBitRatios = null;\n    this.kernelArguments = null;\n    this.kernelConstants = null;\n    this.forceUploadKernelConstants = null;\n\n\n    this.source = source;\n\n    this.output = null;\n\n    this.debug = false;\n\n    this.graphical = false;\n\n    this.loopMaxIterations = 0;\n\n    this.constants = null;\n\n    this.constantTypes = null;\n\n    this.constantBitRatios = null;\n\n    this.dynamicArguments = false;\n\n    this.dynamicOutput = false;\n\n    this.canvas = null;\n\n    this.context = null;\n\n    this.checkContext = null;\n\n    this.gpu = null;\n\n    this.functions = null;\n\n    this.nativeFunctions = null;\n\n    this.injectedNative = null;\n\n    this.subKernels = null;\n\n    this.validate = true;\n\n    this.immutable = false;\n\n    this.pipeline = false;\n\n    this.precision = null;\n\n    this.tactic = null;\n\n    this.plugins = null;\n\n    this.returnType = null;\n    this.leadingReturnStatement = null;\n    this.followingReturnStatement = null;\n    this.optimizeFloatMemory = null;\n    this.strictIntegers = false;\n    this.fixIntegerDivisionAccuracy = null;\n    this.built = false;\n    this.signature = null;\n  }\n\n  mergeSettings(settings) {\n    for (let p in settings) {\n      if (!settings.hasOwnProperty(p) || !this.hasOwnProperty(p)) continue;\n      switch (p) {\n        case 'output':\n          if (!Array.isArray(settings.output)) {\n            this.setOutput(settings.output); \n            continue;\n          }\n          break;\n        case 'functions':\n          this.functions = [];\n          for (let i = 0; i < settings.functions.length; i++) {\n            this.addFunction(settings.functions[i]);\n          }\n          continue;\n        case 'graphical':\n          if (settings[p] && !settings.hasOwnProperty('precision')) {\n            this.precision = 'unsigned';\n          }\n          this[p] = settings[p];\n          continue;\n        case 'nativeFunctions':\n          if (!settings.nativeFunctions) continue;\n          this.nativeFunctions = [];\n          for (let i = 0; i < settings.nativeFunctions.length; i++) {\n            const s = settings.nativeFunctions[i];\n            const { name, source } = s;\n            this.addNativeFunction(name, source, s);\n          }\n          continue;\n      }\n      this[p] = settings[p];\n    }\n\n    if (!this.canvas) this.canvas = this.initCanvas();\n    if (!this.context) this.context = this.initContext();\n    if (!this.plugins) this.plugins = this.initPlugins(settings);\n  }\n  build() {\n    throw new Error(`\"build\" not defined on ${ this.constructor.name }`);\n  }\n\n  run() {\n    throw new Error(`\"run\" not defined on ${ this.constructor.name }`)\n  }\n\n  initCanvas() {\n    throw new Error(`\"initCanvas\" not defined on ${ this.constructor.name }`);\n  }\n\n  initContext() {\n    throw new Error(`\"initContext\" not defined on ${ this.constructor.name }`);\n  }\n\n  initPlugins(settings) {\n    throw new Error(`\"initPlugins\" not defined on ${ this.constructor.name }`);\n  }\n\n  addFunction(source, settings = {}) {\n    if (source.name && source.source && source.argumentTypes && 'returnType' in source) {\n      this.functions.push(source);\n    } else if ('settings' in source && 'source' in source) {\n      this.functions.push(this.functionToIGPUFunction(source.source, source.settings));\n    } else if (typeof source === 'string' || typeof source === 'function') {\n      this.functions.push(this.functionToIGPUFunction(source, settings));\n    } else {\n      throw new Error(`function not properly defined`);\n    }\n    return this;\n  }\n\n  addNativeFunction(name, source, settings = {}) {\n    const { argumentTypes, argumentNames } = settings.argumentTypes ?\n      splitArgumentTypes(settings.argumentTypes) :\n      this.constructor.nativeFunctionArguments(source) || {};\n    this.nativeFunctions.push({\n      name,\n      source,\n      settings,\n      argumentTypes,\n      argumentNames,\n      returnType: settings.returnType || this.constructor.nativeFunctionReturnType(source)\n    });\n    return this;\n  }\n\n  setupArguments(args) {\n    this.kernelArguments = [];\n    if (!this.argumentTypes) {\n      if (!this.argumentTypes) {\n        this.argumentTypes = [];\n        for (let i = 0; i < args.length; i++) {\n          const argType = utils.getVariableType(args[i], this.strictIntegers);\n          const type = argType === 'Integer' ? 'Number' : argType;\n          this.argumentTypes.push(type);\n          this.kernelArguments.push({\n            type\n          });\n        }\n      }\n    } else {\n      for (let i = 0; i < this.argumentTypes.length; i++) {\n        this.kernelArguments.push({\n          type: this.argumentTypes[i]\n        });\n      }\n    }\n\n    this.argumentSizes = new Array(args.length);\n    this.argumentBitRatios = new Int32Array(args.length);\n\n    for (let i = 0; i < args.length; i++) {\n      const arg = args[i];\n      this.argumentSizes[i] = arg.constructor === Input ? arg.size : null;\n      this.argumentBitRatios[i] = this.getBitRatio(arg);\n    }\n\n    if (this.argumentNames.length !== args.length) {\n      throw new Error(`arguments are miss-aligned`);\n    }\n  }\n\n  setupConstants() {\n    this.kernelConstants = [];\n    let needsConstantTypes = this.constantTypes === null;\n    if (needsConstantTypes) {\n      this.constantTypes = {};\n    }\n    this.constantBitRatios = {};\n    if (this.constants) {\n      for (let name in this.constants) {\n        if (needsConstantTypes) {\n          const type = utils.getVariableType(this.constants[name], this.strictIntegers);\n          this.constantTypes[name] = type;\n          this.kernelConstants.push({\n            name,\n            type\n          });\n        } else {\n          this.kernelConstants.push({\n            name,\n            type: this.constantTypes[name]\n          });\n        }\n        this.constantBitRatios[name] = this.getBitRatio(this.constants[name]);\n      }\n    }\n  }\n\n  setOptimizeFloatMemory(flag) {\n    this.optimizeFloatMemory = flag;\n    return this;\n  }\n\n  toKernelOutput(output) {\n    if (output.hasOwnProperty('x')) {\n      if (output.hasOwnProperty('y')) {\n        if (output.hasOwnProperty('z')) {\n          return [output.x, output.y, output.z];\n        } else {\n          return [output.x, output.y];\n        }\n      } else {\n        return [output.x];\n      }\n    } else {\n      return output;\n    }\n  }\n\n  setOutput(output) {\n    this.output = this.toKernelOutput(output);\n    return this;\n  }\n\n  setDebug(flag) {\n    this.debug = flag;\n    return this;\n  }\n\n  setGraphical(flag) {\n    this.graphical = flag;\n    this.precision = 'unsigned';\n    return this;\n  }\n\n  setLoopMaxIterations(max) {\n    this.loopMaxIterations = max;\n    return this;\n  }\n\n  setConstants(constants) {\n    this.constants = constants;\n    return this;\n  }\n\n  setConstantTypes(constantTypes) {\n    this.constantTypes = constantTypes;\n    return this;\n  }\n\n  setFunctions(functions) {\n    for (let i = 0; i < functions.length; i++) {\n      this.addFunction(functions[i]);\n    }\n    return this;\n  }\n\n  setNativeFunctions(nativeFunctions) {\n    for (let i = 0; i < nativeFunctions.length; i++) {\n      const settings = nativeFunctions[i];\n      const { name, source } = settings;\n      this.addNativeFunction(name, source, settings);\n    }\n    return this;\n  }\n\n  setInjectedNative(injectedNative) {\n    this.injectedNative = injectedNative;\n    return this;\n  }\n\n  setPipeline(flag) {\n    this.pipeline = flag;\n    return this;\n  }\n\n  setPrecision(flag) {\n    this.precision = flag;\n    return this;\n  }\n\n  setDimensions(flag) {\n    utils.warnDeprecated('method', 'setDimensions', 'setOutput');\n    this.output = flag;\n    return this;\n  }\n\n  setOutputToTexture(flag) {\n    utils.warnDeprecated('method', 'setOutputToTexture', 'setPipeline');\n    this.pipeline = flag;\n    return this;\n  }\n\n  setImmutable(flag) {\n    this.immutable = flag;\n    return this;\n  }\n\n  setCanvas(canvas) {\n    this.canvas = canvas;\n    return this;\n  }\n\n  setStrictIntegers(flag) {\n    this.strictIntegers = flag;\n    return this;\n  }\n\n  setDynamicOutput(flag) {\n    this.dynamicOutput = flag;\n    return this;\n  }\n\n  setHardcodeConstants(flag) {\n    utils.warnDeprecated('method', 'setHardcodeConstants');\n    this.setDynamicOutput(flag);\n    this.setDynamicArguments(flag);\n    return this;\n  }\n\n  setDynamicArguments(flag) {\n    this.dynamicArguments = flag;\n    return this;\n  }\n\n  setUseLegacyEncoder(flag) {\n    this.useLegacyEncoder = flag;\n    return this;\n  }\n\n  setWarnVarUsage(flag) {\n    utils.warnDeprecated('method', 'setWarnVarUsage');\n    return this;\n  }\n\n  getCanvas() {\n    utils.warnDeprecated('method', 'getCanvas');\n    return this.canvas;\n  }\n\n  getWebGl() {\n    utils.warnDeprecated('method', 'getWebGl');\n    return this.context;\n  }\n\n  setContext(context) {\n    this.context = context;\n    return this;\n  }\n\n  setArgumentTypes(argumentTypes) {\n    if (Array.isArray(argumentTypes)) {\n      this.argumentTypes = argumentTypes;\n    } else {\n      this.argumentTypes = [];\n      for (const p in argumentTypes) {\n        if (!argumentTypes.hasOwnProperty(p)) continue;\n        const argumentIndex = this.argumentNames.indexOf(p);\n        if (argumentIndex === -1) throw new Error(`unable to find argument ${ p }`);\n        this.argumentTypes[argumentIndex] = argumentTypes[p];\n      }\n    }\n    return this;\n  }\n\n  setTactic(tactic) {\n    this.tactic = tactic;\n    return this;\n  }\n\n  requestFallback(args) {\n    if (!this.onRequestFallback) {\n      throw new Error(`\"onRequestFallback\" not defined on ${ this.constructor.name }`);\n    }\n    this.fallbackRequested = true;\n    return this.onRequestFallback(args);\n  }\n\n  validateSettings() {\n    throw new Error(`\"validateSettings\" not defined on ${ this.constructor.name }`);\n  }\n\n  addSubKernel(subKernel) {\n    if (this.subKernels === null) {\n      this.subKernels = [];\n    }\n    if (!subKernel.source) throw new Error('subKernel missing \"source\" property');\n    if (!subKernel.property && isNaN(subKernel.property)) throw new Error('subKernel missing \"property\" property');\n    if (!subKernel.name) throw new Error('subKernel missing \"name\" property');\n    this.subKernels.push(subKernel);\n    return this;\n  }\n\n  destroy(removeCanvasReferences) {\n    throw new Error(`\"destroy\" called on ${ this.constructor.name }`);\n  }\n\n  getBitRatio(value) {\n    if (this.precision === 'single') {\n      return 4;\n    } else if (Array.isArray(value[0])) {\n      return this.getBitRatio(value[0]);\n    } else if (value.constructor === Input) {\n      return this.getBitRatio(value.value);\n    }\n    switch (value.constructor) {\n      case Uint8ClampedArray:\n      case Uint8Array:\n      case Int8Array:\n        return 1;\n      case Uint16Array:\n      case Int16Array:\n        return 2;\n      case Float32Array:\n      case Int32Array:\n      default:\n        return 4;\n    }\n  }\n\n  getPixels(flip) {\n    throw new Error(`\"getPixels\" called on ${ this.constructor.name }`);\n  }\n\n  checkOutput() {\n    if (!this.output || !utils.isArray(this.output)) throw new Error('kernel.output not an array');\n    if (this.output.length < 1) throw new Error('kernel.output is empty, needs at least 1 value');\n    for (let i = 0; i < this.output.length; i++) {\n      if (isNaN(this.output[i]) || this.output[i] < 1) {\n        throw new Error(`${ this.constructor.name }.output[${ i }] incorrectly defined as \\`${ this.output[i] }\\`, needs to be numeric, and greater than 0`);\n      }\n    }\n  }\n\n  prependString(value) {\n    throw new Error(`\"prependString\" called on ${ this.constructor.name }`);\n  }\n\n  hasPrependString(value) {\n    throw new Error(`\"hasPrependString\" called on ${ this.constructor.name }`);\n  }\n\n  toJSON() {\n    return {\n      settings: {\n        output: this.output,\n        pipeline: this.pipeline,\n        argumentNames: this.argumentNames,\n        argumentsTypes: this.argumentTypes,\n        constants: this.constants,\n        pluginNames: this.plugins ? this.plugins.map(plugin => plugin.name) : null,\n        returnType: this.returnType,\n      }\n    };\n  }\n\n  buildSignature(args) {\n    const Constructor = this.constructor;\n    this.signature = Constructor.getSignature(this, Constructor.getArgumentTypes(this, args));\n  }\n\n  static getArgumentTypes(kernel, args) {\n    const argumentTypes = new Array(args.length);\n    for (let i = 0; i < args.length; i++) {\n      const arg = args[i];\n      const type = kernel.argumentTypes[i];\n      if (arg.type) {\n        argumentTypes[i] = arg.type;\n      } else {\n        switch (type) {\n          case 'Number':\n          case 'Integer':\n          case 'Float':\n          case 'ArrayTexture(1)':\n            argumentTypes[i] = utils.getVariableType(arg);\n            break;\n          default:\n            argumentTypes[i] = type;\n        }\n      }\n    }\n    return argumentTypes;\n  }\n\n  static getSignature(kernel, argumentTypes) {\n    throw new Error(`\"getSignature\" not implemented on ${ this.name }`);\n  }\n\n  functionToIGPUFunction(source, settings = {}) {\n    if (typeof source !== 'string' && typeof source !== 'function') throw new Error('source not a string or function');\n    const sourceString = typeof source === 'string' ? source : source.toString();\n    let argumentTypes = [];\n\n    if (Array.isArray(settings.argumentTypes)) {\n      argumentTypes = settings.argumentTypes;\n    } else if (typeof settings.argumentTypes === 'object') {\n      argumentTypes = utils.getArgumentNamesFromString(sourceString)\n        .map(name => settings.argumentTypes[name]) || [];\n    } else {\n      argumentTypes = settings.argumentTypes || [];\n    }\n\n    return {\n      name: utils.getFunctionNameFromString(sourceString) || null,\n      source: sourceString,\n      argumentTypes,\n      returnType: settings.returnType || null,\n    };\n  }\n\n  onActivate(previousKernel) {}\n}\n\nfunction splitArgumentTypes(argumentTypesObject) {\n  const argumentNames = Object.keys(argumentTypesObject);\n  const argumentTypes = [];\n  for (let i = 0; i < argumentNames.length; i++) {\n    const argumentName = argumentNames[i];\n    argumentTypes.push(argumentTypesObject[argumentName]);\n  }\n  return { argumentTypes, argumentNames };\n}\n\nmodule.exports = {\n  Kernel\n};\n},{\"../input\":110,\"../utils\":114}],37:[function(require,module,exports){\nconst fragmentShader = `__HEADER__;\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nconst int LOOP_MAX = __LOOP_MAX__;\n\n__PLUGINS__;\n__CONSTANTS__;\n\nvarying vec2 vTexCoord;\n\nfloat acosh(float x) {\n  return log(x + sqrt(x * x - 1.0));\n}\n\nfloat sinh(float x) {\n  return (pow(${Math.E}, x) - pow(${Math.E}, -x)) / 2.0;\n}\n\nfloat asinh(float x) {\n  return log(x + sqrt(x * x + 1.0));\n}\n\nfloat atan2(float v1, float v2) {\n  if (v1 == 0.0 || v2 == 0.0) return 0.0;\n  return atan(v1 / v2);\n}\n\nfloat atanh(float x) {\n  x = (x + 1.0) / (x - 1.0);\n  if (x < 0.0) {\n    return 0.5 * log(-x);\n  }\n  return 0.5 * log(x);\n}\n\nfloat cbrt(float x) {\n  if (x >= 0.0) {\n    return pow(x, 1.0 / 3.0);\n  } else {\n    return -pow(x, 1.0 / 3.0);\n  }\n}\n\nfloat cosh(float x) {\n  return (pow(${Math.E}, x) + pow(${Math.E}, -x)) / 2.0; \n}\n\nfloat expm1(float x) {\n  return pow(${Math.E}, x) - 1.0; \n}\n\nfloat fround(highp float x) {\n  return x;\n}\n\nfloat imul(float v1, float v2) {\n  return float(int(v1) * int(v2));\n}\n\nfloat log10(float x) {\n  return log2(x) * (1.0 / log2(10.0));\n}\n\nfloat log1p(float x) {\n  return log(1.0 + x);\n}\n\nfloat _pow(float v1, float v2) {\n  if (v2 == 0.0) return 1.0;\n  return pow(v1, v2);\n}\n\nfloat tanh(float x) {\n  float e = exp(2.0 * x);\n  return (e - 1.0) / (e + 1.0);\n}\n\nfloat trunc(float x) {\n  if (x >= 0.0) {\n    return floor(x); \n  } else {\n    return ceil(x);\n  }\n}\n\nvec4 _round(vec4 x) {\n  return floor(x + 0.5);\n}\n\nfloat _round(float x) {\n  return floor(x + 0.5);\n}\n\nconst int BIT_COUNT = 32;\nint modi(int x, int y) {\n  return x - y * (x / y);\n}\n\nint bitwiseOr(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseXOR(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseAnd(int a, int b) {\n  int result = 0;\n  int n = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 && b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseNot(int a) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (modi(a, 2) == 0) {\n      result += n;    \n    }\n    a = a / 2;\n    n = n * 2;\n  }\n  return result;\n}\nint bitwiseZeroFillLeftShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n *= 2;\n  }\n\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nint bitwiseSignedRightShift(int num, int shifts) {\n  return int(floor(float(num) / pow(2.0, float(shifts))));\n}\n\nint bitwiseZeroFillRightShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n /= 2;\n  }\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x / y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY\\'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 texel) {\n  __DECODE32_ENDIANNESS__;\n  texel *= 255.0;\n  vec2 gte128;\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(_round(exponent));\n  texel.b = texel.b - 128.0 * gte128.x;\n  res = dot(texel, SCALE_FACTOR) * exp2(_round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nfloat decode16(vec4 texel, int index) {\n  int channel = integerMod(index, 2);\n  if (channel == 0) return texel.r * 255.0 + texel.g * 65280.0;\n  if (channel == 1) return texel.b * 255.0 + texel.a * 65280.0;\n  return 0.0;\n}\n\nfloat decode8(vec4 texel, int index) {\n  int channel = integerMod(index, 4);\n  if (channel == 0) return texel.r * 255.0;\n  if (channel == 1) return texel.g * 255.0;\n  if (channel == 2) return texel.b * 255.0;\n  if (channel == 3) return texel.a * 255.0;\n  return 0.0;\n}\n\nvec4 legacyEncode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  texel.rg = integerMod(texel.rg, 256.0);\n  texel.b = integerMod(texel.b, 128.0);\n  texel.a = exponent*0.5 + 63.5;\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  texel = floor(texel);\n  texel *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return texel;\n}\n\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\nvec4 encode32(float value) {\n  if (value == 0.0) return vec4(0, 0, 0, 0);\n\n  float exponent;\n  float mantissa;\n  vec4  result;\n  float sgn;\n\n  sgn = step(0.0, -value);\n  value = abs(value);\n\n  exponent = floor(log2(value));\n\n  mantissa = value*pow(2.0, -exponent)-1.0;\n  exponent = exponent+127.0;\n  result   = vec4(0,0,0,0);\n\n  result.a = floor(exponent/2.0);\n  exponent = exponent - result.a*2.0;\n  result.a = result.a + 128.0*sgn;\n\n  result.b = floor(mantissa * 128.0);\n  mantissa = mantissa - result.b / 128.0;\n  result.b = result.b + exponent*128.0;\n\n  result.g = floor(mantissa*32768.0);\n  mantissa = mantissa - result.g/32768.0;\n\n  result.r = floor(mantissa*8388608.0);\n  return result/255.0;\n}\n// Dragons end here\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  return decode32(texel);\n}\n\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x * 2;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 2, texSize.y));\n  return decode16(texel, index);\n}\n\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x * 4;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 4, texSize.y));\n  return decode8(texel, index);\n}\n\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 4);\n  index = index / 4;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  if (channel == 0) return texel.r;\n  if (channel == 1) return texel.g;\n  if (channel == 2) return texel.b;\n  if (channel == 3) return texel.a;\n  return 0.0;\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture2D(tex, st / vec2(texSize));\n}\n\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return result[0];\n}\n\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec2(result[0], result[1]);\n}\n\nvec2 getMemoryOptimizedVec2(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int channel = integerMod(index, 2);\n  index = index / 2;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  if (channel == 0) return vec2(texel.r, texel.g);\n  if (channel == 1) return vec2(texel.b, texel.a);\n  return vec2(0.0, 0.0);\n}\n\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec3(result[0], result[1], result[2]);\n}\n\nvec3 getMemoryOptimizedVec3(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int fieldIndex = 3 * (x + texDim.x * (y + texDim.y * z));\n  int vectorIndex = fieldIndex / 4;\n  int vectorOffset = fieldIndex - vectorIndex * 4;\n  int readY = vectorIndex / texSize.x;\n  int readX = vectorIndex - readY * texSize.x;\n  vec4 tex1 = texture2D(tex, (vec2(readX, readY) + 0.5) / vec2(texSize));\n  \n  if (vectorOffset == 0) {\n    return tex1.xyz;\n  } else if (vectorOffset == 1) {\n    return tex1.yzw;\n  } else {\n    readX++;\n    if (readX >= texSize.x) {\n      readX = 0;\n      readY++;\n    }\n    vec4 tex2 = texture2D(tex, vec2(readX, readY) / vec2(texSize));\n    if (vectorOffset == 2) {\n      return vec3(tex1.z, tex1.w, tex2.x);\n    } else {\n      return vec3(tex1.w, tex2.x, tex2.y);\n    }\n  }\n}\n\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  return getImage2D(tex, texSize, texDim, z, y, x);\n}\n\nvec4 getMemoryOptimizedVec4(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  return vec4(texel.r, texel.g, texel.b, texel.a);\n}\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\nvoid color(sampler2D image) {\n  actualColor = texture2D(image, vTexCoord);\n}\n\nfloat modulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -mod(number, divisor);\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return mod(number, divisor);\n}\n\n__INJECTED_NATIVE__;\n__MAIN_CONSTANTS__;\n__MAIN_ARGUMENTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}`;\n\nmodule.exports = {\n  fragmentShader\n};\n},{}],38:[function(require,module,exports){\nconst { utils } = require('../../utils');\nconst { FunctionNode } = require('../function-node');\n\nclass WebGLFunctionNode extends FunctionNode {\n  constructor(source, settings) {\n    super(source, settings);\n    if (settings && settings.hasOwnProperty('fixIntegerDivisionAccuracy')) {\n      this.fixIntegerDivisionAccuracy = settings.fixIntegerDivisionAccuracy;\n    }\n  }\n\n  astConditionalExpression(ast, retArr) {\n    if (ast.type !== 'ConditionalExpression') {\n      throw this.astErrorOutput('Not a conditional expression', ast);\n    }\n    const consequentType = this.getType(ast.consequent);\n    const alternateType = this.getType(ast.alternate);\n    if (consequentType === null && alternateType === null) {\n      retArr.push('if (');\n      this.astGeneric(ast.test, retArr);\n      retArr.push(') {');\n      this.astGeneric(ast.consequent, retArr);\n      retArr.push(';');\n      retArr.push('} else {');\n      this.astGeneric(ast.alternate, retArr);\n      retArr.push(';');\n      retArr.push('}');\n      return retArr;\n    }\n    retArr.push('(');\n    this.astGeneric(ast.test, retArr);\n    retArr.push('?');\n    this.astGeneric(ast.consequent, retArr);\n    retArr.push(':');\n    this.astGeneric(ast.alternate, retArr);\n    retArr.push(')');\n    return retArr;\n  }\n\n  astFunction(ast, retArr) {\n    if (this.isRootKernel) {\n      retArr.push('void');\n    } else {\n      if (!this.returnType) {\n        const lastReturn = this.findLastReturn();\n        if (lastReturn) {\n          this.returnType = this.getType(ast.body);\n          if (this.returnType === 'LiteralInteger') {\n            this.returnType = 'Number';\n          }\n        }\n      }\n\n      const { returnType } = this;\n      if (!returnType) {\n        retArr.push('void');\n      } else {\n        const type = typeMap[returnType];\n        if (!type) {\n          throw new Error(`unknown type ${returnType}`);\n        }\n        retArr.push(type);\n      }\n    }\n    retArr.push(' ');\n    retArr.push(this.name);\n    retArr.push('(');\n\n    if (!this.isRootKernel) {\n      for (let i = 0; i < this.argumentNames.length; ++i) {\n        const argumentName = this.argumentNames[i];\n\n        if (i > 0) {\n          retArr.push(', ');\n        }\n        let argumentType = this.argumentTypes[this.argumentNames.indexOf(argumentName)];\n        if (!argumentType) {\n          throw this.astErrorOutput(`Unknown argument ${argumentName} type`, ast);\n        }\n        if (argumentType === 'LiteralInteger') {\n          this.argumentTypes[i] = argumentType = 'Number';\n        }\n        const type = typeMap[argumentType];\n        if (!type) {\n          throw this.astErrorOutput('Unexpected expression', ast);\n        }\n        const name = utils.sanitizeName(argumentName);\n        if (type === 'sampler2D' || type === 'sampler2DArray') {\n          retArr.push(`${type} user_${name},ivec2 user_${name}Size,ivec3 user_${name}Dim`);\n        } else {\n          retArr.push(`${type} user_${name}`);\n        }\n      }\n    }\n\n    retArr.push(') {\\n');\n\n    for (let i = 0; i < ast.body.body.length; ++i) {\n      this.astGeneric(ast.body.body[i], retArr);\n      retArr.push('\\n');\n    }\n\n    retArr.push('}\\n');\n    return retArr;\n  }\n\n  astReturnStatement(ast, retArr) {\n    if (!ast.argument) throw this.astErrorOutput('Unexpected return statement', ast);\n    this.pushState('skip-literal-correction');\n    const type = this.getType(ast.argument);\n    this.popState('skip-literal-correction');\n\n    const result = [];\n\n    if (!this.returnType) {\n      if (type === 'LiteralInteger' || type === 'Integer') {\n        this.returnType = 'Number';\n      } else {\n        this.returnType = type;\n      }\n    }\n\n    switch (this.returnType) {\n      case 'LiteralInteger':\n      case 'Number':\n      case 'Float':\n        switch (type) {\n          case 'Integer':\n            result.push('float(');\n            this.astGeneric(ast.argument, result);\n            result.push(')');\n            break;\n          case 'LiteralInteger':\n            this.castLiteralToFloat(ast.argument, result);\n\n            if (this.getType(ast) === 'Integer') {\n              result.unshift('float(');\n              result.push(')');\n            }\n            break;\n          default:\n            this.astGeneric(ast.argument, result);\n        }\n        break;\n      case 'Integer':\n        switch (type) {\n          case 'Float':\n          case 'Number':\n            this.castValueToInteger(ast.argument, result);\n            break;\n          case 'LiteralInteger':\n            this.castLiteralToInteger(ast.argument, result);\n            break;\n          default:\n            this.astGeneric(ast.argument, result);\n        }\n        break;\n      case 'Array(4)':\n      case 'Array(3)':\n      case 'Array(2)':\n      case 'Matrix(2)':\n      case 'Matrix(3)':\n      case 'Matrix(4)':\n      case 'Input':\n        this.astGeneric(ast.argument, result);\n        break;\n      default:\n        throw this.astErrorOutput(`unhandled return type ${this.returnType}`, ast);\n    }\n\n    if (this.isRootKernel) {\n      retArr.push(`kernelResult = ${ result.join('') };`);\n      retArr.push('return;');\n    } else if (this.isSubKernel) {\n      retArr.push(`subKernelResult_${ this.name } = ${ result.join('') };`);\n      retArr.push(`return subKernelResult_${ this.name };`);\n    } else {\n      retArr.push(`return ${ result.join('') };`);\n    }\n    return retArr;\n  }\n\n  astLiteral(ast, retArr) {\n    if (isNaN(ast.value)) {\n      throw this.astErrorOutput(\n        'Non-numeric literal not supported : ' + ast.value,\n        ast\n      );\n    }\n\n    const key = this.astKey(ast);\n    if (Number.isInteger(ast.value)) {\n      if (this.isState('casting-to-integer') || this.isState('building-integer')) {\n        this.literalTypes[key] = 'Integer';\n        retArr.push(`${ast.value}`);\n      } else if (this.isState('casting-to-float') || this.isState('building-float')) {\n        this.literalTypes[key] = 'Number';\n        retArr.push(`${ast.value}.0`);\n      } else {\n        this.literalTypes[key] = 'Number';\n        retArr.push(`${ast.value}.0`);\n      }\n    } else if (this.isState('casting-to-integer') || this.isState('building-integer')) {\n      this.literalTypes[key] = 'Integer';\n      retArr.push(Math.round(ast.value));\n    } else {\n      this.literalTypes[key] = 'Number';\n      retArr.push(`${ast.value}`);\n    }\n    return retArr;\n  }\n\n  astBinaryExpression(ast, retArr) {\n    if (this.checkAndUpconvertOperator(ast, retArr)) {\n      return retArr;\n    }\n\n    if (this.fixIntegerDivisionAccuracy && ast.operator === '/') {\n      retArr.push('divWithIntCheck(');\n      this.pushState('building-float');\n      switch (this.getType(ast.left)) {\n        case 'Integer':\n          this.castValueToFloat(ast.left, retArr);\n          break;\n        case 'LiteralInteger':\n          this.castLiteralToFloat(ast.left, retArr);\n          break;\n        default:\n          this.astGeneric(ast.left, retArr);\n      }\n      retArr.push(', ');\n      switch (this.getType(ast.right)) {\n        case 'Integer':\n          this.castValueToFloat(ast.right, retArr);\n          break;\n        case 'LiteralInteger':\n          this.castLiteralToFloat(ast.right, retArr);\n          break;\n        default:\n          this.astGeneric(ast.right, retArr);\n      }\n      this.popState('building-float');\n      retArr.push(')');\n      return retArr;\n    }\n\n    retArr.push('(');\n    const leftType = this.getType(ast.left) || 'Number';\n    const rightType = this.getType(ast.right) || 'Number';\n    if (!leftType || !rightType) {\n      throw this.astErrorOutput(`Unhandled binary expression`, ast);\n    }\n    const key = leftType + ' & ' + rightType;\n    switch (key) {\n      case 'Integer & Integer':\n        this.pushState('building-integer');\n        this.astGeneric(ast.left, retArr);\n        retArr.push(operatorMap[ast.operator] || ast.operator);\n        this.astGeneric(ast.right, retArr);\n        this.popState('building-integer');\n        break;\n      case 'Number & Float':\n      case 'Float & Number':\n      case 'Float & Float':\n      case 'Number & Number':\n        this.pushState('building-float');\n        this.astGeneric(ast.left, retArr);\n        retArr.push(operatorMap[ast.operator] || ast.operator);\n        this.astGeneric(ast.right, retArr);\n        this.popState('building-float');\n        break;\n      case 'LiteralInteger & LiteralInteger':\n        if (this.isState('casting-to-integer') || this.isState('building-integer')) {\n          this.pushState('building-integer');\n          this.astGeneric(ast.left, retArr);\n          retArr.push(operatorMap[ast.operator] || ast.operator);\n          this.astGeneric(ast.right, retArr);\n          this.popState('building-integer');\n        } else {\n          this.pushState('building-float');\n          this.castLiteralToFloat(ast.left, retArr);\n          retArr.push(operatorMap[ast.operator] || ast.operator);\n          this.castLiteralToFloat(ast.right, retArr);\n          this.popState('building-float');\n        }\n        break;\n\n      case 'Integer & Float':\n      case 'Integer & Number':\n        if (ast.operator === '>' || ast.operator === '<' && ast.right.type === 'Literal') {\n          if (!Number.isInteger(ast.right.value)) {\n            this.pushState('building-float');\n            this.castValueToFloat(ast.left, retArr);\n            retArr.push(operatorMap[ast.operator] || ast.operator);\n            this.astGeneric(ast.right, retArr);\n            this.popState('building-float');\n            break;\n          }\n        }\n        this.pushState('building-integer');\n        this.astGeneric(ast.left, retArr);\n        retArr.push(operatorMap[ast.operator] || ast.operator);\n        this.pushState('casting-to-integer');\n        if (ast.right.type === 'Literal') {\n          const literalResult = [];\n          this.astGeneric(ast.right, literalResult);\n          const literalType = this.getType(ast.right);\n          if (literalType === 'Integer') {\n            retArr.push(literalResult.join(''));\n          } else {\n            throw this.astErrorOutput(`Unhandled binary expression with literal`, ast);\n          }\n        } else {\n          retArr.push('int(');\n          this.astGeneric(ast.right, retArr);\n          retArr.push(')');\n        }\n        this.popState('casting-to-integer');\n        this.popState('building-integer');\n        break;\n      case 'Integer & LiteralInteger':\n        this.pushState('building-integer');\n        this.astGeneric(ast.left, retArr);\n        retArr.push(operatorMap[ast.operator] || ast.operator);\n        this.castLiteralToInteger(ast.right, retArr);\n        this.popState('building-integer');\n        break;\n\n      case 'Number & Integer':\n        this.pushState('building-float');\n        this.astGeneric(ast.left, retArr);\n        retArr.push(operatorMap[ast.operator] || ast.operator);\n        this.castValueToFloat(ast.right, retArr);\n        this.popState('building-float');\n        break;\n      case 'Float & LiteralInteger':\n      case 'Number & LiteralInteger':\n        this.pushState('building-float');\n        this.astGeneric(ast.left, retArr);\n        retArr.push(operatorMap[ast.operator] || ast.operator);\n        this.castLiteralToFloat(ast.right, retArr);\n        this.popState('building-float');\n        break;\n      case 'LiteralInteger & Float':\n      case 'LiteralInteger & Number':\n        if (this.isState('casting-to-integer')) {\n          this.pushState('building-integer');\n          this.castLiteralToInteger(ast.left, retArr);\n          retArr.push(operatorMap[ast.operator] || ast.operator);\n          this.castValueToInteger(ast.right, retArr);\n          this.popState('building-integer');\n        } else {\n          this.pushState('building-float');\n          this.astGeneric(ast.left, retArr);\n          retArr.push(operatorMap[ast.operator] || ast.operator);\n          this.pushState('casting-to-float');\n          this.astGeneric(ast.right, retArr);\n          this.popState('casting-to-float');\n          this.popState('building-float');\n        }\n        break;\n      case 'LiteralInteger & Integer':\n        this.pushState('building-integer');\n        this.castLiteralToInteger(ast.left, retArr);\n        retArr.push(operatorMap[ast.operator] || ast.operator);\n        this.astGeneric(ast.right, retArr);\n        this.popState('building-integer');\n        break;\n\n      case 'Boolean & Boolean':\n        this.pushState('building-boolean');\n        this.astGeneric(ast.left, retArr);\n        retArr.push(operatorMap[ast.operator] || ast.operator);\n        this.astGeneric(ast.right, retArr);\n        this.popState('building-boolean');\n        break;\n\n      case 'Float & Integer':\n        this.pushState('building-float');\n        this.astGeneric(ast.left, retArr);\n        retArr.push(operatorMap[ast.operator] || ast.operator);\n        this.castValueToFloat(ast.right, retArr);\n        this.popState('building-float');\n        break;\n\n      default:\n        throw this.astErrorOutput(`Unhandled binary expression between ${key}`, ast);\n    }\n    retArr.push(')');\n\n    return retArr;\n  }\n\n  checkAndUpconvertOperator(ast, retArr) {\n    const bitwiseResult = this.checkAndUpconvertBitwiseOperators(ast, retArr);\n    if (bitwiseResult) {\n      return bitwiseResult;\n    }\n    const upconvertableOperators = {\n      '%': this.fixIntegerDivisionAccuracy ? 'integerCorrectionModulo' : 'modulo',\n      '**': 'pow',\n    };\n    const foundOperator = upconvertableOperators[ast.operator];\n    if (!foundOperator) return null;\n    retArr.push(foundOperator);\n    retArr.push('(');\n    switch (this.getType(ast.left)) {\n      case 'Integer':\n        this.castValueToFloat(ast.left, retArr);\n        break;\n      case 'LiteralInteger':\n        this.castLiteralToFloat(ast.left, retArr);\n        break;\n      default:\n        this.astGeneric(ast.left, retArr);\n    }\n    retArr.push(',');\n    switch (this.getType(ast.right)) {\n      case 'Integer':\n        this.castValueToFloat(ast.right, retArr);\n        break;\n      case 'LiteralInteger':\n        this.castLiteralToFloat(ast.right, retArr);\n        break;\n      default:\n        this.astGeneric(ast.right, retArr);\n    }\n    retArr.push(')');\n    return retArr;\n  }\n\n  checkAndUpconvertBitwiseOperators(ast, retArr) {\n    const upconvertableOperators = {\n      '&': 'bitwiseAnd',\n      '|': 'bitwiseOr',\n      '^': 'bitwiseXOR',\n      '<<': 'bitwiseZeroFillLeftShift',\n      '>>': 'bitwiseSignedRightShift',\n      '>>>': 'bitwiseZeroFillRightShift',\n    };\n    const foundOperator = upconvertableOperators[ast.operator];\n    if (!foundOperator) return null;\n    retArr.push(foundOperator);\n    retArr.push('(');\n    const leftType = this.getType(ast.left);\n    switch (leftType) {\n      case 'Number':\n      case 'Float':\n        this.castValueToInteger(ast.left, retArr);\n        break;\n      case 'LiteralInteger':\n        this.castLiteralToInteger(ast.left, retArr);\n        break;\n      default:\n        this.astGeneric(ast.left, retArr);\n    }\n    retArr.push(',');\n    const rightType = this.getType(ast.right);\n    switch (rightType) {\n      case 'Number':\n      case 'Float':\n        this.castValueToInteger(ast.right, retArr);\n        break;\n      case 'LiteralInteger':\n        this.castLiteralToInteger(ast.right, retArr);\n        break;\n      default:\n        this.astGeneric(ast.right, retArr);\n    }\n    retArr.push(')');\n    return retArr;\n  }\n\n  checkAndUpconvertBitwiseUnary(ast, retArr) {\n    const upconvertableOperators = {\n      '~': 'bitwiseNot',\n    };\n    const foundOperator = upconvertableOperators[ast.operator];\n    if (!foundOperator) return null;\n    retArr.push(foundOperator);\n    retArr.push('(');\n    switch (this.getType(ast.argument)) {\n      case 'Number':\n      case 'Float':\n        this.castValueToInteger(ast.argument, retArr);\n        break;\n      case 'LiteralInteger':\n        this.castLiteralToInteger(ast.argument, retArr);\n        break;\n      default:\n        this.astGeneric(ast.argument, retArr);\n    }\n    retArr.push(')');\n    return retArr;\n  }\n\n  castLiteralToInteger(ast, retArr) {\n    this.pushState('casting-to-integer');\n    this.astGeneric(ast, retArr);\n    this.popState('casting-to-integer');\n    return retArr;\n  }\n\n  castLiteralToFloat(ast, retArr) {\n    this.pushState('casting-to-float');\n    this.astGeneric(ast, retArr);\n    this.popState('casting-to-float');\n    return retArr;\n  }\n\n  castValueToInteger(ast, retArr) {\n    this.pushState('casting-to-integer');\n    retArr.push('int(');\n    this.astGeneric(ast, retArr);\n    retArr.push(')');\n    this.popState('casting-to-integer');\n    return retArr;\n  }\n\n  castValueToFloat(ast, retArr) {\n    this.pushState('casting-to-float');\n    retArr.push('float(');\n    this.astGeneric(ast, retArr);\n    retArr.push(')');\n    this.popState('casting-to-float');\n    return retArr;\n  }\n\n  astIdentifierExpression(idtNode, retArr) {\n    if (idtNode.type !== 'Identifier') {\n      throw this.astErrorOutput('IdentifierExpression - not an Identifier', idtNode);\n    }\n\n    const type = this.getType(idtNode);\n\n    const name = utils.sanitizeName(idtNode.name);\n    if (idtNode.name === 'Infinity') {\n      retArr.push('3.402823466e+38');\n    } else if (type === 'Boolean') {\n      if (this.argumentNames.indexOf(name) > -1) {\n        retArr.push(`bool(user_${name})`);\n      } else {\n        retArr.push(`user_${name}`);\n      }\n    } else {\n      retArr.push(`user_${name}`);\n    }\n\n    return retArr;\n  }\n\n  astForStatement(forNode, retArr) {\n    if (forNode.type !== 'ForStatement') {\n      throw this.astErrorOutput('Invalid for statement', forNode);\n    }\n\n    const initArr = [];\n    const testArr = [];\n    const updateArr = [];\n    const bodyArr = [];\n    let isSafe = null;\n\n    if (forNode.init) {\n      const { declarations } = forNode.init;\n      if (declarations.length > 1) {\n        isSafe = false;\n      }\n      this.astGeneric(forNode.init, initArr);\n      for (let i = 0; i < declarations.length; i++) {\n        if (declarations[i].init && declarations[i].init.type !== 'Literal') {\n          isSafe = false;\n        }\n      }\n    } else {\n      isSafe = false;\n    }\n\n    if (forNode.test) {\n      this.astGeneric(forNode.test, testArr);\n    } else {\n      isSafe = false;\n    }\n\n    if (forNode.update) {\n      this.astGeneric(forNode.update, updateArr);\n    } else {\n      isSafe = false;\n    }\n\n    if (forNode.body) {\n      this.pushState('loop-body');\n      this.astGeneric(forNode.body, bodyArr);\n      this.popState('loop-body');\n    }\n\n    if (isSafe === null) {\n      isSafe = this.isSafe(forNode.init) && this.isSafe(forNode.test);\n    }\n\n    if (isSafe) {\n      const initString = initArr.join('');\n      const initNeedsSemiColon = initString[initString.length - 1] !== ';';\n      retArr.push(`for (${initString}${initNeedsSemiColon ? ';' : ''}${testArr.join('')};${updateArr.join('')}){\\n`);\n      retArr.push(bodyArr.join(''));\n      retArr.push('}\\n');\n    } else {\n      const iVariableName = this.getInternalVariableName('safeI');\n      if (initArr.length > 0) {\n        retArr.push(initArr.join(''), '\\n');\n      }\n      retArr.push(`for (int ${iVariableName}=0;${iVariableName}<LOOP_MAX;${iVariableName}++){\\n`);\n      if (testArr.length > 0) {\n        retArr.push(`if (!${testArr.join('')}) break;\\n`);\n      }\n      retArr.push(bodyArr.join(''));\n      retArr.push(`\\n${updateArr.join('')};`);\n      retArr.push('}\\n');\n    }\n    return retArr;\n  }\n\n  astWhileStatement(whileNode, retArr) {\n    if (whileNode.type !== 'WhileStatement') {\n      throw this.astErrorOutput('Invalid while statement', whileNode);\n    }\n\n    const iVariableName = this.getInternalVariableName('safeI');\n    retArr.push(`for (int ${iVariableName}=0;${iVariableName}<LOOP_MAX;${iVariableName}++){\\n`);\n    retArr.push('if (!');\n    this.astGeneric(whileNode.test, retArr);\n    retArr.push(') break;\\n');\n    this.astGeneric(whileNode.body, retArr);\n    retArr.push('}\\n');\n\n    return retArr;\n  }\n\n  astDoWhileStatement(doWhileNode, retArr) {\n    if (doWhileNode.type !== 'DoWhileStatement') {\n      throw this.astErrorOutput('Invalid while statement', doWhileNode);\n    }\n\n    const iVariableName = this.getInternalVariableName('safeI');\n    retArr.push(`for (int ${iVariableName}=0;${iVariableName}<LOOP_MAX;${iVariableName}++){\\n`);\n    this.astGeneric(doWhileNode.body, retArr);\n    retArr.push('if (!');\n    this.astGeneric(doWhileNode.test, retArr);\n    retArr.push(') break;\\n');\n    retArr.push('}\\n');\n\n    return retArr;\n  }\n\n\n  astAssignmentExpression(assNode, retArr) {\n    if (assNode.operator === '%=') {\n      this.astGeneric(assNode.left, retArr);\n      retArr.push('=');\n      retArr.push('mod(');\n      this.astGeneric(assNode.left, retArr);\n      retArr.push(',');\n      this.astGeneric(assNode.right, retArr);\n      retArr.push(')');\n    } else if (assNode.operator === '**=') {\n      this.astGeneric(assNode.left, retArr);\n      retArr.push('=');\n      retArr.push('pow(');\n      this.astGeneric(assNode.left, retArr);\n      retArr.push(',');\n      this.astGeneric(assNode.right, retArr);\n      retArr.push(')');\n    } else {\n      const leftType = this.getType(assNode.left);\n      const rightType = this.getType(assNode.right);\n      this.astGeneric(assNode.left, retArr);\n      retArr.push(assNode.operator);\n      if (leftType !== 'Integer' && rightType === 'Integer') {\n        retArr.push('float(');\n        this.astGeneric(assNode.right, retArr);\n        retArr.push(')');\n      } else {\n        this.astGeneric(assNode.right, retArr);\n      }\n      return retArr;\n    }\n  }\n\n  astBlockStatement(bNode, retArr) {\n    if (this.isState('loop-body')) {\n      this.pushState('block-body'); \n      for (let i = 0; i < bNode.body.length; i++) {\n        this.astGeneric(bNode.body[i], retArr);\n      }\n      this.popState('block-body');\n    } else {\n      retArr.push('{\\n');\n      for (let i = 0; i < bNode.body.length; i++) {\n        this.astGeneric(bNode.body[i], retArr);\n      }\n      retArr.push('}\\n');\n    }\n    return retArr;\n  }\n\n  astVariableDeclaration(varDecNode, retArr) {\n    const declarations = varDecNode.declarations;\n    if (!declarations || !declarations[0] || !declarations[0].init) {\n      throw this.astErrorOutput('Unexpected expression', varDecNode);\n    }\n    const result = [];\n    let lastType = null;\n    const declarationSets = [];\n    let declarationSet = [];\n    for (let i = 0; i < declarations.length; i++) {\n      const declaration = declarations[i];\n      const init = declaration.init;\n      const info = this.getDeclaration(declaration.id);\n      const actualType = this.getType(declaration.init);\n      let type = actualType;\n      if (type === 'LiteralInteger') {\n        if (info.suggestedType === 'Integer') {\n          type = 'Integer';\n        } else {\n          type = 'Number';\n        }\n      }\n      const markupType = typeMap[type];\n      if (!markupType) {\n        throw this.astErrorOutput(`Markup type ${ type } not handled`, varDecNode);\n      }\n      const declarationResult = [];\n      if (actualType === 'Integer' && type === 'Integer') {\n        info.valueType = 'Number';\n        if (i === 0 || lastType === null) {\n          declarationResult.push('float ');\n        } else if (type !== lastType) {\n          throw new Error('Unhandled declaration');\n        }\n        lastType = type;\n        declarationResult.push(`user_${utils.sanitizeName(declaration.id.name)}=`);\n        declarationResult.push('float(');\n        this.astGeneric(init, declarationResult);\n        declarationResult.push(')');\n      } else {\n        info.valueType = type;\n        if (i === 0 || lastType === null) {\n          declarationResult.push(`${markupType} `);\n        } else if (type !== lastType) {\n          declarationSets.push(declarationSet.join(','));\n          declarationSet = [];\n          declarationResult.push(`${markupType} `);\n        }\n        lastType = type;\n        declarationResult.push(`user_${utils.sanitizeName(declaration.id.name)}=`);\n        if (actualType === 'Number' && type === 'Integer') {\n          if (init.left && init.left.type === 'Literal') {\n            this.astGeneric(init, declarationResult);\n          } else {\n            declarationResult.push('int(');\n            this.astGeneric(init, declarationResult);\n            declarationResult.push(')');\n          }\n        } else if (actualType === 'LiteralInteger' && type === 'Integer') {\n          this.castLiteralToInteger(init, declarationResult);\n        } else {\n          this.astGeneric(init, declarationResult);\n        }\n      }\n      declarationSet.push(declarationResult.join(''));\n    }\n\n    if (declarationSet.length > 0) {\n      declarationSets.push(declarationSet.join(','));\n    }\n\n    result.push(declarationSets.join(';'));\n\n    retArr.push(result.join(''));\n    retArr.push(';');\n    return retArr;\n  }\n\n  astIfStatement(ifNode, retArr) {\n    retArr.push('if (');\n    this.astGeneric(ifNode.test, retArr);\n    retArr.push(')');\n    if (ifNode.consequent.type === 'BlockStatement') {\n      this.astGeneric(ifNode.consequent, retArr);\n    } else {\n      retArr.push(' {\\n');\n      this.astGeneric(ifNode.consequent, retArr);\n      retArr.push('\\n}\\n');\n    }\n\n    if (ifNode.alternate) {\n      retArr.push('else ');\n      if (ifNode.alternate.type === 'BlockStatement' || ifNode.alternate.type === 'IfStatement') {\n        this.astGeneric(ifNode.alternate, retArr);\n      } else {\n        retArr.push(' {\\n');\n        this.astGeneric(ifNode.alternate, retArr);\n        retArr.push('\\n}\\n');\n      }\n    }\n    return retArr;\n  }\n\n  astSwitchStatement(ast, retArr) {\n    if (ast.type !== 'SwitchStatement') {\n      throw this.astErrorOutput('Invalid switch statement', ast);\n    }\n    const { discriminant, cases } = ast;\n    const type = this.getType(discriminant);\n    const varName = `switchDiscriminant${this.astKey(ast, '_')}`;\n    switch (type) {\n      case 'Float':\n      case 'Number':\n        retArr.push(`float ${varName} = `);\n        this.astGeneric(discriminant, retArr);\n        retArr.push(';\\n');\n        break;\n      case 'Integer':\n        retArr.push(`int ${varName} = `);\n        this.astGeneric(discriminant, retArr);\n        retArr.push(';\\n');\n        break;\n    }\n    if (cases.length === 1 && !cases[0].test) {\n      this.astGeneric(cases[0].consequent, retArr);\n      return retArr;\n    }\n\n    let fallingThrough = false;\n    let defaultResult = [];\n    let movingDefaultToEnd = false;\n    let pastFirstIf = false;\n    for (let i = 0; i < cases.length; i++) {\n      if (!cases[i].test) {\n        if (cases.length > i + 1) {\n          movingDefaultToEnd = true;\n          this.astGeneric(cases[i].consequent, defaultResult);\n          continue;\n        } else {\n          retArr.push(' else {\\n');\n        }\n      } else {\n        if (i === 0 || !pastFirstIf) {\n          pastFirstIf = true;\n          retArr.push(`if (${varName} == `);\n        } else {\n          if (fallingThrough) {\n            retArr.push(`${varName} == `);\n            fallingThrough = false;\n          } else {\n            retArr.push(` else if (${varName} == `);\n          }\n        }\n        if (type === 'Integer') {\n          const testType = this.getType(cases[i].test);\n          switch (testType) {\n            case 'Number':\n            case 'Float':\n              this.castValueToInteger(cases[i].test, retArr);\n              break;\n            case 'LiteralInteger':\n              this.castLiteralToInteger(cases[i].test, retArr);\n              break;\n          }\n        } else if (type === 'Float') {\n          const testType = this.getType(cases[i].test);\n          switch (testType) {\n            case 'LiteralInteger':\n              this.castLiteralToFloat(cases[i].test, retArr);\n              break;\n            case 'Integer':\n              this.castValueToFloat(cases[i].test, retArr);\n              break;\n          }\n        } else {\n          throw new Error('unhanlded');\n        }\n        if (!cases[i].consequent || cases[i].consequent.length === 0) {\n          fallingThrough = true;\n          retArr.push(' || ');\n          continue;\n        }\n        retArr.push(`) {\\n`);\n      }\n      this.astGeneric(cases[i].consequent, retArr);\n      retArr.push('\\n}');\n    }\n    if (movingDefaultToEnd) {\n      retArr.push(' else {');\n      retArr.push(defaultResult.join(''));\n      retArr.push('}');\n    }\n    return retArr;\n  }\n\n  astThisExpression(tNode, retArr) {\n    retArr.push('this');\n    return retArr;\n  }\n\n  astMemberExpression(mNode, retArr) {\n    const {\n      property,\n      name,\n      signature,\n      origin,\n      type,\n      xProperty,\n      yProperty,\n      zProperty\n    } = this.getMemberExpressionDetails(mNode);\n    switch (signature) {\n      case 'value.thread.value':\n      case 'this.thread.value':\n        if (name !== 'x' && name !== 'y' && name !== 'z') {\n          throw this.astErrorOutput('Unexpected expression, expected `this.thread.x`, `this.thread.y`, or `this.thread.z`', mNode);\n        }\n        retArr.push(`threadId.${name}`);\n        return retArr;\n      case 'this.output.value':\n        if (this.dynamicOutput) {\n          switch (name) {\n            case 'x':\n              if (this.isState('casting-to-float')) {\n                retArr.push('float(uOutputDim.x)');\n              } else {\n                retArr.push('uOutputDim.x');\n              }\n              break;\n            case 'y':\n              if (this.isState('casting-to-float')) {\n                retArr.push('float(uOutputDim.y)');\n              } else {\n                retArr.push('uOutputDim.y');\n              }\n              break;\n            case 'z':\n              if (this.isState('casting-to-float')) {\n                retArr.push('float(uOutputDim.z)');\n              } else {\n                retArr.push('uOutputDim.z');\n              }\n              break;\n            default:\n              throw this.astErrorOutput('Unexpected expression', mNode);\n          }\n        } else {\n          switch (name) {\n            case 'x':\n              if (this.isState('casting-to-integer')) {\n                retArr.push(this.output[0]);\n              } else {\n                retArr.push(this.output[0], '.0');\n              }\n              break;\n            case 'y':\n              if (this.isState('casting-to-integer')) {\n                retArr.push(this.output[1]);\n              } else {\n                retArr.push(this.output[1], '.0');\n              }\n              break;\n            case 'z':\n              if (this.isState('casting-to-integer')) {\n                retArr.push(this.output[2]);\n              } else {\n                retArr.push(this.output[2], '.0');\n              }\n              break;\n            default:\n              throw this.astErrorOutput('Unexpected expression', mNode);\n          }\n        }\n        return retArr;\n      case 'value':\n        throw this.astErrorOutput('Unexpected expression', mNode);\n      case 'value[]':\n      case 'value[][]':\n      case 'value[][][]':\n      case 'value[][][][]':\n      case 'value.value':\n        if (origin === 'Math') {\n          retArr.push(Math[name]);\n          return retArr;\n        }\n        const cleanName = utils.sanitizeName(name);\n        switch (property) {\n          case 'r':\n            retArr.push(`user_${ cleanName }.r`);\n            return retArr;\n          case 'g':\n            retArr.push(`user_${ cleanName }.g`);\n            return retArr;\n          case 'b':\n            retArr.push(`user_${ cleanName }.b`);\n            return retArr;\n          case 'a':\n            retArr.push(`user_${ cleanName }.a`);\n            return retArr;\n        }\n        break;\n      case 'this.constants.value':\n        if (typeof xProperty === 'undefined') {\n          switch (type) {\n            case 'Array(2)':\n            case 'Array(3)':\n            case 'Array(4)':\n              retArr.push(`constants_${ utils.sanitizeName(name) }`);\n              return retArr;\n          }\n        }\n        case 'this.constants.value[]':\n        case 'this.constants.value[][]':\n        case 'this.constants.value[][][]':\n        case 'this.constants.value[][][][]':\n          break;\n        case 'fn()[]':\n          this.astCallExpression(mNode.object, retArr);\n          retArr.push('[');\n          retArr.push(this.memberExpressionPropertyMarkup(property));\n          retArr.push(']');\n          return retArr;\n        case 'fn()[][]':\n          this.astCallExpression(mNode.object.object, retArr);\n          retArr.push('[');\n          retArr.push(this.memberExpressionPropertyMarkup(mNode.object.property));\n          retArr.push(']');\n          retArr.push('[');\n          retArr.push(this.memberExpressionPropertyMarkup(mNode.property));\n          retArr.push(']');\n          return retArr;\n        case '[][]':\n          this.astArrayExpression(mNode.object, retArr);\n          retArr.push('[');\n          retArr.push(this.memberExpressionPropertyMarkup(property));\n          retArr.push(']');\n          return retArr;\n        default:\n          throw this.astErrorOutput('Unexpected expression', mNode);\n    }\n\n    if (mNode.computed === false) {\n      switch (type) {\n        case 'Number':\n        case 'Integer':\n        case 'Float':\n        case 'Boolean':\n          retArr.push(`${origin}_${utils.sanitizeName(name)}`);\n          return retArr;\n      }\n    }\n\n    const markupName = `${origin}_${utils.sanitizeName(name)}`;\n\n    switch (type) {\n      case 'Array(2)':\n      case 'Array(3)':\n      case 'Array(4)':\n        this.astGeneric(mNode.object, retArr);\n        retArr.push('[');\n        retArr.push(this.memberExpressionPropertyMarkup(xProperty));\n        retArr.push(']');\n        break;\n      case 'HTMLImageArray':\n        retArr.push(`getImage3D(${ markupName }, ${ markupName }Size, ${ markupName }Dim, `);\n        this.memberExpressionXYZ(xProperty, yProperty, zProperty, retArr);\n        retArr.push(')');\n        break;\n      case 'ArrayTexture(1)':\n        retArr.push(`getFloatFromSampler2D(${ markupName }, ${ markupName }Size, ${ markupName }Dim, `);\n        this.memberExpressionXYZ(xProperty, yProperty, zProperty, retArr);\n        retArr.push(')');\n        break;\n      case 'Array1D(2)':\n      case 'Array2D(2)':\n      case 'Array3D(2)':\n        retArr.push(`getMemoryOptimizedVec2(${ markupName }, ${ markupName }Size, ${ markupName }Dim, `);\n        this.memberExpressionXYZ(xProperty, yProperty, zProperty, retArr);\n        retArr.push(')');\n        break;\n      case 'ArrayTexture(2)':\n        retArr.push(`getVec2FromSampler2D(${ markupName }, ${ markupName }Size, ${ markupName }Dim, `);\n        this.memberExpressionXYZ(xProperty, yProperty, zProperty, retArr);\n        retArr.push(')');\n        break;\n      case 'Array1D(3)':\n      case 'Array2D(3)':\n      case 'Array3D(3)':\n        retArr.push(`getMemoryOptimizedVec3(${ markupName }, ${ markupName }Size, ${ markupName }Dim, `);\n        this.memberExpressionXYZ(xProperty, yProperty, zProperty, retArr);\n        retArr.push(')');\n        break;\n      case 'ArrayTexture(3)':\n        retArr.push(`getVec3FromSampler2D(${ markupName }, ${ markupName }Size, ${ markupName }Dim, `);\n        this.memberExpressionXYZ(xProperty, yProperty, zProperty, retArr);\n        retArr.push(')');\n        break;\n      case 'Array1D(4)':\n      case 'Array2D(4)':\n      case 'Array3D(4)':\n        retArr.push(`getMemoryOptimizedVec4(${ markupName }, ${ markupName }Size, ${ markupName }Dim, `);\n        this.memberExpressionXYZ(xProperty, yProperty, zProperty, retArr);\n        retArr.push(')');\n        break;\n      case 'ArrayTexture(4)':\n      case 'HTMLCanvas':\n      case 'OffscreenCanvas':\n      case 'HTMLImage':\n      case 'ImageBitmap':\n      case 'ImageData':\n      case 'HTMLVideo':\n        retArr.push(`getVec4FromSampler2D(${ markupName }, ${ markupName }Size, ${ markupName }Dim, `);\n        this.memberExpressionXYZ(xProperty, yProperty, zProperty, retArr);\n        retArr.push(')');\n        break;\n      case 'NumberTexture':\n      case 'Array':\n      case 'Array2D':\n      case 'Array3D':\n      case 'Array4D':\n      case 'Input':\n      case 'Number':\n      case 'Float':\n      case 'Integer':\n        if (this.precision === 'single') {\n          retArr.push(`getMemoryOptimized32(${markupName}, ${markupName}Size, ${markupName}Dim, `);\n          this.memberExpressionXYZ(xProperty, yProperty, zProperty, retArr);\n          retArr.push(')');\n        } else {\n          const bitRatio = (origin === 'user' ?\n            this.lookupFunctionArgumentBitRatio(this.name, name) :\n            this.constantBitRatios[name]\n          );\n          switch (bitRatio) {\n            case 1:\n              retArr.push(`get8(${markupName}, ${markupName}Size, ${markupName}Dim, `);\n              break;\n            case 2:\n              retArr.push(`get16(${markupName}, ${markupName}Size, ${markupName}Dim, `);\n              break;\n            case 4:\n            case 0:\n              retArr.push(`get32(${markupName}, ${markupName}Size, ${markupName}Dim, `);\n              break;\n            default:\n              throw new Error(`unhandled bit ratio of ${bitRatio}`);\n          }\n          this.memberExpressionXYZ(xProperty, yProperty, zProperty, retArr);\n          retArr.push(')');\n        }\n        break;\n      case 'MemoryOptimizedNumberTexture':\n        retArr.push(`getMemoryOptimized32(${ markupName }, ${ markupName }Size, ${ markupName }Dim, `);\n        this.memberExpressionXYZ(xProperty, yProperty, zProperty, retArr);\n        retArr.push(')');\n        break;\n      case 'Matrix(2)':\n      case 'Matrix(3)':\n      case 'Matrix(4)':\n        retArr.push(`${markupName}[${this.memberExpressionPropertyMarkup(yProperty)}]`);\n        if (yProperty) {\n          retArr.push(`[${this.memberExpressionPropertyMarkup(xProperty)}]`);\n        }\n        break;\n      default:\n        throw new Error(`unhandled member expression \"${ type }\"`);\n    }\n    return retArr;\n  }\n\n  astCallExpression(ast, retArr) {\n    if (!ast.callee) {\n      throw this.astErrorOutput('Unknown CallExpression', ast);\n    }\n\n    let functionName = null;\n    const isMathFunction = this.isAstMathFunction(ast);\n\n    if (isMathFunction || (ast.callee.object && ast.callee.object.type === 'ThisExpression')) {\n      functionName = ast.callee.property.name;\n    }\n    else if (ast.callee.type === 'SequenceExpression' && ast.callee.expressions[0].type === 'Literal' && !isNaN(ast.callee.expressions[0].raw)) {\n      functionName = ast.callee.expressions[1].property.name;\n    } else {\n      functionName = ast.callee.name;\n    }\n\n    if (!functionName) {\n      throw this.astErrorOutput(`Unhandled function, couldn't find name`, ast);\n    }\n\n    switch (functionName) {\n      case 'pow':\n        functionName = '_pow';\n        break;\n      case 'round':\n        functionName = '_round';\n        break;\n    }\n\n    if (this.calledFunctions.indexOf(functionName) < 0) {\n      this.calledFunctions.push(functionName);\n    }\n\n    if (functionName === 'random' && this.plugins && this.plugins.length > 0) {\n      for (let i = 0; i < this.plugins.length; i++) {\n        const plugin = this.plugins[i];\n        if (plugin.functionMatch === 'Math.random()' && plugin.functionReplace) {\n          retArr.push(plugin.functionReplace);\n          return retArr;\n        }\n      }\n    }\n\n    if (this.onFunctionCall) {\n      this.onFunctionCall(this.name, functionName, ast.arguments);\n    }\n\n    retArr.push(functionName);\n\n    retArr.push('(');\n\n    if (isMathFunction) {\n      for (let i = 0; i < ast.arguments.length; ++i) {\n        const argument = ast.arguments[i];\n        const argumentType = this.getType(argument);\n        if (i > 0) {\n          retArr.push(', ');\n        }\n\n        switch (argumentType) {\n          case 'Integer':\n            this.castValueToFloat(argument, retArr);\n            break;\n          default:\n            this.astGeneric(argument, retArr);\n            break;\n        }\n      }\n    } else {\n      const targetTypes = this.lookupFunctionArgumentTypes(functionName) || [];\n      for (let i = 0; i < ast.arguments.length; ++i) {\n        const argument = ast.arguments[i];\n        let targetType = targetTypes[i];\n        if (i > 0) {\n          retArr.push(', ');\n        }\n        const argumentType = this.getType(argument);\n        if (!targetType) {\n          this.triggerImplyArgumentType(functionName, i, argumentType, this);\n          targetType = argumentType;\n        }\n        switch (argumentType) {\n          case 'Boolean':\n            this.astGeneric(argument, retArr);\n            continue;\n          case 'Number':\n          case 'Float':\n            if (targetType === 'Integer') {\n              retArr.push('int(');\n              this.astGeneric(argument, retArr);\n              retArr.push(')');\n              continue;\n            } else if (targetType === 'Number' || targetType === 'Float') {\n              this.astGeneric(argument, retArr);\n              continue;\n            } else if (targetType === 'LiteralInteger') {\n              this.castLiteralToFloat(argument, retArr);\n              continue;\n            }\n            break;\n          case 'Integer':\n            if (targetType === 'Number' || targetType === 'Float') {\n              retArr.push('float(');\n              this.astGeneric(argument, retArr);\n              retArr.push(')');\n              continue;\n            } else if (targetType === 'Integer') {\n              this.astGeneric(argument, retArr);\n              continue;\n            }\n            break;\n          case 'LiteralInteger':\n            if (targetType === 'Integer') {\n              this.castLiteralToInteger(argument, retArr);\n              continue;\n            } else if (targetType === 'Number' || targetType === 'Float') {\n              this.castLiteralToFloat(argument, retArr);\n              continue;\n            } else if (targetType === 'LiteralInteger') {\n              this.astGeneric(argument, retArr);\n              continue;\n            }\n            break;\n          case 'Array(2)':\n          case 'Array(3)':\n          case 'Array(4)':\n            if (targetType === argumentType) {\n              if (argument.type === 'Identifier') {\n                retArr.push(`user_${utils.sanitizeName(argument.name)}`);\n              } else if (argument.type === 'ArrayExpression' || argument.type === 'MemberExpression' || argument.type === 'CallExpression') {\n                this.astGeneric(argument, retArr);\n              } else {\n                throw this.astErrorOutput(`Unhandled argument type ${ argument.type }`, ast);\n              }\n              continue;\n            }\n            break;\n          case 'HTMLCanvas':\n          case 'OffscreenCanvas':\n          case 'HTMLImage':\n          case 'ImageBitmap':\n          case 'ImageData':\n          case 'HTMLImageArray':\n          case 'HTMLVideo':\n          case 'ArrayTexture(1)':\n          case 'ArrayTexture(2)':\n          case 'ArrayTexture(3)':\n          case 'ArrayTexture(4)':\n          case 'Array':\n          case 'Input':\n            if (targetType === argumentType) {\n              if (argument.type !== 'Identifier') throw this.astErrorOutput(`Unhandled argument type ${ argument.type }`, ast);\n              this.triggerImplyArgumentBitRatio(this.name, argument.name, functionName, i);\n              const name = utils.sanitizeName(argument.name);\n              retArr.push(`user_${name},user_${name}Size,user_${name}Dim`);\n              continue;\n            }\n            break;\n        }\n        throw this.astErrorOutput(`Unhandled argument combination of ${ argumentType } and ${ targetType } for argument named \"${ argument.name }\"`, ast);\n      }\n    }\n    retArr.push(')');\n\n    return retArr;\n  }\n\n  astArrayExpression(arrNode, retArr) {\n    const returnType = this.getType(arrNode);\n\n    const arrLen = arrNode.elements.length;\n\n    switch (returnType) {\n      case 'Matrix(2)':\n      case 'Matrix(3)':\n      case 'Matrix(4)':\n        retArr.push(`mat${arrLen}(`);\n        break;\n      default:\n        retArr.push(`vec${arrLen}(`);\n    }\n    for (let i = 0; i < arrLen; ++i) {\n      if (i > 0) {\n        retArr.push(', ');\n      }\n      const subNode = arrNode.elements[i];\n      this.astGeneric(subNode, retArr)\n    }\n    retArr.push(')');\n\n    return retArr;\n  }\n\n  memberExpressionXYZ(x, y, z, retArr) {\n    if (z) {\n      retArr.push(this.memberExpressionPropertyMarkup(z), ', ');\n    } else {\n      retArr.push('0, ');\n    }\n    if (y) {\n      retArr.push(this.memberExpressionPropertyMarkup(y), ', ');\n    } else {\n      retArr.push('0, ');\n    }\n    retArr.push(this.memberExpressionPropertyMarkup(x));\n    return retArr;\n  }\n\n  memberExpressionPropertyMarkup(property) {\n    if (!property) {\n      throw new Error('Property not set');\n    }\n    const type = this.getType(property);\n    const result = [];\n    switch (type) {\n      case 'Number':\n      case 'Float':\n        this.castValueToInteger(property, result);\n        break;\n      case 'LiteralInteger':\n        this.castLiteralToInteger(property, result);\n        break;\n      default:\n        this.astGeneric(property, result);\n    }\n    return result.join('');\n  }\n}\n\nconst typeMap = {\n  'Array': 'sampler2D',\n  'Array(2)': 'vec2',\n  'Array(3)': 'vec3',\n  'Array(4)': 'vec4',\n  'Matrix(2)': 'mat2',\n  'Matrix(3)': 'mat3',\n  'Matrix(4)': 'mat4',\n  'Array2D': 'sampler2D',\n  'Array3D': 'sampler2D',\n  'Boolean': 'bool',\n  'Float': 'float',\n  'Input': 'sampler2D',\n  'Integer': 'int',\n  'Number': 'float',\n  'LiteralInteger': 'float',\n  'NumberTexture': 'sampler2D',\n  'MemoryOptimizedNumberTexture': 'sampler2D',\n  'ArrayTexture(1)': 'sampler2D',\n  'ArrayTexture(2)': 'sampler2D',\n  'ArrayTexture(3)': 'sampler2D',\n  'ArrayTexture(4)': 'sampler2D',\n  'HTMLVideo': 'sampler2D',\n  'HTMLCanvas': 'sampler2D',\n  'OffscreenCanvas': 'sampler2D',\n  'HTMLImage': 'sampler2D',\n  'ImageBitmap': 'sampler2D',\n  'ImageData': 'sampler2D',\n  'HTMLImageArray': 'sampler2DArray',\n};\n\nconst operatorMap = {\n  '===': '==',\n  '!==': '!='\n};\n\nmodule.exports = {\n  WebGLFunctionNode\n};\n},{\"../../utils\":114,\"../function-node\":10}],39:[function(require,module,exports){\nconst { WebGLKernelValueBoolean } = require('./kernel-value/boolean');\nconst { WebGLKernelValueFloat } = require('./kernel-value/float');\nconst { WebGLKernelValueInteger } = require('./kernel-value/integer');\n\nconst { WebGLKernelValueHTMLImage } = require('./kernel-value/html-image');\nconst { WebGLKernelValueDynamicHTMLImage } = require('./kernel-value/dynamic-html-image');\n\nconst { WebGLKernelValueHTMLVideo } = require('./kernel-value/html-video');\nconst { WebGLKernelValueDynamicHTMLVideo } = require('./kernel-value/dynamic-html-video');\n\nconst { WebGLKernelValueSingleInput } = require('./kernel-value/single-input');\nconst { WebGLKernelValueDynamicSingleInput } = require('./kernel-value/dynamic-single-input');\n\nconst { WebGLKernelValueUnsignedInput } = require('./kernel-value/unsigned-input');\nconst { WebGLKernelValueDynamicUnsignedInput } = require('./kernel-value/dynamic-unsigned-input');\n\nconst { WebGLKernelValueMemoryOptimizedNumberTexture } = require('./kernel-value/memory-optimized-number-texture');\nconst { WebGLKernelValueDynamicMemoryOptimizedNumberTexture } = require('./kernel-value/dynamic-memory-optimized-number-texture');\n\nconst { WebGLKernelValueNumberTexture } = require('./kernel-value/number-texture');\nconst { WebGLKernelValueDynamicNumberTexture } = require('./kernel-value/dynamic-number-texture');\n\nconst { WebGLKernelValueSingleArray } = require('./kernel-value/single-array');\nconst { WebGLKernelValueDynamicSingleArray } = require('./kernel-value/dynamic-single-array');\n\nconst { WebGLKernelValueSingleArray1DI } = require('./kernel-value/single-array1d-i');\nconst { WebGLKernelValueDynamicSingleArray1DI } = require('./kernel-value/dynamic-single-array1d-i');\n\nconst { WebGLKernelValueSingleArray2DI } = require('./kernel-value/single-array2d-i');\nconst { WebGLKernelValueDynamicSingleArray2DI } = require('./kernel-value/dynamic-single-array2d-i');\n\nconst { WebGLKernelValueSingleArray3DI } = require('./kernel-value/single-array3d-i');\nconst { WebGLKernelValueDynamicSingleArray3DI } = require('./kernel-value/dynamic-single-array3d-i');\n\nconst { WebGLKernelValueArray2 } = require('./kernel-value/array2');\nconst { WebGLKernelValueArray3 } = require('./kernel-value/array3');\nconst { WebGLKernelValueArray4 } = require('./kernel-value/array4');\n\nconst { WebGLKernelValueUnsignedArray } = require('./kernel-value/unsigned-array');\nconst { WebGLKernelValueDynamicUnsignedArray } = require('./kernel-value/dynamic-unsigned-array');\n\nconst kernelValueMaps = {\n  unsigned: {\n    dynamic: {\n      'Boolean': WebGLKernelValueBoolean,\n      'Integer': WebGLKernelValueInteger,\n      'Float': WebGLKernelValueFloat,\n      'Array': WebGLKernelValueDynamicUnsignedArray,\n      'Array(2)': WebGLKernelValueArray2,\n      'Array(3)': WebGLKernelValueArray3,\n      'Array(4)': WebGLKernelValueArray4,\n      'Array1D(2)': false,\n      'Array1D(3)': false,\n      'Array1D(4)': false,\n      'Array2D(2)': false,\n      'Array2D(3)': false,\n      'Array2D(4)': false,\n      'Array3D(2)': false,\n      'Array3D(3)': false,\n      'Array3D(4)': false,\n      'Input': WebGLKernelValueDynamicUnsignedInput,\n      'NumberTexture': WebGLKernelValueDynamicNumberTexture,\n      'ArrayTexture(1)': WebGLKernelValueDynamicNumberTexture,\n      'ArrayTexture(2)': WebGLKernelValueDynamicNumberTexture,\n      'ArrayTexture(3)': WebGLKernelValueDynamicNumberTexture,\n      'ArrayTexture(4)': WebGLKernelValueDynamicNumberTexture,\n      'MemoryOptimizedNumberTexture': WebGLKernelValueDynamicMemoryOptimizedNumberTexture,\n      'HTMLCanvas': WebGLKernelValueDynamicHTMLImage,\n      'OffscreenCanvas': WebGLKernelValueDynamicHTMLImage,\n      'HTMLImage': WebGLKernelValueDynamicHTMLImage,\n      'ImageBitmap': WebGLKernelValueDynamicHTMLImage,\n      'ImageData': WebGLKernelValueDynamicHTMLImage,\n      'HTMLImageArray': false,\n      'HTMLVideo': WebGLKernelValueDynamicHTMLVideo,\n    },\n    static: {\n      'Boolean': WebGLKernelValueBoolean,\n      'Float': WebGLKernelValueFloat,\n      'Integer': WebGLKernelValueInteger,\n      'Array': WebGLKernelValueUnsignedArray,\n      'Array(2)': WebGLKernelValueArray2,\n      'Array(3)': WebGLKernelValueArray3,\n      'Array(4)': WebGLKernelValueArray4,\n      'Array1D(2)': false,\n      'Array1D(3)': false,\n      'Array1D(4)': false,\n      'Array2D(2)': false,\n      'Array2D(3)': false,\n      'Array2D(4)': false,\n      'Array3D(2)': false,\n      'Array3D(3)': false,\n      'Array3D(4)': false,\n      'Input': WebGLKernelValueUnsignedInput,\n      'NumberTexture': WebGLKernelValueNumberTexture,\n      'ArrayTexture(1)': WebGLKernelValueNumberTexture,\n      'ArrayTexture(2)': WebGLKernelValueNumberTexture,\n      'ArrayTexture(3)': WebGLKernelValueNumberTexture,\n      'ArrayTexture(4)': WebGLKernelValueNumberTexture,\n      'MemoryOptimizedNumberTexture': WebGLKernelValueMemoryOptimizedNumberTexture,\n      'HTMLCanvas': WebGLKernelValueHTMLImage,\n      'OffscreenCanvas': WebGLKernelValueHTMLImage,\n      'HTMLImage': WebGLKernelValueHTMLImage,\n      'ImageBitmap': WebGLKernelValueHTMLImage,\n      'ImageData': WebGLKernelValueHTMLImage,\n      'HTMLImageArray': false,\n      'HTMLVideo': WebGLKernelValueHTMLVideo,\n    }\n  },\n  single: {\n    dynamic: {\n      'Boolean': WebGLKernelValueBoolean,\n      'Integer': WebGLKernelValueInteger,\n      'Float': WebGLKernelValueFloat,\n      'Array': WebGLKernelValueDynamicSingleArray,\n      'Array(2)': WebGLKernelValueArray2,\n      'Array(3)': WebGLKernelValueArray3,\n      'Array(4)': WebGLKernelValueArray4,\n      'Array1D(2)': WebGLKernelValueDynamicSingleArray1DI,\n      'Array1D(3)': WebGLKernelValueDynamicSingleArray1DI,\n      'Array1D(4)': WebGLKernelValueDynamicSingleArray1DI,\n      'Array2D(2)': WebGLKernelValueDynamicSingleArray2DI,\n      'Array2D(3)': WebGLKernelValueDynamicSingleArray2DI,\n      'Array2D(4)': WebGLKernelValueDynamicSingleArray2DI,\n      'Array3D(2)': WebGLKernelValueDynamicSingleArray3DI,\n      'Array3D(3)': WebGLKernelValueDynamicSingleArray3DI,\n      'Array3D(4)': WebGLKernelValueDynamicSingleArray3DI,\n      'Input': WebGLKernelValueDynamicSingleInput,\n      'NumberTexture': WebGLKernelValueDynamicNumberTexture,\n      'ArrayTexture(1)': WebGLKernelValueDynamicNumberTexture,\n      'ArrayTexture(2)': WebGLKernelValueDynamicNumberTexture,\n      'ArrayTexture(3)': WebGLKernelValueDynamicNumberTexture,\n      'ArrayTexture(4)': WebGLKernelValueDynamicNumberTexture,\n      'MemoryOptimizedNumberTexture': WebGLKernelValueDynamicMemoryOptimizedNumberTexture,\n      'HTMLCanvas': WebGLKernelValueDynamicHTMLImage,\n      'OffscreenCanvas': WebGLKernelValueDynamicHTMLImage,\n      'HTMLImage': WebGLKernelValueDynamicHTMLImage,\n      'ImageBitmap': WebGLKernelValueDynamicHTMLImage,\n      'ImageData': WebGLKernelValueDynamicHTMLImage,\n      'HTMLImageArray': false,\n      'HTMLVideo': WebGLKernelValueDynamicHTMLVideo,\n    },\n    static: {\n      'Boolean': WebGLKernelValueBoolean,\n      'Float': WebGLKernelValueFloat,\n      'Integer': WebGLKernelValueInteger,\n      'Array': WebGLKernelValueSingleArray,\n      'Array(2)': WebGLKernelValueArray2,\n      'Array(3)': WebGLKernelValueArray3,\n      'Array(4)': WebGLKernelValueArray4,\n      'Array1D(2)': WebGLKernelValueSingleArray1DI,\n      'Array1D(3)': WebGLKernelValueSingleArray1DI,\n      'Array1D(4)': WebGLKernelValueSingleArray1DI,\n      'Array2D(2)': WebGLKernelValueSingleArray2DI,\n      'Array2D(3)': WebGLKernelValueSingleArray2DI,\n      'Array2D(4)': WebGLKernelValueSingleArray2DI,\n      'Array3D(2)': WebGLKernelValueSingleArray3DI,\n      'Array3D(3)': WebGLKernelValueSingleArray3DI,\n      'Array3D(4)': WebGLKernelValueSingleArray3DI,\n      'Input': WebGLKernelValueSingleInput,\n      'NumberTexture': WebGLKernelValueNumberTexture,\n      'ArrayTexture(1)': WebGLKernelValueNumberTexture,\n      'ArrayTexture(2)': WebGLKernelValueNumberTexture,\n      'ArrayTexture(3)': WebGLKernelValueNumberTexture,\n      'ArrayTexture(4)': WebGLKernelValueNumberTexture,\n      'MemoryOptimizedNumberTexture': WebGLKernelValueMemoryOptimizedNumberTexture,\n      'HTMLCanvas': WebGLKernelValueHTMLImage,\n      'OffscreenCanvas': WebGLKernelValueHTMLImage,\n      'HTMLImage': WebGLKernelValueHTMLImage,\n      'ImageBitmap': WebGLKernelValueHTMLImage,\n      'ImageData': WebGLKernelValueHTMLImage,\n      'HTMLImageArray': false,\n      'HTMLVideo': WebGLKernelValueHTMLVideo,\n    }\n  },\n};\n\nfunction lookupKernelValueType(type, dynamic, precision, value) {\n  if (!type) {\n    throw new Error('type missing');\n  }\n  if (!dynamic) {\n    throw new Error('dynamic missing');\n  }\n  if (!precision) {\n    throw new Error('precision missing');\n  }\n  if (value.type) {\n    type = value.type;\n  }\n  const types = kernelValueMaps[precision][dynamic];\n  if (types[type] === false) {\n    return null;\n  } else if (types[type] === undefined) {\n    throw new Error(`Could not find a KernelValue for ${ type }`);\n  }\n  return types[type];\n}\n\nmodule.exports = {\n  lookupKernelValueType,\n  kernelValueMaps,\n};\n},{\"./kernel-value/array2\":41,\"./kernel-value/array3\":42,\"./kernel-value/array4\":43,\"./kernel-value/boolean\":44,\"./kernel-value/dynamic-html-image\":45,\"./kernel-value/dynamic-html-video\":46,\"./kernel-value/dynamic-memory-optimized-number-texture\":47,\"./kernel-value/dynamic-number-texture\":48,\"./kernel-value/dynamic-single-array\":49,\"./kernel-value/dynamic-single-array1d-i\":50,\"./kernel-value/dynamic-single-array2d-i\":51,\"./kernel-value/dynamic-single-array3d-i\":52,\"./kernel-value/dynamic-single-input\":53,\"./kernel-value/dynamic-unsigned-array\":54,\"./kernel-value/dynamic-unsigned-input\":55,\"./kernel-value/float\":56,\"./kernel-value/html-image\":57,\"./kernel-value/html-video\":58,\"./kernel-value/integer\":60,\"./kernel-value/memory-optimized-number-texture\":61,\"./kernel-value/number-texture\":62,\"./kernel-value/single-array\":63,\"./kernel-value/single-array1d-i\":64,\"./kernel-value/single-array2d-i\":65,\"./kernel-value/single-array3d-i\":66,\"./kernel-value/single-input\":67,\"./kernel-value/unsigned-array\":68,\"./kernel-value/unsigned-input\":69}],40:[function(require,module,exports){\nconst { WebGLKernelValue } = require('./index');\nconst { Input } = require('../../../input');\n\nclass WebGLKernelArray extends WebGLKernelValue {\n  checkSize(width, height) {\n    if (!this.kernel.validate) return;\n    const { maxTextureSize } = this.kernel.constructor.features;\n    if (width > maxTextureSize || height > maxTextureSize) {\n      if (width > height) {\n        throw new Error(`Argument texture width of ${width} larger than maximum size of ${maxTextureSize} for your GPU`);\n      } else if (width < height) {\n        throw new Error(`Argument texture height of ${height} larger than maximum size of ${maxTextureSize} for your GPU`);\n      } else {\n        throw new Error(`Argument texture height and width of ${height} larger than maximum size of ${maxTextureSize} for your GPU`);\n      }\n    }\n  }\n\n  setup() {\n    this.requestTexture();\n    this.setupTexture();\n    this.defineTexture();\n  }\n\n  requestTexture() {\n    this.texture = this.onRequestTexture();\n  }\n\n  defineTexture() {\n    const { context: gl } = this;\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n  }\n\n  setupTexture() {\n    this.contextHandle = this.onRequestContextHandle();\n    this.index = this.onRequestIndex();\n    this.dimensionsId = this.id + 'Dim';\n    this.sizeId = this.id + 'Size';\n  }\n\n  getBitRatio(value) {\n    if (Array.isArray(value[0])) {\n      return this.getBitRatio(value[0]);\n    } else if (value.constructor === Input) {\n      return this.getBitRatio(value.value);\n    }\n    switch (value.constructor) {\n      case Uint8ClampedArray:\n      case Uint8Array:\n      case Int8Array:\n        return 1;\n      case Uint16Array:\n      case Int16Array:\n        return 2;\n      case Float32Array:\n      case Int32Array:\n      default:\n        return 4;\n    }\n  }\n\n  destroy() {\n    if (this.prevArg) {\n      this.prevArg.delete();\n    }\n    this.context.deleteTexture(this.texture);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelArray\n};\n},{\"../../../input\":110,\"./index\":59}],41:[function(require,module,exports){\nconst { WebGLKernelValue } = require('./index');\n\nclass WebGLKernelValueArray2 extends WebGLKernelValue {\n  constructor(value, settings) {\n    super(value, settings);\n    this.uploadValue = value;\n  }\n  getSource(value) {\n    if (this.origin === 'constants') {\n      return `const vec2 ${this.id} = vec2(${value[0]},${value[1]});\\n`;\n    }\n    return `uniform vec2 ${this.id};\\n`;\n  }\n\n  getStringValueHandler() {\n    if (this.origin === 'constants') return '';\n    return `const uploadValue_${this.name} = ${this.varName};\\n`;\n  }\n\n  updateValue(value) {\n    if (this.origin === 'constants') return;\n    this.kernel.setUniform2fv(this.id, this.uploadValue = value);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueArray2\n};\n},{\"./index\":59}],42:[function(require,module,exports){\nconst { WebGLKernelValue } = require('./index');\n\nclass WebGLKernelValueArray3 extends WebGLKernelValue {\n  constructor(value, settings) {\n    super(value, settings);\n    this.uploadValue = value;\n  }\n  getSource(value) {\n    if (this.origin === 'constants') {\n      return `const vec3 ${this.id} = vec3(${value[0]},${value[1]},${value[2]});\\n`;\n    }\n    return `uniform vec3 ${this.id};\\n`;\n  }\n\n  getStringValueHandler() {\n    if (this.origin === 'constants') return '';\n    return `const uploadValue_${this.name} = ${this.varName};\\n`;\n  }\n\n  updateValue(value) {\n    if (this.origin === 'constants') return;\n    this.kernel.setUniform3fv(this.id, this.uploadValue = value);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueArray3\n};\n},{\"./index\":59}],43:[function(require,module,exports){\nconst { WebGLKernelValue } = require('./index');\n\nclass WebGLKernelValueArray4 extends WebGLKernelValue {\n  constructor(value, settings) {\n    super(value, settings);\n    this.uploadValue = value;\n  }\n  getSource(value) {\n    if (this.origin === 'constants') {\n      return `const vec4 ${this.id} = vec4(${value[0]},${value[1]},${value[2]},${value[3]});\\n`;\n    }\n    return `uniform vec4 ${this.id};\\n`;\n  }\n\n  getStringValueHandler() {\n    if (this.origin === 'constants') return '';\n    return `const uploadValue_${this.name} = ${this.varName};\\n`;\n  }\n\n  updateValue(value) {\n    if (this.origin === 'constants') return;\n    this.kernel.setUniform4fv(this.id, this.uploadValue = value);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueArray4\n};\n},{\"./index\":59}],44:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValue } = require('./index');\n\nclass WebGLKernelValueBoolean extends WebGLKernelValue {\n  constructor(value, settings) {\n    super(value, settings);\n    this.uploadValue = value;\n  }\n  getSource(value) {\n    if (this.origin === 'constants') {\n      return `const bool ${this.id} = ${value};\\n`;\n    }\n    return `uniform bool ${this.id};\\n`;\n  }\n\n  getStringValueHandler() {\n    return `const uploadValue_${this.name} = ${this.varName};\\n`;\n  }\n\n  updateValue(value) {\n    if (this.origin === 'constants') return;\n    this.kernel.setUniform1i(this.id, this.uploadValue = value);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueBoolean\n};\n},{\"../../../utils\":114,\"./index\":59}],45:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueHTMLImage } = require('./html-image');\n\nclass WebGLKernelValueDynamicHTMLImage extends WebGLKernelValueHTMLImage {\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `uniform ivec2 ${this.sizeId}`,\n      `uniform ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n\n  updateValue(value) {\n    const { width, height } = value;\n    this.checkSize(width, height);\n    this.dimensions = [width, height, 1];\n    this.textureSize = [width, height];\n    this.kernel.setUniform3iv(this.dimensionsId, this.dimensions);\n    this.kernel.setUniform2iv(this.sizeId, this.textureSize);\n    super.updateValue(value);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueDynamicHTMLImage\n};\n},{\"../../../utils\":114,\"./html-image\":57}],46:[function(require,module,exports){\nconst { WebGLKernelValueDynamicHTMLImage } = require('./dynamic-html-image');\n\nclass WebGLKernelValueDynamicHTMLVideo extends WebGLKernelValueDynamicHTMLImage {}\n\nmodule.exports = {\n  WebGLKernelValueDynamicHTMLVideo\n};\n},{\"./dynamic-html-image\":45}],47:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueMemoryOptimizedNumberTexture } = require('./memory-optimized-number-texture');\n\nclass WebGLKernelValueDynamicMemoryOptimizedNumberTexture extends WebGLKernelValueMemoryOptimizedNumberTexture {\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `uniform ivec2 ${this.sizeId}`,\n      `uniform ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n\n  updateValue(inputTexture) {\n    this.dimensions = inputTexture.dimensions;\n    this.checkSize(inputTexture.size[0], inputTexture.size[1]);\n    this.textureSize = inputTexture.size;\n    this.kernel.setUniform3iv(this.dimensionsId, this.dimensions);\n    this.kernel.setUniform2iv(this.sizeId, this.textureSize);\n    super.updateValue(inputTexture);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueDynamicMemoryOptimizedNumberTexture\n};\n},{\"../../../utils\":114,\"./memory-optimized-number-texture\":61}],48:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueNumberTexture } = require('./number-texture');\n\nclass WebGLKernelValueDynamicNumberTexture extends WebGLKernelValueNumberTexture {\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `uniform ivec2 ${this.sizeId}`,\n      `uniform ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n\n  updateValue(value) {\n    this.dimensions = value.dimensions;\n    this.checkSize(value.size[0], value.size[1]);\n    this.textureSize = value.size;\n    this.kernel.setUniform3iv(this.dimensionsId, this.dimensions);\n    this.kernel.setUniform2iv(this.sizeId, this.textureSize);\n    super.updateValue(value);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueDynamicNumberTexture\n};\n},{\"../../../utils\":114,\"./number-texture\":62}],49:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueSingleArray } = require('./single-array');\n\nclass WebGLKernelValueDynamicSingleArray extends WebGLKernelValueSingleArray {\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `uniform ivec2 ${this.sizeId}`,\n      `uniform ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n\n  updateValue(value) {\n    this.dimensions = utils.getDimensions(value, true);\n    this.textureSize = utils.getMemoryOptimizedFloatTextureSize(this.dimensions, this.bitRatio);\n    this.uploadArrayLength = this.textureSize[0] * this.textureSize[1] * this.bitRatio;\n    this.checkSize(this.textureSize[0], this.textureSize[1]);\n    this.uploadValue = new Float32Array(this.uploadArrayLength);\n    this.kernel.setUniform3iv(this.dimensionsId, this.dimensions);\n    this.kernel.setUniform2iv(this.sizeId, this.textureSize);\n    super.updateValue(value);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueDynamicSingleArray\n};\n},{\"../../../utils\":114,\"./single-array\":63}],50:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueSingleArray1DI } = require('./single-array1d-i');\n\nclass WebGLKernelValueDynamicSingleArray1DI extends WebGLKernelValueSingleArray1DI {\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `uniform ivec2 ${this.sizeId}`,\n      `uniform ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n\n  updateValue(value) {\n    this.setShape(value);\n    this.kernel.setUniform3iv(this.dimensionsId, this.dimensions);\n    this.kernel.setUniform2iv(this.sizeId, this.textureSize);\n    super.updateValue(value);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueDynamicSingleArray1DI\n};\n},{\"../../../utils\":114,\"./single-array1d-i\":64}],51:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueSingleArray2DI } = require('./single-array2d-i');\n\nclass WebGLKernelValueDynamicSingleArray2DI extends WebGLKernelValueSingleArray2DI {\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `uniform ivec2 ${this.sizeId}`,\n      `uniform ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n\n  updateValue(value) {\n    this.setShape(value);\n    this.kernel.setUniform3iv(this.dimensionsId, this.dimensions);\n    this.kernel.setUniform2iv(this.sizeId, this.textureSize);\n    super.updateValue(value);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueDynamicSingleArray2DI\n};\n},{\"../../../utils\":114,\"./single-array2d-i\":65}],52:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueSingleArray3DI } = require('./single-array3d-i');\n\nclass WebGLKernelValueDynamicSingleArray3DI extends WebGLKernelValueSingleArray3DI {\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `uniform ivec2 ${this.sizeId}`,\n      `uniform ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n\n  updateValue(value) {\n    this.setShape(value);\n    this.kernel.setUniform3iv(this.dimensionsId, this.dimensions);\n    this.kernel.setUniform2iv(this.sizeId, this.textureSize);\n    super.updateValue(value);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueDynamicSingleArray3DI\n};\n},{\"../../../utils\":114,\"./single-array3d-i\":66}],53:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueSingleInput } = require('./single-input');\n\nclass WebGLKernelValueDynamicSingleInput extends WebGLKernelValueSingleInput {\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `uniform ivec2 ${this.sizeId}`,\n      `uniform ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n\n  updateValue(value) {\n    let [w, h, d] = value.size;\n    this.dimensions = new Int32Array([w || 1, h || 1, d || 1]);\n    this.textureSize = utils.getMemoryOptimizedFloatTextureSize(this.dimensions, this.bitRatio);\n    this.uploadArrayLength = this.textureSize[0] * this.textureSize[1] * this.bitRatio;\n    this.checkSize(this.textureSize[0], this.textureSize[1]);\n    this.uploadValue = new Float32Array(this.uploadArrayLength);\n    this.kernel.setUniform3iv(this.dimensionsId, this.dimensions);\n    this.kernel.setUniform2iv(this.sizeId, this.textureSize);\n    super.updateValue(value);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueDynamicSingleInput\n};\n},{\"../../../utils\":114,\"./single-input\":67}],54:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueUnsignedArray } = require('./unsigned-array');\n\nclass WebGLKernelValueDynamicUnsignedArray extends WebGLKernelValueUnsignedArray {\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `uniform ivec2 ${this.sizeId}`,\n      `uniform ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n\n  updateValue(value) {\n    this.dimensions = utils.getDimensions(value, true);\n    this.textureSize = utils.getMemoryOptimizedPackedTextureSize(this.dimensions, this.bitRatio);\n    this.uploadArrayLength = this.textureSize[0] * this.textureSize[1] * (4 / this.bitRatio);\n    this.checkSize(this.textureSize[0], this.textureSize[1]);\n    const Type = this.getTransferArrayType(value);\n    this.preUploadValue = new Type(this.uploadArrayLength);\n    this.uploadValue = new Uint8Array(this.preUploadValue.buffer);\n    this.kernel.setUniform3iv(this.dimensionsId, this.dimensions);\n    this.kernel.setUniform2iv(this.sizeId, this.textureSize);\n    super.updateValue(value);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueDynamicUnsignedArray\n};\n},{\"../../../utils\":114,\"./unsigned-array\":68}],55:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueUnsignedInput } = require('./unsigned-input');\n\nclass WebGLKernelValueDynamicUnsignedInput extends WebGLKernelValueUnsignedInput {\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `uniform ivec2 ${this.sizeId}`,\n      `uniform ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n\n  updateValue(value) {\n    let [w, h, d] = value.size;\n    this.dimensions = new Int32Array([w || 1, h || 1, d || 1]);\n    this.textureSize = utils.getMemoryOptimizedPackedTextureSize(this.dimensions, this.bitRatio);\n    this.uploadArrayLength = this.textureSize[0] * this.textureSize[1] * (4 / this.bitRatio);\n    this.checkSize(this.textureSize[0], this.textureSize[1]);\n    const Type = this.getTransferArrayType(value.value);\n    this.preUploadValue = new Type(this.uploadArrayLength);\n    this.uploadValue = new Uint8Array(this.preUploadValue.buffer);\n    this.kernel.setUniform3iv(this.dimensionsId, this.dimensions);\n    this.kernel.setUniform2iv(this.sizeId, this.textureSize);\n    super.updateValue(value);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueDynamicUnsignedInput\n};\n},{\"../../../utils\":114,\"./unsigned-input\":69}],56:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValue } = require('./index');\n\nclass WebGLKernelValueFloat extends WebGLKernelValue {\n  constructor(value, settings) {\n    super(value, settings);\n    this.uploadValue = value;\n  }\n  getStringValueHandler() {\n    return `const uploadValue_${this.name} = ${this.varName};\\n`;\n  }\n  getSource(value) {\n    if (this.origin === 'constants') {\n      if (Number.isInteger(value)) {\n        return `const float ${this.id} = ${value}.0;\\n`;\n      }\n      return `const float ${this.id} = ${value};\\n`;\n    }\n    return `uniform float ${this.id};\\n`;\n  }\n\n  updateValue(value) {\n    if (this.origin === 'constants') return;\n    this.kernel.setUniform1f(this.id, this.uploadValue = value);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueFloat\n};\n},{\"../../../utils\":114,\"./index\":59}],57:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelArray } = require('./array');\n\nclass WebGLKernelValueHTMLImage extends WebGLKernelArray {\n  constructor(value, settings) {\n    super(value, settings);\n    const { width, height } = value;\n    this.checkSize(width, height);\n    this.dimensions = [width, height, 1];\n    this.textureSize = [width, height];\n    this.uploadValue = value;\n  }\n\n  getStringValueHandler() {\n    return `const uploadValue_${this.name} = ${this.varName};\\n`;\n  }\n\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,\n      `ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`,\n    ]);\n  }\n\n  updateValue(inputImage) {\n    if (inputImage.constructor !== this.initialValueConstructor) {\n      this.onUpdateValueMismatch(inputImage.constructor);\n      return;\n    }\n    const { context: gl } = this;\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.uploadValue = inputImage);\n    this.kernel.setUniform1i(this.id, this.index);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueHTMLImage\n};\n},{\"../../../utils\":114,\"./array\":40}],58:[function(require,module,exports){\nconst { WebGLKernelValueHTMLImage } = require('./html-image');\n\nclass WebGLKernelValueHTMLVideo extends WebGLKernelValueHTMLImage {}\n\nmodule.exports = {\n  WebGLKernelValueHTMLVideo\n};\n},{\"./html-image\":57}],59:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { KernelValue } = require('../../kernel-value');\n\nclass WebGLKernelValue extends KernelValue {\n  constructor(value, settings) {\n    super(value, settings);\n    this.dimensionsId = null;\n    this.sizeId = null;\n    this.initialValueConstructor = value.constructor;\n    this.onRequestTexture = settings.onRequestTexture;\n    this.onRequestIndex = settings.onRequestIndex;\n    this.uploadValue = null;\n    this.textureSize = null;\n    this.bitRatio = null;\n    this.prevArg = null;\n  }\n\n  get id() {\n    return `${this.origin}_${utils.sanitizeName(this.name)}`;\n  }\n\n  setup() {}\n\n  getTransferArrayType(value) {\n    if (Array.isArray(value[0])) {\n      return this.getTransferArrayType(value[0]);\n    }\n    switch (value.constructor) {\n      case Array:\n      case Int32Array:\n      case Int16Array:\n      case Int8Array:\n        return Float32Array;\n      case Uint8ClampedArray:\n      case Uint8Array:\n      case Uint16Array:\n      case Uint32Array:\n      case Float32Array:\n      case Float64Array:\n        return value.constructor;\n    }\n    console.warn('Unfamiliar constructor type.  Will go ahead and use, but likley this may result in a transfer of zeros');\n    return value.constructor;\n  }\n\n  getStringValueHandler() {\n    throw new Error(`\"getStringValueHandler\" not implemented on ${this.constructor.name}`);\n  }\n\n  getVariablePrecisionString() {\n    return this.kernel.getVariablePrecisionString(this.textureSize || undefined, this.tactic || undefined);\n  }\n\n  destroy() {}\n}\n\nmodule.exports = {\n  WebGLKernelValue\n};\n},{\"../../../utils\":114,\"../../kernel-value\":35}],60:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValue } = require('./index');\n\nclass WebGLKernelValueInteger extends WebGLKernelValue {\n  constructor(value, settings) {\n    super(value, settings);\n    this.uploadValue = value;\n  }\n  getStringValueHandler() {\n    return `const uploadValue_${this.name} = ${this.varName};\\n`;\n  }\n  getSource(value) {\n    if (this.origin === 'constants') {\n      return `const int ${this.id} = ${ parseInt(value) };\\n`;\n    }\n    return `uniform int ${this.id};\\n`;\n  }\n\n  updateValue(value) {\n    if (this.origin === 'constants') return;\n    this.kernel.setUniform1i(this.id, this.uploadValue = value);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueInteger\n};\n},{\"../../../utils\":114,\"./index\":59}],61:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelArray } = require('./array');\n\nconst sameError = `Source and destination textures are the same.  Use immutable = true and manually cleanup kernel output texture memory with texture.delete()`;\n\nclass WebGLKernelValueMemoryOptimizedNumberTexture extends WebGLKernelArray {\n  constructor(value, settings) {\n    super(value, settings);\n    const [width, height] = value.size;\n    this.checkSize(width, height);\n    this.dimensions = value.dimensions;\n    this.textureSize = value.size;\n    this.uploadValue = value.texture;\n    this.forceUploadEachRun = true;\n  }\n\n  setup() {\n    this.setupTexture();\n  }\n\n  getStringValueHandler() {\n    return `const uploadValue_${this.name} = ${this.varName}.texture;\\n`;\n  }\n\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,\n      `ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`,\n    ]);\n  }\n\n  updateValue(inputTexture) {\n    if (inputTexture.constructor !== this.initialValueConstructor) {\n      this.onUpdateValueMismatch(inputTexture.constructor);\n      return;\n    }\n    if (this.checkContext && inputTexture.context !== this.context) {\n      throw new Error(`Value ${this.name} (${this.type}) must be from same context`);\n    }\n\n    const { kernel, context: gl } = this;\n    if (kernel.pipeline) {\n      if (kernel.immutable) {\n        kernel.updateTextureArgumentRefs(this, inputTexture);\n      } else {\n        if (kernel.texture && kernel.texture.texture === inputTexture.texture) {\n          throw new Error(sameError);\n        } else if (kernel.mappedTextures) {\n          const { mappedTextures } = kernel;\n          for (let i = 0; i < mappedTextures.length; i++) {\n            if (mappedTextures[i].texture === inputTexture.texture) {\n              throw new Error(sameError);\n            }\n          }\n        }\n      }\n    }\n\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D, this.uploadValue = inputTexture.texture);\n    this.kernel.setUniform1i(this.id, this.index);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueMemoryOptimizedNumberTexture,\n  sameError\n};\n},{\"../../../utils\":114,\"./array\":40}],62:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelArray } = require('./array');\nconst { sameError } = require('./memory-optimized-number-texture');\n\nclass WebGLKernelValueNumberTexture extends WebGLKernelArray {\n  constructor(value, settings) {\n    super(value, settings);\n    const [width, height] = value.size;\n    this.checkSize(width, height);\n    const { size: textureSize, dimensions } = value;\n    this.bitRatio = this.getBitRatio(value);\n    this.dimensions = dimensions;\n    this.textureSize = textureSize;\n    this.uploadValue = value.texture;\n    this.forceUploadEachRun = true;\n  }\n\n  setup() {\n    this.setupTexture();\n  }\n\n  getStringValueHandler() {\n    return `const uploadValue_${this.name} = ${this.varName}.texture;\\n`;\n  }\n\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,\n      `ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`,\n    ]);\n  }\n\n  updateValue(inputTexture) {\n    if (inputTexture.constructor !== this.initialValueConstructor) {\n      this.onUpdateValueMismatch(inputTexture.constructor);\n      return;\n    }\n    if (this.checkContext && inputTexture.context !== this.context) {\n      throw new Error(`Value ${this.name} (${this.type}) must be from same context`);\n    }\n\n    const { kernel, context: gl } = this;\n    if (kernel.pipeline) {\n      if (kernel.immutable) {\n        kernel.updateTextureArgumentRefs(this, inputTexture);\n      } else {\n        if (kernel.texture && kernel.texture.texture === inputTexture.texture) {\n          throw new Error(sameError);\n        } else if (kernel.mappedTextures) {\n          const { mappedTextures } = kernel;\n          for (let i = 0; i < mappedTextures.length; i++) {\n            if (mappedTextures[i].texture === inputTexture.texture) {\n              throw new Error(sameError);\n            }\n          }\n        }\n      }\n    }\n\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D, this.uploadValue = inputTexture.texture);\n    this.kernel.setUniform1i(this.id, this.index);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueNumberTexture\n};\n},{\"../../../utils\":114,\"./array\":40,\"./memory-optimized-number-texture\":61}],63:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelArray } = require('./array');\n\nclass WebGLKernelValueSingleArray extends WebGLKernelArray {\n  constructor(value, settings) {\n    super(value, settings);\n    this.bitRatio = 4;\n    this.dimensions = utils.getDimensions(value, true);\n    this.textureSize = utils.getMemoryOptimizedFloatTextureSize(this.dimensions, this.bitRatio);\n    this.uploadArrayLength = this.textureSize[0] * this.textureSize[1] * this.bitRatio;\n    this.checkSize(this.textureSize[0], this.textureSize[1]);\n    this.uploadValue = new Float32Array(this.uploadArrayLength);\n  }\n\n  getStringValueHandler() {\n    return utils.linesToString([\n      `const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,\n      `flattenTo(${this.varName}, uploadValue_${this.name})`,\n    ]);\n  }\n\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,\n      `ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`,\n    ]);\n  }\n\n  updateValue(value) {\n    if (value.constructor !== this.initialValueConstructor) {\n      this.onUpdateValueMismatch(value.constructor);\n      return;\n    }\n    const { context: gl } = this;\n    utils.flattenTo(value, this.uploadValue);\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.textureSize[0], this.textureSize[1], 0, gl.RGBA, gl.FLOAT, this.uploadValue);\n    this.kernel.setUniform1i(this.id, this.index);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueSingleArray\n};\n},{\"../../../utils\":114,\"./array\":40}],64:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelArray } = require('./array');\n\nclass WebGLKernelValueSingleArray1DI extends WebGLKernelArray {\n  constructor(value, settings) {\n    super(value, settings);\n    this.bitRatio = 4;\n    this.setShape(value);\n  }\n\n  setShape(value) {\n    const valueDimensions = utils.getDimensions(value, true);\n    this.textureSize = utils.getMemoryOptimizedFloatTextureSize(valueDimensions, this.bitRatio);\n    this.dimensions = new Int32Array([valueDimensions[1], 1, 1]);\n    this.uploadArrayLength = this.textureSize[0] * this.textureSize[1] * this.bitRatio;\n    this.checkSize(this.textureSize[0], this.textureSize[1]);\n    this.uploadValue = new Float32Array(this.uploadArrayLength);\n  }\n\n  getStringValueHandler() {\n    return utils.linesToString([\n      `const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,\n      `flattenTo(${this.varName}, uploadValue_${this.name})`,\n    ]);\n  }\n\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,\n      `ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`,\n    ]);\n  }\n\n  updateValue(value) {\n    if (value.constructor !== this.initialValueConstructor) {\n      this.onUpdateValueMismatch(value.constructor);\n      return;\n    }\n    const { context: gl } = this;\n    utils.flatten2dArrayTo(value, this.uploadValue);\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.textureSize[0], this.textureSize[1], 0, gl.RGBA, gl.FLOAT, this.uploadValue);\n    this.kernel.setUniform1i(this.id, this.index);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueSingleArray1DI\n};\n},{\"../../../utils\":114,\"./array\":40}],65:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelArray } = require('./array');\n\nclass WebGLKernelValueSingleArray2DI extends WebGLKernelArray {\n  constructor(value, settings) {\n    super(value, settings);\n    this.bitRatio = 4;\n    this.setShape(value);\n  }\n\n  setShape(value) {\n    const valueDimensions = utils.getDimensions(value, true);\n    this.textureSize = utils.getMemoryOptimizedFloatTextureSize(valueDimensions, this.bitRatio);\n    this.dimensions = new Int32Array([valueDimensions[1], valueDimensions[2], 1]);\n    this.uploadArrayLength = this.textureSize[0] * this.textureSize[1] * this.bitRatio;\n    this.checkSize(this.textureSize[0], this.textureSize[1]);\n    this.uploadValue = new Float32Array(this.uploadArrayLength);\n  }\n\n  getStringValueHandler() {\n    return utils.linesToString([\n      `const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,\n      `flattenTo(${this.varName}, uploadValue_${this.name})`,\n    ]);\n  }\n\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,\n      `ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`,\n    ]);\n  }\n\n  updateValue(value) {\n    if (value.constructor !== this.initialValueConstructor) {\n      this.onUpdateValueMismatch(value.constructor);\n      return;\n    }\n    const { context: gl } = this;\n    utils.flatten3dArrayTo(value, this.uploadValue);\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.textureSize[0], this.textureSize[1], 0, gl.RGBA, gl.FLOAT, this.uploadValue);\n    this.kernel.setUniform1i(this.id, this.index);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueSingleArray2DI\n};\n},{\"../../../utils\":114,\"./array\":40}],66:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelArray } = require('./array');\n\nclass WebGLKernelValueSingleArray3DI extends WebGLKernelArray {\n  constructor(value, settings) {\n    super(value, settings);\n    this.bitRatio = 4;\n    this.setShape(value);\n  }\n\n  setShape(value) {\n    const valueDimensions = utils.getDimensions(value, true);\n    this.textureSize = utils.getMemoryOptimizedFloatTextureSize(valueDimensions, this.bitRatio);\n    this.dimensions = new Int32Array([valueDimensions[1], valueDimensions[2], valueDimensions[3]]);\n    this.uploadArrayLength = this.textureSize[0] * this.textureSize[1] * this.bitRatio;\n    this.checkSize(this.textureSize[0], this.textureSize[1]);\n    this.uploadValue = new Float32Array(this.uploadArrayLength);\n  }\n\n  getStringValueHandler() {\n    return utils.linesToString([\n      `const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,\n      `flattenTo(${this.varName}, uploadValue_${this.name})`,\n    ]);\n  }\n\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,\n      `ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`,\n    ]);\n  }\n\n  updateValue(value) {\n    if (value.constructor !== this.initialValueConstructor) {\n      this.onUpdateValueMismatch(value.constructor);\n      return;\n    }\n    const { context: gl } = this;\n    utils.flatten4dArrayTo(value, this.uploadValue);\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.textureSize[0], this.textureSize[1], 0, gl.RGBA, gl.FLOAT, this.uploadValue);\n    this.kernel.setUniform1i(this.id, this.index);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueSingleArray3DI\n};\n},{\"../../../utils\":114,\"./array\":40}],67:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelArray } = require('./array');\n\nclass WebGLKernelValueSingleInput extends WebGLKernelArray {\n  constructor(value, settings) {\n    super(value, settings);\n    this.bitRatio = 4;\n    let [w, h, d] = value.size;\n    this.dimensions = new Int32Array([w || 1, h || 1, d || 1]);\n    this.textureSize = utils.getMemoryOptimizedFloatTextureSize(this.dimensions, this.bitRatio);\n    this.uploadArrayLength = this.textureSize[0] * this.textureSize[1] * this.bitRatio;\n    this.checkSize(this.textureSize[0], this.textureSize[1]);\n    this.uploadValue = new Float32Array(this.uploadArrayLength);\n  }\n\n  getStringValueHandler() {\n    return utils.linesToString([\n      `const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,\n      `flattenTo(${this.varName}.value, uploadValue_${this.name})`,\n    ]);\n  }\n\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,\n      `ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`,\n    ]);\n  }\n\n  updateValue(input) {\n    if (input.constructor !== this.initialValueConstructor) {\n      this.onUpdateValueMismatch(input.constructor);\n      return;\n    }\n    const { context: gl } = this;\n    utils.flattenTo(input.value, this.uploadValue);\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.textureSize[0], this.textureSize[1], 0, gl.RGBA, gl.FLOAT, this.uploadValue);\n    this.kernel.setUniform1i(this.id, this.index);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueSingleInput\n};\n},{\"../../../utils\":114,\"./array\":40}],68:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelArray } = require('./array');\n\nclass WebGLKernelValueUnsignedArray extends WebGLKernelArray {\n  constructor(value, settings) {\n    super(value, settings);\n    this.bitRatio = this.getBitRatio(value);\n    this.dimensions = utils.getDimensions(value, true);\n    this.textureSize = utils.getMemoryOptimizedPackedTextureSize(this.dimensions, this.bitRatio);\n    this.uploadArrayLength = this.textureSize[0] * this.textureSize[1] * (4 / this.bitRatio);\n    this.checkSize(this.textureSize[0], this.textureSize[1]);\n    this.TranserArrayType = this.getTransferArrayType(value);\n    this.preUploadValue = new this.TranserArrayType(this.uploadArrayLength);\n    this.uploadValue = new Uint8Array(this.preUploadValue.buffer);\n  }\n\n  getStringValueHandler() {\n    return utils.linesToString([\n      `const preUploadValue_${this.name} = new ${this.TranserArrayType.name}(${this.uploadArrayLength})`,\n      `const uploadValue_${this.name} = new Uint8Array(preUploadValue_${this.name}.buffer)`,\n      `flattenTo(${this.varName}, preUploadValue_${this.name})`,\n    ]);\n  }\n\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,\n      `ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`,\n    ]);\n  }\n\n  updateValue(value) {\n    if (value.constructor !== this.initialValueConstructor) {\n      this.onUpdateValueMismatch(value.constructor);\n      return;\n    }\n    const { context: gl } = this;\n    utils.flattenTo(value, this.preUploadValue);\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.textureSize[0], this.textureSize[1], 0, gl.RGBA, gl.UNSIGNED_BYTE, this.uploadValue);\n    this.kernel.setUniform1i(this.id, this.index);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueUnsignedArray\n};\n},{\"../../../utils\":114,\"./array\":40}],69:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelArray } = require('./array');\n\nclass WebGLKernelValueUnsignedInput extends WebGLKernelArray {\n  constructor(value, settings) {\n    super(value, settings);\n    this.bitRatio = this.getBitRatio(value);\n    const [w, h, d] = value.size;\n    this.dimensions = new Int32Array([w || 1, h || 1, d || 1]);\n    this.textureSize = utils.getMemoryOptimizedPackedTextureSize(this.dimensions, this.bitRatio);\n    this.uploadArrayLength = this.textureSize[0] * this.textureSize[1] * (4 / this.bitRatio);\n    this.checkSize(this.textureSize[0], this.textureSize[1]);\n    this.TranserArrayType = this.getTransferArrayType(value.value);\n    this.preUploadValue = new this.TranserArrayType(this.uploadArrayLength);\n    this.uploadValue = new Uint8Array(this.preUploadValue.buffer);\n  }\n\n  getStringValueHandler() {\n    return utils.linesToString([\n      `const preUploadValue_${this.name} = new ${this.TranserArrayType.name}(${this.uploadArrayLength})`,\n      `const uploadValue_${this.name} = new Uint8Array(preUploadValue_${this.name}.buffer)`,\n      `flattenTo(${this.varName}.value, preUploadValue_${this.name})`,\n    ]);\n  }\n\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,\n      `ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`,\n    ]);\n  }\n\n  updateValue(input) {\n    if (input.constructor !== this.initialValueConstructor) {\n      this.onUpdateValueMismatch(value.constructor);\n      return;\n    }\n    const { context: gl } = this;\n    utils.flattenTo(input.value, this.preUploadValue);\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.textureSize[0], this.textureSize[1], 0, gl.RGBA, gl.UNSIGNED_BYTE, this.uploadValue);\n    this.kernel.setUniform1i(this.id, this.index);\n  }\n}\n\nmodule.exports = {\n  WebGLKernelValueUnsignedInput\n};\n},{\"../../../utils\":114,\"./array\":40}],70:[function(require,module,exports){\nconst { GLKernel } = require('../gl/kernel');\nconst { FunctionBuilder } = require('../function-builder');\nconst { WebGLFunctionNode } = require('./function-node');\nconst { utils } = require('../../utils');\nconst mrud = require('../../plugins/math-random-uniformly-distributed');\nconst { fragmentShader } = require('./fragment-shader');\nconst { vertexShader } = require('./vertex-shader');\nconst { glKernelString } = require('../gl/kernel-string');\nconst { lookupKernelValueType } = require('./kernel-value-maps');\n\nlet isSupported = null;\nlet testCanvas = null;\nlet testContext = null;\nlet testExtensions = null;\nlet features = null;\n\nconst plugins = [mrud];\nconst canvases = [];\nconst maxTexSizes = {};\n\n\nclass WebGLKernel extends GLKernel {\n  static get isSupported() {\n    if (isSupported !== null) {\n      return isSupported;\n    }\n    this.setupFeatureChecks();\n    isSupported = this.isContextMatch(testContext);\n    return isSupported;\n  }\n\n  static setupFeatureChecks() {\n    if (typeof document !== 'undefined') {\n      testCanvas = document.createElement('canvas');\n    } else if (typeof OffscreenCanvas !== 'undefined') {\n      testCanvas = new OffscreenCanvas(0, 0);\n    }\n    if (!testCanvas) return;\n    testContext = testCanvas.getContext('webgl') || testCanvas.getContext('experimental-webgl');\n    if (!testContext || !testContext.getExtension) return;\n    testExtensions = {\n      OES_texture_float: testContext.getExtension('OES_texture_float'),\n      OES_texture_float_linear: testContext.getExtension('OES_texture_float_linear'),\n      OES_element_index_uint: testContext.getExtension('OES_element_index_uint'),\n      WEBGL_draw_buffers: testContext.getExtension('WEBGL_draw_buffers'),\n    };\n    features = this.getFeatures();\n  }\n\n  static isContextMatch(context) {\n    if (typeof WebGLRenderingContext !== 'undefined') {\n      return context instanceof WebGLRenderingContext;\n    }\n    return false;\n  }\n\n  static getIsTextureFloat() {\n    return Boolean(testExtensions.OES_texture_float);\n  }\n\n  static getIsDrawBuffers() {\n    return Boolean(testExtensions.WEBGL_draw_buffers);\n  }\n\n  static getChannelCount() {\n    return testExtensions.WEBGL_draw_buffers ?\n      testContext.getParameter(testExtensions.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL) :\n      1;\n  }\n\n  static getMaxTextureSize() {\n    return testContext.getParameter(testContext.MAX_TEXTURE_SIZE);\n  }\n\n  static lookupKernelValueType(type, dynamic, precision, value) {\n    return lookupKernelValueType(type, dynamic, precision, value);\n  }\n\n  static get testCanvas() {\n    return testCanvas;\n  }\n\n  static get testContext() {\n    return testContext;\n  }\n\n  static get features() {\n    return features;\n  }\n\n  static get fragmentShader() {\n    return fragmentShader;\n  }\n\n  static get vertexShader() {\n    return vertexShader;\n  }\n\n  constructor(source, settings) {\n    super(source, settings);\n    this.program = null;\n    this.pipeline = settings.pipeline;\n    this.endianness = utils.systemEndianness();\n    this.extensions = {};\n    this.argumentTextureCount = 0;\n    this.constantTextureCount = 0;\n    this.fragShader = null;\n    this.vertShader = null;\n    this.drawBuffersMap = null;\n\n    this.maxTexSize = null;\n    this.onRequestSwitchKernel = null;\n\n    this.texture = null;\n    this.mappedTextures = null;\n    this.mergeSettings(source.settings || settings);\n\n    this.threadDim = null;\n    this.framebuffer = null;\n    this.buffer = null;\n\n    this.textureCache = [];\n    this.programUniformLocationCache = {};\n    this.uniform1fCache = {};\n    this.uniform1iCache = {};\n    this.uniform2fCache = {};\n    this.uniform2fvCache = {};\n    this.uniform2ivCache = {};\n    this.uniform3fvCache = {};\n    this.uniform3ivCache = {};\n    this.uniform4fvCache = {};\n    this.uniform4ivCache = {};\n  }\n\n  initCanvas() {\n    if (typeof document !== 'undefined') {\n      const canvas = document.createElement('canvas');\n      canvas.width = 2;\n      canvas.height = 2;\n      return canvas;\n    } else if (typeof OffscreenCanvas !== 'undefined') {\n      return new OffscreenCanvas(0, 0);\n    }\n  }\n\n  initContext() {\n    const settings = {\n      alpha: false,\n      depth: false,\n      antialias: false\n    };\n    return this.canvas.getContext('webgl', settings) || this.canvas.getContext('experimental-webgl', settings);\n  }\n\n  initPlugins(settings) {\n    const pluginsToUse = [];\n    const { source } = this;\n    if (typeof source === 'string') {\n      for (let i = 0; i < plugins.length; i++) {\n        const plugin = plugins[i];\n        if (source.match(plugin.functionMatch)) {\n          pluginsToUse.push(plugin);\n        }\n      }\n    } else if (typeof source === 'object') {\n      if (settings.pluginNames) { \n        for (let i = 0; i < plugins.length; i++) {\n          const plugin = plugins[i];\n          const usePlugin = settings.pluginNames.some(pluginName => pluginName === plugin.name);\n          if (usePlugin) {\n            pluginsToUse.push(plugin);\n          }\n        }\n      }\n    }\n    return pluginsToUse;\n  }\n\n  initExtensions() {\n    this.extensions = {\n      OES_texture_float: this.context.getExtension('OES_texture_float'),\n      OES_texture_float_linear: this.context.getExtension('OES_texture_float_linear'),\n      OES_element_index_uint: this.context.getExtension('OES_element_index_uint'),\n      WEBGL_draw_buffers: this.context.getExtension('WEBGL_draw_buffers'),\n      WEBGL_color_buffer_float: this.context.getExtension('WEBGL_color_buffer_float'),\n    };\n  }\n\n  validateSettings(args) {\n    if (!this.validate) {\n      this.texSize = utils.getKernelTextureSize({\n        optimizeFloatMemory: this.optimizeFloatMemory,\n        precision: this.precision,\n      }, this.output);\n      return;\n    }\n\n    const { features } = this.constructor;\n\n    if (this.optimizeFloatMemory === true && !features.isTextureFloat) {\n      throw new Error('Float textures are not supported');\n    } else if (this.precision === 'single' && !features.isFloatRead) {\n      throw new Error('Single precision not supported');\n    } else if (!this.graphical && this.precision === null && features.isTextureFloat) {\n      this.precision = features.isFloatRead ? 'single' : 'unsigned';\n    }\n\n    if (this.subKernels && this.subKernels.length > 0 && !this.extensions.WEBGL_draw_buffers) {\n      throw new Error('could not instantiate draw buffers extension');\n    }\n\n    if (this.fixIntegerDivisionAccuracy === null) {\n      this.fixIntegerDivisionAccuracy = !features.isIntegerDivisionAccurate;\n    } else if (this.fixIntegerDivisionAccuracy && features.isIntegerDivisionAccurate) {\n      this.fixIntegerDivisionAccuracy = false;\n    }\n\n    this.checkOutput();\n\n    if (!this.output || this.output.length === 0) {\n      if (args.length !== 1) {\n        throw new Error('Auto output only supported for kernels with only one input');\n      }\n\n      const argType = utils.getVariableType(args[0], this.strictIntegers);\n      switch (argType) {\n        case 'Array':\n          this.output = utils.getDimensions(argType);\n          break;\n        case 'NumberTexture':\n        case 'MemoryOptimizedNumberTexture':\n        case 'ArrayTexture(1)':\n        case 'ArrayTexture(2)':\n        case 'ArrayTexture(3)':\n        case 'ArrayTexture(4)':\n          this.output = args[0].output;\n          break;\n        default:\n          throw new Error('Auto output not supported for input type: ' + argType);\n      }\n    }\n\n    if (this.graphical) {\n      if (this.output.length !== 2) {\n        throw new Error('Output must have 2 dimensions on graphical mode');\n      }\n\n      if (this.precision === 'precision') {\n        this.precision = 'unsigned';\n        console.warn('Cannot use graphical mode and single precision at the same time');\n      }\n\n      this.texSize = utils.clone(this.output);\n      return;\n    } else if (this.precision === null && features.isTextureFloat) {\n      this.precision = 'single';\n    }\n\n    this.texSize = utils.getKernelTextureSize({\n      optimizeFloatMemory: this.optimizeFloatMemory,\n      precision: this.precision,\n    }, this.output);\n\n    this.checkTextureSize();\n  }\n\n  updateMaxTexSize() {\n    const { texSize, canvas } = this;\n    if (this.maxTexSize === null) {\n      let canvasIndex = canvases.indexOf(canvas);\n      if (canvasIndex === -1) {\n        canvasIndex = canvases.length;\n        canvases.push(canvas);\n        maxTexSizes[canvasIndex] = [texSize[0], texSize[1]];\n      }\n      this.maxTexSize = maxTexSizes[canvasIndex];\n    }\n    if (this.maxTexSize[0] < texSize[0]) {\n      this.maxTexSize[0] = texSize[0];\n    }\n    if (this.maxTexSize[1] < texSize[1]) {\n      this.maxTexSize[1] = texSize[1];\n    }\n  }\n\n  setupArguments(args) {\n    this.kernelArguments = [];\n    this.argumentTextureCount = 0;\n    const needsArgumentTypes = this.argumentTypes === null;\n    if (needsArgumentTypes) {\n      this.argumentTypes = [];\n    }\n    this.argumentSizes = [];\n    this.argumentBitRatios = [];\n\n    if (args.length < this.argumentNames.length) {\n      throw new Error('not enough arguments for kernel');\n    } else if (args.length > this.argumentNames.length) {\n      throw new Error('too many arguments for kernel');\n    }\n\n    const { context: gl } = this;\n    let textureIndexes = 0;\n\n    const onRequestTexture = () => {\n      return this.createTexture();\n    };\n    const onRequestIndex = () => {\n      return this.constantTextureCount + textureIndexes++;\n    };\n    const onUpdateValueMismatch = (constructor) => {\n      this.switchKernels({\n        type: 'argumentMismatch',\n        needed: constructor\n      });\n    };\n    const onRequestContextHandle = () => {\n      return gl.TEXTURE0 + this.constantTextureCount + this.argumentTextureCount++;\n    };\n\n    for (let index = 0; index < args.length; index++) {\n      const value = args[index];\n      const name = this.argumentNames[index];\n      let type;\n      if (needsArgumentTypes) {\n        type = utils.getVariableType(value, this.strictIntegers);\n        this.argumentTypes.push(type);\n      } else {\n        type = this.argumentTypes[index];\n      }\n      const KernelValue = this.constructor.lookupKernelValueType(type, this.dynamicArguments ? 'dynamic' : 'static', this.precision, args[index]);\n      if (KernelValue === null) {\n        return this.requestFallback(args);\n      }\n      const kernelArgument = new KernelValue(value, {\n        name,\n        type,\n        tactic: this.tactic,\n        origin: 'user',\n        context: gl,\n        checkContext: this.checkContext,\n        kernel: this,\n        strictIntegers: this.strictIntegers,\n        onRequestTexture,\n        onRequestIndex,\n        onUpdateValueMismatch,\n        onRequestContextHandle,\n      });\n      this.kernelArguments.push(kernelArgument);\n      kernelArgument.setup();\n      this.argumentSizes.push(kernelArgument.textureSize);\n      this.argumentBitRatios[index] = kernelArgument.bitRatio;\n    }\n  }\n\n  createTexture() {\n    const texture = this.context.createTexture();\n    this.textureCache.push(texture);\n    return texture;\n  }\n\n  setupConstants(args) {\n    const { context: gl } = this;\n    this.kernelConstants = [];\n    this.forceUploadKernelConstants = [];\n    let needsConstantTypes = this.constantTypes === null;\n    if (needsConstantTypes) {\n      this.constantTypes = {};\n    }\n    this.constantBitRatios = {};\n    let textureIndexes = 0;\n    for (const name in this.constants) {\n      const value = this.constants[name];\n      let type;\n      if (needsConstantTypes) {\n        type = utils.getVariableType(value, this.strictIntegers);\n        this.constantTypes[name] = type;\n      } else {\n        type = this.constantTypes[name];\n      }\n      const KernelValue = this.constructor.lookupKernelValueType(type, 'static', this.precision, value);\n      if (KernelValue === null) {\n        return this.requestFallback(args);\n      }\n      const kernelValue = new KernelValue(value, {\n        name,\n        type,\n        tactic: this.tactic,\n        origin: 'constants',\n        context: this.context,\n        checkContext: this.checkContext,\n        kernel: this,\n        strictIntegers: this.strictIntegers,\n        onRequestTexture: () => {\n          return this.createTexture();\n        },\n        onRequestIndex: () => {\n          return textureIndexes++;\n        },\n        onRequestContextHandle: () => {\n          return gl.TEXTURE0 + this.constantTextureCount++;\n        }\n      });\n      this.constantBitRatios[name] = kernelValue.bitRatio;\n      this.kernelConstants.push(kernelValue);\n      kernelValue.setup();\n      if (kernelValue.forceUploadEachRun) {\n        this.forceUploadKernelConstants.push(kernelValue);\n      }\n    }\n  }\n\n  build() {\n    if (this.built) return;\n    this.initExtensions();\n    this.validateSettings(arguments);\n    this.setupConstants(arguments);\n    if (this.fallbackRequested) return;\n    this.setupArguments(arguments);\n    if (this.fallbackRequested) return;\n    this.updateMaxTexSize();\n    this.translateSource();\n    const failureResult = this.pickRenderStrategy(arguments);\n    if (failureResult) {\n      return failureResult;\n    }\n    const { texSize, context: gl, canvas } = this;\n    gl.enable(gl.SCISSOR_TEST);\n    if (this.pipeline && this.precision === 'single') {\n      gl.viewport(0, 0, this.maxTexSize[0], this.maxTexSize[1]);\n      canvas.width = this.maxTexSize[0];\n      canvas.height = this.maxTexSize[1];\n    } else {\n      gl.viewport(0, 0, this.maxTexSize[0], this.maxTexSize[1]);\n      canvas.width = this.maxTexSize[0];\n      canvas.height = this.maxTexSize[1];\n    }\n    const threadDim = this.threadDim = Array.from(this.output);\n    while (threadDim.length < 3) {\n      threadDim.push(1);\n    }\n\n    const compiledVertexShader = this.getVertexShader(arguments);\n    const vertShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vertShader, compiledVertexShader);\n    gl.compileShader(vertShader);\n    this.vertShader = vertShader;\n\n    const compiledFragmentShader = this.getFragmentShader(arguments);\n    const fragShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragShader, compiledFragmentShader);\n    gl.compileShader(fragShader);\n    this.fragShader = fragShader;\n\n    if (this.debug) {\n      console.log('GLSL Shader Output:');\n      console.log(compiledFragmentShader);\n    }\n\n    if (!gl.getShaderParameter(vertShader, gl.COMPILE_STATUS)) {\n      throw new Error('Error compiling vertex shader: ' + gl.getShaderInfoLog(vertShader));\n    }\n    if (!gl.getShaderParameter(fragShader, gl.COMPILE_STATUS)) {\n      throw new Error('Error compiling fragment shader: ' + gl.getShaderInfoLog(fragShader));\n    }\n\n    const program = this.program = gl.createProgram();\n    gl.attachShader(program, vertShader);\n    gl.attachShader(program, fragShader);\n    gl.linkProgram(program);\n    this.framebuffer = gl.createFramebuffer();\n    this.framebuffer.width = texSize[0];\n    this.framebuffer.height = texSize[1];\n    this.rawValueFramebuffers = {};\n\n    const vertices = new Float32Array([-1, -1,\n      1, -1, -1, 1,\n      1, 1\n    ]);\n    const texCoords = new Float32Array([\n      0, 0,\n      1, 0,\n      0, 1,\n      1, 1\n    ]);\n\n    const texCoordOffset = vertices.byteLength;\n\n    let buffer = this.buffer;\n    if (!buffer) {\n      buffer = this.buffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, vertices.byteLength + texCoords.byteLength, gl.STATIC_DRAW);\n    } else {\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    }\n\n    gl.bufferSubData(gl.ARRAY_BUFFER, 0, vertices);\n    gl.bufferSubData(gl.ARRAY_BUFFER, texCoordOffset, texCoords);\n\n    const aPosLoc = gl.getAttribLocation(this.program, 'aPos');\n    gl.enableVertexAttribArray(aPosLoc);\n    gl.vertexAttribPointer(aPosLoc, 2, gl.FLOAT, false, 0, 0);\n    const aTexCoordLoc = gl.getAttribLocation(this.program, 'aTexCoord');\n    gl.enableVertexAttribArray(aTexCoordLoc);\n    gl.vertexAttribPointer(aTexCoordLoc, 2, gl.FLOAT, false, 0, texCoordOffset);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n\n    let i = 0;\n    gl.useProgram(this.program);\n    for (let p in this.constants) {\n      this.kernelConstants[i++].updateValue(this.constants[p]);\n    }\n\n    this._setupOutputTexture();\n    if (\n      this.subKernels !== null &&\n      this.subKernels.length > 0\n    ) {\n      this._mappedTextureSwitched = {};\n      this._setupSubOutputTextures();\n    }\n    this.buildSignature(arguments);\n    this.built = true;\n  }\n\n  translateSource() {\n    const functionBuilder = FunctionBuilder.fromKernel(this, WebGLFunctionNode, {\n      fixIntegerDivisionAccuracy: this.fixIntegerDivisionAccuracy\n    });\n    this.translatedSource = functionBuilder.getPrototypeString('kernel');\n    this.setupReturnTypes(functionBuilder);\n  }\n\n  setupReturnTypes(functionBuilder) {\n    if (!this.graphical && !this.returnType) {\n      this.returnType = functionBuilder.getKernelResultType();\n    }\n\n    if (this.subKernels && this.subKernels.length > 0) {\n      for (let i = 0; i < this.subKernels.length; i++) {\n        const subKernel = this.subKernels[i];\n        if (!subKernel.returnType) {\n          subKernel.returnType = functionBuilder.getSubKernelResultType(i);\n        }\n      }\n    }\n  }\n\n  run() {\n    const { kernelArguments, texSize, forceUploadKernelConstants, context: gl } = this;\n\n    gl.useProgram(this.program);\n    gl.scissor(0, 0, texSize[0], texSize[1]);\n    if (this.dynamicOutput) {\n      this.setUniform3iv('uOutputDim', new Int32Array(this.threadDim));\n      this.setUniform2iv('uTexSize', texSize);\n    }\n\n    this.setUniform2f('ratio', texSize[0] / this.maxTexSize[0], texSize[1] / this.maxTexSize[1]);\n\n    for (let i = 0; i < forceUploadKernelConstants.length; i++) {\n      const constant = forceUploadKernelConstants[i];\n      constant.updateValue(this.constants[constant.name]);\n      if (this.switchingKernels) return;\n    }\n    for (let i = 0; i < kernelArguments.length; i++) {\n      kernelArguments[i].updateValue(arguments[i]);\n      if (this.switchingKernels) return;\n    }\n\n    if (this.plugins) {\n      for (let i = 0; i < this.plugins.length; i++) {\n        const plugin = this.plugins[i];\n        if (plugin.onBeforeRun) {\n          plugin.onBeforeRun(this);\n        }\n      }\n    }\n\n    if (this.graphical) {\n      if (this.pipeline) {\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        if (this.immutable) {\n          this._replaceOutputTexture();\n        }\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n        return this.immutable ? this.texture.clone() : this.texture;\n      }\n      gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n      gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n      return;\n    }\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n    if (this.immutable) {\n      this._replaceOutputTexture();\n    }\n\n    if (this.subKernels !== null) {\n      if (this.immutable) {\n        this._replaceSubOutputTextures();\n      }\n      this.drawBuffers();\n    }\n\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  }\n\n  drawBuffers() {\n    this.extensions.WEBGL_draw_buffers.drawBuffersWEBGL(this.drawBuffersMap);\n  }\n\n  getInternalFormat() {\n    return this.context.RGBA;\n  }\n  getTextureFormat() {\n    const { context: gl } = this;\n    switch (this.getInternalFormat()) {\n      case gl.RGBA:\n        return gl.RGBA;\n      default:\n        throw new Error('Unknown internal format');\n    }\n  }\n\n  _replaceOutputTexture() {\n    if (this.texture.beforeMutate() || this._textureSwitched) {\n      const gl = this.context;\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.texture.texture, 0);\n      this._textureSwitched = false;\n    }\n  }\n\n  _setupOutputTexture() {\n    const gl = this.context;\n    const texSize = this.texSize;\n    if (this.texture) {\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.texture.texture, 0);\n      return;\n    }\n    const texture = this.createTexture();\n    gl.activeTexture(gl.TEXTURE0 + this.constantTextureCount + this.argumentTextureCount);\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    const format = this.getInternalFormat();\n    if (this.precision === 'single') {\n      gl.texImage2D(gl.TEXTURE_2D, 0, format, texSize[0], texSize[1], 0, gl.RGBA, gl.FLOAT, null);\n    } else {\n      gl.texImage2D(gl.TEXTURE_2D, 0, format, texSize[0], texSize[1], 0, format, gl.UNSIGNED_BYTE, null);\n    }\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n    this.texture = new this.TextureConstructor({\n      texture,\n      size: texSize,\n      dimensions: this.threadDim,\n      output: this.output,\n      context: this.context,\n      internalFormat: this.getInternalFormat(),\n      textureFormat: this.getTextureFormat(),\n      kernel: this,\n    });\n  }\n\n  _replaceSubOutputTextures() {\n    const gl = this.context;\n    for (let i = 0; i < this.mappedTextures.length; i++) {\n      const mappedTexture = this.mappedTextures[i];\n      if (mappedTexture.beforeMutate() || this._mappedTextureSwitched[i]) {\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0 + i + 1, gl.TEXTURE_2D, mappedTexture.texture, 0);\n        this._mappedTextureSwitched[i] = false;\n      }\n    }\n  }\n\n  _setupSubOutputTextures() {\n    const gl = this.context;\n    if (this.mappedTextures) {\n      for (let i = 0; i < this.subKernels.length; i++) {\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0 + i + 1, gl.TEXTURE_2D, this.mappedTextures[i].texture, 0);\n      }\n      return;\n    }\n    const texSize = this.texSize;\n    this.drawBuffersMap = [gl.COLOR_ATTACHMENT0];\n    this.mappedTextures = [];\n    for (let i = 0; i < this.subKernels.length; i++) {\n      const texture = this.createTexture();\n      this.drawBuffersMap.push(gl.COLOR_ATTACHMENT0 + i + 1);\n      gl.activeTexture(gl.TEXTURE0 + this.constantTextureCount + this.argumentTextureCount + i);\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n      if (this.precision === 'single') {\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, texSize[0], texSize[1], 0, gl.RGBA, gl.FLOAT, null);\n      } else {\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, texSize[0], texSize[1], 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n      }\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0 + i + 1, gl.TEXTURE_2D, texture, 0);\n\n      this.mappedTextures.push(new this.TextureConstructor({\n        texture,\n        size: texSize,\n        dimensions: this.threadDim,\n        output: this.output,\n        context: this.context,\n        internalFormat: this.getInternalFormat(),\n        textureFormat: this.getTextureFormat(),\n        kernel: this,\n      }));\n    }\n  }\n\n  setUniform1f(name, value) {\n    if (this.uniform1fCache.hasOwnProperty(name)) {\n      const cache = this.uniform1fCache[name];\n      if (value === cache) {\n        return;\n      }\n    }\n    this.uniform1fCache[name] = value;\n    const loc = this.getUniformLocation(name);\n    this.context.uniform1f(loc, value);\n  }\n\n  setUniform1i(name, value) {\n    if (this.uniform1iCache.hasOwnProperty(name)) {\n      const cache = this.uniform1iCache[name];\n      if (value === cache) {\n        return;\n      }\n    }\n    this.uniform1iCache[name] = value;\n    const loc = this.getUniformLocation(name);\n    this.context.uniform1i(loc, value);\n  }\n\n  setUniform2f(name, value1, value2) {\n    if (this.uniform2fCache.hasOwnProperty(name)) {\n      const cache = this.uniform2fCache[name];\n      if (\n        value1 === cache[0] &&\n        value2 === cache[1]\n      ) {\n        return;\n      }\n    }\n    this.uniform2fCache[name] = [value1, value2];\n    const loc = this.getUniformLocation(name);\n    this.context.uniform2f(loc, value1, value2);\n  }\n\n  setUniform2fv(name, value) {\n    if (this.uniform2fvCache.hasOwnProperty(name)) {\n      const cache = this.uniform2fvCache[name];\n      if (\n        value[0] === cache[0] &&\n        value[1] === cache[1]\n      ) {\n        return;\n      }\n    }\n    this.uniform2fvCache[name] = value;\n    const loc = this.getUniformLocation(name);\n    this.context.uniform2fv(loc, value);\n  }\n\n  setUniform2iv(name, value) {\n    if (this.uniform2ivCache.hasOwnProperty(name)) {\n      const cache = this.uniform2ivCache[name];\n      if (\n        value[0] === cache[0] &&\n        value[1] === cache[1]\n      ) {\n        return;\n      }\n    }\n    this.uniform2ivCache[name] = value;\n    const loc = this.getUniformLocation(name);\n    this.context.uniform2iv(loc, value);\n  }\n\n  setUniform3fv(name, value) {\n    if (this.uniform3fvCache.hasOwnProperty(name)) {\n      const cache = this.uniform3fvCache[name];\n      if (\n        value[0] === cache[0] &&\n        value[1] === cache[1] &&\n        value[2] === cache[2]\n      ) {\n        return;\n      }\n    }\n    this.uniform3fvCache[name] = value;\n    const loc = this.getUniformLocation(name);\n    this.context.uniform3fv(loc, value);\n  }\n\n  setUniform3iv(name, value) {\n    if (this.uniform3ivCache.hasOwnProperty(name)) {\n      const cache = this.uniform3ivCache[name];\n      if (\n        value[0] === cache[0] &&\n        value[1] === cache[1] &&\n        value[2] === cache[2]\n      ) {\n        return;\n      }\n    }\n    this.uniform3ivCache[name] = value;\n    const loc = this.getUniformLocation(name);\n    this.context.uniform3iv(loc, value);\n  }\n\n  setUniform4fv(name, value) {\n    if (this.uniform4fvCache.hasOwnProperty(name)) {\n      const cache = this.uniform4fvCache[name];\n      if (\n        value[0] === cache[0] &&\n        value[1] === cache[1] &&\n        value[2] === cache[2] &&\n        value[3] === cache[3]\n      ) {\n        return;\n      }\n    }\n    this.uniform4fvCache[name] = value;\n    const loc = this.getUniformLocation(name);\n    this.context.uniform4fv(loc, value);\n  }\n\n  setUniform4iv(name, value) {\n    if (this.uniform4ivCache.hasOwnProperty(name)) {\n      const cache = this.uniform4ivCache[name];\n      if (\n        value[0] === cache[0] &&\n        value[1] === cache[1] &&\n        value[2] === cache[2] &&\n        value[3] === cache[3]\n      ) {\n        return;\n      }\n    }\n    this.uniform4ivCache[name] = value;\n    const loc = this.getUniformLocation(name);\n    this.context.uniform4iv(loc, value);\n  }\n\n  getUniformLocation(name) {\n    if (this.programUniformLocationCache.hasOwnProperty(name)) {\n      return this.programUniformLocationCache[name];\n    }\n    return this.programUniformLocationCache[name] = this.context.getUniformLocation(this.program, name);\n  }\n\n  _getFragShaderArtifactMap(args) {\n    return {\n      HEADER: this._getHeaderString(),\n      LOOP_MAX: this._getLoopMaxString(),\n      PLUGINS: this._getPluginsString(),\n      CONSTANTS: this._getConstantsString(),\n      DECODE32_ENDIANNESS: this._getDecode32EndiannessString(),\n      ENCODE32_ENDIANNESS: this._getEncode32EndiannessString(),\n      DIVIDE_WITH_INTEGER_CHECK: this._getDivideWithIntegerCheckString(),\n      INJECTED_NATIVE: this._getInjectedNative(),\n      MAIN_CONSTANTS: this._getMainConstantsString(),\n      MAIN_ARGUMENTS: this._getMainArgumentsString(args),\n      KERNEL: this.getKernelString(),\n      MAIN_RESULT: this.getMainResultString(),\n      FLOAT_TACTIC_DECLARATION: this.getFloatTacticDeclaration(),\n      INT_TACTIC_DECLARATION: this.getIntTacticDeclaration(),\n      SAMPLER_2D_TACTIC_DECLARATION: this.getSampler2DTacticDeclaration(),\n      SAMPLER_2D_ARRAY_TACTIC_DECLARATION: this.getSampler2DArrayTacticDeclaration(),\n    };\n  }\n\n  _getVertShaderArtifactMap(args) {\n    return {\n      FLOAT_TACTIC_DECLARATION: this.getFloatTacticDeclaration(),\n      INT_TACTIC_DECLARATION: this.getIntTacticDeclaration(),\n      SAMPLER_2D_TACTIC_DECLARATION: this.getSampler2DTacticDeclaration(),\n      SAMPLER_2D_ARRAY_TACTIC_DECLARATION: this.getSampler2DArrayTacticDeclaration(),\n    };\n  }\n\n  _getHeaderString() {\n    return (\n      this.subKernels !== null ?\n      '#extension GL_EXT_draw_buffers : require\\n' :\n      ''\n    );\n  }\n\n  _getLoopMaxString() {\n    return (\n      this.loopMaxIterations ?\n      ` ${parseInt(this.loopMaxIterations)};\\n` :\n      ' 1000;\\n'\n    );\n  }\n\n  _getPluginsString() {\n    if (!this.plugins) return '\\n';\n    return this.plugins.map(plugin => plugin.source && this.source.match(plugin.functionMatch) ? plugin.source : '').join('\\n');\n  }\n\n  _getConstantsString() {\n    const result = [];\n    const { threadDim, texSize } = this;\n    if (this.dynamicOutput) {\n      result.push(\n        'uniform ivec3 uOutputDim',\n        'uniform ivec2 uTexSize'\n      );\n    } else {\n      result.push(\n        `ivec3 uOutputDim = ivec3(${threadDim[0]}, ${threadDim[1]}, ${threadDim[2]})`,\n        `ivec2 uTexSize = ivec2(${texSize[0]}, ${texSize[1]})`\n      );\n    }\n    return utils.linesToString(result);\n  }\n\n  _getTextureCoordinate() {\n    const subKernels = this.subKernels;\n    if (subKernels === null || subKernels.length < 1) {\n      return 'varying vec2 vTexCoord;\\n';\n    } else {\n      return 'out vec2 vTexCoord;\\n';\n    }\n  }\n\n  _getDecode32EndiannessString() {\n    return (\n      this.endianness === 'LE' ?\n      '' :\n      '  texel.rgba = texel.abgr;\\n'\n    );\n  }\n\n  _getEncode32EndiannessString() {\n    return (\n      this.endianness === 'LE' ?\n      '' :\n      '  texel.rgba = texel.abgr;\\n'\n    );\n  }\n\n  _getDivideWithIntegerCheckString() {\n    return this.fixIntegerDivisionAccuracy ?\n      `float divWithIntCheck(float x, float y) {\n  if (floor(x) == x && floor(y) == y && integerMod(x, y) == 0.0) {\n    return float(int(x) / int(y));\n  }\n  return x / y;\n}\n\nfloat integerCorrectionModulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -(number - (divisor * floor(divWithIntCheck(number, divisor))));\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return number - (divisor * floor(divWithIntCheck(number, divisor)));\n}` :\n      '';\n  }\n\n  _getMainArgumentsString(args) {\n    const results = [];\n    const { argumentNames } = this;\n    for (let i = 0; i < argumentNames.length; i++) {\n      results.push(this.kernelArguments[i].getSource(args[i]));\n    }\n    return results.join('');\n  }\n\n  _getInjectedNative() {\n    return this.injectedNative || '';\n  }\n\n  _getMainConstantsString() {\n    const result = [];\n    const { constants } = this;\n    if (constants) {\n      let i = 0;\n      for (const name in constants) {\n        if (!this.constants.hasOwnProperty(name)) continue;\n        result.push(this.kernelConstants[i++].getSource(this.constants[name]));\n      }\n    }\n    return result.join('');\n  }\n\n  getRawValueFramebuffer(width, height) {\n    if (!this.rawValueFramebuffers[width]) {\n      this.rawValueFramebuffers[width] = {};\n    }\n    if (!this.rawValueFramebuffers[width][height]) {\n      const framebuffer = this.context.createFramebuffer();\n      framebuffer.width = width;\n      framebuffer.height = height;\n      this.rawValueFramebuffers[width][height] = framebuffer;\n    }\n    return this.rawValueFramebuffers[width][height];\n  }\n\n  getKernelResultDeclaration() {\n    switch (this.returnType) {\n      case 'Array(2)':\n        return 'vec2 kernelResult';\n      case 'Array(3)':\n        return 'vec3 kernelResult';\n      case 'Array(4)':\n        return 'vec4 kernelResult';\n      case 'LiteralInteger':\n      case 'Float':\n      case 'Number':\n      case 'Integer':\n        return 'float kernelResult';\n      default:\n        if (this.graphical) {\n          return 'float kernelResult';\n        } else {\n          throw new Error(`unrecognized output type \"${ this.returnType }\"`);\n        }\n    }\n  }\n  getKernelString() {\n    const result = [this.getKernelResultDeclaration()];\n    const { subKernels } = this;\n    if (subKernels !== null) {\n      switch (this.returnType) {\n        case 'Number':\n        case 'Float':\n        case 'Integer':\n          for (let i = 0; i < subKernels.length; i++) {\n            const subKernel = subKernels[i];\n            result.push(\n              subKernel.returnType === 'Integer' ?\n              `int subKernelResult_${ subKernel.name } = 0` :\n              `float subKernelResult_${ subKernel.name } = 0.0`\n            );\n          }\n          break;\n        case 'Array(2)':\n          for (let i = 0; i < subKernels.length; i++) {\n            result.push(\n              `vec2 subKernelResult_${ subKernels[i].name }`\n            );\n          }\n          break;\n        case 'Array(3)':\n          for (let i = 0; i < subKernels.length; i++) {\n            result.push(\n              `vec3 subKernelResult_${ subKernels[i].name }`\n            );\n          }\n          break;\n        case 'Array(4)':\n          for (let i = 0; i < subKernels.length; i++) {\n            result.push(\n              `vec4 subKernelResult_${ subKernels[i].name }`\n            );\n          }\n          break;\n      }\n    }\n\n    return utils.linesToString(result) + this.translatedSource;\n  }\n\n  getMainResultGraphical() {\n    return utils.linesToString([\n      '  threadId = indexTo3D(index, uOutputDim)',\n      '  kernel()',\n      '  gl_FragColor = actualColor',\n    ]);\n  }\n\n  getMainResultPackedPixels() {\n    switch (this.returnType) {\n      case 'LiteralInteger':\n      case 'Number':\n      case 'Integer':\n      case 'Float':\n        return this.getMainResultKernelPackedPixels() +\n          this.getMainResultSubKernelPackedPixels();\n      default:\n        throw new Error(`packed output only usable with Numbers, \"${this.returnType}\" specified`);\n    }\n  }\n\n  getMainResultKernelPackedPixels() {\n    return utils.linesToString([\n      '  threadId = indexTo3D(index, uOutputDim)',\n      '  kernel()',\n      `  gl_FragData[0] = ${this.useLegacyEncoder ? 'legacyEncode32' : 'encode32'}(kernelResult)`\n    ]);\n  }\n\n  getMainResultSubKernelPackedPixels() {\n    const result = [];\n    if (!this.subKernels) return '';\n    for (let i = 0; i < this.subKernels.length; i++) {\n      const subKernel = this.subKernels[i];\n      if (subKernel.returnType === 'Integer') {\n        result.push(\n          `  gl_FragData[${i + 1}] = ${this.useLegacyEncoder ? 'legacyEncode32' : 'encode32'}(float(subKernelResult_${this.subKernels[i].name}))`\n        );\n      } else {\n        result.push(\n          `  gl_FragData[${i + 1}] = ${this.useLegacyEncoder ? 'legacyEncode32' : 'encode32'}(subKernelResult_${this.subKernels[i].name})`\n        );\n      }\n    }\n    return utils.linesToString(result);\n  }\n\n  getMainResultMemoryOptimizedFloats() {\n    const result = [\n      '  index *= 4',\n    ];\n\n    switch (this.returnType) {\n      case 'Number':\n      case 'Integer':\n      case 'Float':\n        const channels = ['r', 'g', 'b', 'a'];\n        for (let i = 0; i < channels.length; i++) {\n          const channel = channels[i];\n          this.getMainResultKernelMemoryOptimizedFloats(result, channel);\n          this.getMainResultSubKernelMemoryOptimizedFloats(result, channel);\n          if (i + 1 < channels.length) {\n            result.push('  index += 1');\n          }\n        }\n        break;\n      default:\n        throw new Error(`optimized output only usable with Numbers, ${this.returnType} specified`);\n    }\n\n    return utils.linesToString(result);\n  }\n\n  getMainResultKernelMemoryOptimizedFloats(result, channel) {\n    result.push(\n      '  threadId = indexTo3D(index, uOutputDim)',\n      '  kernel()',\n      `  gl_FragData[0].${channel} = kernelResult`\n    );\n  }\n\n  getMainResultSubKernelMemoryOptimizedFloats(result, channel) {\n    if (!this.subKernels) return result;\n    for (let i = 0; i < this.subKernels.length; i++) {\n      const subKernel = this.subKernels[i];\n      if (subKernel.returnType === 'Integer') {\n        result.push(\n          `  gl_FragData[${i + 1}].${channel} = float(subKernelResult_${this.subKernels[i].name})`\n        );\n      } else {\n        result.push(\n          `  gl_FragData[${i + 1}].${channel} = subKernelResult_${this.subKernels[i].name}`\n        );\n      }\n    }\n  }\n\n  getMainResultKernelNumberTexture() {\n    return [\n      '  threadId = indexTo3D(index, uOutputDim)',\n      '  kernel()',\n      '  gl_FragData[0][0] = kernelResult',\n    ];\n  }\n\n  getMainResultSubKernelNumberTexture() {\n    const result = [];\n    if (!this.subKernels) return result;\n    for (let i = 0; i < this.subKernels.length; ++i) {\n      const subKernel = this.subKernels[i];\n      if (subKernel.returnType === 'Integer') {\n        result.push(\n          `  gl_FragData[${i + 1}][0] = float(subKernelResult_${subKernel.name})`\n        );\n      } else {\n        result.push(\n          `  gl_FragData[${i + 1}][0] = subKernelResult_${subKernel.name}`\n        );\n      }\n    }\n    return result;\n  }\n\n  getMainResultKernelArray2Texture() {\n    return [\n      '  threadId = indexTo3D(index, uOutputDim)',\n      '  kernel()',\n      '  gl_FragData[0][0] = kernelResult[0]',\n      '  gl_FragData[0][1] = kernelResult[1]',\n    ];\n  }\n\n  getMainResultSubKernelArray2Texture() {\n    const result = [];\n    if (!this.subKernels) return result;\n    for (let i = 0; i < this.subKernels.length; ++i) {\n      result.push(\n        `  gl_FragData[${i + 1}][0] = subKernelResult_${this.subKernels[i].name}[0]`,\n        `  gl_FragData[${i + 1}][1] = subKernelResult_${this.subKernels[i].name}[1]`\n      );\n    }\n    return result;\n  }\n\n  getMainResultKernelArray3Texture() {\n    return [\n      '  threadId = indexTo3D(index, uOutputDim)',\n      '  kernel()',\n      '  gl_FragData[0][0] = kernelResult[0]',\n      '  gl_FragData[0][1] = kernelResult[1]',\n      '  gl_FragData[0][2] = kernelResult[2]',\n    ];\n  }\n\n  getMainResultSubKernelArray3Texture() {\n    const result = [];\n    if (!this.subKernels) return result;\n    for (let i = 0; i < this.subKernels.length; ++i) {\n      result.push(\n        `  gl_FragData[${i + 1}][0] = subKernelResult_${this.subKernels[i].name}[0]`,\n        `  gl_FragData[${i + 1}][1] = subKernelResult_${this.subKernels[i].name}[1]`,\n        `  gl_FragData[${i + 1}][2] = subKernelResult_${this.subKernels[i].name}[2]`\n      );\n    }\n    return result;\n  }\n\n  getMainResultKernelArray4Texture() {\n    return [\n      '  threadId = indexTo3D(index, uOutputDim)',\n      '  kernel()',\n      '  gl_FragData[0] = kernelResult',\n    ];\n  }\n\n  getMainResultSubKernelArray4Texture() {\n    const result = [];\n    if (!this.subKernels) return result;\n    switch (this.returnType) {\n      case 'Number':\n      case 'Float':\n      case 'Integer':\n        for (let i = 0; i < this.subKernels.length; ++i) {\n          const subKernel = this.subKernels[i];\n          if (subKernel.returnType === 'Integer') {\n            result.push(\n              `  gl_FragData[${i + 1}] = float(subKernelResult_${this.subKernels[i].name})`\n            );\n          } else {\n            result.push(\n              `  gl_FragData[${i + 1}] = subKernelResult_${this.subKernels[i].name}`\n            );\n          }\n        }\n        break;\n      case 'Array(2)':\n        for (let i = 0; i < this.subKernels.length; ++i) {\n          result.push(\n            `  gl_FragData[${i + 1}][0] = subKernelResult_${this.subKernels[i].name}[0]`,\n            `  gl_FragData[${i + 1}][1] = subKernelResult_${this.subKernels[i].name}[1]`\n          );\n        }\n        break;\n      case 'Array(3)':\n        for (let i = 0; i < this.subKernels.length; ++i) {\n          result.push(\n            `  gl_FragData[${i + 1}][0] = subKernelResult_${this.subKernels[i].name}[0]`,\n            `  gl_FragData[${i + 1}][1] = subKernelResult_${this.subKernels[i].name}[1]`,\n            `  gl_FragData[${i + 1}][2] = subKernelResult_${this.subKernels[i].name}[2]`\n          );\n        }\n        break;\n      case 'Array(4)':\n        for (let i = 0; i < this.subKernels.length; ++i) {\n          result.push(\n            `  gl_FragData[${i + 1}][0] = subKernelResult_${this.subKernels[i].name}[0]`,\n            `  gl_FragData[${i + 1}][1] = subKernelResult_${this.subKernels[i].name}[1]`,\n            `  gl_FragData[${i + 1}][2] = subKernelResult_${this.subKernels[i].name}[2]`,\n            `  gl_FragData[${i + 1}][3] = subKernelResult_${this.subKernels[i].name}[3]`\n          );\n        }\n        break;\n    }\n\n    return result;\n  }\n\n  replaceArtifacts(src, map) {\n    return src.replace(/[ ]*__([A-Z]+[0-9]*([_]?[A-Z]*[0-9]?)*)__;\\n/g, (match, artifact) => {\n      if (map.hasOwnProperty(artifact)) {\n        return map[artifact];\n      }\n      throw `unhandled artifact ${artifact}`;\n    });\n  }\n\n  getFragmentShader(args) {\n    if (this.compiledFragmentShader !== null) {\n      return this.compiledFragmentShader;\n    }\n    return this.compiledFragmentShader = this.replaceArtifacts(this.constructor.fragmentShader, this._getFragShaderArtifactMap(args));\n  }\n\n  getVertexShader(args) {\n    if (this.compiledVertexShader !== null) {\n      return this.compiledVertexShader;\n    }\n    return this.compiledVertexShader = this.replaceArtifacts(this.constructor.vertexShader, this._getVertShaderArtifactMap(args));\n  }\n\n  toString() {\n    const setupContextString = utils.linesToString([\n      `const gl = context`,\n    ]);\n    return glKernelString(this.constructor, arguments, this, setupContextString);\n  }\n\n  destroy(removeCanvasReferences) {\n    if (!this.context) return;\n    if (this.buffer) {\n      this.context.deleteBuffer(this.buffer);\n    }\n    if (this.framebuffer) {\n      this.context.deleteFramebuffer(this.framebuffer);\n    }\n    for (const width in this.rawValueFramebuffers) {\n      for (const height in this.rawValueFramebuffers[width]) {\n        this.context.deleteFramebuffer(this.rawValueFramebuffers[width][height]);\n        delete this.rawValueFramebuffers[width][height];\n      }\n      delete this.rawValueFramebuffers[width];\n    }\n    if (this.vertShader) {\n      this.context.deleteShader(this.vertShader);\n    }\n    if (this.fragShader) {\n      this.context.deleteShader(this.fragShader);\n    }\n    if (this.program) {\n      this.context.deleteProgram(this.program);\n    }\n    if (this.texture) {\n      this.texture.delete();\n      const textureCacheIndex = this.textureCache.indexOf(this.texture.texture);\n      if (textureCacheIndex > -1) {\n        this.textureCache.splice(textureCacheIndex, 1);\n      }\n      this.texture = null;\n    }\n    if (this.mappedTextures && this.mappedTextures.length) {\n      for (let i = 0; i < this.mappedTextures.length; i++) {\n        const mappedTexture = this.mappedTextures[i];\n        mappedTexture.delete();\n        const textureCacheIndex = this.textureCache.indexOf(mappedTexture.texture);\n        if (textureCacheIndex > -1) {\n          this.textureCache.splice(textureCacheIndex, 1);\n        }\n      }\n      this.mappedTextures = null;\n    }\n    if (this.kernelArguments) {\n      for (let i = 0; i < this.kernelArguments.length; i++) {\n        this.kernelArguments[i].destroy();\n      }\n    }\n    if (this.kernelConstants) {\n      for (let i = 0; i < this.kernelConstants.length; i++) {\n        this.kernelConstants[i].destroy();\n      }\n    }\n    while (this.textureCache.length > 0) {\n      const texture = this.textureCache.pop();\n      this.context.deleteTexture(texture);\n    }\n    if (removeCanvasReferences) {\n      const idx = canvases.indexOf(this.canvas);\n      if (idx >= 0) {\n        canvases[idx] = null;\n        maxTexSizes[idx] = null;\n      }\n    }\n    this.destroyExtensions();\n    delete this.context;\n    delete this.canvas;\n    if (!this.gpu) return;\n    const i = this.gpu.kernels.indexOf(this);\n    if (i === -1) return;\n    this.gpu.kernels.splice(i, 1);\n  }\n\n  destroyExtensions() {\n    this.extensions.OES_texture_float = null;\n    this.extensions.OES_texture_float_linear = null;\n    this.extensions.OES_element_index_uint = null;\n    this.extensions.WEBGL_draw_buffers = null;\n  }\n\n  static destroyContext(context) {\n    const extension = context.getExtension('WEBGL_lose_context');\n    if (extension) {\n      extension.loseContext();\n    }\n  }\n\n  toJSON() {\n    const json = super.toJSON();\n    json.functionNodes = FunctionBuilder.fromKernel(this, WebGLFunctionNode).toJSON();\n    json.settings.threadDim = this.threadDim;\n    return json;\n  }\n}\n\nmodule.exports = {\n  WebGLKernel\n};\n},{\"../../plugins/math-random-uniformly-distributed\":112,\"../../utils\":114,\"../function-builder\":9,\"../gl/kernel\":13,\"../gl/kernel-string\":12,\"./fragment-shader\":37,\"./function-node\":38,\"./kernel-value-maps\":39,\"./vertex-shader\":71}],71:[function(require,module,exports){\nconst vertexShader = `__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nattribute vec2 aPos;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}`;\n\nmodule.exports = {\n  vertexShader\n};\n},{}],72:[function(require,module,exports){\nconst fragmentShader = `#version 300 es\n__HEADER__;\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n__SAMPLER_2D_ARRAY_TACTIC_DECLARATION__;\n\nconst int LOOP_MAX = __LOOP_MAX__;\n\n__PLUGINS__;\n__CONSTANTS__;\n\nin vec2 vTexCoord;\n\nfloat atan2(float v1, float v2) {\n  if (v1 == 0.0 || v2 == 0.0) return 0.0;\n  return atan(v1 / v2);\n}\n\nfloat cbrt(float x) {\n  if (x >= 0.0) {\n    return pow(x, 1.0 / 3.0);\n  } else {\n    return -pow(x, 1.0 / 3.0);\n  }\n}\n\nfloat expm1(float x) {\n  return pow(${Math.E}, x) - 1.0; \n}\n\nfloat fround(highp float x) {\n  return x;\n}\n\nfloat imul(float v1, float v2) {\n  return float(int(v1) * int(v2));\n}\n\nfloat log10(float x) {\n  return log2(x) * (1.0 / log2(10.0));\n}\n\nfloat log1p(float x) {\n  return log(1.0 + x);\n}\n\nfloat _pow(float v1, float v2) {\n  if (v2 == 0.0) return 1.0;\n  return pow(v1, v2);\n}\n\nfloat _round(float x) {\n  return floor(x + 0.5);\n}\n\n\nconst int BIT_COUNT = 32;\nint modi(int x, int y) {\n  return x - y * (x / y);\n}\n\nint bitwiseOr(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseXOR(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseAnd(int a, int b) {\n  int result = 0;\n  int n = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 && b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseNot(int a) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (modi(a, 2) == 0) {\n      result += n;    \n    }\n    a = a / 2;\n    n = n * 2;\n  }\n  return result;\n}\nint bitwiseZeroFillLeftShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n *= 2;\n  }\n\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nint bitwiseSignedRightShift(int num, int shifts) {\n  return int(floor(float(num) / pow(2.0, float(shifts))));\n}\n\nint bitwiseZeroFillRightShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n /= 2;\n  }\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x/y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY\\'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 texel) {\n  __DECODE32_ENDIANNESS__;\n  texel *= 255.0;\n  vec2 gte128;\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(round(exponent));\n  texel.b = texel.b - 128.0 * gte128.x;\n  res = dot(texel, SCALE_FACTOR) * exp2(round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nfloat decode16(vec4 texel, int index) {\n  int channel = integerMod(index, 2);\n  return texel[channel*2] * 255.0 + texel[channel*2 + 1] * 65280.0;\n}\n\nfloat decode8(vec4 texel, int index) {\n  int channel = integerMod(index, 4);\n  return texel[channel] * 255.0;\n}\n\nvec4 legacyEncode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  texel.rg = integerMod(texel.rg, 256.0);\n  texel.b = integerMod(texel.b, 128.0);\n  texel.a = exponent*0.5 + 63.5;\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  texel = floor(texel);\n  texel *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return texel;\n}\n\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\nvec4 encode32(float value) {\n  if (value == 0.0) return vec4(0, 0, 0, 0);\n\n  float exponent;\n  float mantissa;\n  vec4  result;\n  float sgn;\n\n  sgn = step(0.0, -value);\n  value = abs(value);\n\n  exponent = floor(log2(value));\n\n  mantissa = value*pow(2.0, -exponent)-1.0;\n  exponent = exponent+127.0;\n  result   = vec4(0,0,0,0);\n\n  result.a = floor(exponent/2.0);\n  exponent = exponent - result.a*2.0;\n  result.a = result.a + 128.0*sgn;\n\n  result.b = floor(mantissa * 128.0);\n  mantissa = mantissa - result.b / 128.0;\n  result.b = result.b + exponent*128.0;\n\n  result.g = floor(mantissa*32768.0);\n  mantissa = mantissa - result.g/32768.0;\n\n  result.r = floor(mantissa*8388608.0);\n  return result/255.0;\n}\n// Dragons end here\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return decode32(texel);\n}\n\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int w = texSize.x * 2;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize.x * 2, texSize.y));\n  return decode16(texel, index);\n}\n\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int w = texSize.x * 4;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize.x * 4, texSize.y));\n  return decode8(texel, index);\n}\n\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int channel = integerMod(index, 4);\n  index = index / 4;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  index = index / 4;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return texel[channel];\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture(tex, st / vec2(texSize));\n}\n\nvec4 getImage3D(sampler2DArray tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture(tex, vec3(st / vec2(texSize), z));\n}\n\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return result[0];\n}\n\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec2(result[0], result[1]);\n}\n\nvec2 getMemoryOptimizedVec2(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  index = index / 2;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  if (channel == 0) return vec2(texel.r, texel.g);\n  if (channel == 1) return vec2(texel.b, texel.a);\n  return vec2(0.0, 0.0);\n}\n\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec3(result[0], result[1], result[2]);\n}\n\nvec3 getMemoryOptimizedVec3(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int fieldIndex = 3 * (x + texDim.x * (y + texDim.y * z));\n  int vectorIndex = fieldIndex / 4;\n  int vectorOffset = fieldIndex - vectorIndex * 4;\n  int readY = vectorIndex / texSize.x;\n  int readX = vectorIndex - readY * texSize.x;\n  vec4 tex1 = texture(tex, (vec2(readX, readY) + 0.5) / vec2(texSize));\n\n  if (vectorOffset == 0) {\n    return tex1.xyz;\n  } else if (vectorOffset == 1) {\n    return tex1.yzw;\n  } else {\n    readX++;\n    if (readX >= texSize.x) {\n      readX = 0;\n      readY++;\n    }\n    vec4 tex2 = texture(tex, vec2(readX, readY) / vec2(texSize));\n    if (vectorOffset == 2) {\n      return vec3(tex1.z, tex1.w, tex2.x);\n    } else {\n      return vec3(tex1.w, tex2.x, tex2.y);\n    }\n  }\n}\n\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  return getImage2D(tex, texSize, texDim, z, y, x);\n}\n\nvec4 getMemoryOptimizedVec4(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return vec4(texel.r, texel.g, texel.b, texel.a);\n}\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\nfloat modulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -mod(number, divisor);\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return mod(number, divisor);\n}\n\n__INJECTED_NATIVE__;\n__MAIN_CONSTANTS__;\n__MAIN_ARGUMENTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}`;\n\nmodule.exports = {\n  fragmentShader\n};\n},{}],73:[function(require,module,exports){\nconst { utils } = require('../../utils');\nconst { WebGLFunctionNode } = require('../web-gl/function-node');\n\nclass WebGL2FunctionNode extends WebGLFunctionNode {\n\n  astIdentifierExpression(idtNode, retArr) {\n    if (idtNode.type !== 'Identifier') {\n      throw this.astErrorOutput(\n        'IdentifierExpression - not an Identifier',\n        idtNode\n      );\n    }\n\n    const type = this.getType(idtNode);\n\n    const name = utils.sanitizeName(idtNode.name);\n    if (idtNode.name === 'Infinity') {\n      retArr.push('intBitsToFloat(2139095039)');\n    } else if (type === 'Boolean') {\n      if (this.argumentNames.indexOf(name) > -1) {\n        retArr.push(`bool(user_${name})`);\n      } else {\n        retArr.push(`user_${name}`);\n      }\n    } else {\n      retArr.push(`user_${name}`);\n    }\n\n    return retArr;\n  }\n}\n\nmodule.exports = {\n  WebGL2FunctionNode\n};\n},{\"../../utils\":114,\"../web-gl/function-node\":38}],74:[function(require,module,exports){\nconst { WebGL2KernelValueBoolean } = require('./kernel-value/boolean');\nconst { WebGL2KernelValueFloat } = require('./kernel-value/float');\nconst { WebGL2KernelValueInteger } = require('./kernel-value/integer');\n\nconst { WebGL2KernelValueHTMLImage } = require('./kernel-value/html-image');\nconst { WebGL2KernelValueDynamicHTMLImage } = require('./kernel-value/dynamic-html-image');\n\nconst { WebGL2KernelValueHTMLImageArray } = require('./kernel-value/html-image-array');\nconst { WebGL2KernelValueDynamicHTMLImageArray } = require('./kernel-value/dynamic-html-image-array');\n\nconst { WebGL2KernelValueHTMLVideo } = require('./kernel-value/html-video');\nconst { WebGL2KernelValueDynamicHTMLVideo } = require('./kernel-value/dynamic-html-video');\n\nconst { WebGL2KernelValueSingleInput } = require('./kernel-value/single-input');\nconst { WebGL2KernelValueDynamicSingleInput } = require('./kernel-value/dynamic-single-input');\n\nconst { WebGL2KernelValueUnsignedInput } = require('./kernel-value/unsigned-input');\nconst { WebGL2KernelValueDynamicUnsignedInput } = require('./kernel-value/dynamic-unsigned-input');\n\nconst { WebGL2KernelValueMemoryOptimizedNumberTexture } = require('./kernel-value/memory-optimized-number-texture');\nconst { WebGL2KernelValueDynamicMemoryOptimizedNumberTexture } = require('./kernel-value/dynamic-memory-optimized-number-texture');\n\nconst { WebGL2KernelValueNumberTexture } = require('./kernel-value/number-texture');\nconst { WebGL2KernelValueDynamicNumberTexture } = require('./kernel-value/dynamic-number-texture');\n\nconst { WebGL2KernelValueSingleArray } = require('./kernel-value/single-array');\nconst { WebGL2KernelValueDynamicSingleArray } = require('./kernel-value/dynamic-single-array');\n\nconst { WebGL2KernelValueSingleArray1DI } = require('./kernel-value/single-array1d-i');\nconst { WebGL2KernelValueDynamicSingleArray1DI } = require('./kernel-value/dynamic-single-array1d-i');\n\nconst { WebGL2KernelValueSingleArray2DI } = require('./kernel-value/single-array2d-i');\nconst { WebGL2KernelValueDynamicSingleArray2DI } = require('./kernel-value/dynamic-single-array2d-i');\n\nconst { WebGL2KernelValueSingleArray3DI } = require('./kernel-value/single-array3d-i');\nconst { WebGL2KernelValueDynamicSingleArray3DI } = require('./kernel-value/dynamic-single-array3d-i');\n\nconst { WebGL2KernelValueArray2 } = require('./kernel-value/array2');\nconst { WebGL2KernelValueArray3 } = require('./kernel-value/array3');\nconst { WebGL2KernelValueArray4 } = require('./kernel-value/array4');\n\nconst { WebGL2KernelValueUnsignedArray } = require('./kernel-value/unsigned-array');\nconst { WebGL2KernelValueDynamicUnsignedArray } = require('./kernel-value/dynamic-unsigned-array');\n\nconst kernelValueMaps = {\n  unsigned: {\n    dynamic: {\n      'Boolean': WebGL2KernelValueBoolean,\n      'Integer': WebGL2KernelValueInteger,\n      'Float': WebGL2KernelValueFloat,\n      'Array': WebGL2KernelValueDynamicUnsignedArray,\n      'Array(2)': WebGL2KernelValueArray2,\n      'Array(3)': WebGL2KernelValueArray3,\n      'Array(4)': WebGL2KernelValueArray4,\n      'Array1D(2)': false,\n      'Array1D(3)': false,\n      'Array1D(4)': false,\n      'Array2D(2)': false,\n      'Array2D(3)': false,\n      'Array2D(4)': false,\n      'Array3D(2)': false,\n      'Array3D(3)': false,\n      'Array3D(4)': false,\n      'Input': WebGL2KernelValueDynamicUnsignedInput,\n      'NumberTexture': WebGL2KernelValueDynamicNumberTexture,\n      'ArrayTexture(1)': WebGL2KernelValueDynamicNumberTexture,\n      'ArrayTexture(2)': WebGL2KernelValueDynamicNumberTexture,\n      'ArrayTexture(3)': WebGL2KernelValueDynamicNumberTexture,\n      'ArrayTexture(4)': WebGL2KernelValueDynamicNumberTexture,\n      'MemoryOptimizedNumberTexture': WebGL2KernelValueDynamicMemoryOptimizedNumberTexture,\n      'HTMLCanvas': WebGL2KernelValueDynamicHTMLImage,\n      'OffscreenCanvas': WebGL2KernelValueDynamicHTMLImage,\n      'HTMLImage': WebGL2KernelValueDynamicHTMLImage,\n      'ImageBitmap': WebGL2KernelValueDynamicHTMLImage,\n      'ImageData': WebGL2KernelValueDynamicHTMLImage,\n      'HTMLImageArray': WebGL2KernelValueDynamicHTMLImageArray,\n      'HTMLVideo': WebGL2KernelValueDynamicHTMLVideo,\n    },\n    static: {\n      'Boolean': WebGL2KernelValueBoolean,\n      'Float': WebGL2KernelValueFloat,\n      'Integer': WebGL2KernelValueInteger,\n      'Array': WebGL2KernelValueUnsignedArray,\n      'Array(2)': WebGL2KernelValueArray2,\n      'Array(3)': WebGL2KernelValueArray3,\n      'Array(4)': WebGL2KernelValueArray4,\n      'Array1D(2)': false,\n      'Array1D(3)': false,\n      'Array1D(4)': false,\n      'Array2D(2)': false,\n      'Array2D(3)': false,\n      'Array2D(4)': false,\n      'Array3D(2)': false,\n      'Array3D(3)': false,\n      'Array3D(4)': false,\n      'Input': WebGL2KernelValueUnsignedInput,\n      'NumberTexture': WebGL2KernelValueNumberTexture,\n      'ArrayTexture(1)': WebGL2KernelValueNumberTexture,\n      'ArrayTexture(2)': WebGL2KernelValueNumberTexture,\n      'ArrayTexture(3)': WebGL2KernelValueNumberTexture,\n      'ArrayTexture(4)': WebGL2KernelValueNumberTexture,\n      'MemoryOptimizedNumberTexture': WebGL2KernelValueDynamicMemoryOptimizedNumberTexture,\n      'HTMLCanvas': WebGL2KernelValueHTMLImage,\n      'OffscreenCanvas': WebGL2KernelValueHTMLImage,\n      'HTMLImage': WebGL2KernelValueHTMLImage,\n      'ImageBitmap': WebGL2KernelValueHTMLImage,\n      'ImageData': WebGL2KernelValueHTMLImage,\n      'HTMLImageArray': WebGL2KernelValueHTMLImageArray,\n      'HTMLVideo': WebGL2KernelValueHTMLVideo,\n    }\n  },\n  single: {\n    dynamic: {\n      'Boolean': WebGL2KernelValueBoolean,\n      'Integer': WebGL2KernelValueInteger,\n      'Float': WebGL2KernelValueFloat,\n      'Array': WebGL2KernelValueDynamicSingleArray,\n      'Array(2)': WebGL2KernelValueArray2,\n      'Array(3)': WebGL2KernelValueArray3,\n      'Array(4)': WebGL2KernelValueArray4,\n      'Array1D(2)': WebGL2KernelValueDynamicSingleArray1DI,\n      'Array1D(3)': WebGL2KernelValueDynamicSingleArray1DI,\n      'Array1D(4)': WebGL2KernelValueDynamicSingleArray1DI,\n      'Array2D(2)': WebGL2KernelValueDynamicSingleArray2DI,\n      'Array2D(3)': WebGL2KernelValueDynamicSingleArray2DI,\n      'Array2D(4)': WebGL2KernelValueDynamicSingleArray2DI,\n      'Array3D(2)': WebGL2KernelValueDynamicSingleArray3DI,\n      'Array3D(3)': WebGL2KernelValueDynamicSingleArray3DI,\n      'Array3D(4)': WebGL2KernelValueDynamicSingleArray3DI,\n      'Input': WebGL2KernelValueDynamicSingleInput,\n      'NumberTexture': WebGL2KernelValueDynamicNumberTexture,\n      'ArrayTexture(1)': WebGL2KernelValueDynamicNumberTexture,\n      'ArrayTexture(2)': WebGL2KernelValueDynamicNumberTexture,\n      'ArrayTexture(3)': WebGL2KernelValueDynamicNumberTexture,\n      'ArrayTexture(4)': WebGL2KernelValueDynamicNumberTexture,\n      'MemoryOptimizedNumberTexture': WebGL2KernelValueDynamicMemoryOptimizedNumberTexture,\n      'HTMLCanvas': WebGL2KernelValueDynamicHTMLImage,\n      'OffscreenCanvas': WebGL2KernelValueDynamicHTMLImage,\n      'HTMLImage': WebGL2KernelValueDynamicHTMLImage,\n      'ImageBitmap': WebGL2KernelValueDynamicHTMLImage,\n      'ImageData': WebGL2KernelValueDynamicHTMLImage,\n      'HTMLImageArray': WebGL2KernelValueDynamicHTMLImageArray,\n      'HTMLVideo': WebGL2KernelValueDynamicHTMLVideo,\n    },\n    static: {\n      'Boolean': WebGL2KernelValueBoolean,\n      'Float': WebGL2KernelValueFloat,\n      'Integer': WebGL2KernelValueInteger,\n      'Array': WebGL2KernelValueSingleArray,\n      'Array(2)': WebGL2KernelValueArray2,\n      'Array(3)': WebGL2KernelValueArray3,\n      'Array(4)': WebGL2KernelValueArray4,\n      'Array1D(2)': WebGL2KernelValueSingleArray1DI,\n      'Array1D(3)': WebGL2KernelValueSingleArray1DI,\n      'Array1D(4)': WebGL2KernelValueSingleArray1DI,\n      'Array2D(2)': WebGL2KernelValueSingleArray2DI,\n      'Array2D(3)': WebGL2KernelValueSingleArray2DI,\n      'Array2D(4)': WebGL2KernelValueSingleArray2DI,\n      'Array3D(2)': WebGL2KernelValueSingleArray3DI,\n      'Array3D(3)': WebGL2KernelValueSingleArray3DI,\n      'Array3D(4)': WebGL2KernelValueSingleArray3DI,\n      'Input': WebGL2KernelValueSingleInput,\n      'NumberTexture': WebGL2KernelValueNumberTexture,\n      'ArrayTexture(1)': WebGL2KernelValueNumberTexture,\n      'ArrayTexture(2)': WebGL2KernelValueNumberTexture,\n      'ArrayTexture(3)': WebGL2KernelValueNumberTexture,\n      'ArrayTexture(4)': WebGL2KernelValueNumberTexture,\n      'MemoryOptimizedNumberTexture': WebGL2KernelValueMemoryOptimizedNumberTexture,\n      'HTMLCanvas': WebGL2KernelValueHTMLImage,\n      'OffscreenCanvas': WebGL2KernelValueHTMLImage,\n      'HTMLImage': WebGL2KernelValueHTMLImage,\n      'ImageBitmap': WebGL2KernelValueHTMLImage,\n      'ImageData': WebGL2KernelValueHTMLImage,\n      'HTMLImageArray': WebGL2KernelValueHTMLImageArray,\n      'HTMLVideo': WebGL2KernelValueHTMLVideo,\n    }\n  },\n};\n\nfunction lookupKernelValueType(type, dynamic, precision, value) {\n  if (!type) {\n    throw new Error('type missing');\n  }\n  if (!dynamic) {\n    throw new Error('dynamic missing');\n  }\n  if (!precision) {\n    throw new Error('precision missing');\n  }\n  if (value.type) {\n    type = value.type;\n  }\n  const types = kernelValueMaps[precision][dynamic];\n  if (types[type] === false) {\n    return null;\n  } else if (types[type] === undefined) {\n    throw new Error(`Could not find a KernelValue for ${ type }`);\n  }\n  return types[type];\n}\n\nmodule.exports = {\n  kernelValueMaps,\n  lookupKernelValueType\n};\n},{\"./kernel-value/array2\":75,\"./kernel-value/array3\":76,\"./kernel-value/array4\":77,\"./kernel-value/boolean\":78,\"./kernel-value/dynamic-html-image\":80,\"./kernel-value/dynamic-html-image-array\":79,\"./kernel-value/dynamic-html-video\":81,\"./kernel-value/dynamic-memory-optimized-number-texture\":82,\"./kernel-value/dynamic-number-texture\":83,\"./kernel-value/dynamic-single-array\":84,\"./kernel-value/dynamic-single-array1d-i\":85,\"./kernel-value/dynamic-single-array2d-i\":86,\"./kernel-value/dynamic-single-array3d-i\":87,\"./kernel-value/dynamic-single-input\":88,\"./kernel-value/dynamic-unsigned-array\":89,\"./kernel-value/dynamic-unsigned-input\":90,\"./kernel-value/float\":91,\"./kernel-value/html-image\":93,\"./kernel-value/html-image-array\":92,\"./kernel-value/html-video\":94,\"./kernel-value/integer\":95,\"./kernel-value/memory-optimized-number-texture\":96,\"./kernel-value/number-texture\":97,\"./kernel-value/single-array\":98,\"./kernel-value/single-array1d-i\":99,\"./kernel-value/single-array2d-i\":100,\"./kernel-value/single-array3d-i\":101,\"./kernel-value/single-input\":102,\"./kernel-value/unsigned-array\":103,\"./kernel-value/unsigned-input\":104}],75:[function(require,module,exports){\nconst { WebGLKernelValueArray2 } = require('../../web-gl/kernel-value/array2');\n\nclass WebGL2KernelValueArray2 extends WebGLKernelValueArray2 {}\n\nmodule.exports = {\n  WebGL2KernelValueArray2\n};\n},{\"../../web-gl/kernel-value/array2\":41}],76:[function(require,module,exports){\nconst { WebGLKernelValueArray3 } = require('../../web-gl/kernel-value/array3');\n\nclass WebGL2KernelValueArray3 extends WebGLKernelValueArray3 {}\n\nmodule.exports = {\n  WebGL2KernelValueArray3\n};\n},{\"../../web-gl/kernel-value/array3\":42}],77:[function(require,module,exports){\nconst { WebGLKernelValueArray4 } = require('../../web-gl/kernel-value/array4');\n\nclass WebGL2KernelValueArray4 extends WebGLKernelValueArray4 {}\n\nmodule.exports = {\n  WebGL2KernelValueArray4\n};\n},{\"../../web-gl/kernel-value/array4\":43}],78:[function(require,module,exports){\nconst { WebGLKernelValueBoolean } = require('../../web-gl/kernel-value/boolean');\n\nclass WebGL2KernelValueBoolean extends WebGLKernelValueBoolean {}\n\nmodule.exports = {\n  WebGL2KernelValueBoolean\n};\n},{\"../../web-gl/kernel-value/boolean\":44}],79:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGL2KernelValueHTMLImageArray } = require('./html-image-array');\n\nclass WebGL2KernelValueDynamicHTMLImageArray extends WebGL2KernelValueHTMLImageArray {\n  getSource() {\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform ${ variablePrecision } sampler2DArray ${this.id}`,\n      `uniform ${ variablePrecision } ivec2 ${this.sizeId}`,\n      `uniform ${ variablePrecision } ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n\n  updateValue(images) {\n    const { width, height } = images[0];\n    this.checkSize(width, height);\n    this.dimensions = [width, height, images.length];\n    this.textureSize = [width, height];\n    this.kernel.setUniform3iv(this.dimensionsId, this.dimensions);\n    this.kernel.setUniform2iv(this.sizeId, this.textureSize);\n    super.updateValue(images);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueDynamicHTMLImageArray\n};\n},{\"../../../utils\":114,\"./html-image-array\":92}],80:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueDynamicHTMLImage } = require('../../web-gl/kernel-value/dynamic-html-image');\n\nclass WebGL2KernelValueDynamicHTMLImage extends WebGLKernelValueDynamicHTMLImage {\n  getSource() {\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform ${ variablePrecision } sampler2D ${this.id}`,\n      `uniform ${ variablePrecision } ivec2 ${this.sizeId}`,\n      `uniform ${ variablePrecision } ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueDynamicHTMLImage\n};\n},{\"../../../utils\":114,\"../../web-gl/kernel-value/dynamic-html-image\":45}],81:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGL2KernelValueDynamicHTMLImage } = require('./dynamic-html-image');\n\nclass WebGL2KernelValueDynamicHTMLVideo extends WebGL2KernelValueDynamicHTMLImage {}\n\nmodule.exports = {\n  WebGL2KernelValueDynamicHTMLVideo\n};\n},{\"../../../utils\":114,\"./dynamic-html-image\":80}],82:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueDynamicMemoryOptimizedNumberTexture } = require('../../web-gl/kernel-value/dynamic-memory-optimized-number-texture');\n\nclass WebGL2KernelValueDynamicMemoryOptimizedNumberTexture extends WebGLKernelValueDynamicMemoryOptimizedNumberTexture {\n  getSource() {\n    return utils.linesToString([\n      `uniform sampler2D ${this.id}`,\n      `uniform ivec2 ${this.sizeId}`,\n      `uniform ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueDynamicMemoryOptimizedNumberTexture\n};\n},{\"../../../utils\":114,\"../../web-gl/kernel-value/dynamic-memory-optimized-number-texture\":47}],83:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueDynamicNumberTexture } = require('../../web-gl/kernel-value/dynamic-number-texture');\n\nclass WebGL2KernelValueDynamicNumberTexture extends WebGLKernelValueDynamicNumberTexture {\n  getSource() {\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform ${ variablePrecision } sampler2D ${this.id}`,\n      `uniform ${ variablePrecision } ivec2 ${this.sizeId}`,\n      `uniform ${ variablePrecision } ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueDynamicNumberTexture\n};\n},{\"../../../utils\":114,\"../../web-gl/kernel-value/dynamic-number-texture\":48}],84:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGL2KernelValueSingleArray } = require('../../web-gl2/kernel-value/single-array');\n\nclass WebGL2KernelValueDynamicSingleArray extends WebGL2KernelValueSingleArray {\n  getSource() {\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform ${ variablePrecision } sampler2D ${this.id}`,\n      `uniform ${ variablePrecision } ivec2 ${this.sizeId}`,\n      `uniform ${ variablePrecision } ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n\n  updateValue(value) {\n    this.dimensions = utils.getDimensions(value, true);\n    this.textureSize = utils.getMemoryOptimizedFloatTextureSize(this.dimensions, this.bitRatio);\n    this.uploadArrayLength = this.textureSize[0] * this.textureSize[1] * this.bitRatio;\n    this.checkSize(this.textureSize[0], this.textureSize[1]);\n    this.uploadValue = new Float32Array(this.uploadArrayLength);\n    this.kernel.setUniform3iv(this.dimensionsId, this.dimensions);\n    this.kernel.setUniform2iv(this.sizeId, this.textureSize);\n    super.updateValue(value);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueDynamicSingleArray\n};\n},{\"../../../utils\":114,\"../../web-gl2/kernel-value/single-array\":98}],85:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGL2KernelValueSingleArray1DI } = require('../../web-gl2/kernel-value/single-array1d-i');\n\nclass WebGL2KernelValueDynamicSingleArray1DI extends WebGL2KernelValueSingleArray1DI {\n  getSource() {\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform ${ variablePrecision } sampler2D ${this.id}`,\n      `uniform ${ variablePrecision } ivec2 ${this.sizeId}`,\n      `uniform ${ variablePrecision } ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n\n  updateValue(value) {\n    this.setShape(value);\n    this.kernel.setUniform3iv(this.dimensionsId, this.dimensions);\n    this.kernel.setUniform2iv(this.sizeId, this.textureSize);\n    super.updateValue(value);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueDynamicSingleArray1DI\n};\n},{\"../../../utils\":114,\"../../web-gl2/kernel-value/single-array1d-i\":99}],86:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGL2KernelValueSingleArray2DI } = require('../../web-gl2/kernel-value/single-array2d-i');\n\nclass WebGL2KernelValueDynamicSingleArray2DI extends WebGL2KernelValueSingleArray2DI {\n  getSource() {\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform ${ variablePrecision } sampler2D ${this.id}`,\n      `uniform ${ variablePrecision } ivec2 ${this.sizeId}`,\n      `uniform ${ variablePrecision } ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n\n  updateValue(value) {\n    this.setShape(value);\n    this.kernel.setUniform3iv(this.dimensionsId, this.dimensions);\n    this.kernel.setUniform2iv(this.sizeId, this.textureSize);\n    super.updateValue(value);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueDynamicSingleArray2DI\n};\n},{\"../../../utils\":114,\"../../web-gl2/kernel-value/single-array2d-i\":100}],87:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGL2KernelValueSingleArray3DI } = require('../../web-gl2/kernel-value/single-array3d-i');\n\nclass WebGL2KernelValueDynamicSingleArray3DI extends WebGL2KernelValueSingleArray3DI {\n  getSource() {\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform ${ variablePrecision } sampler2D ${this.id}`,\n      `uniform ${ variablePrecision } ivec2 ${this.sizeId}`,\n      `uniform ${ variablePrecision } ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n\n  updateValue(value) {\n    this.setShape(value);\n    this.kernel.setUniform3iv(this.dimensionsId, this.dimensions);\n    this.kernel.setUniform2iv(this.sizeId, this.textureSize);\n    super.updateValue(value);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueDynamicSingleArray3DI\n};\n},{\"../../../utils\":114,\"../../web-gl2/kernel-value/single-array3d-i\":101}],88:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGL2KernelValueSingleInput } = require('../../web-gl2/kernel-value/single-input');\n\nclass WebGL2KernelValueDynamicSingleInput extends WebGL2KernelValueSingleInput {\n  getSource() {\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform ${ variablePrecision } sampler2D ${this.id}`,\n      `uniform ${ variablePrecision } ivec2 ${this.sizeId}`,\n      `uniform ${ variablePrecision } ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n\n  updateValue(value) {\n    let [w, h, d] = value.size;\n    this.dimensions = new Int32Array([w || 1, h || 1, d || 1]);\n    this.textureSize = utils.getMemoryOptimizedFloatTextureSize(this.dimensions, this.bitRatio);\n    this.uploadArrayLength = this.textureSize[0] * this.textureSize[1] * this.bitRatio;\n    this.checkSize(this.textureSize[0], this.textureSize[1]);\n    this.uploadValue = new Float32Array(this.uploadArrayLength);\n    this.kernel.setUniform3iv(this.dimensionsId, this.dimensions);\n    this.kernel.setUniform2iv(this.sizeId, this.textureSize);\n    super.updateValue(value);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueDynamicSingleInput\n};\n},{\"../../../utils\":114,\"../../web-gl2/kernel-value/single-input\":102}],89:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueDynamicUnsignedArray } = require('../../web-gl/kernel-value/dynamic-unsigned-array');\n\nclass WebGL2KernelValueDynamicUnsignedArray extends WebGLKernelValueDynamicUnsignedArray {\n  getSource() {\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform ${ variablePrecision } sampler2D ${this.id}`,\n      `uniform ${ variablePrecision } ivec2 ${this.sizeId}`,\n      `uniform ${ variablePrecision } ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueDynamicUnsignedArray\n};\n},{\"../../../utils\":114,\"../../web-gl/kernel-value/dynamic-unsigned-array\":54}],90:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueDynamicUnsignedInput } = require('../../web-gl/kernel-value/dynamic-unsigned-input');\n\nclass WebGL2KernelValueDynamicUnsignedInput extends WebGLKernelValueDynamicUnsignedInput {\n  getSource() {\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform ${ variablePrecision } sampler2D ${this.id}`,\n      `uniform ${ variablePrecision } ivec2 ${this.sizeId}`,\n      `uniform ${ variablePrecision } ivec3 ${this.dimensionsId}`,\n    ]);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueDynamicUnsignedInput\n};\n},{\"../../../utils\":114,\"../../web-gl/kernel-value/dynamic-unsigned-input\":55}],91:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueFloat } = require('../../web-gl/kernel-value/float');\n\nclass WebGL2KernelValueFloat extends WebGLKernelValueFloat {}\n\nmodule.exports = {\n  WebGL2KernelValueFloat\n};\n},{\"../../../utils\":114,\"../../web-gl/kernel-value/float\":56}],92:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelArray } = require('../../web-gl/kernel-value/array');\n\nclass WebGL2KernelValueHTMLImageArray extends WebGLKernelArray {\n  constructor(value, settings) {\n    super(value, settings);\n    this.checkSize(value[0].width, value[0].height);\n    this.dimensions = [value[0].width, value[0].height, value.length];\n    this.textureSize = [value[0].width, value[0].height];\n  }\n  defineTexture() {\n    const { context: gl } = this;\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D_ARRAY, this.texture);\n    gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n  }\n\n  getStringValueHandler() {\n    return `const uploadValue_${this.name} = ${this.varName};\\n`;\n  }\n  getSource() {\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform ${ variablePrecision } sampler2DArray ${this.id}`,\n      `${ variablePrecision } ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,\n      `${ variablePrecision } ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`,\n    ]);\n  }\n\n  updateValue(images) {\n    const { context: gl } = this;\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D_ARRAY, this.texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n    gl.texImage3D(\n      gl.TEXTURE_2D_ARRAY,\n      0,\n      gl.RGBA,\n      images[0].width,\n      images[0].height,\n      images.length,\n      0,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      null\n    );\n    for (let i = 0; i < images.length; i++) {\n      const xOffset = 0;\n      const yOffset = 0;\n      const imageDepth = 1;\n      gl.texSubImage3D(\n        gl.TEXTURE_2D_ARRAY,\n        0,\n        xOffset,\n        yOffset,\n        i,\n        images[i].width,\n        images[i].height,\n        imageDepth,\n        gl.RGBA,\n        gl.UNSIGNED_BYTE,\n        this.uploadValue = images[i]\n      );\n    }\n    this.kernel.setUniform1i(this.id, this.index);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueHTMLImageArray\n};\n},{\"../../../utils\":114,\"../../web-gl/kernel-value/array\":40}],93:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueHTMLImage } = require('../../web-gl/kernel-value/html-image');\n\nclass WebGL2KernelValueHTMLImage extends WebGLKernelValueHTMLImage {\n  getSource() {\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform ${ variablePrecision } sampler2D ${this.id}`,\n      `${ variablePrecision } ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,\n      `${ variablePrecision } ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`,\n    ]);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueHTMLImage\n};\n},{\"../../../utils\":114,\"../../web-gl/kernel-value/html-image\":57}],94:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGL2KernelValueHTMLImage } = require('./html-image');\n\nclass WebGL2KernelValueHTMLVideo extends WebGL2KernelValueHTMLImage {}\n\nmodule.exports = {\n  WebGL2KernelValueHTMLVideo\n};\n},{\"../../../utils\":114,\"./html-image\":93}],95:[function(require,module,exports){\nconst { WebGLKernelValueInteger } = require('../../web-gl/kernel-value/integer');\n\nclass WebGL2KernelValueInteger extends WebGLKernelValueInteger {\n  getSource(value) {\n    const variablePrecision = this.getVariablePrecisionString();\n    if (this.origin === 'constants') {\n      return `const ${ variablePrecision } int ${this.id} = ${ parseInt(value) };\\n`;\n    }\n    return `uniform ${ variablePrecision } int ${this.id};\\n`;\n  }\n\n  updateValue(value) {\n    if (this.origin === 'constants') return;\n    this.kernel.setUniform1i(this.id, this.uploadValue = value);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueInteger\n};\n},{\"../../web-gl/kernel-value/integer\":60}],96:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueMemoryOptimizedNumberTexture } = require('../../web-gl/kernel-value/memory-optimized-number-texture');\n\nclass WebGL2KernelValueMemoryOptimizedNumberTexture extends WebGLKernelValueMemoryOptimizedNumberTexture {\n  getSource() {\n    const { id, sizeId, textureSize, dimensionsId, dimensions } = this;\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform sampler2D ${id}`,\n      `${ variablePrecision } ivec2 ${sizeId} = ivec2(${textureSize[0]}, ${textureSize[1]})`,\n      `${ variablePrecision } ivec3 ${dimensionsId} = ivec3(${dimensions[0]}, ${dimensions[1]}, ${dimensions[2]})`,\n    ]);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueMemoryOptimizedNumberTexture\n};\n},{\"../../../utils\":114,\"../../web-gl/kernel-value/memory-optimized-number-texture\":61}],97:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueNumberTexture } = require('../../web-gl/kernel-value/number-texture');\n\nclass WebGL2KernelValueNumberTexture extends WebGLKernelValueNumberTexture {\n  getSource() {\n    const { id, sizeId, textureSize, dimensionsId, dimensions } = this;\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform ${ variablePrecision } sampler2D ${id}`,\n      `${ variablePrecision } ivec2 ${sizeId} = ivec2(${textureSize[0]}, ${textureSize[1]})`,\n      `${ variablePrecision } ivec3 ${dimensionsId} = ivec3(${dimensions[0]}, ${dimensions[1]}, ${dimensions[2]})`,\n    ]);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueNumberTexture\n};\n},{\"../../../utils\":114,\"../../web-gl/kernel-value/number-texture\":62}],98:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueSingleArray } = require('../../web-gl/kernel-value/single-array');\n\nclass WebGL2KernelValueSingleArray extends WebGLKernelValueSingleArray {\n  getSource() {\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform ${ variablePrecision } sampler2D ${this.id}`,\n      `${ variablePrecision } ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,\n      `${ variablePrecision } ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`,\n    ]);\n  }\n\n  updateValue(value) {\n    if (value.constructor !== this.initialValueConstructor) {\n      this.onUpdateValueMismatch(value.constructor);\n      return;\n    }\n    const { context: gl } = this;\n    utils.flattenTo(value, this.uploadValue);\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA32F, this.textureSize[0], this.textureSize[1], 0, gl.RGBA, gl.FLOAT, this.uploadValue);\n    this.kernel.setUniform1i(this.id, this.index);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueSingleArray\n};\n},{\"../../../utils\":114,\"../../web-gl/kernel-value/single-array\":63}],99:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueSingleArray1DI } = require('../../web-gl/kernel-value/single-array1d-i');\n\nclass WebGL2KernelValueSingleArray1DI extends WebGLKernelValueSingleArray1DI {\n  updateValue(value) {\n    if (value.constructor !== this.initialValueConstructor) {\n      this.onUpdateValueMismatch(value.constructor);\n      return;\n    }\n    const { context: gl } = this;\n    utils.flattenTo(value, this.uploadValue);\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA32F, this.textureSize[0], this.textureSize[1], 0, gl.RGBA, gl.FLOAT, this.uploadValue);\n    this.kernel.setUniform1i(this.id, this.index);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueSingleArray1DI\n};\n},{\"../../../utils\":114,\"../../web-gl/kernel-value/single-array1d-i\":64}],100:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueSingleArray2DI } = require('../../web-gl/kernel-value/single-array2d-i');\n\nclass WebGL2KernelValueSingleArray2DI extends WebGLKernelValueSingleArray2DI {\n  updateValue(value) {\n    if (value.constructor !== this.initialValueConstructor) {\n      this.onUpdateValueMismatch(value.constructor);\n      return;\n    }\n    const { context: gl } = this;\n    utils.flattenTo(value, this.uploadValue);\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA32F, this.textureSize[0], this.textureSize[1], 0, gl.RGBA, gl.FLOAT, this.uploadValue);\n    this.kernel.setUniform1i(this.id, this.index);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueSingleArray2DI\n};\n},{\"../../../utils\":114,\"../../web-gl/kernel-value/single-array2d-i\":65}],101:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueSingleArray3DI } = require('../../web-gl/kernel-value/single-array3d-i');\n\nclass WebGL2KernelValueSingleArray3DI extends WebGLKernelValueSingleArray3DI {\n  updateValue(value) {\n    if (value.constructor !== this.initialValueConstructor) {\n      this.onUpdateValueMismatch(value.constructor);\n      return;\n    }\n    const { context: gl } = this;\n    utils.flattenTo(value, this.uploadValue);\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA32F, this.textureSize[0], this.textureSize[1], 0, gl.RGBA, gl.FLOAT, this.uploadValue);\n    this.kernel.setUniform1i(this.id, this.index);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueSingleArray3DI\n};\n},{\"../../../utils\":114,\"../../web-gl/kernel-value/single-array3d-i\":66}],102:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueSingleInput } = require('../../web-gl/kernel-value/single-input');\n\nclass WebGL2KernelValueSingleInput extends WebGLKernelValueSingleInput {\n  getSource() {\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform ${ variablePrecision } sampler2D ${this.id}`,\n      `${ variablePrecision } ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,\n      `${ variablePrecision } ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`,\n    ]);\n  }\n\n  updateValue(input) {\n    const { context: gl } = this;\n    utils.flattenTo(input.value, this.uploadValue);\n    gl.activeTexture(this.contextHandle);\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA32F, this.textureSize[0], this.textureSize[1], 0, gl.RGBA, gl.FLOAT, this.uploadValue);\n    this.kernel.setUniform1i(this.id, this.index);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueSingleInput\n};\n},{\"../../../utils\":114,\"../../web-gl/kernel-value/single-input\":67}],103:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueUnsignedArray } = require('../../web-gl/kernel-value/unsigned-array');\n\nclass WebGL2KernelValueUnsignedArray extends WebGLKernelValueUnsignedArray {\n  getSource() {\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform ${ variablePrecision } sampler2D ${this.id}`,\n      `${ variablePrecision } ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,\n      `${ variablePrecision } ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`,\n    ]);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueUnsignedArray\n};\n},{\"../../../utils\":114,\"../../web-gl/kernel-value/unsigned-array\":68}],104:[function(require,module,exports){\nconst { utils } = require('../../../utils');\nconst { WebGLKernelValueUnsignedInput } = require('../../web-gl/kernel-value/unsigned-input');\n\nclass WebGL2KernelValueUnsignedInput extends WebGLKernelValueUnsignedInput {\n  getSource() {\n    const variablePrecision = this.getVariablePrecisionString();\n    return utils.linesToString([\n      `uniform ${ variablePrecision } sampler2D ${this.id}`,\n      `${ variablePrecision } ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,\n      `${ variablePrecision } ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`,\n    ]);\n  }\n}\n\nmodule.exports = {\n  WebGL2KernelValueUnsignedInput\n};\n},{\"../../../utils\":114,\"../../web-gl/kernel-value/unsigned-input\":69}],105:[function(require,module,exports){\nconst { WebGLKernel } = require('../web-gl/kernel');\nconst { WebGL2FunctionNode } = require('./function-node');\nconst { FunctionBuilder } = require('../function-builder');\nconst { utils } = require('../../utils');\nconst { fragmentShader } = require('./fragment-shader');\nconst { vertexShader } = require('./vertex-shader');\nconst { lookupKernelValueType } = require('./kernel-value-maps');\n\nlet isSupported = null;\nlet testCanvas = null;\nlet testContext = null;\nlet testExtensions = null;\n\nlet features = null;\n\nclass WebGL2Kernel extends WebGLKernel {\n  static get isSupported() {\n    if (isSupported !== null) {\n      return isSupported;\n    }\n    this.setupFeatureChecks();\n    isSupported = this.isContextMatch(testContext);\n    return isSupported;\n  }\n\n  static setupFeatureChecks() {\n    if (typeof document !== 'undefined') {\n      testCanvas = document.createElement('canvas');\n    } else if (typeof OffscreenCanvas !== 'undefined') {\n      testCanvas = new OffscreenCanvas(0, 0);\n    }\n    if (!testCanvas) return;\n    testContext = testCanvas.getContext('webgl2');\n    if (!testContext || !testContext.getExtension) return;\n    testExtensions = {\n      EXT_color_buffer_float: testContext.getExtension('EXT_color_buffer_float'),\n      OES_texture_float_linear: testContext.getExtension('OES_texture_float_linear'),\n    };\n    features = this.getFeatures();\n  }\n\n  static isContextMatch(context) {\n    if (typeof WebGL2RenderingContext !== 'undefined') {\n      return context instanceof WebGL2RenderingContext;\n    }\n    return false;\n  }\n\n  static getFeatures() {\n    const gl = this.testContext;\n    return Object.freeze({\n      isFloatRead: this.getIsFloatRead(),\n      isIntegerDivisionAccurate: this.getIsIntegerDivisionAccurate(),\n      isSpeedTacticSupported: this.getIsSpeedTacticSupported(),\n      kernelMap: true,\n      isTextureFloat: true,\n      isDrawBuffers: true,\n      channelCount: this.getChannelCount(),\n      maxTextureSize: this.getMaxTextureSize(),\n      lowIntPrecision: gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_INT),\n      lowFloatPrecision: gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_FLOAT),\n      mediumIntPrecision: gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_INT),\n      mediumFloatPrecision: gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT),\n      highIntPrecision: gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_INT),\n      highFloatPrecision: gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT),\n    });\n  }\n\n  static getIsTextureFloat() {\n    return true;\n  }\n\n  static getChannelCount() {\n    return testContext.getParameter(testContext.MAX_DRAW_BUFFERS);\n  }\n\n  static getMaxTextureSize() {\n    return testContext.getParameter(testContext.MAX_TEXTURE_SIZE);\n  }\n\n  static lookupKernelValueType(type, dynamic, precision, value) {\n    return lookupKernelValueType(type, dynamic, precision, value);\n  }\n\n  static get testCanvas() {\n    return testCanvas;\n  }\n\n  static get testContext() {\n    return testContext;\n  }\n\n  static get features() {\n    return features;\n  }\n\n  static get fragmentShader() {\n    return fragmentShader;\n  }\n  static get vertexShader() {\n    return vertexShader;\n  }\n\n  initContext() {\n    const settings = {\n      alpha: false,\n      depth: false,\n      antialias: false\n    };\n    return this.canvas.getContext('webgl2', settings);\n  }\n\n  initExtensions() {\n    this.extensions = {\n      EXT_color_buffer_float: this.context.getExtension('EXT_color_buffer_float'),\n      OES_texture_float_linear: this.context.getExtension('OES_texture_float_linear'),\n    };\n  }\n\n  validateSettings(args) {\n    if (!this.validate) {\n      this.texSize = utils.getKernelTextureSize({\n        optimizeFloatMemory: this.optimizeFloatMemory,\n        precision: this.precision,\n      }, this.output);\n      return;\n    }\n\n    const { features } = this.constructor;\n    if (this.precision === 'single' && !features.isFloatRead) {\n      throw new Error('Float texture outputs are not supported');\n    } else if (!this.graphical && this.precision === null) {\n      this.precision = features.isFloatRead ? 'single' : 'unsigned';\n    }\n\n    if (this.fixIntegerDivisionAccuracy === null) {\n      this.fixIntegerDivisionAccuracy = !features.isIntegerDivisionAccurate;\n    } else if (this.fixIntegerDivisionAccuracy && features.isIntegerDivisionAccurate) {\n      this.fixIntegerDivisionAccuracy = false;\n    }\n\n    this.checkOutput();\n\n    if (!this.output || this.output.length === 0) {\n      if (args.length !== 1) {\n        throw new Error('Auto output only supported for kernels with only one input');\n      }\n\n      const argType = utils.getVariableType(args[0], this.strictIntegers);\n      switch (argType) {\n        case 'Array':\n          this.output = utils.getDimensions(argType);\n          break;\n        case 'NumberTexture':\n        case 'MemoryOptimizedNumberTexture':\n        case 'ArrayTexture(1)':\n        case 'ArrayTexture(2)':\n        case 'ArrayTexture(3)':\n        case 'ArrayTexture(4)':\n          this.output = args[0].output;\n          break;\n        default:\n          throw new Error('Auto output not supported for input type: ' + argType);\n      }\n    }\n\n    if (this.graphical) {\n      if (this.output.length !== 2) {\n        throw new Error('Output must have 2 dimensions on graphical mode');\n      }\n\n      if (this.precision === 'single') {\n        console.warn('Cannot use graphical mode and single precision at the same time');\n        this.precision = 'unsigned';\n      }\n\n      this.texSize = utils.clone(this.output);\n      return;\n    } else if (!this.graphical && this.precision === null && features.isTextureFloat) {\n      this.precision = 'single';\n    }\n\n    this.texSize = utils.getKernelTextureSize({\n      optimizeFloatMemory: this.optimizeFloatMemory,\n      precision: this.precision,\n    }, this.output);\n\n    this.checkTextureSize();\n  }\n\n  translateSource() {\n    const functionBuilder = FunctionBuilder.fromKernel(this, WebGL2FunctionNode, {\n      fixIntegerDivisionAccuracy: this.fixIntegerDivisionAccuracy\n    });\n    this.translatedSource = functionBuilder.getPrototypeString('kernel');\n    this.setupReturnTypes(functionBuilder);\n  }\n\n  drawBuffers() {\n    this.context.drawBuffers(this.drawBuffersMap);\n  }\n\n  getTextureFormat() {\n    const { context: gl } = this;\n    switch (this.getInternalFormat()) {\n      case gl.R32F:\n        return gl.RED;\n      case gl.RG32F:\n        return gl.RG;\n      case gl.RGBA32F:\n        return gl.RGBA;\n      case gl.RGBA:\n        return gl.RGBA;\n      default:\n        throw new Error('Unknown internal format');\n    }\n  }\n  getInternalFormat() {\n    const { context: gl } = this;\n\n    if (this.precision === 'single') {\n      if (this.pipeline) {\n        switch (this.returnType) {\n          case 'Number':\n          case 'Float':\n          case 'Integer':\n            if (this.optimizeFloatMemory) {\n              return gl.RGBA32F;\n            } else {\n              return gl.R32F;\n            }\n            case 'Array(2)':\n              return gl.RG32F;\n            case 'Array(3)': \n            case 'Array(4)':\n              return gl.RGBA32F;\n            default:\n              throw new Error('Unhandled return type');\n        }\n      }\n      return gl.RGBA32F;\n    }\n    return gl.RGBA;\n  }\n\n  _setupOutputTexture() {\n    const gl = this.context;\n    if (this.texture) {\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.texture.texture, 0);\n      return;\n    }\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n    const texture = gl.createTexture();\n    const texSize = this.texSize;\n    gl.activeTexture(gl.TEXTURE0 + this.constantTextureCount + this.argumentTextureCount);\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    const format = this.getInternalFormat();\n    if (this.precision === 'single') {\n      gl.texStorage2D(gl.TEXTURE_2D, 1, format, texSize[0], texSize[1]);\n    } else {\n      gl.texImage2D(gl.TEXTURE_2D, 0, format, texSize[0], texSize[1], 0, format, gl.UNSIGNED_BYTE, null);\n    }\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n    this.texture = new this.TextureConstructor({\n      texture,\n      size: texSize,\n      dimensions: this.threadDim,\n      output: this.output,\n      context: this.context,\n      internalFormat: this.getInternalFormat(),\n      textureFormat: this.getTextureFormat(),\n      kernel: this,\n    });\n  }\n\n  _setupSubOutputTextures() {\n    const gl = this.context;\n    if (this.mappedTextures) {\n      for (let i = 0; i < this.subKernels.length; i++) {\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0 + i + 1, gl.TEXTURE_2D, this.mappedTextures[i].texture, 0);\n      }\n      return;\n    }\n    const texSize = this.texSize;\n    this.drawBuffersMap = [gl.COLOR_ATTACHMENT0];\n    this.mappedTextures = [];\n    for (let i = 0; i < this.subKernels.length; i++) {\n      const texture = this.createTexture();\n      this.drawBuffersMap.push(gl.COLOR_ATTACHMENT0 + i + 1);\n      gl.activeTexture(gl.TEXTURE0 + this.constantTextureCount + this.argumentTextureCount + i);\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n      const format = this.getInternalFormat();\n      if (this.precision === 'single') {\n        gl.texStorage2D(gl.TEXTURE_2D, 1, format, texSize[0], texSize[1]);\n      } else {\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, texSize[0], texSize[1], 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n      }\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0 + i + 1, gl.TEXTURE_2D, texture, 0);\n\n      this.mappedTextures.push(new this.TextureConstructor({\n        texture,\n        size: texSize,\n        dimensions: this.threadDim,\n        output: this.output,\n        context: this.context,\n        internalFormat: this.getInternalFormat(),\n        textureFormat: this.getTextureFormat(),\n        kernel: this,\n      }));\n    }\n  }\n\n  _getHeaderString() {\n    return '';\n  }\n\n  _getTextureCoordinate() {\n    const subKernels = this.subKernels;\n    const variablePrecision = this.getVariablePrecisionString(this.texSize, this.tactic);\n    if (subKernels === null || subKernels.length < 1) {\n      return `in ${ variablePrecision } vec2 vTexCoord;\\n`;\n    } else {\n      return `out ${ variablePrecision } vec2 vTexCoord;\\n`;\n    }\n  }\n\n  _getMainArgumentsString(args) {\n    const result = [];\n    const argumentNames = this.argumentNames;\n    for (let i = 0; i < argumentNames.length; i++) {\n      result.push(this.kernelArguments[i].getSource(args[i]));\n    }\n    return result.join('');\n  }\n\n  getKernelString() {\n    const result = [this.getKernelResultDeclaration()];\n    const subKernels = this.subKernels;\n    if (subKernels !== null) {\n      result.push(\n        'layout(location = 0) out vec4 data0'\n      );\n      switch (this.returnType) {\n        case 'Number':\n        case 'Float':\n        case 'Integer':\n          for (let i = 0; i < subKernels.length; i++) {\n            const subKernel = subKernels[i];\n            result.push(\n              subKernel.returnType === 'Integer' ?\n              `int subKernelResult_${ subKernel.name } = 0` :\n              `float subKernelResult_${ subKernel.name } = 0.0`,\n              `layout(location = ${ i + 1 }) out vec4 data${ i + 1 }`\n            );\n          }\n          break;\n        case 'Array(2)':\n          for (let i = 0; i < subKernels.length; i++) {\n            result.push(\n              `vec2 subKernelResult_${ subKernels[i].name }`,\n              `layout(location = ${ i + 1 }) out vec4 data${ i + 1 }`\n            );\n          }\n          break;\n        case 'Array(3)':\n          for (let i = 0; i < subKernels.length; i++) {\n            result.push(\n              `vec3 subKernelResult_${ subKernels[i].name }`,\n              `layout(location = ${ i + 1 }) out vec4 data${ i + 1 }`\n            );\n          }\n          break;\n        case 'Array(4)':\n          for (let i = 0; i < subKernels.length; i++) {\n            result.push(\n              `vec4 subKernelResult_${ subKernels[i].name }`,\n              `layout(location = ${ i + 1 }) out vec4 data${ i + 1 }`\n            );\n          }\n          break;\n      }\n    } else {\n      result.push(\n        'out vec4 data0'\n      );\n    }\n\n    return utils.linesToString(result) + this.translatedSource;\n  }\n\n  getMainResultGraphical() {\n    return utils.linesToString([\n      '  threadId = indexTo3D(index, uOutputDim)',\n      '  kernel()',\n      '  data0 = actualColor',\n    ]);\n  }\n\n  getMainResultPackedPixels() {\n    switch (this.returnType) {\n      case 'LiteralInteger':\n      case 'Number':\n      case 'Integer':\n      case 'Float':\n        return this.getMainResultKernelPackedPixels() +\n          this.getMainResultSubKernelPackedPixels();\n      default:\n        throw new Error(`packed output only usable with Numbers, \"${this.returnType}\" specified`);\n    }\n  }\n\n  getMainResultKernelPackedPixels() {\n    return utils.linesToString([\n      '  threadId = indexTo3D(index, uOutputDim)',\n      '  kernel()',\n      `  data0 = ${this.useLegacyEncoder ? 'legacyEncode32' : 'encode32'}(kernelResult)`\n    ]);\n  }\n\n  getMainResultSubKernelPackedPixels() {\n    const result = [];\n    if (!this.subKernels) return '';\n    for (let i = 0; i < this.subKernels.length; i++) {\n      const subKernel = this.subKernels[i];\n      if (subKernel.returnType === 'Integer') {\n        result.push(\n          `  data${i + 1} = ${this.useLegacyEncoder ? 'legacyEncode32' : 'encode32'}(float(subKernelResult_${this.subKernels[i].name}))`\n        );\n      } else {\n        result.push(\n          `  data${i + 1} = ${this.useLegacyEncoder ? 'legacyEncode32' : 'encode32'}(subKernelResult_${this.subKernels[i].name})`\n        );\n      }\n    }\n    return utils.linesToString(result);\n  }\n\n  getMainResultKernelMemoryOptimizedFloats(result, channel) {\n    result.push(\n      '  threadId = indexTo3D(index, uOutputDim)',\n      '  kernel()',\n      `  data0.${channel} = kernelResult`\n    );\n  }\n\n  getMainResultSubKernelMemoryOptimizedFloats(result, channel) {\n    if (!this.subKernels) return result;\n    for (let i = 0; i < this.subKernels.length; i++) {\n      const subKernel = this.subKernels[i];\n      if (subKernel.returnType === 'Integer') {\n        result.push(\n          `  data${i + 1}.${channel} = float(subKernelResult_${subKernel.name})`\n        );\n      } else {\n        result.push(\n          `  data${i + 1}.${channel} = subKernelResult_${subKernel.name}`\n        );\n      }\n    }\n  }\n\n  getMainResultKernelNumberTexture() {\n    return [\n      '  threadId = indexTo3D(index, uOutputDim)',\n      '  kernel()',\n      '  data0[0] = kernelResult',\n    ];\n  }\n\n  getMainResultSubKernelNumberTexture() {\n    const result = [];\n    if (!this.subKernels) return result;\n    for (let i = 0; i < this.subKernels.length; ++i) {\n      const subKernel = this.subKernels[i];\n      if (subKernel.returnType === 'Integer') {\n        result.push(\n          `  data${i + 1}[0] = float(subKernelResult_${subKernel.name})`\n        );\n      } else {\n        result.push(\n          `  data${i + 1}[0] = subKernelResult_${subKernel.name}`\n        );\n      }\n    }\n    return result;\n  }\n\n  getMainResultKernelArray2Texture() {\n    return [\n      '  threadId = indexTo3D(index, uOutputDim)',\n      '  kernel()',\n      '  data0[0] = kernelResult[0]',\n      '  data0[1] = kernelResult[1]',\n    ];\n  }\n\n  getMainResultSubKernelArray2Texture() {\n    const result = [];\n    if (!this.subKernels) return result;\n    for (let i = 0; i < this.subKernels.length; ++i) {\n      const subKernel = this.subKernels[i];\n      result.push(\n        `  data${i + 1}[0] = subKernelResult_${subKernel.name}[0]`,\n        `  data${i + 1}[1] = subKernelResult_${subKernel.name}[1]`\n      );\n    }\n    return result;\n  }\n\n  getMainResultKernelArray3Texture() {\n    return [\n      '  threadId = indexTo3D(index, uOutputDim)',\n      '  kernel()',\n      '  data0[0] = kernelResult[0]',\n      '  data0[1] = kernelResult[1]',\n      '  data0[2] = kernelResult[2]',\n    ];\n  }\n\n  getMainResultSubKernelArray3Texture() {\n    const result = [];\n    if (!this.subKernels) return result;\n    for (let i = 0; i < this.subKernels.length; ++i) {\n      const subKernel = this.subKernels[i];\n      result.push(\n        `  data${i + 1}[0] = subKernelResult_${subKernel.name}[0]`,\n        `  data${i + 1}[1] = subKernelResult_${subKernel.name}[1]`,\n        `  data${i + 1}[2] = subKernelResult_${subKernel.name}[2]`\n      );\n    }\n    return result;\n  }\n\n  getMainResultKernelArray4Texture() {\n    return [\n      '  threadId = indexTo3D(index, uOutputDim)',\n      '  kernel()',\n      '  data0 = kernelResult',\n    ];\n  }\n\n  getMainResultSubKernelArray4Texture() {\n    const result = [];\n    if (!this.subKernels) return result;\n    for (let i = 0; i < this.subKernels.length; ++i) {\n      result.push(\n        `  data${i + 1} = subKernelResult_${this.subKernels[i].name}`\n      );\n    }\n    return result;\n  }\n\n  destroyExtensions() {\n    this.extensions.EXT_color_buffer_float = null;\n    this.extensions.OES_texture_float_linear = null;\n  }\n\n  toJSON() {\n    const json = super.toJSON();\n    json.functionNodes = FunctionBuilder.fromKernel(this, WebGL2FunctionNode).toJSON();\n    json.settings.threadDim = this.threadDim;\n    return json;\n  }\n}\n\nmodule.exports = {\n  WebGL2Kernel\n};\n},{\"../../utils\":114,\"../function-builder\":9,\"../web-gl/kernel\":70,\"./fragment-shader\":72,\"./function-node\":73,\"./kernel-value-maps\":74,\"./vertex-shader\":106}],106:[function(require,module,exports){\nconst vertexShader = `#version 300 es\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nin vec2 aPos;\nin vec2 aTexCoord;\n\nout vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}`;\n\nmodule.exports = {\n  vertexShader\n};\n},{}],107:[function(require,module,exports){\nconst lib = require('./index');\nconst GPU = lib.GPU;\nfor (const p in lib) {\n  if (!lib.hasOwnProperty(p)) continue;\n  if (p === 'GPU') continue; \n  GPU[p] = lib[p];\n}\n\nif (typeof window !== 'undefined') {\n  bindTo(window);\n}\nif (typeof self !== 'undefined') {\n  bindTo(self);\n}\n\nfunction bindTo(target) {\n  if (target.GPU) return;\n  Object.defineProperty(target, 'GPU', {\n    get() {\n      return GPU;\n    }\n  });\n}\n\nmodule.exports = lib;\n},{\"./index\":109}],108:[function(require,module,exports){\nconst { gpuMock } = require('gpu-mock.js');\nconst { utils } = require('./utils');\nconst { Kernel } = require('./backend/kernel');\nconst { CPUKernel } = require('./backend/cpu/kernel');\nconst { HeadlessGLKernel } = require('./backend/headless-gl/kernel');\nconst { WebGL2Kernel } = require('./backend/web-gl2/kernel');\nconst { WebGLKernel } = require('./backend/web-gl/kernel');\nconst { kernelRunShortcut } = require('./kernel-run-shortcut');\n\n\nconst kernelOrder = [HeadlessGLKernel, WebGL2Kernel, WebGLKernel];\n\nconst kernelTypes = ['gpu', 'cpu'];\n\nconst internalKernels = {\n  'headlessgl': HeadlessGLKernel,\n  'webgl2': WebGL2Kernel,\n  'webgl': WebGLKernel,\n};\n\nlet validate = true;\n\nclass GPU {\n  static disableValidation() {\n    validate = false;\n  }\n\n  static enableValidation() {\n    validate = true;\n  }\n\n  static get isGPUSupported() {\n    return kernelOrder.some(Kernel => Kernel.isSupported);\n  }\n\n  static get isKernelMapSupported() {\n    return kernelOrder.some(Kernel => Kernel.isSupported && Kernel.features.kernelMap);\n  }\n\n  static get isOffscreenCanvasSupported() {\n    return (typeof Worker !== 'undefined' && typeof OffscreenCanvas !== 'undefined') || typeof importScripts !== 'undefined';\n  }\n\n  static get isWebGLSupported() {\n    return WebGLKernel.isSupported;\n  }\n\n  static get isWebGL2Supported() {\n    return WebGL2Kernel.isSupported;\n  }\n\n  static get isHeadlessGLSupported() {\n    return HeadlessGLKernel.isSupported;\n  }\n\n  static get isCanvasSupported() {\n    return typeof HTMLCanvasElement !== 'undefined';\n  }\n\n  static get isGPUHTMLImageArraySupported() {\n    return WebGL2Kernel.isSupported;\n  }\n\n  static get isSinglePrecisionSupported() {\n    return kernelOrder.some(Kernel => Kernel.isSupported && Kernel.features.isFloatRead && Kernel.features.isTextureFloat);\n  }\n\n  constructor(settings) {\n    settings = settings || {};\n    this.canvas = settings.canvas || null;\n    this.context = settings.context || null;\n    this.mode = settings.mode;\n    this.Kernel = null;\n    this.kernels = [];\n    this.functions = [];\n    this.nativeFunctions = [];\n    this.injectedNative = null;\n    if (this.mode === 'dev') return;\n    this.chooseKernel();\n    if (settings.functions) {\n      for (let i = 0; i < settings.functions.length; i++) {\n        this.addFunction(settings.functions[i]);\n      }\n    }\n\n    if (settings.nativeFunctions) {\n      for (const p in settings.nativeFunctions) {\n        if (!settings.nativeFunctions.hasOwnProperty(p)) continue;\n        const s = settings.nativeFunctions[p];\n        const { name, source } = s;\n        this.addNativeFunction(name, source, s);\n      }\n    }\n  }\n\n  chooseKernel() {\n    if (this.Kernel) return;\n\n    let Kernel = null;\n\n    if (this.context) {\n      for (let i = 0; i < kernelOrder.length; i++) {\n        const ExternalKernel = kernelOrder[i];\n        if (ExternalKernel.isContextMatch(this.context)) {\n          if (!ExternalKernel.isSupported) {\n            throw new Error(`Kernel type ${ExternalKernel.name} not supported`);\n          }\n          Kernel = ExternalKernel;\n          break;\n        }\n      }\n      if (Kernel === null) {\n        throw new Error('unknown Context');\n      }\n    } else if (this.mode) {\n      if (this.mode in internalKernels) {\n        if (!validate || internalKernels[this.mode].isSupported) {\n          Kernel = internalKernels[this.mode];\n        }\n      } else if (this.mode === 'gpu') {\n        for (let i = 0; i < kernelOrder.length; i++) {\n          if (kernelOrder[i].isSupported) {\n            Kernel = kernelOrder[i];\n            break;\n          }\n        }\n      } else if (this.mode === 'cpu') {\n        Kernel = CPUKernel;\n      }\n      if (!Kernel) {\n        throw new Error(`A requested mode of \"${this.mode}\" and is not supported`);\n      }\n    } else {\n      for (let i = 0; i < kernelOrder.length; i++) {\n        if (kernelOrder[i].isSupported) {\n          Kernel = kernelOrder[i];\n          break;\n        }\n      }\n      if (!Kernel) {\n        Kernel = CPUKernel;\n      }\n    }\n\n    if (!this.mode) {\n      this.mode = Kernel.mode;\n    }\n    this.Kernel = Kernel;\n  }\n\n  createKernel(source, settings) {\n    if (typeof source === 'undefined') {\n      throw new Error('Missing source parameter');\n    }\n    if (typeof source !== 'object' && !utils.isFunction(source) && typeof source !== 'string') {\n      throw new Error('source parameter not a function');\n    }\n\n    const kernels = this.kernels;\n    if (this.mode === 'dev') {\n      const devKernel = gpuMock(source, upgradeDeprecatedCreateKernelSettings(settings));\n      kernels.push(devKernel);\n      return devKernel;\n    }\n\n    source = typeof source === 'function' ? source.toString() : source;\n    const switchableKernels = {};\n    const settingsCopy = upgradeDeprecatedCreateKernelSettings(settings) || {};\n    if (settings && typeof settings.argumentTypes === 'object') {\n      settingsCopy.argumentTypes = Object.keys(settings.argumentTypes).map(argumentName => settings.argumentTypes[argumentName]);\n    }\n\n    function onRequestFallback(args) {\n      console.warn('Falling back to CPU');\n      const fallbackKernel = new CPUKernel(source, {\n        argumentTypes: kernelRun.argumentTypes,\n        constantTypes: kernelRun.constantTypes,\n        graphical: kernelRun.graphical,\n        loopMaxIterations: kernelRun.loopMaxIterations,\n        constants: kernelRun.constants,\n        dynamicOutput: kernelRun.dynamicOutput,\n        dynamicArgument: kernelRun.dynamicArguments,\n        output: kernelRun.output,\n        precision: kernelRun.precision,\n        pipeline: kernelRun.pipeline,\n        immutable: kernelRun.immutable,\n        optimizeFloatMemory: kernelRun.optimizeFloatMemory,\n        fixIntegerDivisionAccuracy: kernelRun.fixIntegerDivisionAccuracy,\n        functions: kernelRun.functions,\n        nativeFunctions: kernelRun.nativeFunctions,\n        injectedNative: kernelRun.injectedNative,\n        subKernels: kernelRun.subKernels,\n        strictIntegers: kernelRun.strictIntegers,\n        debug: kernelRun.debug,\n      });\n      fallbackKernel.build.apply(fallbackKernel, args);\n      const result = fallbackKernel.run.apply(fallbackKernel, args);\n      kernelRun.replaceKernel(fallbackKernel);\n      return result;\n    }\n\n    function onRequestSwitchKernel(reasons, args, _kernel) {\n      if (_kernel.debug) {\n        console.warn('Switching kernels');\n      }\n      let newOutput = null;\n      if (_kernel.signature && !switchableKernels[_kernel.signature]) {\n        switchableKernels[_kernel.signature] = _kernel;\n      }\n      if (_kernel.dynamicOutput) {\n        for (let i = reasons.length - 1; i >= 0; i--) {\n          const reason = reasons[i];\n          if (reason.type === 'outputPrecisionMismatch') {\n            newOutput = reason.needed;\n          }\n        }\n      }\n\n      const Constructor = _kernel.constructor;\n      const argumentTypes = Constructor.getArgumentTypes(_kernel, args);\n      const signature = Constructor.getSignature(_kernel, argumentTypes);\n      const existingKernel = switchableKernels[signature];\n      if (existingKernel) {\n        existingKernel.onActivate(_kernel);\n        return existingKernel;\n      }\n\n      const newKernel = switchableKernels[signature] = new Constructor(source, {\n        argumentTypes,\n        constantTypes: _kernel.constantTypes,\n        graphical: _kernel.graphical,\n        loopMaxIterations: _kernel.loopMaxIterations,\n        constants: _kernel.constants,\n        dynamicOutput: _kernel.dynamicOutput,\n        dynamicArgument: _kernel.dynamicArguments,\n        context: _kernel.context,\n        canvas: _kernel.canvas,\n        output: newOutput || _kernel.output,\n        precision: _kernel.precision,\n        pipeline: _kernel.pipeline,\n        immutable: _kernel.immutable,\n        optimizeFloatMemory: _kernel.optimizeFloatMemory,\n        fixIntegerDivisionAccuracy: _kernel.fixIntegerDivisionAccuracy,\n        functions: _kernel.functions,\n        nativeFunctions: _kernel.nativeFunctions,\n        injectedNative: _kernel.injectedNative,\n        subKernels: _kernel.subKernels,\n        strictIntegers: _kernel.strictIntegers,\n        debug: _kernel.debug,\n        gpu: _kernel.gpu,\n        validate,\n        returnType: _kernel.returnType,\n        tactic: _kernel.tactic,\n        onRequestFallback,\n        onRequestSwitchKernel,\n        texture: _kernel.texture,\n        mappedTextures: _kernel.mappedTextures,\n        drawBuffersMap: _kernel.drawBuffersMap,\n      });\n      newKernel.build.apply(newKernel, args);\n      kernelRun.replaceKernel(newKernel);\n      kernels.push(newKernel);\n      return newKernel;\n    }\n    const mergedSettings = Object.assign({\n      context: this.context,\n      canvas: this.canvas,\n      functions: this.functions,\n      nativeFunctions: this.nativeFunctions,\n      injectedNative: this.injectedNative,\n      gpu: this,\n      validate,\n      onRequestFallback,\n      onRequestSwitchKernel\n    }, settingsCopy);\n\n    const kernel = new this.Kernel(source, mergedSettings);\n    const kernelRun = kernelRunShortcut(kernel);\n\n    if (!this.canvas) {\n      this.canvas = kernel.canvas;\n    }\n\n    if (!this.context) {\n      this.context = kernel.context;\n    }\n\n    kernels.push(kernel);\n\n    return kernelRun;\n  }\n\n  createKernelMap() {\n    let fn;\n    let settings;\n    const argument2Type = typeof arguments[arguments.length - 2];\n    if (argument2Type === 'function' || argument2Type === 'string') {\n      fn = arguments[arguments.length - 2];\n      settings = arguments[arguments.length - 1];\n    } else {\n      fn = arguments[arguments.length - 1];\n    }\n\n    if (this.mode !== 'dev') {\n      if (!this.Kernel.isSupported || !this.Kernel.features.kernelMap) {\n        if (this.mode && kernelTypes.indexOf(this.mode) < 0) {\n          throw new Error(`kernelMap not supported on ${this.Kernel.name}`);\n        }\n      }\n    }\n\n    const settingsCopy = upgradeDeprecatedCreateKernelSettings(settings);\n    if (settings && typeof settings.argumentTypes === 'object') {\n      settingsCopy.argumentTypes = Object.keys(settings.argumentTypes).map(argumentName => settings.argumentTypes[argumentName]);\n    }\n\n    if (Array.isArray(arguments[0])) {\n      settingsCopy.subKernels = [];\n      const functions = arguments[0];\n      for (let i = 0; i < functions.length; i++) {\n        const source = functions[i].toString();\n        const name = utils.getFunctionNameFromString(source);\n        settingsCopy.subKernels.push({\n          name,\n          source,\n          property: i,\n        });\n      }\n    } else {\n      settingsCopy.subKernels = [];\n      const functions = arguments[0];\n      for (let p in functions) {\n        if (!functions.hasOwnProperty(p)) continue;\n        const source = functions[p].toString();\n        const name = utils.getFunctionNameFromString(source);\n        settingsCopy.subKernels.push({\n          name: name || p,\n          source,\n          property: p,\n        });\n      }\n    }\n    return this.createKernel(fn, settingsCopy);\n  }\n\n  combineKernels() {\n    const firstKernel = arguments[0];\n    const combinedKernel = arguments[arguments.length - 1];\n    if (firstKernel.kernel.constructor.mode === 'cpu') return combinedKernel;\n    const canvas = arguments[0].canvas;\n    const context = arguments[0].context;\n    const max = arguments.length - 1;\n    for (let i = 0; i < max; i++) {\n      arguments[i]\n        .setCanvas(canvas)\n        .setContext(context)\n        .setPipeline(true);\n    }\n\n    return function() {\n      const texture = combinedKernel.apply(this, arguments);\n      if (texture.toArray) {\n        return texture.toArray();\n      }\n      return texture;\n    };\n  }\n\n  setFunctions(functions) {\n    this.functions = functions;\n    return this;\n  }\n\n  setNativeFunctions(nativeFunctions) {\n    this.nativeFunctions = nativeFunctions;\n    return this;\n  }\n\n  addFunction(source, settings) {\n    this.functions.push({ source, settings });\n    return this;\n  }\n\n  addNativeFunction(name, source, settings) {\n    if (this.kernels.length > 0) {\n      throw new Error('Cannot call \"addNativeFunction\" after \"createKernels\" has been called.');\n    }\n    this.nativeFunctions.push(Object.assign({ name, source }, settings));\n    return this;\n  }\n\n  injectNative(source) {\n    this.injectedNative = source;\n    return this;\n  }\n\n  destroy() {\n    return new Promise((resolve, reject) => {\n      if (!this.kernels) {\n        resolve();\n      }\n      setTimeout(() => {\n        try {\n          for (let i = 0; i < this.kernels.length; i++) {\n            this.kernels[i].destroy(true); \n          }\n          let firstKernel = this.kernels[0];\n          if (firstKernel) {\n            if (firstKernel.kernel) {\n              firstKernel = firstKernel.kernel;\n            }\n            if (firstKernel.constructor.destroyContext) {\n              firstKernel.constructor.destroyContext(this.context);\n            }\n          }\n        } catch (e) {\n          reject(e);\n        }\n        resolve();\n      }, 0);\n    });\n  }\n}\n\n\nfunction upgradeDeprecatedCreateKernelSettings(settings) {\n  if (!settings) {\n    return {};\n  }\n  const upgradedSettings = Object.assign({}, settings);\n\n  if (settings.hasOwnProperty('floatOutput')) {\n    utils.warnDeprecated('setting', 'floatOutput', 'precision');\n    upgradedSettings.precision = settings.floatOutput ? 'single' : 'unsigned';\n  }\n  if (settings.hasOwnProperty('outputToTexture')) {\n    utils.warnDeprecated('setting', 'outputToTexture', 'pipeline');\n    upgradedSettings.pipeline = Boolean(settings.outputToTexture);\n  }\n  if (settings.hasOwnProperty('outputImmutable')) {\n    utils.warnDeprecated('setting', 'outputImmutable', 'immutable');\n    upgradedSettings.immutable = Boolean(settings.outputImmutable);\n  }\n  if (settings.hasOwnProperty('floatTextures')) {\n    utils.warnDeprecated('setting', 'floatTextures', 'optimizeFloatMemory');\n    upgradedSettings.optimizeFloatMemory = Boolean(settings.floatTextures);\n  }\n  return upgradedSettings;\n}\n\nmodule.exports = {\n  GPU,\n  kernelOrder,\n  kernelTypes\n};\n},{\"./backend/cpu/kernel\":8,\"./backend/headless-gl/kernel\":34,\"./backend/kernel\":36,\"./backend/web-gl/kernel\":70,\"./backend/web-gl2/kernel\":105,\"./kernel-run-shortcut\":111,\"./utils\":114,\"gpu-mock.js\":4}],109:[function(require,module,exports){\nconst { GPU } = require('./gpu');\nconst { alias } = require('./alias');\nconst { utils } = require('./utils');\nconst { Input, input } = require('./input');\nconst { Texture } = require('./texture');\nconst { FunctionBuilder } = require('./backend/function-builder');\nconst { FunctionNode } = require('./backend/function-node');\nconst { CPUFunctionNode } = require('./backend/cpu/function-node');\nconst { CPUKernel } = require('./backend/cpu/kernel');\n\nconst { HeadlessGLKernel } = require('./backend/headless-gl/kernel');\n\nconst { WebGLFunctionNode } = require('./backend/web-gl/function-node');\nconst { WebGLKernel } = require('./backend/web-gl/kernel');\nconst { kernelValueMaps: webGLKernelValueMaps } = require('./backend/web-gl/kernel-value-maps');\n\nconst { WebGL2FunctionNode } = require('./backend/web-gl2/function-node');\nconst { WebGL2Kernel } = require('./backend/web-gl2/kernel');\nconst { kernelValueMaps: webGL2KernelValueMaps } = require('./backend/web-gl2/kernel-value-maps');\n\nconst { GLKernel } = require('./backend/gl/kernel');\n\nconst { Kernel } = require('./backend/kernel');\n\nconst { FunctionTracer } = require('./backend/function-tracer');\n\nconst mathRandom = require('./plugins/math-random-uniformly-distributed');\n\nmodule.exports = {\n  alias,\n  CPUFunctionNode,\n  CPUKernel,\n  GPU,\n  FunctionBuilder,\n  FunctionNode,\n  HeadlessGLKernel,\n  Input,\n  input,\n  Texture,\n  utils,\n\n  WebGL2FunctionNode,\n  WebGL2Kernel,\n  webGL2KernelValueMaps,\n\n  WebGLFunctionNode,\n  WebGLKernel,\n  webGLKernelValueMaps,\n\n  GLKernel,\n  Kernel,\n  FunctionTracer,\n\n  plugins: {\n    mathRandom\n  }\n};\n},{\"./alias\":5,\"./backend/cpu/function-node\":6,\"./backend/cpu/kernel\":8,\"./backend/function-builder\":9,\"./backend/function-node\":10,\"./backend/function-tracer\":11,\"./backend/gl/kernel\":13,\"./backend/headless-gl/kernel\":34,\"./backend/kernel\":36,\"./backend/web-gl/function-node\":38,\"./backend/web-gl/kernel\":70,\"./backend/web-gl/kernel-value-maps\":39,\"./backend/web-gl2/function-node\":73,\"./backend/web-gl2/kernel\":105,\"./backend/web-gl2/kernel-value-maps\":74,\"./gpu\":108,\"./input\":110,\"./plugins/math-random-uniformly-distributed\":112,\"./texture\":113,\"./utils\":114}],110:[function(require,module,exports){\nclass Input {\n  constructor(value, size) {\n    this.value = value;\n    if (Array.isArray(size)) {\n      this.size = size;\n    } else {\n      this.size = new Int32Array(3);\n      if (size.z) {\n        this.size = new Int32Array([size.x, size.y, size.z]);\n      } else if (size.y) {\n        this.size = new Int32Array([size.x, size.y]);\n      } else {\n        this.size = new Int32Array([size.x]);\n      }\n    }\n\n    const [w, h, d] = this.size;\n    if (d) {\n      if (this.value.length !== (w * h * d)) {\n        throw new Error(`Input size ${this.value.length} does not match ${w} * ${h} * ${d} = ${(h * w * d)}`);\n      }\n    } else if (h) {\n      if (this.value.length !== (w * h)) {\n        throw new Error(`Input size ${this.value.length} does not match ${w} * ${h} = ${(h * w)}`);\n      }\n    } else {\n      if (this.value.length !== w) {\n        throw new Error(`Input size ${this.value.length} does not match ${w}`);\n      }\n    }\n\n  }\n\n  toArray() {\n    const { utils } = require('./utils');\n    const [w, h, d] = this.size;\n    if (d) {\n      return utils.erectMemoryOptimized3DFloat(this.value.subarray ? this.value : new Float32Array(this.value), w, h, d);\n    } else if (h) {\n      return utils.erectMemoryOptimized2DFloat(this.value.subarray ? this.value : new Float32Array(this.value), w, h);\n    } else {\n      return this.value;\n    }\n  }\n}\n\nfunction input(value, size) {\n  return new Input(value, size);\n}\n\nmodule.exports = {\n  Input,\n  input\n};\n},{\"./utils\":114}],111:[function(require,module,exports){\nconst { utils } = require('./utils');\n\nfunction kernelRunShortcut(kernel) {\n  let run = function() {\n    kernel.build.apply(kernel, arguments);\n    run = function() {\n      let result = kernel.run.apply(kernel, arguments);\n      if (kernel.switchingKernels) {\n        const reasons = kernel.resetSwitchingKernels();\n        const newKernel = kernel.onRequestSwitchKernel(reasons, arguments, kernel);\n        shortcut.kernel = kernel = newKernel;\n        result = newKernel.run.apply(newKernel, arguments);\n      }\n      if (kernel.renderKernels) {\n        return kernel.renderKernels();\n      } else if (kernel.renderOutput) {\n        return kernel.renderOutput();\n      } else {\n        return result;\n      }\n    };\n    return run.apply(kernel, arguments);\n  };\n  const shortcut = function() {\n    return run.apply(kernel, arguments);\n  };\n  shortcut.exec = function() {\n    return new Promise((accept, reject) => {\n      try {\n        accept(run.apply(this, arguments));\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n  shortcut.replaceKernel = function(replacementKernel) {\n    kernel = replacementKernel;\n    bindKernelToShortcut(kernel, shortcut);\n  };\n\n  bindKernelToShortcut(kernel, shortcut);\n  return shortcut;\n}\n\nfunction bindKernelToShortcut(kernel, shortcut) {\n  if (shortcut.kernel) {\n    shortcut.kernel = kernel;\n    return;\n  }\n  const properties = utils.allPropertiesOf(kernel);\n  for (let i = 0; i < properties.length; i++) {\n    const property = properties[i];\n    if (property[0] === '_' && property[1] === '_') continue;\n    if (typeof kernel[property] === 'function') {\n      if (property.substring(0, 3) === 'add' || property.substring(0, 3) === 'set') {\n        shortcut[property] = function() {\n          shortcut.kernel[property].apply(shortcut.kernel, arguments);\n          return shortcut;\n        };\n      } else {\n        shortcut[property] = function() {\n          return shortcut.kernel[property].apply(shortcut.kernel, arguments);\n        };\n      }\n    } else {\n      shortcut.__defineGetter__(property, () => shortcut.kernel[property]);\n      shortcut.__defineSetter__(property, (value) => {\n        shortcut.kernel[property] = value;\n      });\n    }\n  }\n  shortcut.kernel = kernel;\n}\nmodule.exports = {\n  kernelRunShortcut\n};\n},{\"./utils\":114}],112:[function(require,module,exports){\nconst source = `// https://www.shadertoy.com/view/4t2SDh\n//note: uniformly distributed, normalized rand, [0,1]\nhighp float randomSeedShift = 1.0;\nhighp float slide = 1.0;\nuniform highp float randomSeed1;\nuniform highp float randomSeed2;\n\nhighp float nrand(highp vec2 n) {\n  highp float result = fract(sin(dot((n.xy + 1.0) * vec2(randomSeed1 * slide, randomSeed2 * randomSeedShift), vec2(12.9898, 78.233))) * 43758.5453);\n  randomSeedShift = result;\n  if (randomSeedShift > 0.5) {\n    slide += 0.00009; \n  } else {\n    slide += 0.0009;\n  }\n  return result;\n}`;\n\nconst name = 'math-random-uniformly-distributed';\n\nconst functionMatch = `Math.random()`;\n\nconst functionReplace = `nrand(vTexCoord)`;\n\nconst functionReturnType = 'Number';\nconst onBeforeRun = (kernel) => {\n  kernel.setUniform1f('randomSeed1', Math.random());\n  kernel.setUniform1f('randomSeed2', Math.random());\n};\n\nconst plugin = {\n  name,\n  onBeforeRun,\n  functionMatch,\n  functionReplace,\n  functionReturnType,\n  source\n};\n\nmodule.exports = plugin;\n},{}],113:[function(require,module,exports){\nclass Texture {\n  constructor(settings) {\n    const {\n      texture,\n      size,\n      dimensions,\n      output,\n      context,\n      type = 'NumberTexture',\n      kernel,\n      internalFormat,\n      textureFormat\n    } = settings;\n    if (!output) throw new Error('settings property \"output\" required.');\n    if (!context) throw new Error('settings property \"context\" required.');\n    if (!texture) throw new Error('settings property \"texture\" required.');\n    if (!kernel) throw new Error('settings property \"kernel\" required.');\n    this.texture = texture;\n    if (texture._refs) {\n      texture._refs++;\n    } else {\n      texture._refs = 1;\n    }\n    this.size = size;\n    this.dimensions = dimensions;\n    this.output = output;\n    this.context = context;\n    this.kernel = kernel;\n    this.type = type;\n    this._deleted = false;\n    this.internalFormat = internalFormat;\n    this.textureFormat = textureFormat;\n  }\n\n  toArray() {\n    throw new Error(`Not implemented on ${this.constructor.name}`);\n  }\n\n  clone() {\n    throw new Error(`Not implemented on ${this.constructor.name}`);\n  }\n\n  delete() {\n    throw new Error(`Not implemented on ${this.constructor.name}`);\n  }\n\n  clear() {\n    throw new Error(`Not implemented on ${this.constructor.name}`);\n  }\n}\n\nmodule.exports = {\n  Texture\n};\n},{}],114:[function(require,module,exports){\nconst acorn = require('acorn');\nconst { Input } = require('./input');\nconst { Texture } = require('./texture');\n\nconst FUNCTION_NAME = /function ([^(]*)/;\nconst STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\nconst ARGUMENT_NAMES = /([^\\s,]+)/g;\n\nconst utils = {\n  systemEndianness() {\n    return _systemEndianness;\n  },\n  getSystemEndianness() {\n    const b = new ArrayBuffer(4);\n    const a = new Uint32Array(b);\n    const c = new Uint8Array(b);\n    a[0] = 0xdeadbeef;\n    if (c[0] === 0xef) return 'LE';\n    if (c[0] === 0xde) return 'BE';\n    throw new Error('unknown endianness');\n  },\n\n  isFunction(funcObj) {\n    return typeof(funcObj) === 'function';\n  },\n\n  isFunctionString(fn) {\n    if (typeof fn === 'string') {\n      return (fn\n        .slice(0, 'function'.length)\n        .toLowerCase() === 'function');\n    }\n    return false;\n  },\n\n  getFunctionNameFromString(funcStr) {\n    const result = FUNCTION_NAME.exec(funcStr);\n    if (!result || result.length === 0) return null;\n    return result[1].trim();\n  },\n\n  getFunctionBodyFromString(funcStr) {\n    return funcStr.substring(funcStr.indexOf('{') + 1, funcStr.lastIndexOf('}'));\n  },\n\n  getArgumentNamesFromString(fn) {\n    const fnStr = fn.replace(STRIP_COMMENTS, '');\n    let result = fnStr.slice(fnStr.indexOf('(') + 1, fnStr.indexOf(')')).match(ARGUMENT_NAMES);\n    if (result === null) {\n      result = [];\n    }\n    return result;\n  },\n\n  clone(obj) {\n    if (obj === null || typeof obj !== 'object' || obj.hasOwnProperty('isActiveClone')) return obj;\n\n    const temp = obj.constructor(); \n\n    for (let key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        obj.isActiveClone = null;\n        temp[key] = utils.clone(obj[key]);\n        delete obj.isActiveClone;\n      }\n    }\n\n    return temp;\n  },\n\n  isArray(array) {\n    return !isNaN(array.length);\n  },\n\n  getVariableType(value, strictIntegers) {\n    if (utils.isArray(value)) {\n      if (value.length > 0 && value[0].nodeName === 'IMG') {\n        return 'HTMLImageArray';\n      }\n      return 'Array';\n    }\n\n    switch (value.constructor) {\n      case Boolean:\n        return 'Boolean';\n      case Number:\n        if (strictIntegers && Number.isInteger(value)) {\n          return 'Integer';\n        }\n        return 'Float';\n      case Texture:\n        return value.type;\n      case Input:\n        return 'Input';\n    }\n    if ('nodeName' in value) {\n      switch (value.nodeName) {\n        case 'IMG':\n          return 'HTMLImage';\n        case 'CANVAS':\n          return 'HTMLImage';\n        case 'VIDEO':\n          return 'HTMLVideo';\n      }\n    } else if (value.hasOwnProperty('type')) {\n      return value.type;\n    } else if (typeof OffscreenCanvas !== 'undefined' && value instanceof OffscreenCanvas) {\n      return 'OffscreenCanvas';\n    } else if (typeof ImageBitmap !== 'undefined' && value instanceof ImageBitmap) {\n      return 'ImageBitmap';\n    } else if (typeof ImageData !== 'undefined' && value instanceof ImageData) {\n      return 'ImageData';\n    }\n    return 'Unknown';\n  },\n\n  getKernelTextureSize(settings, dimensions) {\n    let [w, h, d] = dimensions;\n    let texelCount = (w || 1) * (h || 1) * (d || 1);\n\n    if (settings.optimizeFloatMemory && settings.precision === 'single') {\n      w = texelCount = Math.ceil(texelCount / 4);\n    }\n    if (h > 1 && w * h === texelCount) {\n      return new Int32Array([w, h]);\n    }\n    return utils.closestSquareDimensions(texelCount);\n  },\n\n  closestSquareDimensions(length) {\n    const sqrt = Math.sqrt(length);\n    let high = Math.ceil(sqrt);\n    let low = Math.floor(sqrt);\n    while (high * low < length) {\n      high--;\n      low = Math.ceil(length / high);\n    }\n    return new Int32Array([low, Math.ceil(length / low)]);\n  },\n\n  getMemoryOptimizedFloatTextureSize(dimensions, bitRatio) {\n    const totalArea = utils.roundTo((dimensions[0] || 1) * (dimensions[1] || 1) * (dimensions[2] || 1) * (dimensions[3] || 1), 4);\n    const texelCount = totalArea / bitRatio;\n    return utils.closestSquareDimensions(texelCount);\n  },\n\n  getMemoryOptimizedPackedTextureSize(dimensions, bitRatio) {\n    const [w, h, d] = dimensions;\n    const totalArea = utils.roundTo((w || 1) * (h || 1) * (d || 1), 4);\n    const texelCount = totalArea / (4 / bitRatio);\n    return utils.closestSquareDimensions(texelCount);\n  },\n\n  roundTo(n, d) {\n    return Math.floor((n + d - 1) / d) * d;\n  },\n  getDimensions(x, pad) {\n    let ret;\n    if (utils.isArray(x)) {\n      const dim = [];\n      let temp = x;\n      while (utils.isArray(temp)) {\n        dim.push(temp.length);\n        temp = temp[0];\n      }\n      ret = dim.reverse();\n    } else if (x instanceof Texture) {\n      ret = x.output;\n    } else if (x instanceof Input) {\n      ret = x.size;\n    } else {\n      throw new Error(`Unknown dimensions of ${x}`);\n    }\n\n    if (pad) {\n      ret = Array.from(ret);\n      while (ret.length < 3) {\n        ret.push(1);\n      }\n    }\n\n    return new Int32Array(ret);\n  },\n\n  flatten2dArrayTo(array, target) {\n    let offset = 0;\n    for (let y = 0; y < array.length; y++) {\n      target.set(array[y], offset);\n      offset += array[y].length;\n    }\n  },\n\n  flatten3dArrayTo(array, target) {\n    let offset = 0;\n    for (let z = 0; z < array.length; z++) {\n      for (let y = 0; y < array[z].length; y++) {\n        target.set(array[z][y], offset);\n        offset += array[z][y].length;\n      }\n    }\n  },\n\n  flatten4dArrayTo(array, target) {\n    let offset = 0;\n    for (let l = 0; l < array.length; l++) {\n      for (let z = 0; z < array[l].length; z++) {\n        for (let y = 0; y < array[l][z].length; y++) {\n          target.set(array[l][z][y], offset);\n          offset += array[l][z][y].length;\n        }\n      }\n    }\n  },\n\n  flattenTo(array, target) {\n    if (utils.isArray(array[0])) {\n      if (utils.isArray(array[0][0])) {\n        if (utils.isArray(array[0][0][0])) {\n          utils.flatten4dArrayTo(array, target);\n        } else {\n          utils.flatten3dArrayTo(array, target);\n        }\n      } else {\n        utils.flatten2dArrayTo(array, target);\n      }\n    } else {\n      target.set(array);\n    }\n  },\n\n  splitArray(array, part) {\n    const result = [];\n    for (let i = 0; i < array.length; i += part) {\n      result.push(new array.constructor(array.buffer, i * 4 + array.byteOffset, part));\n    }\n    return result;\n  },\n\n  getAstString(source, ast) {\n    const lines = Array.isArray(source) ? source : source.split(/\\r?\\n/g);\n    const start = ast.loc.start;\n    const end = ast.loc.end;\n    const result = [];\n    if (start.line === end.line) {\n      result.push(lines[start.line - 1].substring(start.column, end.column));\n    } else {\n      result.push(lines[start.line - 1].slice(start.column));\n      for (let i = start.line; i < end.line; i++) {\n        result.push(lines[i]);\n      }\n      result.push(lines[end.line - 1].slice(0, end.column));\n    }\n    return result.join('\\n');\n  },\n\n  allPropertiesOf(obj) {\n    const props = [];\n\n    do {\n      props.push.apply(props, Object.getOwnPropertyNames(obj));\n    } while (obj = Object.getPrototypeOf(obj));\n\n    return props;\n  },\n\n  linesToString(lines) {\n    if (lines.length > 0) {\n      return lines.join(';\\n') + ';\\n';\n    } else {\n      return '\\n';\n    }\n  },\n  warnDeprecated(type, oldName, newName) {\n    if (newName) {\n      console.warn(`You are using a deprecated ${ type } \"${ oldName }\". It has been replaced with \"${ newName }\". Fixing, but please upgrade as it will soon be removed.`);\n    } else {\n      console.warn(`You are using a deprecated ${ type } \"${ oldName }\". It has been removed. Fixing, but please upgrade as it will soon be removed.`);\n    }\n  },\n  flipPixels: (pixels, width, height) => {\n    const halfHeight = height / 2 | 0; \n    const bytesPerRow = width * 4;\n    const temp = new Uint8ClampedArray(width * 4);\n    const result = pixels.slice(0);\n    for (let y = 0; y < halfHeight; ++y) {\n      const topOffset = y * bytesPerRow;\n      const bottomOffset = (height - y - 1) * bytesPerRow;\n\n      temp.set(result.subarray(topOffset, topOffset + bytesPerRow));\n\n      result.copyWithin(topOffset, bottomOffset, bottomOffset + bytesPerRow);\n\n      result.set(temp, bottomOffset);\n    }\n    return result;\n  },\n  erectPackedFloat: (array, width) => {\n    return array.subarray(0, width);\n  },\n  erect2DPackedFloat: (array, width, height) => {\n    const yResults = new Array(height);\n    for (let y = 0; y < height; y++) {\n      const xStart = y * width;\n      const xEnd = xStart + width;\n      yResults[y] = array.subarray(xStart, xEnd);\n    }\n    return yResults;\n  },\n  erect3DPackedFloat: (array, width, height, depth) => {\n    const zResults = new Array(depth);\n    for (let z = 0; z < depth; z++) {\n      const yResults = new Array(height);\n      for (let y = 0; y < height; y++) {\n        const xStart = (z * height * width) + y * width;\n        const xEnd = xStart + width;\n        yResults[y] = array.subarray(xStart, xEnd);\n      }\n      zResults[z] = yResults;\n    }\n    return zResults;\n  },\n  erectMemoryOptimizedFloat: (array, width) => {\n    return array.subarray(0, width);\n  },\n  erectMemoryOptimized2DFloat: (array, width, height) => {\n    const yResults = new Array(height);\n    for (let y = 0; y < height; y++) {\n      const offset = y * width;\n      yResults[y] = array.subarray(offset, offset + width);\n    }\n    return yResults;\n  },\n  erectMemoryOptimized3DFloat: (array, width, height, depth) => {\n    const zResults = new Array(depth);\n    for (let z = 0; z < depth; z++) {\n      const yResults = new Array(height);\n      for (let y = 0; y < height; y++) {\n        const offset = (z * height * width) + (y * width);\n        yResults[y] = array.subarray(offset, offset + width);\n      }\n      zResults[z] = yResults;\n    }\n    return zResults;\n  },\n  erectFloat: (array, width) => {\n    const xResults = new Float32Array(width);\n    let i = 0;\n    for (let x = 0; x < width; x++) {\n      xResults[x] = array[i];\n      i += 4;\n    }\n    return xResults;\n  },\n  erect2DFloat: (array, width, height) => {\n    const yResults = new Array(height);\n    let i = 0;\n    for (let y = 0; y < height; y++) {\n      const xResults = new Float32Array(width);\n      for (let x = 0; x < width; x++) {\n        xResults[x] = array[i];\n        i += 4;\n      }\n      yResults[y] = xResults;\n    }\n    return yResults;\n  },\n  erect3DFloat: (array, width, height, depth) => {\n    const zResults = new Array(depth);\n    let i = 0;\n    for (let z = 0; z < depth; z++) {\n      const yResults = new Array(height);\n      for (let y = 0; y < height; y++) {\n        const xResults = new Float32Array(width);\n        for (let x = 0; x < width; x++) {\n          xResults[x] = array[i];\n          i += 4;\n        }\n        yResults[y] = xResults;\n      }\n      zResults[z] = yResults;\n    }\n    return zResults;\n  },\n  erectArray2: (array, width) => {\n    const xResults = new Array(width);\n    const xResultsMax = width * 4;\n    let i = 0;\n    for (let x = 0; x < xResultsMax; x += 4) {\n      xResults[i++] = array.subarray(x, x + 2);\n    }\n    return xResults;\n  },\n  erect2DArray2: (array, width, height) => {\n    const yResults = new Array(height);\n    const XResultsMax = width * 4;\n    for (let y = 0; y < height; y++) {\n      const xResults = new Array(width);\n      const offset = y * XResultsMax;\n      let i = 0;\n      for (let x = 0; x < XResultsMax; x += 4) {\n        xResults[i++] = array.subarray(x + offset, x + offset + 2);\n      }\n      yResults[y] = xResults;\n    }\n    return yResults;\n  },\n  erect3DArray2: (array, width, height, depth) => {\n    const xResultsMax = width * 4;\n    const zResults = new Array(depth);\n    for (let z = 0; z < depth; z++) {\n      const yResults = new Array(height);\n      for (let y = 0; y < height; y++) {\n        const xResults = new Array(width);\n        const offset = (z * xResultsMax * height) + (y * xResultsMax);\n        let i = 0;\n        for (let x = 0; x < xResultsMax; x += 4) {\n          xResults[i++] = array.subarray(x + offset, x + offset + 2);\n        }\n        yResults[y] = xResults;\n      }\n      zResults[z] = yResults;\n    }\n    return zResults;\n  },\n  erectArray3: (array, width) => {\n    const xResults = new Array(width);\n    const xResultsMax = width * 4;\n    let i = 0;\n    for (let x = 0; x < xResultsMax; x += 4) {\n      xResults[i++] = array.subarray(x, x + 3);\n    }\n    return xResults;\n  },\n  erect2DArray3: (array, width, height) => {\n    const xResultsMax = width * 4;\n    const yResults = new Array(height);\n    for (let y = 0; y < height; y++) {\n      const xResults = new Array(width);\n      const offset = y * xResultsMax;\n      let i = 0;\n      for (let x = 0; x < xResultsMax; x += 4) {\n        xResults[i++] = array.subarray(x + offset, x + offset + 3);\n      }\n      yResults[y] = xResults;\n    }\n    return yResults;\n  },\n  erect3DArray3: (array, width, height, depth) => {\n    const xResultsMax = width * 4;\n    const zResults = new Array(depth);\n    for (let z = 0; z < depth; z++) {\n      const yResults = new Array(height);\n      for (let y = 0; y < height; y++) {\n        const xResults = new Array(width);\n        const offset = (z * xResultsMax * height) + (y * xResultsMax);\n        let i = 0;\n        for (let x = 0; x < xResultsMax; x += 4) {\n          xResults[i++] = array.subarray(x + offset, x + offset + 3);\n        }\n        yResults[y] = xResults;\n      }\n      zResults[z] = yResults;\n    }\n    return zResults;\n  },\n  erectArray4: (array, width) => {\n    const xResults = new Array(array);\n    const xResultsMax = width * 4;\n    let i = 0;\n    for (let x = 0; x < xResultsMax; x += 4) {\n      xResults[i++] = array.subarray(x, x + 4);\n    }\n    return xResults;\n  },\n  erect2DArray4: (array, width, height) => {\n    const xResultsMax = width * 4;\n    const yResults = new Array(height);\n    for (let y = 0; y < height; y++) {\n      const xResults = new Array(width);\n      const offset = y * xResultsMax;\n      let i = 0;\n      for (let x = 0; x < xResultsMax; x += 4) {\n        xResults[i++] = array.subarray(x + offset, x + offset + 4);\n      }\n      yResults[y] = xResults;\n    }\n    return yResults;\n  },\n  erect3DArray4: (array, width, height, depth) => {\n    const xResultsMax = width * 4;\n    const zResults = new Array(depth);\n    for (let z = 0; z < depth; z++) {\n      const yResults = new Array(height);\n      for (let y = 0; y < height; y++) {\n        const xResults = new Array(width);\n        const offset = (z * xResultsMax * height) + (y * xResultsMax);\n        let i = 0;\n        for (let x = 0; x < xResultsMax; x += 4) {\n          xResults[i++] = array.subarray(x + offset, x + offset + 4);\n        }\n        yResults[y] = xResults;\n      }\n      zResults[z] = yResults;\n    }\n    return zResults;\n  },\n\n  flattenFunctionToString: (source, settings) => {\n    const { findDependency, thisLookup, doNotDefine } = settings;\n    let flattened = settings.flattened;\n    if (!flattened) {\n      flattened = settings.flattened = {};\n    }\n    const ast = acorn.parse(source);\n    const functionDependencies = [];\n    let indent = 0;\n\n    function flatten(ast) {\n      if (Array.isArray(ast)) {\n        const results = [];\n        for (let i = 0; i < ast.length; i++) {\n          results.push(flatten(ast[i]));\n        }\n        return results.join('');\n      }\n      switch (ast.type) {\n        case 'Program':\n          return flatten(ast.body) + (ast.body[0].type === 'VariableDeclaration' ? ';' : '');\n        case 'FunctionDeclaration':\n          return `function ${ast.id.name}(${ast.params.map(flatten).join(', ')}) ${ flatten(ast.body) }`;\n        case 'BlockStatement': {\n          const result = [];\n          indent += 2;\n          for (let i = 0; i < ast.body.length; i++) {\n            const flat = flatten(ast.body[i]);\n            if (flat) {\n              result.push(' '.repeat(indent) + flat, ';\\n');\n            }\n          }\n          indent -= 2;\n          return `{\\n${result.join('')}}`;\n        }\n        case 'VariableDeclaration':\n          const declarations = utils.normalizeDeclarations(ast)\n            .map(flatten)\n            .filter(r => r !== null);\n          if (declarations.length < 1) {\n            return '';\n          } else {\n            return `${ast.kind} ${declarations.join(',')}`;\n          }\n          case 'VariableDeclarator':\n            if (ast.init.object && ast.init.object.type === 'ThisExpression') {\n              const lookup = thisLookup(ast.init.property.name, true);\n              if (lookup) {\n                return `${ast.id.name} = ${flatten(ast.init)}`;\n              } else {\n                return null;\n              }\n            } else {\n              return `${ast.id.name} = ${flatten(ast.init)}`;\n            }\n            case 'CallExpression': {\n              if (ast.callee.property.name === 'subarray') {\n                return `${flatten(ast.callee.object)}.${flatten(ast.callee.property)}(${ast.arguments.map(value => flatten(value)).join(', ')})`;\n              }\n              if (ast.callee.object.name === 'gl' || ast.callee.object.name === 'context') {\n                return `${flatten(ast.callee.object)}.${flatten(ast.callee.property)}(${ast.arguments.map(value => flatten(value)).join(', ')})`;\n              }\n              if (ast.callee.object.type === 'ThisExpression') {\n                functionDependencies.push(findDependency('this', ast.callee.property.name));\n                return `${ast.callee.property.name}(${ast.arguments.map(value => flatten(value)).join(', ')})`;\n              } else if (ast.callee.object.name) {\n                const foundSource = findDependency(ast.callee.object.name, ast.callee.property.name);\n                if (foundSource === null) {\n                  return `${ast.callee.object.name}.${ast.callee.property.name}(${ast.arguments.map(value => flatten(value)).join(', ')})`;\n                } else {\n                  functionDependencies.push(foundSource);\n                  return `${ast.callee.property.name}(${ast.arguments.map(value => flatten(value)).join(', ')})`;\n                }\n              } else if (ast.callee.object.type === 'MemberExpression') {\n                return `${flatten(ast.callee.object)}.${ast.callee.property.name}(${ast.arguments.map(value => flatten(value)).join(', ')})`;\n              } else {\n                throw new Error('unknown ast.callee');\n              }\n            }\n            case 'ReturnStatement':\n              return `return ${flatten(ast.argument)}`;\n            case 'BinaryExpression':\n              return `(${flatten(ast.left)}${ast.operator}${flatten(ast.right)})`;\n            case 'UnaryExpression':\n              if (ast.prefix) {\n                return `${ast.operator} ${flatten(ast.argument)}`;\n              } else {\n                return `${flatten(ast.argument)} ${ast.operator}`;\n              }\n              case 'ExpressionStatement':\n                return `${flatten(ast.expression)}`;\n              case 'SequenceExpression':\n                return `(${flatten(ast.expressions)})`;\n              case 'ArrowFunctionExpression':\n                return `(${ast.params.map(flatten).join(', ')}) => ${flatten(ast.body)}`;\n              case 'Literal':\n                return ast.raw;\n              case 'Identifier':\n                return ast.name;\n              case 'MemberExpression':\n                if (ast.object.type === 'ThisExpression') {\n                  return thisLookup(ast.property.name);\n                }\n                if (ast.computed) {\n                  return `${flatten(ast.object)}[${flatten(ast.property)}]`;\n                }\n                return flatten(ast.object) + '.' + flatten(ast.property);\n              case 'ThisExpression':\n                return 'this';\n              case 'NewExpression':\n                return `new ${flatten(ast.callee)}(${ast.arguments.map(value => flatten(value)).join(', ')})`;\n              case 'ForStatement':\n                return `for (${flatten(ast.init)};${flatten(ast.test)};${flatten(ast.update)}) ${flatten(ast.body)}`;\n              case 'AssignmentExpression':\n                return `${flatten(ast.left)}${ast.operator}${flatten(ast.right)}`;\n              case 'UpdateExpression':\n                return `${flatten(ast.argument)}${ast.operator}`;\n              case 'IfStatement':\n                return `if (${flatten(ast.test)}) ${flatten(ast.consequent)}`;\n              case 'ThrowStatement':\n                return `throw ${flatten(ast.argument)}`;\n              case 'ObjectPattern':\n                return ast.properties.map(flatten).join(', ');\n              case 'ArrayPattern':\n                return ast.elements.map(flatten).join(', ');\n              case 'DebuggerStatement':\n                return 'debugger;';\n              case 'ConditionalExpression':\n                return `${flatten(ast.test)}?${flatten(ast.consequent)}:${flatten(ast.alternate)}`;\n              case 'Property':\n                if (ast.kind === 'init') {\n                  return flatten(ast.key);\n                }\n      }\n      throw new Error(`unhandled ast.type of ${ ast.type }`);\n    }\n    const result = flatten(ast);\n    if (functionDependencies.length > 0) {\n      const flattenedFunctionDependencies = [];\n      for (let i = 0; i < functionDependencies.length; i++) {\n        const functionDependency = functionDependencies[i];\n        if (!flattened[functionDependency]) {\n          flattened[functionDependency] = true;\n        }\n        functionDependency ? flattenedFunctionDependencies.push(utils.flattenFunctionToString(functionDependency, settings) + '\\n') : '';\n      }\n      return flattenedFunctionDependencies.join('') + result;\n    }\n    return result;\n  },\n\n  normalizeDeclarations: (ast) => {\n    if (ast.type !== 'VariableDeclaration') throw new Error('Ast is not of type \"VariableDeclaration\"');\n    const normalizedDeclarations = [];\n    for (let declarationIndex = 0; declarationIndex < ast.declarations.length; declarationIndex++) {\n      const declaration = ast.declarations[declarationIndex];\n      if (declaration.id && declaration.id.type === 'ObjectPattern' && declaration.id.properties) {\n        const { properties } = declaration.id;\n        for (let propertyIndex = 0; propertyIndex < properties.length; propertyIndex++) {\n          const property = properties[propertyIndex];\n          if (property.value.type === 'ObjectPattern' && property.value.properties) {\n            for (let subPropertyIndex = 0; subPropertyIndex < property.value.properties.length; subPropertyIndex++) {\n              const subProperty = property.value.properties[subPropertyIndex];\n              if (subProperty.type === 'Property') {\n                normalizedDeclarations.push({\n                  type: 'VariableDeclarator',\n                  id: {\n                    type: 'Identifier',\n                    name: subProperty.key.name\n                  },\n                  init: {\n                    type: 'MemberExpression',\n                    object: {\n                      type: 'MemberExpression',\n                      object: declaration.init,\n                      property: {\n                        type: 'Identifier',\n                        name: property.key.name\n                      },\n                      computed: false\n                    },\n                    property: {\n                      type: 'Identifier',\n                      name: subProperty.key.name\n                    },\n                    computed: false\n                  }\n                });\n              } else {\n                throw new Error('unexpected state');\n              }\n            }\n          } else if (property.value.type === 'Identifier') {\n            normalizedDeclarations.push({\n              type: 'VariableDeclarator',\n              id: {\n                type: 'Identifier',\n                name: property.value && property.value.name ? property.value.name : property.key.name\n              },\n              init: {\n                type: 'MemberExpression',\n                object: declaration.init,\n                property: {\n                  type: 'Identifier',\n                  name: property.key.name\n                },\n                computed: false\n              }\n            });\n          } else {\n            throw new Error('unexpected state');\n          }\n        }\n      } else if (declaration.id && declaration.id.type === 'ArrayPattern' && declaration.id.elements) {\n        const { elements } = declaration.id;\n        for (let elementIndex = 0; elementIndex < elements.length; elementIndex++) {\n          const element = elements[elementIndex];\n          if (element.type === 'Identifier') {\n            normalizedDeclarations.push({\n              type: 'VariableDeclarator',\n              id: {\n                type: 'Identifier',\n                name: element.name\n              },\n              init: {\n                type: 'MemberExpression',\n                object: declaration.init,\n                property: {\n                  type: 'Literal',\n                  value: elementIndex,\n                  raw: elementIndex.toString(),\n                  start: element.start,\n                  end: element.end\n                },\n                computed: true\n              }\n            });\n          } else {\n            throw new Error('unexpected state');\n          }\n        }\n      } else {\n        normalizedDeclarations.push(declaration);\n      }\n    }\n    return normalizedDeclarations;\n  },\n\n  splitHTMLImageToRGB: (gpu, image) => {\n    const rKernel = gpu.createKernel(function(a) {\n      const pixel = a[this.thread.y][this.thread.x];\n      return pixel.r * 255;\n    }, {\n      output: [image.width, image.height],\n      precision: 'unsigned',\n      argumentTypes: { a: 'HTMLImage' },\n    });\n    const gKernel = gpu.createKernel(function(a) {\n      const pixel = a[this.thread.y][this.thread.x];\n      return pixel.g * 255;\n    }, {\n      output: [image.width, image.height],\n      precision: 'unsigned',\n      argumentTypes: { a: 'HTMLImage' },\n    });\n    const bKernel = gpu.createKernel(function(a) {\n      const pixel = a[this.thread.y][this.thread.x];\n      return pixel.b * 255;\n    }, {\n      output: [image.width, image.height],\n      precision: 'unsigned',\n      argumentTypes: { a: 'HTMLImage' },\n    });\n    const aKernel = gpu.createKernel(function(a) {\n      const pixel = a[this.thread.y][this.thread.x];\n      return pixel.a * 255;\n    }, {\n      output: [image.width, image.height],\n      precision: 'unsigned',\n      argumentTypes: { a: 'HTMLImage' },\n    });\n    const result = [\n      rKernel(image),\n      gKernel(image),\n      bKernel(image),\n      aKernel(image),\n    ];\n    result.rKernel = rKernel;\n    result.gKernel = gKernel;\n    result.bKernel = bKernel;\n    result.aKernel = aKernel;\n    result.gpu = gpu;\n    return result;\n  },\n\n  splitRGBAToCanvases: (gpu, rgba, width, height) => {\n    const visualKernelR = gpu.createKernel(function(v) {\n      const pixel = v[this.thread.y][this.thread.x];\n      this.color(pixel.r / 255, 0, 0, 255);\n    }, {\n      output: [width, height],\n      graphical: true,\n      argumentTypes: { v: 'Array2D(4)' }\n    });\n    visualKernelR(rgba);\n\n    const visualKernelG = gpu.createKernel(function(v) {\n      const pixel = v[this.thread.y][this.thread.x];\n      this.color(0, pixel.g / 255, 0, 255);\n    }, {\n      output: [width, height],\n      graphical: true,\n      argumentTypes: { v: 'Array2D(4)' }\n    });\n    visualKernelG(rgba);\n\n    const visualKernelB = gpu.createKernel(function(v) {\n      const pixel = v[this.thread.y][this.thread.x];\n      this.color(0, 0, pixel.b / 255, 255);\n    }, {\n      output: [width, height],\n      graphical: true,\n      argumentTypes: { v: 'Array2D(4)' }\n    });\n    visualKernelB(rgba);\n\n    const visualKernelA = gpu.createKernel(function(v) {\n      const pixel = v[this.thread.y][this.thread.x];\n      this.color(255, 255, 255, pixel.a / 255);\n    }, {\n      output: [width, height],\n      graphical: true,\n      argumentTypes: { v: 'Array2D(4)' }\n    });\n    visualKernelA(rgba);\n    return [\n      visualKernelR.canvas,\n      visualKernelG.canvas,\n      visualKernelB.canvas,\n      visualKernelA.canvas,\n    ];\n  },\n\n  getMinifySafeName: (fn) => {\n    try {\n      const ast = acorn.parse(`const value = ${fn.toString()}`);\n      const { init } = ast.body[0].declarations[0];\n      return init.body.name || init.body.body[0].argument.name;\n    } catch (e) {\n      throw new Error('Unrecognized function type.  Please use `() => yourFunctionVariableHere` or function() { return yourFunctionVariableHere; }');\n    }\n  },\n  sanitizeName: function(name) {\n    if (dollarSign.test(name)) {\n      name = name.replace(dollarSign, 'S_S');\n    }\n    if (doubleUnderscore.test(name)) {\n      name = name.replace(doubleUnderscore, 'U_U');\n    } else if (singleUnderscore.test(name)) {\n      name = name.replace(singleUnderscore, 'u_u');\n    }\n    return name;\n  }\n};\n\nconst dollarSign = /\\$/;\nconst doubleUnderscore = /__/;\nconst singleUnderscore = /_/;\n\nconst _systemEndianness = utils.getSystemEndianness();\n\nmodule.exports = {\n  utils\n};\n},{\"./input\":110,\"./texture\":113,\"acorn\":1}]},{},[107])(107)\n});\n","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nc = undefined;","export default function range(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolate} from \"d3-interpolate\";\nimport {pointer, select} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport BrushEvent from \"./event.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\nvar MODE_DRAG = {name: \"drag\"},\n    MODE_SPACE = {name: \"space\"},\n    MODE_HANDLE = {name: \"handle\"},\n    MODE_CENTER = {name: \"center\"};\n\nconst {abs, max, min} = Math;\n\nfunction number1(e) {\n  return [+e[0], +e[1]];\n}\n\nfunction number2(e) {\n  return [number1(e[0]), number1(e[1])];\n}\n\nvar X = {\n  name: \"x\",\n  handles: [\"w\", \"e\"].map(type),\n  input: function(x, e) { return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]]; },\n  output: function(xy) { return xy && [xy[0][0], xy[1][0]]; }\n};\n\nvar Y = {\n  name: \"y\",\n  handles: [\"n\", \"s\"].map(type),\n  input: function(y, e) { return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]]; },\n  output: function(xy) { return xy && [xy[0][1], xy[1][1]]; }\n};\n\nvar XY = {\n  name: \"xy\",\n  handles: [\"n\", \"w\", \"e\", \"s\", \"nw\", \"ne\", \"sw\", \"se\"].map(type),\n  input: function(xy) { return xy == null ? null : number2(xy); },\n  output: function(xy) { return xy; }\n};\n\nvar cursors = {\n  overlay: \"crosshair\",\n  selection: \"move\",\n  n: \"ns-resize\",\n  e: \"ew-resize\",\n  s: \"ns-resize\",\n  w: \"ew-resize\",\n  nw: \"nwse-resize\",\n  ne: \"nesw-resize\",\n  se: \"nwse-resize\",\n  sw: \"nesw-resize\"\n};\n\nvar flipX = {\n  e: \"w\",\n  w: \"e\",\n  nw: \"ne\",\n  ne: \"nw\",\n  se: \"sw\",\n  sw: \"se\"\n};\n\nvar flipY = {\n  n: \"s\",\n  s: \"n\",\n  nw: \"sw\",\n  ne: \"se\",\n  se: \"ne\",\n  sw: \"nw\"\n};\n\nvar signsX = {\n  overlay: +1,\n  selection: +1,\n  n: null,\n  e: +1,\n  s: null,\n  w: -1,\n  nw: -1,\n  ne: +1,\n  se: +1,\n  sw: -1\n};\n\nvar signsY = {\n  overlay: +1,\n  selection: +1,\n  n: -1,\n  e: null,\n  s: +1,\n  w: null,\n  nw: -1,\n  ne: -1,\n  se: +1,\n  sw: +1\n};\n\nfunction type(t) {\n  return {type: t};\n}\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultExtent() {\n  var svg = this.ownerSVGElement || this;\n  if (svg.hasAttribute(\"viewBox\")) {\n    svg = svg.viewBox.baseVal;\n    return [[svg.x, svg.y], [svg.x + svg.width, svg.y + svg.height]];\n  }\n  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\n// Like d3.local, but with the name __brush rather than auto-generated.\nfunction local(node) {\n  while (!node.__brush) if (!(node = node.parentNode)) return;\n  return node.__brush;\n}\n\nfunction empty(extent) {\n  return extent[0][0] === extent[1][0]\n      || extent[0][1] === extent[1][1];\n}\n\nexport function brushSelection(node) {\n  var state = node.__brush;\n  return state ? state.dim.output(state.selection) : null;\n}\n\nexport function brushX() {\n  return brush(X);\n}\n\nexport function brushY() {\n  return brush(Y);\n}\n\nexport default function() {\n  return brush(XY);\n}\n\nfunction brush(dim) {\n  var extent = defaultExtent,\n      filter = defaultFilter,\n      touchable = defaultTouchable,\n      keys = true,\n      listeners = dispatch(\"start\", \"brush\", \"end\"),\n      handleSize = 6,\n      touchending;\n\n  function brush(group) {\n    var overlay = group\n        .property(\"__brush\", initialize)\n      .selectAll(\".overlay\")\n      .data([type(\"overlay\")]);\n\n    overlay.enter().append(\"rect\")\n        .attr(\"class\", \"overlay\")\n        .attr(\"pointer-events\", \"all\")\n        .attr(\"cursor\", cursors.overlay)\n      .merge(overlay)\n        .each(function() {\n          var extent = local(this).extent;\n          select(this)\n              .attr(\"x\", extent[0][0])\n              .attr(\"y\", extent[0][1])\n              .attr(\"width\", extent[1][0] - extent[0][0])\n              .attr(\"height\", extent[1][1] - extent[0][1]);\n        });\n\n    group.selectAll(\".selection\")\n      .data([type(\"selection\")])\n      .enter().append(\"rect\")\n        .attr(\"class\", \"selection\")\n        .attr(\"cursor\", cursors.selection)\n        .attr(\"fill\", \"#777\")\n        .attr(\"fill-opacity\", 0.3)\n        .attr(\"stroke\", \"#fff\")\n        .attr(\"shape-rendering\", \"crispEdges\");\n\n    var handle = group.selectAll(\".handle\")\n      .data(dim.handles, function(d) { return d.type; });\n\n    handle.exit().remove();\n\n    handle.enter().append(\"rect\")\n        .attr(\"class\", function(d) { return \"handle handle--\" + d.type; })\n        .attr(\"cursor\", function(d) { return cursors[d.type]; });\n\n    group\n        .each(redraw)\n        .attr(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .on(\"mousedown.brush\", started)\n      .filter(touchable)\n        .on(\"touchstart.brush\", started)\n        .on(\"touchmove.brush\", touchmoved)\n        .on(\"touchend.brush touchcancel.brush\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  brush.move = function(group, selection, event) {\n    if (group.tween) {\n      group\n          .on(\"start.brush\", function(event) { emitter(this, arguments).beforestart().start(event); })\n          .on(\"interrupt.brush end.brush\", function(event) { emitter(this, arguments).end(event); })\n          .tween(\"brush\", function() {\n            var that = this,\n                state = that.__brush,\n                emit = emitter(that, arguments),\n                selection0 = state.selection,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(this, arguments) : selection, state.extent),\n                i = interpolate(selection0, selection1);\n\n            function tween(t) {\n              state.selection = t === 1 && selection1 === null ? null : i(t);\n              redraw.call(that);\n              emit.brush();\n            }\n\n            return selection0 !== null && selection1 !== null ? tween : tween(1);\n          });\n    } else {\n      group\n          .each(function() {\n            var that = this,\n                args = arguments,\n                state = that.__brush,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(that, args) : selection, state.extent),\n                emit = emitter(that, args).beforestart();\n\n            interrupt(that);\n            state.selection = selection1 === null ? null : selection1;\n            redraw.call(that);\n            emit.start(event).brush(event).end(event);\n          });\n    }\n  };\n\n  brush.clear = function(group, event) {\n    brush.move(group, null, event);\n  };\n\n  function redraw() {\n    var group = select(this),\n        selection = local(this).selection;\n\n    if (selection) {\n      group.selectAll(\".selection\")\n          .style(\"display\", null)\n          .attr(\"x\", selection[0][0])\n          .attr(\"y\", selection[0][1])\n          .attr(\"width\", selection[1][0] - selection[0][0])\n          .attr(\"height\", selection[1][1] - selection[0][1]);\n\n      group.selectAll(\".handle\")\n          .style(\"display\", null)\n          .attr(\"x\", function(d) { return d.type[d.type.length - 1] === \"e\" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2; })\n          .attr(\"y\", function(d) { return d.type[0] === \"s\" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2; })\n          .attr(\"width\", function(d) { return d.type === \"n\" || d.type === \"s\" ? selection[1][0] - selection[0][0] + handleSize : handleSize; })\n          .attr(\"height\", function(d) { return d.type === \"e\" || d.type === \"w\" ? selection[1][1] - selection[0][1] + handleSize : handleSize; });\n    }\n\n    else {\n      group.selectAll(\".selection,.handle\")\n          .style(\"display\", \"none\")\n          .attr(\"x\", null)\n          .attr(\"y\", null)\n          .attr(\"width\", null)\n          .attr(\"height\", null);\n    }\n  }\n\n  function emitter(that, args, clean) {\n    var emit = that.__brush.emitter;\n    return emit && (!clean || !emit.clean) ? emit : new Emitter(that, args, clean);\n  }\n\n  function Emitter(that, args, clean) {\n    this.that = that;\n    this.args = args;\n    this.state = that.__brush;\n    this.active = 0;\n    this.clean = clean;\n  }\n\n  Emitter.prototype = {\n    beforestart: function() {\n      if (++this.active === 1) this.state.emitter = this, this.starting = true;\n      return this;\n    },\n    start: function(event, mode) {\n      if (this.starting) this.starting = false, this.emit(\"start\", event, mode);\n      else this.emit(\"brush\", event);\n      return this;\n    },\n    brush: function(event, mode) {\n      this.emit(\"brush\", event, mode);\n      return this;\n    },\n    end: function(event, mode) {\n      if (--this.active === 0) delete this.state.emitter, this.emit(\"end\", event, mode);\n      return this;\n    },\n    emit: function(type, event, mode) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new BrushEvent(type, {\n          sourceEvent: event,\n          target: brush,\n          selection: dim.output(this.state.selection),\n          mode,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function started(event) {\n    if (touchending && !event.touches) return;\n    if (!filter.apply(this, arguments)) return;\n\n    var that = this,\n        type = event.target.__data__.type,\n        mode = (keys && event.metaKey ? type = \"overlay\" : type) === \"selection\" ? MODE_DRAG : (keys && event.altKey ? MODE_CENTER : MODE_HANDLE),\n        signX = dim === Y ? null : signsX[type],\n        signY = dim === X ? null : signsY[type],\n        state = local(that),\n        extent = state.extent,\n        selection = state.selection,\n        W = extent[0][0], w0, w1,\n        N = extent[0][1], n0, n1,\n        E = extent[1][0], e0, e1,\n        S = extent[1][1], s0, s1,\n        dx = 0,\n        dy = 0,\n        moving,\n        shifting = signX && signY && keys && event.shiftKey,\n        lockX,\n        lockY,\n        points = Array.from(event.touches || [event], t => {\n          const i = t.identifier;\n          t = pointer(t, that);\n          t.point0 = t.slice();\n          t.identifier = i;\n          return t;\n        });\n\n    interrupt(that);\n    var emit = emitter(that, arguments, true).beforestart();\n\n    if (type === \"overlay\") {\n      if (selection) moving = true;\n      const pts = [points[0], points[1] || points[0]];\n      state.selection = selection = [[\n          w0 = dim === Y ? W : min(pts[0][0], pts[1][0]),\n          n0 = dim === X ? N : min(pts[0][1], pts[1][1])\n        ], [\n          e0 = dim === Y ? E : max(pts[0][0], pts[1][0]),\n          s0 = dim === X ? S : max(pts[0][1], pts[1][1])\n        ]];\n      if (points.length > 1) move(event);\n    } else {\n      w0 = selection[0][0];\n      n0 = selection[0][1];\n      e0 = selection[1][0];\n      s0 = selection[1][1];\n    }\n\n    w1 = w0;\n    n1 = n0;\n    e1 = e0;\n    s1 = s0;\n\n    var group = select(that)\n        .attr(\"pointer-events\", \"none\");\n\n    var overlay = group.selectAll(\".overlay\")\n        .attr(\"cursor\", cursors[type]);\n\n    if (event.touches) {\n      emit.moved = moved;\n      emit.ended = ended;\n    } else {\n      var view = select(event.view)\n          .on(\"mousemove.brush\", moved, true)\n          .on(\"mouseup.brush\", ended, true);\n      if (keys) view\n          .on(\"keydown.brush\", keydowned, true)\n          .on(\"keyup.brush\", keyupped, true)\n\n      dragDisable(event.view);\n    }\n\n    redraw.call(that);\n    emit.start(event, mode.name);\n\n    function moved(event) {\n      for (const p of event.changedTouches || [event]) {\n        for (const d of points)\n          if (d.identifier === p.identifier) d.cur = pointer(p, that);\n      }\n      if (shifting && !lockX && !lockY && points.length === 1) {\n        const point = points[0];\n        if (abs(point.cur[0] - point[0]) > abs(point.cur[1] - point[1]))\n          lockY = true;\n        else\n          lockX = true;\n      }\n      for (const point of points)\n        if (point.cur) point[0] = point.cur[0], point[1] = point.cur[1];\n      moving = true;\n      noevent(event);\n      move(event);\n    }\n\n    function move(event) {\n      const point = points[0], point0 = point.point0;\n      var t;\n\n      dx = point[0] - point0[0];\n      dy = point[1] - point0[1];\n\n      switch (mode) {\n        case MODE_SPACE:\n        case MODE_DRAG: {\n          if (signX) dx = max(W - w0, min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;\n          if (signY) dy = max(N - n0, min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;\n          break;\n        }\n        case MODE_HANDLE: {\n          if (points[1]) {\n            if (signX) w1 = max(W, min(E, points[0][0])), e1 = max(W, min(E, points[1][0])), signX = 1;\n            if (signY) n1 = max(N, min(S, points[0][1])), s1 = max(N, min(S, points[1][1])), signY = 1;\n          } else {\n            if (signX < 0) dx = max(W - w0, min(E - w0, dx)), w1 = w0 + dx, e1 = e0;\n            else if (signX > 0) dx = max(W - e0, min(E - e0, dx)), w1 = w0, e1 = e0 + dx;\n            if (signY < 0) dy = max(N - n0, min(S - n0, dy)), n1 = n0 + dy, s1 = s0;\n            else if (signY > 0) dy = max(N - s0, min(S - s0, dy)), n1 = n0, s1 = s0 + dy;\n          }\n          break;\n        }\n        case MODE_CENTER: {\n          if (signX) w1 = max(W, min(E, w0 - dx * signX)), e1 = max(W, min(E, e0 + dx * signX));\n          if (signY) n1 = max(N, min(S, n0 - dy * signY)), s1 = max(N, min(S, s0 + dy * signY));\n          break;\n        }\n      }\n\n      if (e1 < w1) {\n        signX *= -1;\n        t = w0, w0 = e0, e0 = t;\n        t = w1, w1 = e1, e1 = t;\n        if (type in flipX) overlay.attr(\"cursor\", cursors[type = flipX[type]]);\n      }\n\n      if (s1 < n1) {\n        signY *= -1;\n        t = n0, n0 = s0, s0 = t;\n        t = n1, n1 = s1, s1 = t;\n        if (type in flipY) overlay.attr(\"cursor\", cursors[type = flipY[type]]);\n      }\n\n      if (state.selection) selection = state.selection; // May be set by brush.move!\n      if (lockX) w1 = selection[0][0], e1 = selection[1][0];\n      if (lockY) n1 = selection[0][1], s1 = selection[1][1];\n\n      if (selection[0][0] !== w1\n          || selection[0][1] !== n1\n          || selection[1][0] !== e1\n          || selection[1][1] !== s1) {\n        state.selection = [[w1, n1], [e1, s1]];\n        redraw.call(that);\n        emit.brush(event, mode.name);\n      }\n    }\n\n    function ended(event) {\n      nopropagation(event);\n      if (event.touches) {\n        if (event.touches.length) return;\n        if (touchending) clearTimeout(touchending);\n        touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n      } else {\n        dragEnable(event.view, moving);\n        view.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\", null);\n      }\n      group.attr(\"pointer-events\", \"all\");\n      overlay.attr(\"cursor\", cursors.overlay);\n      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!\n      if (empty(selection)) state.selection = null, redraw.call(that);\n      emit.end(event, mode.name);\n    }\n\n    function keydowned(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          shifting = signX && signY;\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_HANDLE) {\n            if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n            if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n            mode = MODE_CENTER;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE; takes priority over ALT\n          if (mode === MODE_HANDLE || mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1 - dx; else if (signX > 0) w0 = w1 - dx;\n            if (signY < 0) s0 = s1 - dy; else if (signY > 0) n0 = n1 - dy;\n            mode = MODE_SPACE;\n            overlay.attr(\"cursor\", cursors.selection);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n\n    function keyupped(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          if (shifting) {\n            lockX = lockY = shifting = false;\n            move(event);\n          }\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n            if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n            mode = MODE_HANDLE;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE\n          if (mode === MODE_SPACE) {\n            if (event.altKey) {\n              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n              mode = MODE_CENTER;\n            } else {\n              if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n              if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n              mode = MODE_HANDLE;\n            }\n            overlay.attr(\"cursor\", cursors[type]);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n  }\n\n  function touchmoved(event) {\n    emitter(this, arguments).moved(event);\n  }\n\n  function touchended(event) {\n    emitter(this, arguments).ended(event);\n  }\n\n  function initialize() {\n    var state = this.__brush || {selection: null};\n    state.extent = number2(extent.apply(this, arguments));\n    state.dim = dim;\n    return state;\n  }\n\n  brush.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant(number2(_)), brush) : extent;\n  };\n\n  brush.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), brush) : filter;\n  };\n\n  brush.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), brush) : touchable;\n  };\n\n  brush.handleSize = function(_) {\n    return arguments.length ? (handleSize = +_, brush) : handleSize;\n  };\n\n  brush.keyModifiers = function(_) {\n    return arguments.length ? (keys = !!_, brush) : keys;\n  };\n\n  brush.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? brush : value;\n  };\n\n  return brush;\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function ticks(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export default function ascending(a, b) {\n  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function descending(a, b) {\n  return a == null || b == null ? NaN\n    : b < a ? -1\n    : b > a ? 1\n    : b >= a ? 0\n    : NaN;\n}\n","import ascending from \"./ascending.js\";\nimport descending from \"./descending.js\";\n\nexport default function bisector(f) {\n  let compare1, compare2, delta;\n\n  // If an accessor is specified, promote it to a comparator. In this case we\n  // can test whether the search value is (self-) comparable. We cant do this\n  // for a comparator (except for specific, known comparators) because we cant\n  // tell if the comparator is symmetric, and an asymmetric comparator cant be\n  // used to test whether a single value is comparable.\n  if (f.length !== 2) {\n    compare1 = ascending;\n    compare2 = (d, x) => ascending(f(d), x);\n    delta = (d, x) => f(d) - x;\n  } else {\n    compare1 = f === ascending || f === descending ? f : zero;\n    compare2 = f;\n    delta = f;\n  }\n\n  function left(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function right(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) <= 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function center(a, x, lo = 0, hi = a.length) {\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction zero() {\n  return 0;\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function number(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {bisect} from \"d3-array\";\nimport {linearish} from \"./linear.js\";\nimport {initRange} from \"./init.js\";\n\nexport default function quantize() {\n  var x0 = 0,\n      x1 = 1,\n      n = 1,\n      domain = [0.5],\n      range = [0, 1],\n      unknown;\n\n  function scale(x) {\n    return x != null && x <= x ? range[bisect(domain, x, 0, n)] : unknown;\n  }\n\n  function rescale() {\n    var i = -1;\n    domain = new Array(n);\n    while (++i < n) domain[i] = ((i + 1) * x1 - (i - n) * x0) / (n + 1);\n    return scale;\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? ([x0, x1] = _, x0 = +x0, x1 = +x1, rescale()) : [x0, x1];\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (n = (range = Array.from(_)).length - 1, rescale()) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return i < 0 ? [NaN, NaN]\n        : i < 1 ? [x0, domain[0]]\n        : i >= n ? [domain[n - 1], x1]\n        : [domain[i - 1], domain[i]];\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : scale;\n  };\n\n  scale.thresholds = function() {\n    return domain.slice();\n  };\n\n  scale.copy = function() {\n    return quantize()\n        .domain([x0, x1])\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(linearish(scale), arguments);\n}\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? Were done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","import pointRadial from \"../pointRadial.js\";\n\nclass Bump {\n  constructor(context, x) {\n    this._context = context;\n    this._x = x;\n  }\n  areaStart() {\n    this._line = 0;\n  }\n  areaEnd() {\n    this._line = NaN;\n  }\n  lineStart() {\n    this._point = 0;\n  }\n  lineEnd() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  }\n  point(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: {\n        this._point = 1;\n        if (this._line) this._context.lineTo(x, y);\n        else this._context.moveTo(x, y);\n        break;\n      }\n      case 1: this._point = 2; // falls through\n      default: {\n        if (this._x) this._context.bezierCurveTo(this._x0 = (this._x0 + x) / 2, this._y0, this._x0, y, x, y);\n        else this._context.bezierCurveTo(this._x0, this._y0 = (this._y0 + y) / 2, x, this._y0, x, y);\n        break;\n      }\n    }\n    this._x0 = x, this._y0 = y;\n  }\n}\n\nclass BumpRadial {\n  constructor(context) {\n    this._context = context;\n  }\n  lineStart() {\n    this._point = 0;\n  }\n  lineEnd() {}\n  point(x, y) {\n    x = +x, y = +y;\n    if (this._point++ === 0) {\n      this._x0 = x, this._y0 = y;\n    } else {\n      const p0 = pointRadial(this._x0, this._y0);\n      const p1 = pointRadial(this._x0, this._y0 = (this._y0 + y) / 2);\n      const p2 = pointRadial(x, this._y0);\n      const p3 = pointRadial(x, y);\n      this._context.moveTo(...p0);\n      this._context.bezierCurveTo(...p1, ...p2, ...p3);\n    }\n  }\n}\n\nexport function bumpX(context) {\n  return new Bump(context, true);\n}\n\nexport function bumpY(context) {\n  return new Bump(context, false);\n}\n\nexport function bumpRadial(context) {\n  return new BumpRadial(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import {path} from \"d3-path\";\nimport {slice} from \"./array.js\";\nimport constant from \"./constant.js\";\nimport {bumpX, bumpY, bumpRadial} from \"./curve/bump.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nfunction linkSource(d) {\n  return d.source;\n}\n\nfunction linkTarget(d) {\n  return d.target;\n}\n\nexport function link(curve) {\n  let source = linkSource;\n  let target = linkTarget;\n  let x = pointX;\n  let y = pointY;\n  let context = null;\n  let output = null;\n\n  function link() {\n    let buffer;\n    const argv = slice.call(arguments);\n    const s = source.apply(this, argv);\n    const t = target.apply(this, argv);\n    if (context == null) output = curve(buffer = path());\n    output.lineStart();\n    argv[0] = s, output.point(+x.apply(this, argv), +y.apply(this, argv));\n    argv[0] = t, output.point(+x.apply(this, argv), +y.apply(this, argv));\n    output.lineEnd();\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  link.source = function(_) {\n    return arguments.length ? (source = _, link) : source;\n  };\n\n  link.target = function(_) {\n    return arguments.length ? (target = _, link) : target;\n  };\n\n  link.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), link) : x;\n  };\n\n  link.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), link) : y;\n  };\n\n  link.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), link) : context;\n  };\n\n  return link;\n}\n\nexport function linkHorizontal() {\n  return link(bumpX);\n}\n\nexport function linkVertical() {\n  return link(bumpY);\n}\n\nexport function linkRadial() {\n  const l = link(bumpRadial);\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n  return l;\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","import * as d3 from \"d3\";\r\n\r\nexport default class neuronsUI {\r\n  dimensions = {\r\n    width: 500,\r\n    height: 500,\r\n  };\r\n  wrapper;\r\n  svg;\r\n  bounds;\r\n  yAxis;\r\n  xAxis;\r\n\r\n  nodesWrapper;\r\n  nodesData;\r\n\r\n  xDomain;\r\n  yDomain;\r\n  colorScale;\r\n  yScale;\r\n  xScale;\r\n\r\n  layers;\r\n  sizes;\r\n  maxHeight;\r\n\r\n  linksData;\r\n  linkGen;\r\n  linksWrapper;\r\n  linkScale;\r\n  linkColorScale;\r\n\r\n  constructor(data) {\r\n    this.initData(data);\r\n    document.querySelector('#neurons-wrapper').innerHTML = \"\";\r\n\r\n    this.radius = this.dimensions.height / (this.maxHeight * 5);\r\n    this.yDomain = [0, this.maxHeight];\r\n    this.xDomain = [0, this.layers.length - 1];\r\n    this.yScale = d3\r\n      .scaleLinear()\r\n      .domain(this.yDomain)\r\n      .range([0, this.dimensions.height]);\r\n    this.xScale = d3\r\n      .scaleLinear()\r\n      .domain(this.xDomain)\r\n      .range([0, this.dimensions.width]);\r\n    this.colorScale = d3\r\n      .scaleLinear()\r\n      .domain([-1, 1])\r\n      .range([\"red\", \"green\"])\r\n      .clamp(true);\r\n\r\n    this.updateLinksData();\r\n\r\n    this.wrapper = d3.select(\"#neurons-wrapper\");\r\n    this.svg = this.wrapper\r\n      .append(\"svg\")\r\n      .attr(\"width\", this.dimensions.width)\r\n      .attr(\"height\", this.dimensions.height)\r\n\r\n    this.bounds = this.svg\r\n      .append(\"g\")\r\n      .classed(\"bounds\", true)\r\n      .style(\r\n        \"transform\",\r\n        `translateX(${this.radius}px)`\r\n      );\r\n\r\n    this.linkGen = d3.linkHorizontal();\r\n    this.linksWrapper = this.bounds.append(\"g\").classed('links', true);\r\n    this.linkScale = d3\r\n      .scaleLinear()\r\n      .domain([-0.2, 0.2])\r\n      .range([1, 4])\r\n      .clamp(true);\r\n    this.linkColorScale = d3\r\n      .scaleLinear()\r\n      .domain([-0.2, 0.2])\r\n      .range([\"red\", \"green\"])\r\n      .clamp(true);\r\n    this.linksWrapper\r\n      .selectAll(\"path\")\r\n      .data(this.linksData)\r\n      .join(\"path\")\r\n      .attr(\"d\", this.linkGen)\r\n      .attr(\"fill\", \"none\")\r\n      .attr(\"stroke\", d => this.linkColorScale(d.weight))\r\n      .attr(\"stroke-width\", d => this.linkScale(d.weight));\r\n\r\n    this.nodesWrapper = this.bounds.append(\"g\").classed('nodes', true);\r\n    this.nodesWrapper\r\n      .selectAll(\"circle\")\r\n      .data(this.nodesData)\r\n      .enter()\r\n      .append(\"circle\")\r\n      .attr(\"cx\", (d) => {\r\n        return this.xScale(d.x)\r\n      })\r\n      .attr(\"cy\", (d) => this.yScale(d.y))\r\n      .attr(\"r\", this.radius)\r\n      .attr(\"fill\", (d) => this.colorScale(d.bias));\r\n  }\r\n\r\n  initData(data) {\r\n    this.sizes = data.sizes;\r\n    this.maxHeight = this.sizes.reduce((acc, size) => Math.max(acc, size), 0);\r\n    this.updateData(data);\r\n  }\r\n\r\n  updateLinksData() {\r\n    this.linksData = this.sizes.map((layerSize, layerIndex, sizes) => {\r\n      const currentNodesCount = sizes.slice(0, layerIndex + 1).reduce((acc, size) => size + acc, 0);\r\n      const currNodes = this.nodesData.slice(currentNodesCount - layerSize, currentNodesCount);\r\n      const nextNodes = this.nodesData.slice(currentNodesCount, currentNodesCount + this.sizes[layerIndex + 1]);\r\n      if (!nextNodes.length) return null;\r\n      return currNodes.map((node, sourceIndex) => {\r\n        const source = [this.xScale(node.x), this.yScale(node.y)];\r\n        return nextNodes.map((node2) => (\r\n          {\r\n            source,\r\n            target: [this.xScale(node2.x), this.yScale(node2.y)],\r\n            weight: node2.weights[sourceIndex],\r\n          }\r\n        ))\r\n      });\r\n    }).flat(2).filter((link) => !!link);\r\n  }\r\n\r\n  updateData(data) {\r\n    data.layers.splice(0, 1, {\r\n      biases: [-1, 1],\r\n      weights: [],\r\n    });\r\n    this.layers = data.layers;\r\n    this.nodesData = data.layers.map((layer, layerIndex) => {\r\n      const height = this.maxHeight;\r\n      const count = layer.biases.length;\r\n      const step = height / (count + 1);\r\n      const yPositions = d3.range(0 + step, height, step).slice(0, count);\r\n      return layer.biases.map((bias, nodeIndex) => {\r\n        return {\r\n          y: yPositions[nodeIndex],\r\n          x: layerIndex,\r\n          bias,\r\n          weights: layer.weights[nodeIndex] || []\r\n        }\r\n      })\r\n    }).flat(2);\r\n  }\r\n\r\n  updateLinks() {\r\n    this.linksWrapper\r\n      .selectAll(\"path\")\r\n      .data(this.linksData)\r\n      .attr(\"stroke\", d => this.linkColorScale(d.weight))\r\n      .attr(\"stroke-width\", d => this.linkScale(d.weight));\r\n  }\r\n\r\n  updateNodes(data) {\r\n    this.updateData(data);\r\n    this.nodesWrapper\r\n      .selectAll(\"circle\")\r\n      .data(this.nodesData)\r\n      .attr(\"fill\", (d) => this.colorScale(d.bias));\r\n  }\r\n}\r\n","import * as d3 from \"d3\";\r\n\r\nexport default class UI {\r\n  dimensions = {\r\n    width: 500,\r\n    height: 500,\r\n  };\r\n  wrapper;\r\n  svg;\r\n  bounds;\r\n  yAxis;\r\n  xAxis;\r\n  circles;\r\n\r\n  domain = [0, 1];\r\n  pointColors = [\"red\", \"green\"];\r\n  yScale;\r\n  xScale;\r\n  yAxisGenerator;\r\n  xAxisGenertor;\r\n  colorScale;\r\n  color;\r\n  canvas;\r\n\r\n  constructor(data) {\r\n    this.dimensions.boundedWidth =\r\n      this.dimensions.width;\r\n    this.dimensions.boundedHeight =\r\n      this.dimensions.height;\r\n\r\n    this.wrapper = d3.select(\"#wrapper\");\r\n    this.svg = this.wrapper\r\n      .append(\"svg\")\r\n      .attr(\"width\", this.dimensions.width)\r\n      .attr(\"height\", this.dimensions.height);\r\n\r\n    this.bounds = this.svg\r\n      .append(\"g\")\r\n      .classed(\"bounds\", true);\r\n      // .style(\r\n      //   \"transform\",\r\n      //   `translate(${this.dimensions.margin.left}px,${this.dimensions.margin.top}px)`\r\n      // );\r\n\r\n    this.canvas = this.wrapper\r\n      .append(\"canvas\")\r\n      .style(\"z-index\", \"-1\")\r\n      .attr(\"width\", 100)\r\n      .attr(\"height\", 100)\r\n      .style(\"width\", this.dimensions.boundedWidth + \"px\")\r\n      .style(\"height\", this.dimensions.boundedHeight + \"px\")\r\n      .style(\"position\", \"absolute\")\r\n      .style(\"top\", 0)\r\n      .style(\"left\", 0);\r\n\r\n    let tmpScale = d3\r\n      .scaleLinear()\r\n      .domain([0, 0.5, 1])\r\n      .range([\"#f59322\", \"#e8eaeb\", \"#0877bd\"])\r\n      .clamp(true);\r\n    let colors = d3.range(0, 1 + 1e-9, 1 / 30).map((a) => {\r\n      return tmpScale(a);\r\n    });\r\n    this.color = d3.scaleQuantize().domain(this.domain).range(colors);\r\n\r\n    this.yScale = d3\r\n      .scaleLinear()\r\n      .domain(this.domain)\r\n      .range([0, this.dimensions.boundedHeight]);\r\n    this.xScale = d3\r\n      .scaleLinear()\r\n      .domain(this.domain)\r\n      .range([0, this.dimensions.boundedWidth]);\r\n\r\n    // this.yAxisGenerator = d3.axisRight().scale(this.yScale);\r\n    // this.xAxisGenertor = d3.axisBottom().scale(this.xScale);\r\n\r\n    this.colorScale = d3\r\n      .scaleLinear()\r\n      .domain(this.domain)\r\n      .range(this.pointColors);\r\n\r\n    // this.yAxis = this.svg\r\n    //   .append(\"g\")\r\n    //   .call(this.yAxisGenerator)\r\n    //   .style(\r\n    //     \"transform\",\r\n    //     `translate(${\r\n    //       this.dimensions.boundedWidth\r\n    //     }px, ${0}px)`\r\n    //   );\r\n    // this.xAxis = this.svg\r\n    //   .append(\"g\")\r\n    //   .call(this.xAxisGenertor)\r\n    //   .style(\r\n    //     \"transform\",\r\n    //     `translate(${0}px, ${\r\n    //       this.dimensions.boundedHeight\r\n    //     }px)`\r\n    //   );\r\n\r\n    this.circles = this.bounds.append(\"g\").classed(\"circles\", true);\r\n\r\n    this.circles\r\n      .selectAll(\"circle\")\r\n      .data(data)\r\n      .enter()\r\n      .append(\"circle\")\r\n      .attr(\"cx\", (d) => this.xScale(d.x))\r\n      .attr(\"cy\", (d) => this.yScale(d.y))\r\n      .attr(\"r\", 2)\r\n      .attr(\"fill\", (d) => this.colorScale(d.label));\r\n  }\r\n\r\n  updateCircles(data) {\r\n    this.circles\r\n      .selectAll(\"circle\")\r\n      .data(data)\r\n      .attr(\"cx\", (d) => this.xScale(d.x))\r\n      .attr(\"cy\", (d) => this.yScale(d.y))\r\n      .attr(\"r\", 2)\r\n      .attr(\"fill\", (d) => this.colorScale(d.label));\r\n  }\r\n\r\n  reduceMatrix(matrix) {\r\n    const factor = 2;\r\n\r\n    let result = new Array(matrix.length / factor);\r\n    for (let i = 0; i < matrix.length; i += factor) {\r\n      result[i / factor] = new Array(matrix.length / factor);\r\n      for (let j = 0; j < matrix.length; j += factor) {\r\n        let avg = 0;\r\n        // Sum all the values in the neighborhood.\r\n        for (let k = 0; k < factor; k++) {\r\n          for (let l = 0; l < factor; l++) {\r\n            avg += matrix[i + k][j + l];\r\n          }\r\n        }\r\n        avg /= factor * factor;\r\n        result[i / factor][j / factor] = avg;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  updateCanvas(data) {\r\n    let dx = data[0].length;\r\n    let dy = data.length;\r\n\r\n    let context = this.canvas.node().getContext(\"2d\");\r\n    let image = context.createImageData(dx, dy);\r\n\r\n    for (let y = 0, p = -1; y < dy; ++y) {\r\n      for (let x = 0; x < dx; ++x) {\r\n        let value = data[x][y];\r\n        let c = d3.rgb(this.color(value));\r\n        image.data[++p] = c.r;\r\n        image.data[++p] = c.g;\r\n        image.data[++p] = c.b;\r\n        image.data[++p] = 160;\r\n      }\r\n    }\r\n    context.putImageData(image, 0, 0);\r\n  }\r\n}\r\n","import * as d3 from \"d3\";\r\n\r\n/** Returns the eucledian distance between two points in space. */\r\nfunction dist(a, b) {\r\n  let dx = a.x - b.x;\r\n  let dy = a.y - b.y;\r\n  return Math.sqrt(dx * dx + dy * dy);\r\n}\r\n\r\nfunction randUniform(a, b) {\r\n  return Math.random() * (b - a) + a;\r\n}\r\n\r\nexport function generateDotes(numSamples, noise) {\r\n  let points = [];\r\n  let radius = 1;\r\n  function getCircleLabel(p, center) {\r\n    return (dist(p, center) < (radius * 0.5)) ? 1 : -1;\r\n  }\r\n\r\n  // Generate positive points inside the circle.\r\n  for (let i = 0; i < numSamples / 2; i++) {\r\n    let r = randUniform(0, radius * 0.5);\r\n    let angle = randUniform(0, 2 * Math.PI);\r\n    let x = r * Math.sin(angle);\r\n    let y = r * Math.cos(angle);\r\n    let noiseX = randUniform(-radius, radius) * noise;\r\n    let noiseY = randUniform(-radius, radius) * noise;\r\n    let label = getCircleLabel({x: x + noiseX, y: y + noiseY}, {x: 0, y: 0});\r\n    points.push({x, y, label});\r\n  }\r\n\r\n  // Generate negative points outside the circle.\r\n  for (let i = 0; i < numSamples / 2; i++) {\r\n    let r = randUniform(radius * 0.7, radius);\r\n    let angle = randUniform(0, 2 * Math.PI);\r\n    let x = r * Math.sin(angle);\r\n    let y = r * Math.cos(angle);\r\n    let noiseX = randUniform(-radius, radius) * noise;\r\n    let noiseY = randUniform(-radius, radius) * noise;\r\n    let label = getCircleLabel({x: x + noiseX, y: y + noiseY}, {x: 0, y: 0});\r\n    points.push({x, y, label});\r\n  }\r\n  return points;\r\n};\r\n\r\n/**\r\n * brain js should only get inputs between 0 and 1,\r\n * previously it worked with values [-1, 1]\r\n * but with values [0,1] it seems now results are more accurate\r\n */\r\nconst brainJsScale = d3\r\n  .scaleLinear()\r\n  .domain([-1, 1])\r\n  .range([0, 1]);\r\n\r\nexport function generateDotesBrainJSFix(numSamples, noise) {\r\n  let points = [];\r\n  let radius = 1;\r\n  function getCircleLabel(p, center) {\r\n    return (dist(p, center) < (radius * 0.5)) ? 1 : -1;\r\n  }\r\n\r\n  // Generate positive points inside the circle.\r\n  for (let i = 0; i < numSamples / 2; i++) {\r\n    let r = randUniform(0, radius * 0.5);\r\n    let angle = randUniform(0, 2 * Math.PI);\r\n    let x = r * Math.sin(angle);\r\n    let y = r * Math.cos(angle);\r\n    let noiseX = randUniform(-radius, radius) * noise;\r\n    let noiseY = randUniform(-radius, radius) * noise;\r\n    let label = getCircleLabel({x: x + noiseX, y: y + noiseY}, {x: 0, y: 0});\r\n    points.push({x, y, label});\r\n  }\r\n\r\n  // Generate negative points outside the circle.\r\n  for (let i = 0; i < numSamples / 2; i++) {\r\n    let r = randUniform(radius * 0.7, radius);\r\n    let angle = randUniform(0, 2 * Math.PI);\r\n    let x = r * Math.sin(angle);\r\n    let y = r * Math.cos(angle);\r\n    let noiseX = randUniform(-radius, radius) * noise;\r\n    let noiseY = randUniform(-radius, radius) * noise;\r\n    let label = getCircleLabel({x: x + noiseX, y: y + noiseY}, {x: 0, y: 0});\r\n    points.push({x, y, label});\r\n  }\r\n  return points.map((dot) => ({...dot, x: brainJsScale(dot.x), y: brainJsScale(dot.y)}));\r\n};\r\n\r\nexport const getTrainData = (data) => {\r\n  return data.map((point) => {\r\n    const { label, x, y } = point;\r\n    return {\r\n      input: { x: brainJsScale(x), y: brainJsScale(y) },\r\n      output: { label },\r\n    }\r\n  })\r\n};\r\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./style.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./style.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import * as d3 from \"d3\";\nimport * as brain from \"brain.js\";\n\nimport neuronsUI from \"./neurons\";\nimport UI from \"./ui\";\nimport { generateDotesBrainJSFix, getTrainData, generateDotes } from \"./dataset\";\nimport './style.css';\n\nwindow.addEventListener(\"DOMContentLoaded\", () => {\n  const visualDataCount = 250;\n  const trainDataCount = 250;\n  let noise = 0.00;\n\n  const visualData = generateDotesBrainJSFix(visualDataCount, noise);\n  const trainData = getTrainData(generateDotes(trainDataCount, noise));\n\n  const config = {\n    binaryThresh: 0.5,\n    hiddenLayers: [4, 2], // array of ints for the sizes of the hidden layers in the network\n    activation: \"tanh\", // supported activation types: ['sigmoid', 'relu', 'leaky-relu', 'tanh'],\n    leakyReluAlpha: 0.01, // supported for activation type 'leaky-relu'\n  };\n\n  let net = new brain.NeuralNetwork(config);\n\n  const learningCanvas = new UI(visualData);\n\n  const matrix = new Array(100).fill(\"\").map((el) => {\n    return new Array(100).fill(0);\n  });\n\n  const xScale = d3\n    .scaleLinear()\n    .domain([0, 100 - 1])\n    .range([0, 1]);\n  const yScale = d3\n    .scaleLinear()\n    .domain([100 - 1, 0])\n    .range([0, 1]);\n\n  // neurons ui\n  let neuronsGraph = null;\n\n  // UI  \n  let error = 0;\n  let iterations = 0;\n\n  const iterationsEl = document.querySelector('#stats-iterations');\n  const errorEl = document.querySelector('#stats-error');\n\n  const updateStats = (iterations, error) => {\n    iterationsEl.textContent = iterations;\n    errorEl.textContent = error.toFixed(4);\n  }\n  \n  let frameCounter = 0;\n\n  const runDrawing = () => {\n    frameCounter += 1;\n    requestAnimationFrame(runDrawing);\n\n    if (frameCounter > 6) {\n      frameCounter = 0;\n      const heatMatrix = matrix.map((arr, indexY) => {\n        return arr.map((_, indexX) => {\n          const output = net.run({ x: xScale(indexX), y: yScale(indexY) });\n          return output.label;\n        });\n      });\n      learningCanvas.updateCanvas(heatMatrix);\n      updateStats(iterations, error);\n      neuronsGraph.updateNodes(net.toJSON());\n    }\n  };\n\n  const trainConfig = {\n    callback: (status) => {\n      error = status.error;\n      iterations = status.iterations;\n    },\n    learningRate: 0.003,\n    iterations: 50000,\n    errorThresh: 0.0005,\n    callbackPeriod: 10,\n  };\n\n  const stopNet = () => {\n    net.updateTrainingOptions({iterations: 1})\n  };\n\n  const startNetTrain = () => {\n    net.trainAsync(trainData, trainConfig);\n    neuronsGraph = new neuronsUI(net.toJSON());\n  };\n\n  const restartNet = () => {\n    stopNet();\n    net = new brain.NeuralNetwork(config);\n    setTimeout(startNetTrain, 0)\n  }\n\n  startNetTrain();\n\n  window.requestAnimationFrame(runDrawing);\n\n  //   \n  const regenerateAllData = () => {\n    visualData.splice(0, visualData.length);\n    trainData.splice(0, visualData.length);\n\n    visualData.push(...generateDotesBrainJSFix(visualDataCount, noise));\n    visualData.push(...getTrainData(generateDotes(trainDataCount, noise)));\n\n    restartNet();\n    learningCanvas.updateCircles(visualData);\n  };\n\n  // update activation buttons states\n  const activationButtons = document.querySelector('.activation-types').querySelectorAll('button');\n  const setActivationButtonsStates = () => {\n    const activeClassName = 'button--passive';\n    activationButtons.forEach((el) => {\n      const [_, activationFoo] = el.getAttribute('id').split('--');\n      el.classList.toggle(activeClassName, activationFoo !== config.activation);\n    });\n  }\n  setActivationButtonsStates();\n  \n  //   \n  const setActivationFoo = (id) => {\n    const [_, foo] = id.split('--');\n    config.activation = foo;\n    restartNet();\n    setActivationButtonsStates();\n  };\n\n  //    \n  const clickHandler = (event) => {\n    const { target } = event;\n    const buttonEl = target?.closest('button');\n    if (!target && buttonEl) return;\n  \n    const id = buttonEl?.getAttribute('id');\n    if (!id) return;\n    if (id.startsWith('regenerate')) regenerateAllData();\n    if (id.startsWith('activation')) setActivationFoo(id);\n  };\n  window.addEventListener('click', clickHandler);\n\n  //  learning rate\n  const learningRateInputEl = document.querySelector('#input-learningRate');\n  learningRateInputEl.value = trainConfig.learningRate;\n\n  const changeLearningRate = (event) => {\n    const { value } = event.target;\n    let parsedValue = trainConfig.learningRate;\n    try {\n      parsedValue = parseFloat(value) ?? parsedValue;\n    } catch (error) {};\n    trainConfig.learningRate = parsedValue;\n    restartNet();\n  }\n\n  learningRateInputEl.addEventListener('change', changeLearningRate);\n\n  //  noise\n  const noiseInputEl = document.querySelector('#input-noise');\n  noiseInputEl.value = noise;\n\n  const changeNoise = (event) => {\n    const { value } = event.target;\n    let parsedValue = noise;\n    try {\n      parsedValue = parseFloat(value) ?? parsedValue;\n    } catch (error) {};\n    noise = parsedValue;\n    regenerateAllData();\n  }\n\n  noiseInputEl.addEventListener('change', changeNoise);\n\n  //  \n  const layersInput = document.querySelector('#input-layers');\n  layersInput.value = config.hiddenLayers;\n\n  const changeLayers = (event) => {\n    const { value } = event.target;\n    try {\n      const newLayers = value.split(',').map((str) => parseInt(str));\n      if (!newLayers.length || newLayers.some((num) => isNaN(num))) {\n        throw new Error('   ')\n      }\n      config.hiddenLayers = newLayers;\n    } catch (error) {\n      window.alert(error)\n      layersInput.value = config.hiddenLayers;\n    }\n    \n    restartNet();\n  }\n\n  layersInput.addEventListener('change', changeLayers);\n});\n"],"names":["exports","gpu_js","activate$3","weight","Math","max","measure$3","delta","relu$2","Object","freeze","__proto__","activate","measure","activate$2","value","exp","measure$2","error","sigmoid$2","activate$1","tanh","measure$1","tanh$2","leakyRelu$1","index$1","relu","sigmoid","leakyRelu","CrossValidate","constructor","initClassifier","this","json","avgs","iterations","testTime","trainTime","stats","total","testSize","trainSize","sets","testPartition","trainOpts","trainSet","testSet","classifier","beginTrain","Date","now","trainingStats","train","beginTest","testStats","test","endTest","network","toJSON","shuffleArray","array","i","length","j","floor","random","temp","data","k","Error","size","binaryStats","truePos","trueNeg","falsePos","falseNeg","precision","recall","accuracy","results","isBinary","dclone","slice","splice","result","hasOwnProperty","assign","isBinaryStats","isBinaryPartitionResults","push","toNeuralNetwork","fromJSON","crossValidateJson","winningJSON","reduce","prev","cur","undefined","isBinaryResults","gpuInstance","setup","makeKernel","fn","settings","_gpuInstance","GPU","mode","createKernel","setPipeline","makeKernelMap","map","createKernelMap","release","possibleTexture","Texture","delete","clone","Float32Array","Array","isArray","matrix","x","cube","y","row","mse2d","errors","sum","constants","height","width","MeanSquaredError","calculate","output","immutable","addAbsolute","prevError","prevLayerErrors","abs","add","value1","value2","divide","mseSum","baseLayerDefaultSettings","depth","weights","deltas","praxis","praxisOpts","cleanupDeltas","BaseLayer","predictKernel","compareKernel","setupPraxis","_a","clear","fill","id","title","initPraxis","validate","Number","isNaN","name","setupKernels","isTraining","reuseKernels","layer","predict","inputs","compare","targetValues","learn","learningRate","toArray","static","toUntypedArray","type","from","zeros$1","zeros2D","zeros3D","z","Activation","inputLayer","super","Filter","filterCount","filterWidth","filterHeight","filters","filterDeltas","Internal","Modifier","Operator","inputLayer1","inputLayer2","compare1D","thread","compare2D$5","Target","target","InternalModel","EntryPoint","Model","oldWeights","run","lookup","toTable","hashes","hash","memo","toHash","toTable2D","objects2D","table","valueIndex","objects","object","p","toInputTable2D","tableIndex","dataIndex","input","toOutputTable2D","index","keys","arrayLength","toArrayShort","toArrays","toObject","toObjectPartial","offset","limit","dataShape","shape","lastData","buffer","possibleNumber","parseInt","addKeys","BasePraxis","layerTemplate","kernel","update$2","defaultSettings$1","ArthurDeviationBiases","arthurDeviationBiases","updateChange","update$1","changes","incomingWeights","inputDeltas","lastChange","inputDelta","incoming","momentum","defaultSettings","weightsLayer","incomingLayer","deltaLayer","ArthurDeviationWeights","kernelMap","arthurDeviationWeights","getMomentum","decay","previousMomentum","clipByValue","min","update","previousMomenta","clippedDelta","clipValue","decayRate","sqrt","smoothEps","regularizationStrength","defaults$8","MomentumRootMeanSquaredPropagation","momenta","functions","momentumRootMeanSquaredPropagation","MRmsProp","mRmsProp","traverseLayersFrom","cb","flattenLayers","layers","includes","checkSameSize","layer1","layer2","predict$8","inputWeights1","inputWeights2","Add","add$1","randomWeight","randomFloat","gaussRandom","returnV","vVal","u","v","r","c","log","random$1","randomInteger","randomN","mu","std","randos","randos2D","randos3D","defaults$7","Random","predict$7","weights1","weights2","compareFromX","inputWeights","compareFromY","Multiply","arguments","compareKernel1","compareKernel2","inputLayer1Deltas","inputLayer2Deltas","newDeltas1","newDeltas2","multiply$1","predict2D$4","predict3D$5","compare2D$4","compare3D$4","Sigmoid","sigmoid$1","getStride","defaults","stride","strideX","strideY","getPadding","padding","paddingX","paddingY","values","predict$6","biases","startFilterX","startInputX","endFilterX","inputWidth","startFilterY","startInputY","endFilterY","inputHeight","inputDepth","filterY","inputY","filterX","inputX","compareFilterDeltas$1","startDeltaX","ceil","endDeltaX","deltaWidth","startDeltaY","endDeltaY","deltaHeight","deltaY","deltaX","deltaZ","compareInputDeltas$1","compareBiases$1","biasDeltas","defaults$6","bias","Convolution","_b","_c","compareFilterDeltasKernel","compareInputDeltasKernel","compareBiasesKernel","deltasWidth","deltasHeight","deltasDepth","setDropout","dropout","trainingPredict","probability","predict$5","compare$3","dropouts","dropoutDefaults","Dropout","predictKernelMap","predict$4","predict3D$4","compareInputDeltas","compareInputDeltas3D","compareBiases","compareFilterDeltas","compareFilterDeltas3D","inputZ","FullyConnected","connectionCount","inputLayerDeltas","predict$3","Negative","negative","predict$2","inputLayerWeights1","inputLayerWeights2","compare$2","MultiplyElement","multiplyElement$1","ones$1","ones2D","Ones","ones","predict2D$3","predict3D$3","compare2D$3","compare3D$3","Tanh","tanh$1","Zeros","zeros","defaults$5","Input","reshapeInput","predict1D","kernelInput","predict2D$2","predict3D$2","compare2D$2","compare3D$2","LeakyRelu","setSwitchY","setSwitchX","predict$1","largestValue","compare$1","switchY","switchX","outputWidth","outputHeight","deltasY","deltasX","switchXValue","switchYValue","defaults$4","Pool","RecurrentInput","recurrentInput","recurrentInputDeltas","recurrentInputWeights","prototype","call","setDimensions","RecurrentZeros","recurrentZeros","predict2D$1","compare2D$1","predict3D$1","compare3D$1","Relu","relu$1","Regression","getMaxValue2D","maxInput","getMaxValue3D","getSum2D","getSum3D","getExponentials","getExponentials3D","predict2D","exponentials","exponentialsSum","predict3D","compare2D","indicator","compare3D","SoftMax","getExponentialsKernel","getMaxValueKernel","getSumKernel","maxValue","SVM","Transpose","layerTypes","arthurFeedForward","biasesLayer","sigmoidLayer","weightsPraxis","convolution","feedForward","fullyConnected","gru","updateGateWeights","updateGatePeepholes","updateGateBias","updateGate","resetGateWeights","resetGatePeepholes","resetGateBias","resetGate","cellWeights","cellPeepholes","cellBias","cell","lstmCell","inputGateWeights","inputGatePeepholes","inputGateBias","inputGate","forgetGateWeights","forgetGatePeepholes","forgetGateBias","forgetGate","outputGateWeights","outputGatePeepholes","outputGateBias","outputGate","memoryWeights","memoryPeepholes","memoryBias","memory","retainCell","writeCell","multiply","multiplyElement","outputGateConnector","pool","rnnCell","transition","regression","softMax","svm","transpose","layerNameTypes","layerFromJSON","jsonLayer","find","layerNameType","Layer","LookupTable","prop","commonjsGlobal","globalThis","window","g","self","basedir","module","browser","__assign","t","s","n","apply","defineProperty","thaw","Block","Thaw","items","options","_this","each","done","isStopped","tick","timeout","setTimeout","thawing","item","clearTimeout","thaws","delay","get","enumerable","configurable","stopAll","stop","makeReady","insert","addArray","concat","insertArray","before","after","count","next","path","require","base","commonjsRequire","defaults$3","binaryThresh","trainDefaults$3","errorThresh","logPeriod","callbackPeriod","errorCheckInterval","Infinity","FeedForward","_inputLayer","_hiddenLayers","_outputLayer","_model","meanSquaredError","inputLookup","inputLookupLength","outputLookup","outputLookupLength","_updateTrainingOptions","callback","validations","forEach","key","val","toString","_setLogMethod","console","opts","_validateTrainingOptions","warn","_connectOptionsLayers","inputLayerIndex","outputLayerIndex","outputLayer","_connectNewLayers","hiddenLayers","_connectHiddenLayers","previousLayer","hiddenLayer","initialize","initializeLayers","filter","l","lastLayer","typeSafeInput","runInput","preparedData","status","endTime","_prepTraining","continueTicking","calculateError","_calculateTrainingError","trainPatterns","_trainPatterns","_trainingTick","async","Promise","resolve","reject","thawedTrain","trainError","formattedData","formatData","verifyIsInitialized","transferData","prevSum","_trainPattern","resultArray","logErrorRate","_calculateDeltas","adjustWeights","tmp","inputDatumCheck","lookupTable","datumParam","outputDatumCheck","transferredData","transferInput","transferOutput","formattedDatum","jsonLayers","indexOf","inputLayer1Index","inputLayer2Index","sizes","getLayer","_d","toFunction","createTrainStream","arraysToFloat32Arrays","arrays","inputOutputArraysToFloat32Arrays","arrayToFloat32Arrays","inputOutputArrayToFloat32Arrays","arrayToFloat32Array","inputOutputObjectsToFloat32Arrays","inputTable","outputTable","inputLength","outputLength","objectToFloat32Arrays","inputOutputObjectToFloat32Arrays","objectToFloat32Array","mse$1","getTypedArrayFn","ArrayBuffer","NeuralNetwork","inputSize","outputSize","activation","leakyReluAlpha","beta1","beta2","epsilon","outputs","_formatInput","_formatOutput","setActivation","calculateDeltas","biasChangesLow","biasChangesHigh","changesLow","changesHigh","updateTrainingOptions","layerIndex","nodeIndex","prevSize","_setupAdam","_runInputSigmoid","_calculateDeltasSigmoid","_runInputRelu","_calculateDeltasRelu","_runInputLeakyRelu","_calculateDeltasLeakyRelu","_runInputTanh","_calculateDeltasTanh","isRunnable","formattedInput","validateInput","activeLayer","activeWeights","activeBiases","activeOutputs","node","activeSize","merged","validateTrainingOptions","setLogMethod","getTrainOptsJSON","logTrainingStatus","calculateTrainingError","trainPattern","trainingTick","prepTraining","validateData","activeOutput","activeError","activeDeltas","nextLayer","currentSize","currentOutputs","nextWeights","nextDeltas","currentErrors","currentDeltas","alpha","activeDelta","activeChanges","change","_adjustWeightsAdam","currentChangesLow","currentChangesHigh","currentWeights","currentBiases","currentBiasChangesLow","currentBiasChangesHigh","gradient","changeLow","changeHigh","momentumCorrection","pow","gradientCorrection","biasGradient","biasChangeLow","biasChangeHigh","biasMomentumCorrection","biasGradientCorrection","addFormat","misclasses","errorSum","actual","expected","misclass","jsonLayerWeights","layerWeights","jsonLayerBiases","layerBiases","needsVar","nodeHandle","weightsArray","subNodeIndex","join","checkKeys","layersAsMath","source","Function","weightedSumSigmoid","weightedSumRelu","weightedSumLeakyRelu","weightedSumTanh","calcErrorOutput","calcDeltasSigmoid","calcDeltasRelu","calcDeltasLeakyRelu","calcDeltasTanh","calcError","calcChanges","previousChange","previousOutput","addWeights","addBiases","mse","NeuralNetworkGPU","texturizeInputData","forwardPropagate","backwardPropagate","changesPropagate","biasesPropagate","getMSE","_addMSE","_divideMSESum","gpu","buildRunInput","buildCalculateDeltas","buildGetChanges","buildChangeBiases","buildGetMSE","getChanges","changeBiases","weightedSum","pipeline","calcDeltas","alias","utils","getMinifySafeName","addFunction","targets","previousOutputs","previousChanges","outputTextures","texturizeOutputData","set","RecurrentConnection","setLayer","Recurrent","_outputConnection","_layerSets","_hiddenLayerOutputIndices","_connectLayers","_connectLayersDeep","previousLayers","usedHiddenLayerOutputIndex","findInputLayer","layerSettings","previousHiddenLayerOutput","layerSet","initializeDeep","runInputs","lastLayerUsed","end","trainPatters","lastLayerSet","Matrix","rows","columns","getWeight","col","ix","setWeight","getDelta","setDelta","fromArray","deltasToArray","weightsToArray","iterate","rowIndex","column","columnIndex","callbacks","RandomMatrix","DataFormatter","maxThreshold","indexTable","characterTable","characters","specialIndexes","isSetup","buildCharactersFromIterable","buildTables","addInputOutput","addUnrecognized","tempCharactersTable","dataFormatterIndex","dataFormatterLength","iteratable","characterIndex","charactersLength","character","addCharacters","charactersTable","toIndexes","unrecognized","toIndexesInputOutput","toIndexesValue","isInput","split","toCharacters","indices","addSpecial","String","fromCharCode","dataFormatter","fromAllPrintable","string","Set","datum","validateAndCast","flatArray","flat","special","specialIndex","toFunctionString","JSON","stringify","formatDataIn","formatDataOut","format","product","left","right","addB","allOnes","cloneNegative","leftRows","leftColumns","rightColumns","leftRow","leftRowBase","rightRowBase","rightColumn","dot","leftColumn","leftIndex","rightIndex","multiplyB","leftRowRoot","rightRow","backPropagateValue","multiplyElementB","reluB","rowPluck","rowPluckIndex","rowBase","rowPluckB","sigmoidB","mwi","softmax","maxVal","tanhB","Equation","states","inputRow","forwardFn","backpropagationFn","subtract","inputValue","inputMatrixToRow","observe","runIndex","state","backpropagate","backpropagateIndex","predictTarget","predictTargetIndex","logProbabilities","probabilities","log2","maxI","maxv","maxix","sampleI","w","trainDefaults$1","defaults$1","inputRange","regc","clipval","maxPredictionLength","RNN","stepCache","runs","ratioClipped","model","seal","isInitialized","equations","allMatrices","equationConnections","outputConnector","initialLayerInputs","mapModel","createHiddenLayers","hiddenLayersModel","getHiddenLayer","d","hiddenSize","getEquation","equation","inputMatrix","previousResult","bind","createInputMatrix","createOutputMatrices","lastHiddenSize","last","bindEquation","equationConnection","hiddenMatrix","property","trainInput","log2ppl","inputIndex","inputMax","equationIndex","numClipped","numTot","matrixIndex","cache","checkRunnable","rawInput","isSampleI","temperature","previousIndex","outputMatrix","probs","nextIndex","jsonString","previousConnectionIndex","m","connection","matrixToString","stateIndex","matrixOrigin","toInner","fnString","fnParts","shift","fnBodyParts","pop","replace","fileName","fnName","toLowerCase","statesRaw","usedFunctionNames","innerFunctionsSwitch","src","GRU","getGRUHiddenLayer","getGRUEquation","updateGateInputMatrix","updateGateHiddenMatrix","resetGateInputMatrix","resetGateHiddenMatrix","cellWriteInputMatrix","cellWriteHiddenMatrix","cellWriteBias","ArrayLookupTable","ioValue","RNNTimeStep","trainDefaults","runArray","runArrayOfArray","runObject","runArrayOfObject","forecast","forecastArray","forecastArrayOfArray","forecastArrayOfObject","lastOutput","setSize","verifySize","trainArrayOfArray","inputArray","runArrayOfObjectOfArray","requireInputOutputOfOne","formatArray","formatArrayOfArray","formatArrayOfObject","formatArrayOfObjectMulti","formatArrayOfDatumOfArray","formatArrayOfDatumOfObject","formatArrayOfArrayOfArray","formatArrayOfArrayOfObject","formatArrayOfDatumOfArrayOfArray","formatArrayOfDatumOfArrayOfObject","errorCount","_e","_f","typedValue","typedInput","typedOutput","forceForecast","GRUTimeStep","LSTM","getHiddenLSTMLayer","getLSTMEquation","inputHidden","inputBias","forgetMatrix","forgetHidden","forgetBias","outputHidden","outputBias","cellActivationMatrix","cellActivationHidden","cellActivationBias","cellWrite","LSTMTimeStep","drawInput","pixelX","pixelY","radius","line","fontSize","fontClassName","svg","color","className","labels","drawNeuron","hidden","drawOutput","drawBackwardConnections","lineY","neuralNetworkToInnerSVG","previousSize","drawRecurrentConnections","recurrentLine","moveX","moveY","rnnToInnerSVG","wrapOuterSVG","svgBody","getRNNSizes","net","checkSizes","some","recurrent","utilities","range","start","toSVG","mergedOptions","getNeuralNetworkSizes","getRecurrentLayers","getFeedForwardLayers","likely","TypeError","maxProp","entries","factory","___CSS_LOADER_EXPORT___","cssWithMappingToString","list","content","needLayer","modules","media","dedupe","supports","alreadyImportedModules","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","sourceMapping","sourceURLs","sources","sourceRoot","e","o","f","a","code","global","reservedWords","strict","strictBind","ecma5AndLessKeywords","keywords","keywordRelationalOperator","nonASCIIidentifierStartChars","nonASCIIidentifierChars","nonASCIIidentifierStart","RegExp","nonASCIIidentifier","astralIdentifierStartCodes","astralIdentifierCodes","isInAstralSet","pos","isIdentifierStart","astral","isIdentifierChar","TokenType","label","conf","keyword","beforeExpr","startsExpr","isLoop","isAssign","prefix","postfix","binop","updateContext","prec","keywords$1","kw","types","num","regexp","eof","bracketL","bracketR","braceL","braceR","parenL","parenR","comma","semi","colon","question","arrow","template","invalidTemplate","ellipsis","backQuote","dollarBraceL","eq","incDec","logicalOR","logicalAND","bitwiseOR","bitwiseXOR","bitwiseAND","equality","relational","bitShift","plusMin","modulo","star","slash","starstar","_break","_case","_catch","_continue","_debugger","_default","_do","_else","_finally","_for","_function","_if","_return","_switch","_throw","_try","_var","_const","_while","_with","_new","_super","_class","_extends","_export","_import","_null","_true","_false","_in","_instanceof","_typeof","_void","_delete","lineBreak","lineBreakG","isNewLine","ecma2019String","nonASCIIwhitespace","skipWhiteSpace","ref","has","obj","propName","wordsRegexp","words","Position","SourceLocation","sourceFile","getLineInfo","lastIndex","match","exec","defaultOptions","ecmaVersion","sourceType","onInsertedSemicolon","onTrailingComma","allowReserved","allowReturnOutsideFunction","allowImportExportEverywhere","allowAwaitOutsideFunction","allowHashBang","locations","onToken","onComment","ranges","program","directSourceFile","preserveParens","getOptions","opt","tokens","token","block","text","startLoc","endLoc","comment","loc","pushComment","functionFlags","generator","Parser","startPos","reserved","reservedStrict","reservedWordsStrict","reservedWordsStrictBind","containsEsc","lineStart","lastIndexOf","curLine","curPosition","lastTokEndLoc","lastTokStartLoc","lastTokStart","lastTokEnd","context","initialContext","exprAllowed","inModule","strictDirective","potentialArrowAt","yieldPos","awaitPos","awaitIdentPos","undefinedExports","skipLineComment","scopeStack","enterScope","regexpState","prototypeAccessors","inFunction","inGenerator","inAsync","allowSuper","allowDirectSuper","treatFunctionsAsVar","parse","startNode","nextToken","parseTopLevel","currentVarScope","flags","currentThisScope","treatFunctionsAsVarInScope","currentScope","inNonArrowFunction","extend","plugins","len","cls","parseExpressionAt","parser","parseExpression","tokenizer","defineProperties","pp","literal","DestructuringErrors","shorthandAssign","trailingComma","parenthesizedAssign","parenthesizedBind","doubleProto","eat","isContextual","eatContextual","expectContextual","unexpected","canInsertSemicolon","insertSemicolon","semicolon","afterTrailingComma","tokType","notNext","expect","raise","checkPatternErrors","refDestructuringErrors","raiseRecoverable","parens","checkExpressionErrors","andThrow","checkYieldAwaitInDefaultParams","isSimpleAssignTarget","expr","expression","pp$1","body","stmt","parseStatement","adaptDirectivePrologue","finishNode","loopLabel","kind","switchLabel","isLet","skip","nextCh","charCodeAt","ident","isAsyncFunction","charAt","topLevel","starttype","parseBreakContinueStatement","parseDebuggerStatement","parseDoStatement","parseForStatement","parseFunctionStatement","parseClass","parseIfStatement","parseReturnStatement","parseSwitchStatement","parseThrowStatement","parseTryStatement","parseVarStatement","parseWhileStatement","parseWithStatement","parseBlock","parseEmptyStatement","parseExpressionStatement","parseImport","parseExport","maybeName","parseLabeledStatement","isBreak","parseIdent","lab","parseParenExpression","awaitAt","parseFor","init$1","parseVar","declarations","await","parseForIn","init","toAssignable","checkLVal","isAsync","declarationPosition","parseFunction","FUNC_STATEMENT","FUNC_HANGING_STATEMENT","consequent","alternate","argument","discriminant","cases","sawDefault","isCase","exitScope","empty","handler","clause","param","parseBindingAtom","simple","finalizer","i$1","label$1","statementStart","createNewLexicalScope","isForIn","parseMaybeAssign","isFor","decl","parseVarId","statement","allowExpressionBody","initFunction","oldYieldPos","oldAwaitPos","oldAwaitIdentPos","parseFunctionParams","parseFunctionBody","params","parseBindingList","isStatement","oldStrict","parseClassId","parseClassSuper","classBody","hadConstructor","element","parseClassElement","superClass","constructorAllowsSuper","this$1","method","tryContextual","noLineBreak","computed","startNodeAt","isGenerator","parsePropertyName","allowsDirectSuper","parseClassMethod","parseMethod","parseExprSubscripts","parseExprAtom","checkExport","fNode","declaration","cNode","shouldParseExportStatement","checkVariableExport","specifiers","parseExportSpecifiers","spec","checkUnreserved","local","checkLocalExport","checkPatternExport","pat","properties","list$1","elements","elt","decls","nodes","first","exported","parseImportSpecifiers","node$1","node$2","imported","statements","isDirectiveCandidate","directive","raw","pp$2","isBinding","toAssignableList","operator","exprList","parseSpread","parseRestBinding","parseObj","close","allowEmpty","allowTrailingComma","elts","rest","parseBindingListItem","elem","parseMaybeDefault","bindingType","checkClashes","declareName","pp$3","checkPropClash","propHash","shorthand","proto","other","noIn","expressions","afterLeftParse","parseYield","ownDestructuringErrors","oldParenAssign","oldTrailingComma","parseMaybeConditional","parseExprOps","parseMaybeUnary","parseExprOp","leftStartPos","leftStartLoc","minPrec","logical","op","buildBinary","sawUnary","parseAwait","parseSubscripts","noCalls","maybeAsyncArrow","parseSubscript","parseExprList","parseArrowExpression","callee","tag","quasi","parseTemplate","isTagged","readRegexp","canBeArrow","parseLiteral","regex","pattern","parseParenAndDistinguishExpression","parseNew","parseExprImport","parseDynamicImport","errorPos","bigint","spreadStart","innerStartPos","innerStartLoc","lastIsComma","parseParenItem","innerEndPos","innerEndLoc","parseParenArrowList","finishNodeAt","par","empty$1","meta","isImport","parseTemplateElement","cooked","tail","curElt","quasis","isAsyncProp","isPattern","parseProperty","parsePropertyValue","paramCount","isArrowFunction","isMethod","isExpression","useStrict","checkParams","nonSimple","isSimpleParamList","oldLabels","allowDuplicates","nameHash","liberal","delegate","pp$4","message","err","SyntaxError","raisedAt","pp$5","Scope","var","lexical","scope","redeclared","scope$2","scope$3","SCOPE_TOP","Node","pp$6","TokContext","isExpr","preserveSpace","override","types$1","b_stat","b_expr","b_tmpl","p_stat","p_expr","q_tmpl","tryReadTemplateToken","f_stat","f_expr","f_expr_gen","f_gen","pp$7","braceIsBlock","prevType","parent","curContext","inGeneratorContext","out","statementParens","allowed","ecma9BinaryProperties","ecma10BinaryProperties","unicodeBinaryProperties","unicodeGeneralCategoryValues","ecma9ScriptValues","ecma10ScriptValues","unicodeScriptValues","buildUnicodeData","binary","nonBinary","General_Category","Script","Script_Extensions","gc","sc","scx","pp$8","RegExpValidationState","validFlags","unicodeProperties","switchU","switchN","lastIntValue","lastStringValue","lastAssertionIsQuantifiable","numCapturingParens","maxBackReference","groupNames","backReferenceNames","codePointToString","ch","isSyntaxCharacter","isControlLetter","isUnicodePropertyNameCharacter","isUnicodePropertyValueCharacter","isDecimalDigit","isHexDigit","hexToInt","isOctalDigit","reset","unicode","at","current","lookahead","advance","validateRegExpFlags","flag","validateRegExpPattern","regexp_pattern","regexp_disjunction","regexp_alternative","regexp_eatQuantifier","regexp_eatTerm","regexp_eatAssertion","regexp_eatAtom","regexp_eatExtendedAtom","lookbehind","noError","regexp_eatQuantifierPrefix","regexp_eatBracedQuantifier","regexp_eatDecimalDigits","regexp_eatPatternCharacters","regexp_eatReverseSolidusAtomEscape","regexp_eatCharacterClass","regexp_eatUncapturingGroup","regexp_eatCapturingGroup","regexp_eatAtomEscape","regexp_groupSpecifier","regexp_eatInvalidBracedQuantifier","regexp_eatExtendedPatternCharacter","regexp_eatSyntaxCharacter","regexp_eatGroupName","regexp_eatRegExpIdentifierName","regexp_eatRegExpIdentifierStart","regexp_eatRegExpIdentifierPart","regexp_eatRegExpUnicodeEscapeSequence","isRegExpIdentifierStart","isRegExpIdentifierPart","regexp_eatBackReference","regexp_eatCharacterClassEscape","regexp_eatCharacterEscape","regexp_eatKGroupName","regexp_eatDecimalEscape","regexp_eatControlEscape","regexp_eatCControlLetter","regexp_eatZero","regexp_eatHexEscapeSequence","regexp_eatLegacyOctalEscapeSequence","regexp_eatIdentityEscape","regexp_eatControlLetter","regexp_eatFixedHexDigits","lead","leadSurrogateEnd","trail","regexp_eatHexDigits","isCharacterClassEscape","regexp_eatUnicodePropertyValueExpression","regexp_eatUnicodePropertyName","regexp_eatUnicodePropertyValue","regexp_validateUnicodePropertyNameAndValue","regexp_eatLoneUnicodePropertyNameOrValue","nameOrValue","regexp_validateUnicodePropertyNameOrValue","regexp_classRanges","regexp_eatClassAtom","regexp_eatClassEscape","ch$1","regexp_eatClassControlLetter","regexp_eatOctalDigit","n1","n2","Token","pp$9","codePointToString$1","ignoreEscapeSequenceInKeyword","getToken","Symbol","iterator","skipSpace","finishToken","readToken","fullCharCodeAtPos","readWord","getTokenFromCode","skipBlockComment","startSkip","loop","readToken_dot","readNumber","next2","readToken_slash","finishOp","readToken_mult_modulo_exp","tokentype","readToken_pipe_amp","readToken_caret","readToken_plus_min","readToken_lt_gt","readToken_eq_excl","readRadixNumber","readString","str","escaped","inClass","flagsStart","readWord1","readInt","radix","BigInt","startsWithDot","octal","str$1","val$1","parseFloat","readCodePoint","codePos","readHexChar","invalidStringToken","quote","chunkStart","readEscapedChar","INVALID_TEMPLATE_ESCAPE_ERROR","inTemplateElement","readTmplToken","readInvalidTemplateToken","position","inTemplate","octalStr","substr","word","escStart","esc","version","acorn","tokTypes","keywordTypes","tokContexts","glWiretap","gl","contextName","throwGetError","useTrackablePrimitives","readPixelsFile","recording","variables","onReadPixels","onUnrecognizedArgumentLookup","proxy","Proxy","addComment","checkThrowError","readPixelsVariableName","insertVariable","setIndent","getContextVariableName","indent","getError","variableName","contextVariables","extension","getExtension","tappedExtension","glExtensionWiretap","getEntity","targetVariableName","getVariableName","argumentAsStrings","writePPM","readPixels","argumentsToString","addVariable","drawBuffers","methodCallToString","trackablePrimitive","entityNames","imageCount","spaces","repeat","sourceVariable","imageVariable","args","getExtensionEntity","drawBuffersWEBGL","extensionEntityNames","arg","hasLines","hasSingleQuotes","hasDoubleQuotes","instantiationString","argumentToString","setupArguments","newArguments","mock1D","_fn","mock2D","mock2DGraphical","mock3D","apiDecorate","setOutput","setupOutput","graphical","setupGraphical","setConstants","setGraphical","setCanvas","canvas","setContext","destroy","validateSettings","getPixels","flip","pixels","halfHeight","bytesPerRow","Uint8ClampedArray","topOffset","bottomOffset","subarray","copyWithin","flipPixels","_imageData","b","_colorData","mockMethod","methods","createImageData","gpuMock","getArgumentNamesFromString","getFunctionBodyFromString","FunctionNode","CPUFunctionNode","astFunction","ast","retArr","isRootKernel","argumentNames","argumentName","astGeneric","astReturnStatement","returnType","getType","leadingReturnStatement","followingReturnStatement","isSubKernel","astLiteral","astErrorOutput","astBinaryExpression","astIdentifierExpression","idtNode","astForStatement","forNode","initArr","testArr","updateArr","bodyArr","isSafe","pushState","popState","iVariableName","getInternalVariableName","astWhileStatement","whileNode","astDoWhileStatement","doWhileNode","astAssignmentExpression","assNode","getDeclaration","assignable","astBlockStatement","bNode","isState","astVariableDeclaration","varDecNode","info","valueType","astIfStatement","ifNode","astSwitchStatement","astThisExpression","tNode","astMemberExpression","mNode","signature","xProperty","yProperty","zProperty","origin","getMemberExpressionDetails","markupName","constant","constantTypes","argumentSizes","dynamicArguments","astCallExpression","functionName","astMemberExpressionUnroll","calledFunctions","isAstMathFunction","onFunctionCall","targetTypes","lookupFunctionArgumentTypes","argumentType","triggerImplyArgumentType","astArrayExpression","arrNode","arrLen","astDebuggerStatement","cpuKernelString","cpuKernel","header","thisProperties","beforeReturn","useFunctionKeyword","constantsToString","colorFn","flattenFunctionToString","thisLookup","propertyName","findDependency","getPixelsFn","constantKeys","argumentTypes","flattenedImageTo3DArray","_imageTo3DArray","doNotDefine","flattenedImageTo2DArray","_mediaTo2DArray","_kernelString","Kernel","FunctionBuilder","CPUKernel","features","isIntegerDivisionAccurate","isSupported","combinedKernel","mergeSettings","_prependedString","translatedSources","initCanvas","document","createElement","OffscreenCanvas","initContext","getContext","initPlugins","argType","getVariableType","strictIntegers","getDimensions","checkOutput","translateSource","subKernels","functionBuilder","fromKernel","getPrototypes","getKernelResultType","build","built","setupConstants","kernelString","getKernelString","debug","buildSignature","kernelThreadString","_getLoopMaxString","injectedNative","_resultKernelHeader","_processConstants","_earlyThrows","_processArguments","_graphicalKernelBody","_resultKernelBody","loopMaxIterations","arrayArguments","checks","checkSubKernels","_mapSubKernels","subKernel","videoWidth","videoHeight","ctx","pixelsData","ImageData","drawImage","getImageData","imageArray","pixel","images","imagesArray","_mutableKernel1DResults","_mutableKernel2DResults","_mutableKernel3DResults","_resultMutableKernel1DLoop","_resultImmutableKernel1DLoop","_kernelOutput","_resultMutableKernel2DLoop","_resultImmutableKernel2DLoop","_resultMutableKernel3DLoop","_resultImmutableKernel3DLoop","_graphicalKernel2DLoop","_graphicalOutput","_getKernelResultTypeConstructorString","constructorString","removeCanvasReference","functionNodes","prependString","hasPrependString","extraNodeOptions","kernelArguments","kernelConstants","argumentBitRatios","constantBitRatios","nativeFunctions","optimizeFloatMemory","dynamicOutput","kernelConstant","needsArgumentType","assignArgumentType","lookupReturnType","requestingNode","lookupFunctionArgumentName","argumentIndex","lookupFunctionArgumentBitRatio","triggerImplyArgumentBitRatio","calleeFunctionName","assignArgumentBitRatio","trackFunctionCall","onNestedFunction","nestedFunction","nodeOptions","traceFunctionAST","addFunctionNode","rootNodeOptions","rootNode","subKernelNodes","functionMap","nativeFunctionNames","lookupChain","functionNodeDependencies","functionCalls","nativeFunction","functionNode","traceFunctionCalls","retList","nativeFunctionIndex","dependantNativeFunctionName","functionIndex","dependantFunctionName","getPrototypeString","getPrototypesFromFunctionNames","reverse","getStringFromFunctionNames","functionList","ret","nativeIndex","jsonFunctionNodes","jsonFunctionNode","getString","_isNativeFunction","_lookupNativeFunctionReturnType","_isFunction","_getFunction","getJsAST","Boolean","_getNativeFunction","bitRatio","fnNode","calleeNode","calleeBitRatio","getSubKernelResultType","subKernelNode","called","functionCallIndex","getReturnTypes","FunctionTracer","typeLookupMap","getFunctionNameFromString","identifiers","contexts","strictTypingChecking","fixIntegerDivisionAccuracy","literalTypes","_string","_internalVariableNames","isFunctionString","isIdentifierConstant","firstExpression","inParser","functionAST","inForLoopInit","inForLoopTest","dependencies","getDependencies","realType","isSafeDependencies","identifier","getLookupType","getConstantType","constantName","trim","literalKey","astKey","isInteger","inferArgumentTypesIfNeeded","getVariableSignature","rightType","lastType","isAstVariable","getCheckVariableType","findIdentifierOrigin","isAstMathVariable","lastReturn","findLastReturn","every","dependency","isNotSafe","details","returnRawValue","unshift","signatureString","astFunctionDeclaration","astFunctionExpression","astExpressionStatement","astEmptyStatement","astBreakStatement","astContinueStatement","astVariableDeclarator","astSequenceExpression","astUnaryExpression","astUpdateExpression","astLogicalExpression","astConditionalExpression","debugString","getAstString","splitLines","lineBefore","isChildFunction","esNode","eNode","brNode","crNode","iVarDecNode","sNode","sequenceResult","expressionResult","uNode","checkAndUpconvertBitwiseUnary","logNode","variableSignature","astToFind","stack","atNode","separator","runningContexts","functionContexts","returnStatements","trackedIdentifiers","newFunctionContext","scan","hasState","currentFunctionContext","currentContext","newContext","useFunctionContext","functionContext","getIdentifiers","previousRunningContext","suggestedType","normalizeDeclarations","testIdentifiers","toStringWithoutUtils","getRenderString","targetName","readBackValue","getToArrayString","kernelResult","textureName","framebufferName","isDeclaration","findKernelValue","kernelValues","uploadedValues","HTMLImageElement","kernelValue","uploadValue","variableIndex","variable","glKernelString","originKernel","setupContextString","destroyContextString","postResult","subKernelsResultVariableSetup","subKernelsResultIndex","tactic","checkContext","kernelArgument","imageIndex","texture","flattenTo","flatten2dArrayTo","flatten3dArrayTo","flatten4dArrayTo","renderOutput","renderTexture","formatValues","varName","renderKernels","getStringValueHandler","framebuffer","mappedTextures","subKernelResult","subKernelTextureName","rendered","getGetPixelsString","constantsUpload","GLTextureArray2Float","GLTextureArray2Float2D","GLTextureArray2Float3D","GLTextureArray3Float","GLTextureArray3Float2D","GLTextureArray3Float3D","GLTextureArray4Float","GLTextureArray4Float2D","GLTextureArray4Float3D","GLTextureFloat","GLTextureFloat2D","GLTextureFloat3D","GLTextureMemoryOptimized","GLTextureMemoryOptimized2D","GLTextureMemoryOptimized3D","GLTextureUnsigned","GLTextureUnsigned2D","GLTextureUnsigned3D","GLTextureGraphical","typeMap","int","float","vec2","vec3","vec4","GLKernel","testContext","testCanvas","v1","v2","round","isDrawBuffers","getIsDrawBuffers","isFloatRead","getIsFloatRead","getIsIntegerDivisionAccurate","isSpeedTacticSupported","getIsSpeedTacticSupported","isTextureFloat","getIsTextureFloat","channelCount","getChannelCount","maxTextureSize","getMaxTextureSize","lowIntPrecision","getShaderPrecisionFormat","FRAGMENT_SHADER","LOW_INT","lowFloatPrecision","LOW_FLOAT","mediumIntPrecision","MEDIUM_INT","mediumFloatPrecision","MEDIUM_FLOAT","highIntPrecision","HIGH_INT","highFloatPrecision","HIGH_FLOAT","getVariablePrecisionString","setFixIntegerDivisionAccuracy","fix","setPrecision","setFloatTextures","warnDeprecated","floatTextures","isStartingVariableName","isVariableChar","char","nextChar","lastKernel","texSize","threadDim","h","RGBA","FLOAT","bytes","Uint8Array","UNSIGNED_BYTE","splitArray","transferValues","TextureConstructor","renderRawOutput","translatedSource","compiledFragmentShader","compiledVertexShader","switchingKernels","_textureSwitched","_mappedTextureSwitched","checkTextureSize","pickRenderStrategy","readPackedPixelsToUint8Array","readPackedPixelsToFloat32Array","renderKernelsToTextures","requestFallback","renderKernelsToArrays","renderValues","erect3DPackedFloat","erect2DPackedFloat","erectPackedFloat","readFloatPixelsToFloat32Array","erectMemoryOptimized3DFloat","erectMemoryOptimized2DFloat","erectMemoryOptimizedFloat","erect3DArray2","erect2DArray2","erectArray2","erect3DArray3","erect2DArray3","erectArray3","erect3DArray4","erect2DArray4","erectArray4","erect3DFloat","erect2DFloat","erectFloat","getMainResultTexture","getMainResultNumberTexture","getMainResultArray2Texture","getMainResultArray3Texture","getMainResultArray4Texture","getMainResultKernelNumberTexture","getMainResultSubKernelNumberTexture","getMainResultKernelArray2Texture","getMainResultSubKernelArray2Texture","getMainResultKernelArray3Texture","getMainResultSubKernelArray3Texture","getMainResultKernelArray4Texture","getMainResultSubKernelArray4Texture","getMainResultGraphical","getMainResultMemoryOptimizedFloats","getMainResultPackedPixels","getMainResultString","linesToString","getFloatTacticDeclaration","getIntTacticDeclaration","getSampler2DTacticDeclaration","getSampler2DArrayTacticDeclaration","resetSwitchingKernels","existingValue","newOutput","toKernelOutput","newThreadDim","newTexSize","getKernelTextureSize","oldTexSize","oldPrecision","newPrecision","switchKernels","needed","bindFramebuffer","FRAMEBUFFER","updateMaxTexSize","viewport","maxTexSize","_setupOutputTexture","_setupSubOutputTextures","reason","textureSize","isInt","low","medium","high","requiredSize","rangeMax","updateTextureArgumentRefs","prevArg","_refs","mappedTexture","onActivate","previousKernel","GLTexture","textureType","framebufferTexture2D","COLOR_ATTACHMENT0","TEXTURE_2D","_deleted","selectTexture","activeTexture","TEXTURE15","bindTexture","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","beforeMutate","newTexture","cloneTexture","createTexture","texImage2D","internalFormat","textureFormat","copyTexSubImage2D","clearColor","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","deleteTexture","_framebuffer","getRawValueFramebuffer","WebGLKernel","testExtensions","HeadlessGLKernel","setupFeatureChecks","preserveDrawingBuffer","STACKGL_resize_drawingbuffer","STACKGL_destroy_context","OES_texture_float","OES_texture_float_linear","OES_element_index_uint","WEBGL_draw_buffers","WEBGL_color_buffer_float","getFeatures","getParameter","RENDERER","MAX_DRAW_BUFFERS_WEBGL","MAX_TEXTURE_SIZE","initExtensions","extensions","fallbackRequested","resize","destroyExtensions","KernelValue","onRequestContextHandle","onUpdateValueMismatch","contextHandle","forceUploadEachRun","getSource","updateValue","useLegacyEncoder","onRequestFallback","forceUploadKernelConstants","addNativeFunction","functionToIGPUFunction","argumentTypesObject","splitArgumentTypes","nativeFunctionArguments","nativeFunctionReturnType","Int32Array","getBitRatio","needsConstantTypes","setOptimizeFloatMemory","setDebug","setLoopMaxIterations","setConstantTypes","setFunctions","setNativeFunctions","setInjectedNative","setOutputToTexture","setImmutable","setStrictIntegers","setDynamicOutput","setHardcodeConstants","setDynamicArguments","setUseLegacyEncoder","setWarnVarUsage","getCanvas","getWebGl","setArgumentTypes","setTactic","addSubKernel","removeCanvasReferences","Int8Array","Uint16Array","Int16Array","argumentsTypes","pluginNames","plugin","Constructor","getSignature","getArgumentTypes","sourceString","fragmentShader","E","operatorMap","WebGLFunctionNode","consequentType","alternateType","sanitizeName","castLiteralToFloat","castValueToInteger","castLiteralToInteger","checkAndUpconvertOperator","castValueToFloat","leftType","literalResult","bitwiseResult","checkAndUpconvertBitwiseOperators","foundOperator","initString","initNeedsSemiColon","declarationSets","declarationSet","actualType","markupType","declarationResult","fallingThrough","defaultResult","movingDefaultToEnd","pastFirstIf","cleanName","memberExpressionPropertyMarkup","memberExpressionXYZ","isMathFunction","functionMatch","functionReplace","targetType","subNode","WebGLKernelValueBoolean","WebGLKernelValueFloat","WebGLKernelValueInteger","WebGLKernelValueHTMLImage","WebGLKernelValueDynamicHTMLImage","WebGLKernelValueHTMLVideo","WebGLKernelValueDynamicHTMLVideo","WebGLKernelValueSingleInput","WebGLKernelValueDynamicSingleInput","WebGLKernelValueUnsignedInput","WebGLKernelValueDynamicUnsignedInput","WebGLKernelValueMemoryOptimizedNumberTexture","WebGLKernelValueDynamicMemoryOptimizedNumberTexture","WebGLKernelValueNumberTexture","WebGLKernelValueDynamicNumberTexture","WebGLKernelValueSingleArray","WebGLKernelValueDynamicSingleArray","WebGLKernelValueSingleArray1DI","WebGLKernelValueDynamicSingleArray1DI","WebGLKernelValueSingleArray2DI","WebGLKernelValueDynamicSingleArray2DI","WebGLKernelValueSingleArray3DI","WebGLKernelValueDynamicSingleArray3DI","WebGLKernelValueArray2","WebGLKernelValueArray3","WebGLKernelValueArray4","WebGLKernelValueUnsignedArray","WebGLKernelValueDynamicUnsignedArray","kernelValueMaps","unsigned","dynamic","single","lookupKernelValueType","WebGLKernelValue","WebGLKernelArray","checkSize","requestTexture","setupTexture","defineTexture","onRequestTexture","onRequestIndex","dimensionsId","sizeId","setUniform2fv","setUniform3fv","setUniform4fv","setUniform1i","dimensions","setUniform3iv","setUniform2iv","inputTexture","getMemoryOptimizedFloatTextureSize","uploadArrayLength","setShape","getMemoryOptimizedPackedTextureSize","Type","getTransferArrayType","preUploadValue","setUniform1f","inputImage","initialValueConstructor","pixelStorei","UNPACK_FLIP_Y_WEBGL","Uint32Array","Float64Array","sameError","valueDimensions","TranserArrayType","mrud","vertexShader","canvases","maxTexSizes","isContextMatch","WebGLRenderingContext","endianness","systemEndianness","argumentTextureCount","constantTextureCount","fragShader","vertShader","drawBuffersMap","onRequestSwitchKernel","textureCache","programUniformLocationCache","uniform1fCache","uniform1iCache","uniform2fCache","uniform2fvCache","uniform2ivCache","uniform3fvCache","uniform3ivCache","uniform4fvCache","uniform4ivCache","antialias","pluginsToUse","pluginName","canvasIndex","needsArgumentTypes","textureIndexes","TEXTURE0","failureResult","enable","SCISSOR_TEST","getVertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","getFragmentShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","createProgram","attachShader","linkProgram","createFramebuffer","rawValueFramebuffers","vertices","texCoords","texCoordOffset","byteLength","bindBuffer","ARRAY_BUFFER","createBuffer","bufferData","STATIC_DRAW","bufferSubData","aPosLoc","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","aTexCoordLoc","useProgram","setupReturnTypes","scissor","setUniform2f","onBeforeRun","bindRenderbuffer","RENDERBUFFER","_replaceOutputTexture","drawArrays","TRIANGLE_STRIP","_replaceSubOutputTextures","getInternalFormat","getTextureFormat","getUniformLocation","uniform1f","uniform1i","uniform2f","uniform2fv","uniform2iv","uniform3fv","uniform3iv","uniform4fv","setUniform4iv","uniform4iv","_getFragShaderArtifactMap","HEADER","_getHeaderString","LOOP_MAX","PLUGINS","_getPluginsString","CONSTANTS","_getConstantsString","DECODE32_ENDIANNESS","_getDecode32EndiannessString","ENCODE32_ENDIANNESS","_getEncode32EndiannessString","DIVIDE_WITH_INTEGER_CHECK","_getDivideWithIntegerCheckString","INJECTED_NATIVE","_getInjectedNative","MAIN_CONSTANTS","_getMainConstantsString","MAIN_ARGUMENTS","_getMainArgumentsString","KERNEL","MAIN_RESULT","FLOAT_TACTIC_DECLARATION","INT_TACTIC_DECLARATION","SAMPLER_2D_TACTIC_DECLARATION","SAMPLER_2D_ARRAY_TACTIC_DECLARATION","_getVertShaderArtifactMap","_getTextureCoordinate","getKernelResultDeclaration","getMainResultKernelPackedPixels","getMainResultSubKernelPackedPixels","channels","channel","getMainResultKernelMemoryOptimizedFloats","getMainResultSubKernelMemoryOptimizedFloats","replaceArtifacts","artifact","deleteBuffer","deleteFramebuffer","deleteShader","deleteProgram","textureCacheIndex","idx","kernels","loseContext","WebGL2FunctionNode","WebGL2KernelValueBoolean","WebGL2KernelValueFloat","WebGL2KernelValueInteger","WebGL2KernelValueHTMLImage","WebGL2KernelValueDynamicHTMLImage","WebGL2KernelValueHTMLImageArray","WebGL2KernelValueDynamicHTMLImageArray","WebGL2KernelValueHTMLVideo","WebGL2KernelValueDynamicHTMLVideo","WebGL2KernelValueSingleInput","WebGL2KernelValueDynamicSingleInput","WebGL2KernelValueUnsignedInput","WebGL2KernelValueDynamicUnsignedInput","WebGL2KernelValueMemoryOptimizedNumberTexture","WebGL2KernelValueDynamicMemoryOptimizedNumberTexture","WebGL2KernelValueNumberTexture","WebGL2KernelValueDynamicNumberTexture","WebGL2KernelValueSingleArray","WebGL2KernelValueDynamicSingleArray","WebGL2KernelValueSingleArray1DI","WebGL2KernelValueDynamicSingleArray1DI","WebGL2KernelValueSingleArray2DI","WebGL2KernelValueDynamicSingleArray2DI","WebGL2KernelValueSingleArray3DI","WebGL2KernelValueDynamicSingleArray3DI","WebGL2KernelValueArray2","WebGL2KernelValueArray3","WebGL2KernelValueArray4","WebGL2KernelValueUnsignedArray","WebGL2KernelValueDynamicUnsignedArray","variablePrecision","TEXTURE_2D_ARRAY","texImage3D","xOffset","yOffset","imageDepth","texSubImage3D","RGBA32F","WebGL2Kernel","EXT_color_buffer_float","WebGL2RenderingContext","MAX_DRAW_BUFFERS","R32F","RED","RG32F","RG","REPEAT","texStorage2D","lib","bindTo","kernelRunShortcut","kernelOrder","kernelTypes","internalKernels","upgradeDeprecatedCreateKernelSettings","upgradedSettings","floatOutput","outputToTexture","outputImmutable","isGPUSupported","isKernelMapSupported","isOffscreenCanvasSupported","Worker","importScripts","isWebGLSupported","isWebGL2Supported","isHeadlessGLSupported","isCanvasSupported","HTMLCanvasElement","isGPUHTMLImageArraySupported","isSinglePrecisionSupported","chooseKernel","ExternalKernel","isFunction","devKernel","switchableKernels","settingsCopy","fallbackKernel","kernelRun","dynamicArgument","replaceKernel","mergedSettings","reasons","_kernel","existingKernel","newKernel","argument2Type","combineKernels","injectNative","firstKernel","destroyContext","webGLKernelValueMaps","webGL2KernelValueMaps","mathRandom","bindKernelToShortcut","shortcut","allPropertiesOf","substring","__defineGetter__","__defineSetter__","accept","replacementKernel","functionReturnType","FUNCTION_NAME","STRIP_COMMENTS","ARGUMENT_NAMES","_systemEndianness","getSystemEndianness","funcObj","funcStr","fnStr","isActiveClone","nodeName","ImageBitmap","texelCount","closestSquareDimensions","roundTo","pad","dim","part","byteOffset","lines","props","getOwnPropertyNames","getPrototypeOf","oldName","newName","yResults","xStart","xEnd","zResults","xResults","xResultsMax","XResultsMax","flattened","functionDependencies","flatten","foundSource","flattenedFunctionDependencies","functionDependency","normalizedDeclarations","declarationIndex","propertyIndex","subPropertyIndex","subProperty","elementIndex","splitHTMLImageToRGB","image","rKernel","gKernel","bKernel","aKernel","splitRGBAToCanvases","rgba","visualKernelR","visualKernelG","visualKernelB","visualKernelA","dollarSign","doubleUnderscore","singleUnderscore","stylesInDOM","getIndexByIdentifier","modulesToDom","idCountMap","indexByIdentifier","css","sourceMap","references","updater","addElementStyle","byIndex","api","domAPI","newObj","remove","lastIdentifiers","newList","newLastIdentifiers","_i","_index","style","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","getTarget","appendChild","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","nc","step","none","selector","querySelectorAll","matches","childMatcher","childFirst","firstElementChild","children","EnterNode","ownerDocument","namespaceURI","_next","_parent","__data__","bindIndex","group","enter","exit","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","Map","keyValues","arraylike","ascending","NaN","child","insertBefore","xhtml","xlink","xml","xmlns","namespaces","space","attrRemove","removeAttribute","attrRemoveNS","fullname","removeAttributeNS","attrConstant","attrConstantNS","setAttributeNS","attrFunction","attrFunctionNS","defaultView","styleRemove","removeProperty","styleConstant","priority","setProperty","styleFunction","styleValue","getPropertyValue","getComputedStyle","propertyRemove","propertyConstant","propertyFunction","classArray","classList","ClassList","_node","_names","getAttribute","classedAdd","names","classedRemove","classedTrue","classedFalse","classedFunction","textRemove","textContent","textConstant","textFunction","htmlRemove","innerHTML","htmlConstant","htmlFunction","nextSibling","lower","previousSibling","creatorInherit","uri","documentElement","createElementNS","creatorFixed","namespace","constantNull","selection_cloneShallow","cloneNode","selection_cloneDeep","parseTypenames","typenames","onRemove","typename","on","__on","removeEventListener","listener","onAdd","event","contextListener","addEventListener","dispatchEvent","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","contains","root","Selection","groups","parents","_groups","_parents","selection","select","subgroups","subnode","subgroup","selectAll","arrayAll","selectorAll","selectChild","childFind","selectChildren","childrenFilter","matcher","enterGroup","updateGroup","exitGroup","previous","i0","i1","_enter","_exit","sparse","onenter","onupdate","onexit","append","merge","order","groups0","groups1","m0","m1","merges","group0","group1","compareDocumentPosition","sort","compareNode","sortgroups","sortgroup","attr","getAttributeNS","classed","html","create","creator","deep","dispatch","noop","_","Dispatch","T","copy","that","taskHead","taskTail","interval","clockLast","clockNow","clockSkew","clock","performance","setFrame","requestAnimationFrame","clearNow","Timer","_call","_time","timer","time","restart","wake","timerFlush","t0","t2","t1","sleep","nap","poke","clearInterval","setInterval","elapsed","emptyOn","emptyTween","timing","schedules","__transition","tween","duration","ease","schedule","svgNode","degrees","PI","translateX","translateY","rotate","skewX","scaleX","scaleY","atan2","atan","interpolateTransform","pxComma","pxParen","degParen","q","xa","ya","xb","yb","number","translate","scale","interpolateTransformCss","DOMMatrix","WebKitCSSMatrix","isIdentity","decompose","interpolateTransformSvg","transform","baseVal","consolidate","tweenRemove","tween0","tween1","tweenFunction","tweenValue","_id","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","rgbn","Rgb","hsla","rgbConvert","opacity","rgb_formatHex","hex","rgb_formatRgb","clampa","clampi","Hsl","hslConvert","clamph","clampt","hsl2rgb","m2","basis","v0","v3","t3","displayable","formatHex8","formatHsl","clamp","nogamma","linear","rgbGamma","exponential","gamma","rgbSpline","spline","colors","reA","reB","am","bm","bs","bi","one","zero","interpolate","string00","interpolate0","string1","string0","string10","attrInterpolate","attrInterpolateNS","attrTweenNS","_value","attrTween","delayFunction","delayConstant","durationFunction","durationConstant","easeConstant","onFunction","on0","on1","sit","styleInterpolate","styleTween","textInterpolate","textTween","Transition","_name","newId","selection_prototype","inherit","id0","id1","styleNull","listener0","styleMaybeRemove","removeFunction","easeVarying","cancel","interrupt","defaultTiming","active","e10","e5","e2","tickIncrement","power","LN10","descending","bisector","compare1","compare2","lo","hi","mid","center","ascendingBisect","bisectRight","genericArray","nb","na","setTime","date","isView","DataView","valueOf","unit","normalize","bimap","domain","d0","d1","r0","r1","polymap","bisect","unknown","continuous","untransform","piecewise","rescale","invert","rangeRound","transformer","initRange","prefixExponent","re","formatSpecifier","specifier","FormatSpecifier","align","sign","symbol","formatDecimalParts","toExponential","coefficient","exponent","toFixed","toLocaleString","toPrecision","formatRounded","toUpperCase","formatPrefix","prefixes","linearish","ticks","isFinite","tickFormat","step0","step1","tickStep","precisionPrefix","precisionRound","precisionFixed","nice","prestep","maxIter","quantize","x0","x1","invertExtent","thresholds","locale","grouping","thousands","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","percent","minus","nan","newFormat","formatTypes","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","formatTrim","pi","tau","tauEpsilon","Path","_x0","_y0","_x1","_y1","moveTo","closePath","lineTo","quadraticCurveTo","y1","bezierCurveTo","x2","y2","arcTo","y0","x21","y21","x01","y01","l01_2","x20","y20","l21_2","l20_2","l21","l01","acos","t01","t21","arc","a0","a1","ccw","dx","cos","dy","sin","cw","da","rect","Bump","_context","_x","areaStart","_line","areaEnd","_point","lineEnd","point","bumpX","linkSource","linkTarget","applyX","applyY","location","invertX","invertY","rescaleX","rescaleY","neuronsUI","wrapper","bounds","yAxis","xAxis","nodesWrapper","nodesData","xDomain","yDomain","colorScale","yScale","xScale","maxHeight","linksData","linkGen","linksWrapper","linkScale","linkColorScale","initData","updateLinksData","curve","link","argv","acc","updateData","layerSize","currentNodesCount","currNodes","nextNodes","sourceIndex","node2","yPositions","updateLinks","updateNodes","UI","circles","pointColors","yAxisGenerator","xAxisGenertor","boundedWidth","boundedHeight","tmpScale","updateCircles","reduceMatrix","avg","factor","updateCanvas","putImageData","dist","randUniform","generateDotes","numSamples","noise","points","getCircleLabel","angle","brainJsScale","generateDotesBrainJSFix","getTrainData","visualData","trainData","config","learningCanvas","el","neuronsGraph","iterationsEl","errorEl","frameCounter","runDrawing","heatMatrix","arr","indexY","indexX","updateStats","trainConfig","startNetTrain","trainAsync","restartNet","regenerateAllData","activationButtons","setActivationButtonsStates","activationFoo","toggle","buttonEl","closest","startsWith","foo","setActivationFoo","learningRateInputEl","parsedValue","noiseInputEl","layersInput","newLayers","alert"],"sourceRoot":""}